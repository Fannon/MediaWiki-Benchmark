!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=K.type(e);return"function"===n||K.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e}function r(e,t,n){if(K.isFunction(t))return K.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return K.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(se.test(t))return K.filter(t,e,n);t=K.filter(t,e)}return K.grep(e,function(e){return $.call(t,e)>=0!==n})}function o(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function i(e){var t=he[e]={};return K.each(e.match(pe)||[],function(e,n){t[n]=!0}),t}function a(){J.removeEventListener("DOMContentLoaded",a,!1),e.removeEventListener("load",a,!1),K.ready()}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=K.expando+s.uid++}function l(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(be,"-$1").toLowerCase(),n=e.getAttribute(r),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:xe.test(n)?K.parseJSON(n):n}catch(o){}ye.set(e,t,n)}else n=void 0;return n}function u(){return!0}function c(){return!1}function f(){try{return J.activeElement}catch(e){}}function d(e,t){return K.nodeName(e,"table")&&K.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function p(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function h(e){var t=Fe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function g(e,t){for(var n=0,r=e.length;r>n;n++)me.set(e[n],"globalEval",!t||me.get(t[n],"globalEval"))}function v(e,t){var n,r,o,i,a,s,l,u;if(1===t.nodeType){if(me.hasData(e)&&(i=me.access(e),a=me.set(t,i),u=i.events)){delete a.handle,a.events={};for(o in u)for(n=0,r=u[o].length;r>n;n++)K.event.add(t,o,u[o][n])}ye.hasData(e)&&(s=ye.access(e),l=K.extend({},s),ye.set(t,l))}}function m(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&K.nodeName(e,t)?K.merge([e],n):n}function y(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ae.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function x(t,n){var r,o=K(n.createElement(t)).appendTo(n.body),i=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(o[0]))?r.display:K.css(o[0],"display");return o.detach(),i}function b(e){var t=J,n=Ie[e];return n||(n=x(e,t),"none"!==n&&n||(Re=(Re||K("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Re[0].contentDocument,t.write(),t.close(),n=x(e,t),Re.detach()),Ie[e]=n),n}function w(e,t,n){var r,o,i,a,s=e.style;return n=n||Ve(e),n&&(a=n.getPropertyValue(t)||n[t]),n&&(""!==a||K.contains(e.ownerDocument,e)||(a=K.style(e,t)),Ue.test(a)&&Be.test(t)&&(r=s.width,o=s.minWidth,i=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=o,s.maxWidth=i)),void 0!==a?a+"":a}function _(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function k(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),r=t,o=Ze.length;o--;)if(t=Ze[o]+n,t in e)return t;return r}function A(e,t,n){var r=Ye.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function M(e,t,n,r,o){for(var i=n===(r?"border":"content")?4:"width"===t?1:0,a=0;4>i;i+=2)"margin"===n&&(a+=K.css(e,n+_e[i],!0,o)),r?("content"===n&&(a-=K.css(e,"padding"+_e[i],!0,o)),"margin"!==n&&(a-=K.css(e,"border"+_e[i]+"Width",!0,o))):(a+=K.css(e,"padding"+_e[i],!0,o),"padding"!==n&&(a+=K.css(e,"border"+_e[i]+"Width",!0,o)));return a}function z(e,t,n){var r=!0,o="width"===t?e.offsetWidth:e.offsetHeight,i=Ve(e),a="border-box"===K.css(e,"boxSizing",!1,i);if(0>=o||null==o){if(o=w(e,t,i),(0>o||null==o)&&(o=e.style[t]),Ue.test(o))return o;r=a&&(G.boxSizingReliable()||o===e.style[t]),o=parseFloat(o)||0}return o+M(e,t,n||(a?"border":"content"),r,i)+"px"}function j(e,t){for(var n,r,o,i=[],a=0,s=e.length;s>a;a++)r=e[a],r.style&&(i[a]=me.get(r,"olddisplay"),n=r.style.display,t?(i[a]||"none"!==n||(r.style.display=""),""===r.style.display&&ke(r)&&(i[a]=me.access(r,"olddisplay",b(r.nodeName)))):(o=ke(r),"none"===n&&o||me.set(r,"olddisplay",o?n:K.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?i[a]||"":"none"));return e}function E(e,t,n,r,o){return new E.prototype.init(e,t,n,r,o)}function S(){return setTimeout(function(){Ge=void 0}),Ge=K.now()}function T(e,t){var n,r=0,o={height:e};for(t=t?1:0;4>r;r+=2-t)n=_e[r],o["margin"+n]=o["padding"+n]=e;return t&&(o.opacity=o.width=e),o}function N(e,t,n){for(var r,o=(nt[t]||[]).concat(nt["*"]),i=0,a=o.length;a>i;i++)if(r=o[i].call(n,t,e))return r}function C(e,t,n){var r,o,i,a,s,l,u,c,f=this,d={},p=e.style,h=e.nodeType&&ke(e),g=me.get(e,"fxshow");n.queue||(s=K._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,K.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],u=K.css(e,"display"),c="none"===u?me.get(e,"olddisplay")||b(e.nodeName):u,"inline"===c&&"none"===K.css(e,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",f.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(r in t)if(o=t[r],Qe.exec(o)){if(delete t[r],i=i||"toggle"===o,o===(h?"hide":"show")){if("show"!==o||!g||void 0===g[r])continue;h=!0}d[r]=g&&g[r]||K.style(e,r)}else u=void 0;if(K.isEmptyObject(d))"inline"===("none"===u?b(e.nodeName):u)&&(p.display=u);else{g?"hidden"in g&&(h=g.hidden):g=me.access(e,"fxshow",{}),i&&(g.hidden=!h),h?K(e).show():f.done(function(){K(e).hide()}),f.done(function(){var t;me.remove(e,"fxshow");for(t in d)K.style(e,t,d[t])});for(r in d)a=N(h?g[r]:0,r,f),r in g||(g[r]=a.start,h&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function O(e,t){var n,r,o,i,a;for(n in e)if(r=K.camelCase(n),o=t[r],i=e[n],K.isArray(i)&&(o=i[1],i=e[n]=i[0]),n!==r&&(e[r]=i,delete e[n]),a=K.cssHooks[r],a&&"expand"in a){i=a.expand(i),delete e[r];for(n in i)n in e||(e[n]=i[n],t[n]=o)}else t[r]=o}function q(e,t,n){var r,o,i=0,a=tt.length,s=K.Deferred().always(function(){delete l.elem}),l=function(){if(o)return!1;for(var t=Ge||S(),n=Math.max(0,u.startTime+u.duration-t),r=n/u.duration||0,i=1-r,a=0,l=u.tweens.length;l>a;a++)u.tweens[a].run(i);return s.notifyWith(e,[u,i,n]),1>i&&l?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:K.extend({},t),opts:K.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Ge||S(),duration:n.duration,tweens:[],createTween:function(t,n){var r=K.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(o)return this;for(o=!0;r>n;n++)u.tweens[n].run(1);return t?s.resolveWith(e,[u,t]):s.rejectWith(e,[u,t]),this}}),c=u.props;for(O(c,u.opts.specialEasing);a>i;i++)if(r=tt[i].call(u,e,c,u.opts))return r;return K.map(c,N,u),K.isFunction(u.opts.start)&&u.opts.start.call(e,u),K.fx.timer(K.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function D(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,o=0,i=t.toLowerCase().match(pe)||[];if(K.isFunction(n))for(;r=i[o++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function F(e,t,n,r){function o(s){var l;return i[s]=!0,K.each(e[s]||[],function(e,s){var u=s(t,n,r);return"string"!=typeof u||a||i[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),o(u),!1)}),l}var i={},a=e===xt;return o(t.dataTypes[0])||!i["*"]&&o("*")}function L(e,t){var n,r,o=K.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((o[n]?e:r||(r={}))[n]=t[n]);return r&&K.extend(!0,e,r),e}function P(e,t,n){for(var r,o,i,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(o in s)if(s[o]&&s[o].test(r)){l.unshift(o);break}if(l[0]in n)i=l[0];else{for(o in n){if(!l[0]||e.converters[o+" "+l[0]]){i=o;break}a||(a=o)}i=i||a}return i?(i!==l[0]&&l.unshift(i),n[i]):void 0}function R(e,t,n,r){var o,i,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(i=c.shift();i;)if(e.responseFields[i]&&(n[e.responseFields[i]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=i,i=c.shift())if("*"===i)i=l;else if("*"!==l&&l!==i){if(a=u[l+" "+i]||u["* "+i],!a)for(o in u)if(s=o.split(" "),s[1]===i&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[o]:u[o]!==!0&&(i=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(f){return{state:"parsererror",error:a?f:"No conversion from "+l+" to "+i}}}return{state:"success",data:t}}function I(e,t,n,r){var o;if(K.isArray(t))K.each(t,function(t,o){n||At.test(e)?r(e,o):I(e+"["+("object"==typeof o?t:"")+"]",o,n,r)});else if(n||"object"!==K.type(t))r(e,t);else for(o in t)I(e+"["+o+"]",t[o],n,r)}function B(e){return K.isWindow(e)?e:9===e.nodeType&&e.defaultView}var U=[],V=U.slice,H=U.concat,Y=U.push,$=U.indexOf,W={},X=W.toString,Z=W.hasOwnProperty,G={},J=e.document,Q="2.1.3",K=function(e,t){return new K.fn.init(e,t)},ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,te=/^-ms-/,ne=/-([\da-z])/gi,re=function(e,t){return t.toUpperCase()};K.fn=K.prototype={jquery:Q,constructor:K,selector:"",length:0,toArray:function(){return V.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:V.call(this)},pushStack:function(e){var t=K.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return K.each(this,e,t)},map:function(e){return this.pushStack(K.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(V.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Y,sort:U.sort,splice:U.splice},K.extend=K.fn.extend=function(){var e,t,n,r,o,i,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||K.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],r=e[t],a!==r&&(u&&r&&(K.isPlainObject(r)||(o=K.isArray(r)))?(o?(o=!1,i=n&&K.isArray(n)?n:[]):i=n&&K.isPlainObject(n)?n:{},a[t]=K.extend(u,i,r)):void 0!==r&&(a[t]=r));return a},K.extend({expando:"jQuery"+(Q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===K.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!K.isArray(e)&&e-parseFloat(e)+1>=0},isPlainObject:function(e){return"object"!==K.type(e)||e.nodeType||K.isWindow(e)?!1:e.constructor&&!Z.call(e.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?W[X.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=K.trim(e),e&&(1===e.indexOf("use strict")?(t=J.createElement("script"),t.text=e,J.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(te,"ms-").replace(ne,re)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var o,i=0,a=e.length,s=n(e);if(r){if(s)for(;a>i&&(o=t.apply(e[i],r),o!==!1);i++);else for(i in e)if(o=t.apply(e[i],r),o===!1)break}else if(s)for(;a>i&&(o=t.call(e[i],i,e[i]),o!==!1);i++);else for(i in e)if(o=t.call(e[i],i,e[i]),o===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ee,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?K.merge(r,"string"==typeof e?[e]:e):Y.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:$.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,o=e.length;n>r;r++)e[o++]=t[r];return e.length=o,e},grep:function(e,t,n){for(var r,o=[],i=0,a=e.length,s=!n;a>i;i++)r=!t(e[i],i),r!==s&&o.push(e[i]);return o},map:function(e,t,r){var o,i=0,a=e.length,s=n(e),l=[];if(s)for(;a>i;i++)o=t(e[i],i,r),null!=o&&l.push(o);else for(i in e)o=t(e[i],i,r),null!=o&&l.push(o);return H.apply([],l)},guid:1,proxy:function(e,t){var n,r,o;return"string"==typeof t&&(n=e[t],t=e,e=n),K.isFunction(e)?(r=V.call(arguments,2),o=function(){return e.apply(t||this,r.concat(V.call(arguments)))},o.guid=e.guid=e.guid||K.guid++,o):void 0},now:Date.now,support:G}),K.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){W["[object "+t+"]"]=t.toLowerCase()});var oe=function(e){function t(e,t,n,r){var o,i,a,s,l,u,f,p,h,g;if((t?t.ownerDocument||t:I)!==C&&N(t),t=t||C,n=n||[],s=t.nodeType,"string"!=typeof e||!e||1!==s&&9!==s&&11!==s)return n;if(!r&&q){if(11!==s&&(o=ye.exec(e)))if(a=o[1]){if(9===s){if(i=t.getElementById(a),!i||!i.parentNode)return n;if(i.id===a)return n.push(i),n}else if(t.ownerDocument&&(i=t.ownerDocument.getElementById(a))&&P(t,i)&&i.id===a)return n.push(i),n}else{if(o[2])return Q.apply(n,t.getElementsByTagName(e)),n;if((a=o[3])&&w.getElementsByClassName)return Q.apply(n,t.getElementsByClassName(a)),n}if(w.qsa&&(!D||!D.test(e))){if(p=f=R,h=t,g=1!==s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(u=M(e),(f=t.getAttribute("id"))?p=f.replace(be,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=u.length;l--;)u[l]=p+d(u[l]);h=xe.test(e)&&c(t.parentNode)||t,g=u.join(",")}if(g)try{return Q.apply(n,h.querySelectorAll(g)),n}catch(v){}finally{f||t.removeAttribute("id")}}}return j(e.replace(le,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>_.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[R]=!0,e}function o(e){var t=C.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function i(e,t){for(var n=e.split("|"),r=e.length;r--;)_.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||W)-(~e.sourceIndex||W);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return r(function(t){return t=+t,r(function(n,r){for(var o,i=e([],n.length,t),a=i.length;a--;)n[o=i[a]]&&(n[o]=!(r[o]=n[o]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function f(){}function d(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,o=n&&"parentNode"===r,i=U++;return t.first?function(t,n,i){for(;t=t[r];)if(1===t.nodeType||o)return e(t,n,i)}:function(t,n,a){var s,l,u=[B,i];if(a){for(;t=t[r];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||o){if(l=t[R]||(t[R]={}),(s=l[r])&&s[0]===B&&s[1]===i)return u[2]=s[2];if(l[r]=u,u[2]=e(t,n,a))return!0}}}function h(e){return e.length>1?function(t,n,r){for(var o=e.length;o--;)if(!e[o](t,n,r))return!1;return!0}:e[0]}function g(e,n,r){for(var o=0,i=n.length;i>o;o++)t(e,n[o],r);return r}function v(e,t,n,r,o){for(var i,a=[],s=0,l=e.length,u=null!=t;l>s;s++)(i=e[s])&&(!n||n(i,r,o))&&(a.push(i),u&&t.push(s));return a}function m(e,t,n,o,i,a){return o&&!o[R]&&(o=m(o)),i&&!i[R]&&(i=m(i,a)),r(function(r,a,s,l){var u,c,f,d=[],p=[],h=a.length,m=r||g(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?m:v(m,d,e,s,l),x=n?i||(r?e:h||o)?[]:a:y;if(n&&n(y,x,s,l),o)for(u=v(x,p),o(u,[],s,l),c=u.length;c--;)(f=u[c])&&(x[p[c]]=!(y[p[c]]=f));if(r){if(i||e){if(i){for(u=[],c=x.length;c--;)(f=x[c])&&u.push(y[c]=f);i(null,x=[],u,l)}for(c=x.length;c--;)(f=x[c])&&(u=i?ee(r,f):d[c])>-1&&(r[u]=!(a[u]=f))}}else x=v(x===a?x.splice(h,x.length):x),i?i(null,a,x,l):Q.apply(a,x)})}function y(e){for(var t,n,r,o=e.length,i=_.relative[e[0].type],a=i||_.relative[" "],s=i?1:0,l=p(function(e){return e===t},a,!0),u=p(function(e){return ee(t,e)>-1},a,!0),c=[function(e,n,r){var o=!i&&(r||n!==E)||((t=n).nodeType?l(e,n,r):u(e,n,r));return t=null,o}];o>s;s++)if(n=_.relative[e[s].type])c=[p(h(c),n)];else{if(n=_.filter[e[s].type].apply(null,e[s].matches),n[R]){for(r=++s;o>r&&!_.relative[e[r].type];r++);return m(s>1&&h(c),s>1&&d(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(le,"$1"),n,r>s&&y(e.slice(s,r)),o>r&&y(e=e.slice(r)),o>r&&d(e))}c.push(n)}return h(c)}function x(e,n){var o=n.length>0,i=e.length>0,a=function(r,a,s,l,u){var c,f,d,p=0,h="0",g=r&&[],m=[],y=E,x=r||i&&_.find.TAG("*",u),b=B+=null==y?1:Math.random()||.1,w=x.length;for(u&&(E=a!==C&&a);h!==w&&null!=(c=x[h]);h++){if(i&&c){for(f=0;d=e[f++];)if(d(c,a,s)){l.push(c);break}u&&(B=b)}o&&((c=!d&&c)&&p--,r&&g.push(c))}if(p+=h,o&&h!==p){for(f=0;d=n[f++];)d(g,m,a,s);if(r){if(p>0)for(;h--;)g[h]||m[h]||(m[h]=G.call(l));m=v(m)}Q.apply(l,m),u&&!r&&m.length>0&&p+n.length>1&&t.uniqueSort(l)}return u&&(B=b,E=y),g};return o?r(a):a}var b,w,_,k,A,M,z,j,E,S,T,N,C,O,q,D,F,L,P,R="sizzle"+1*new Date,I=e.document,B=0,U=0,V=n(),H=n(),Y=n(),$=function(e,t){return e===t&&(T=!0),0},W=1<<31,X={}.hasOwnProperty,Z=[],G=Z.pop,J=Z.push,Q=Z.push,K=Z.slice,ee=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=re.replace("w","w#"),ie="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+ne+"*\\]",ae=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),fe=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(ae),pe=new RegExp("^"+oe+"$"),he={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},ge=/^(?:input|select|textarea|button)$/i,ve=/^h\d$/i,me=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,xe=/[+~]/,be=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),_e=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},ke=function(){N()};try{Q.apply(Z=K.call(I.childNodes),I.childNodes),Z[I.childNodes.length].nodeType}catch(Ae){Q={apply:Z.length?function(e,t){J.apply(e,K.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},A=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},N=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:I;return r!==C&&9===r.nodeType&&r.documentElement?(C=r,O=r.documentElement,n=r.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",ke,!1):n.attachEvent&&n.attachEvent("onunload",ke)),q=!A(r),w.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=o(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=me.test(r.getElementsByClassName),w.getById=o(function(e){return O.appendChild(e).id=R,!r.getElementsByName||!r.getElementsByName(R).length}),w.getById?(_.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&q){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},_.filter.ID=function(e){var t=e.replace(we,_e);return function(e){return e.getAttribute("id")===t}}):(delete _.find.ID,_.filter.ID=function(e){var t=e.replace(we,_e);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),_.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],o=0,i=t.getElementsByTagName(e);if("*"===e){for(;n=i[o++];)1===n.nodeType&&r.push(n);return r}return i},_.find.CLASS=w.getElementsByClassName&&function(e,t){return q?t.getElementsByClassName(e):void 0},F=[],D=[],(w.qsa=me.test(r.querySelectorAll))&&(o(function(e){O.appendChild(e).innerHTML="<a id='"+R+"'></a><select id='"+R+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&D.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||D.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+R+"-]").length||D.push("~="),e.querySelectorAll(":checked").length||D.push(":checked"),e.querySelectorAll("a#"+R+"+*").length||D.push(".#.+[+~]")}),o(function(e){var t=r.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&D.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||D.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),D.push(",.*:")})),(w.matchesSelector=me.test(L=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&o(function(e){w.disconnectedMatch=L.call(e,"div"),L.call(e,"[s!='']:x"),F.push("!=",ae)}),D=D.length&&new RegExp(D.join("|")),F=F.length&&new RegExp(F.join("|")),t=me.test(O.compareDocumentPosition),P=t||me.test(O.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},$=t?function(e,t){if(e===t)return T=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===r||e.ownerDocument===I&&P(I,e)?-1:t===r||t.ownerDocument===I&&P(I,t)?1:S?ee(S,e)-ee(S,t):0:4&n?-1:1)}:function(e,t){if(e===t)return T=!0,0;var n,o=0,i=e.parentNode,s=t.parentNode,l=[e],u=[t];if(!i||!s)return e===r?-1:t===r?1:i?-1:s?1:S?ee(S,e)-ee(S,t):0;if(i===s)return a(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;l[o]===u[o];)o++;return o?a(l[o],u[o]):l[o]===I?-1:u[o]===I?1:0},r):C},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==C&&N(e),n=n.replace(fe,"='$1']"),!(!w.matchesSelector||!q||F&&F.test(n)||D&&D.test(n)))try{var r=L.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(o){}return t(n,C,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==C&&N(e),P(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==C&&N(e);var n=_.attrHandle[t.toLowerCase()],r=n&&X.call(_.attrHandle,t.toLowerCase())?n(e,t,!q):void 0;return void 0!==r?r:w.attributes||!q?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,o=0;if(T=!w.detectDuplicates,S=!w.sortStable&&e.slice(0),e.sort($),T){for(;t=e[o++];)t===e[o]&&(r=n.push(o));for(;r--;)e.splice(n[r],1)}return S=null,e},k=t.getText=function(e){var t,n="",r=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=k(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[r++];)n+=k(t);return n},_=t.selectors={cacheLength:50,createPseudo:r,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,_e),e[3]=(e[3]||e[4]||e[5]||"").replace(we,_e),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=M(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,_e).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=V[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&V(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(o){var i=t.attr(o,e);return null==i?"!="===n:n?(i+="","="===n?i===r:"!="===n?i!==r:"^="===n?r&&0===i.indexOf(r):"*="===n?r&&i.indexOf(r)>-1:"$="===n?r&&i.slice(-r.length)===r:"~="===n?(" "+i.replace(se," ")+" ").indexOf(r)>-1:"|="===n?i===r||i.slice(0,r.length+1)===r+"-":!1):!0}},CHILD:function(e,t,n,r,o){var i="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var u,c,f,d,p,h,g=i!==a?"nextSibling":"previousSibling",v=t.parentNode,m=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(v){if(i){for(;g;){for(f=t;f=f[g];)if(s?f.nodeName.toLowerCase()===m:1===f.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?v.firstChild:v.lastChild],a&&y){for(c=v[R]||(v[R]={}),u=c[e]||[],p=u[0]===B&&u[1],d=u[0]===B&&u[2],f=p&&v.childNodes[p];f=++p&&f&&f[g]||(d=p=0)||h.pop();)if(1===f.nodeType&&++d&&f===t){c[e]=[B,p,d];break}}else if(y&&(u=(t[R]||(t[R]={}))[e])&&u[0]===B)d=u[1];else for(;(f=++p&&f&&f[g]||(d=p=0)||h.pop())&&((s?f.nodeName.toLowerCase()!==m:1!==f.nodeType)||!++d||(y&&((f[R]||(f[R]={}))[e]=[B,d]),f!==t)););return d-=o,d===r||d%r===0&&d/r>=0}}},PSEUDO:function(e,n){var o,i=_.pseudos[e]||_.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return i[R]?i(n):i.length>1?(o=[e,e,"",n],_.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,o=i(e,n),a=o.length;a--;)r=ee(e,o[a]),e[r]=!(t[r]=o[a])}):function(e){return i(e,0,o)}):i}},pseudos:{not:r(function(e){var t=[],n=[],o=z(e.replace(le,"$1"));return o[R]?r(function(e,t,n,r){for(var i,a=o(e,null,r,[]),s=e.length;s--;)(i=a[s])&&(e[s]=!(t[s]=i))}):function(e,r,i){return t[0]=e,o(t,null,i,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(we,_e),function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:r(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,_e).toLowerCase(),function(t){var n;do if(n=q?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===O},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!_.pseudos.empty(e)},header:function(e){return ve.test(e.nodeName)},input:function(e){return ge.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:u(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},_.pseudos.nth=_.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[b]=s(b);for(b in{submit:!0,reset:!0})_.pseudos[b]=l(b);return f.prototype=_.filters=_.pseudos,_.setFilters=new f,M=t.tokenize=function(e,n){var r,o,i,a,s,l,u,c=H[e+" "];if(c)return n?0:c.slice(0);for(s=e,l=[],u=_.preFilter;s;){(!r||(o=ue.exec(s)))&&(o&&(s=s.slice(o[0].length)||s),l.push(i=[])),r=!1,(o=ce.exec(s))&&(r=o.shift(),i.push({value:r,type:o[0].replace(le," ")}),s=s.slice(r.length));for(a in _.filter)!(o=he[a].exec(s))||u[a]&&!(o=u[a](o))||(r=o.shift(),i.push({value:r,type:a,matches:o}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):H(e,l).slice(0)},z=t.compile=function(e,t){var n,r=[],o=[],i=Y[e+" "];if(!i){for(t||(t=M(e)),n=t.length;n--;)i=y(t[n]),i[R]?r.push(i):o.push(i);i=Y(e,x(o,r)),i.selector=e}return i},j=t.select=function(e,t,n,r){var o,i,a,s,l,u="function"==typeof e&&e,f=!r&&M(e=u.selector||e);if(n=n||[],1===f.length){if(i=f[0]=f[0].slice(0),i.length>2&&"ID"===(a=i[0]).type&&w.getById&&9===t.nodeType&&q&&_.relative[i[1].type]){if(t=(_.find.ID(a.matches[0].replace(we,_e),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(i.shift().value.length)}for(o=he.needsContext.test(e)?0:i.length;o--&&(a=i[o],!_.relative[s=a.type]);)if((l=_.find[s])&&(r=l(a.matches[0].replace(we,_e),xe.test(i[0].type)&&c(t.parentNode)||t))){if(i.splice(o,1),e=r.length&&d(i),!e)return Q.apply(n,r),n;break}}return(u||z(e,f))(r,t,!q,n,xe.test(e)&&c(t.parentNode)||t),n},w.sortStable=R.split("").sort($).join("")===R,w.detectDuplicates=!!T,N(),w.sortDetached=o(function(e){return 1&e.compareDocumentPosition(C.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||i("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||i("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||i(te,function(e,t,n){var r;return n?void 0:e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);K.find=oe,K.expr=oe.selectors,K.expr[":"]=K.expr.pseudos,K.unique=oe.uniqueSort,K.text=oe.getText,K.isXMLDoc=oe.isXML,K.contains=oe.contains;var ie=K.expr.match.needsContext,ae=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,se=/^.[^:#\[\.,]*$/;K.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?K.find.matchesSelector(r,e)?[r]:[]:K.find.matches(e,K.grep(t,function(e){return 1===e.nodeType}))},K.fn.extend({find:function(e){var t,n=this.length,r=[],o=this;if("string"!=typeof e)return this.pushStack(K(e).filter(function(){
for(t=0;n>t;t++)if(K.contains(o[t],this))return!0}));for(t=0;n>t;t++)K.find(e,o[t],r);return r=this.pushStack(n>1?K.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&ie.test(e)?K(e):e||[],!1).length}});var le,ue=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ce=K.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ue.exec(e),!n||!n[1]&&t)return!t||t.jquery?(t||le).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof K?t[0]:t,K.merge(this,K.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:J,!0)),ae.test(n[1])&&K.isPlainObject(t))for(n in t)K.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return r=J.getElementById(n[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):K.isFunction(e)?"undefined"!=typeof le.ready?le.ready(e):e(K):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),K.makeArray(e,this))};ce.prototype=K.fn,le=K(J);var fe=/^(?:parents|prev(?:Until|All))/,de={children:!0,contents:!0,next:!0,prev:!0};K.extend({dir:function(e,t,n){for(var r=[],o=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(o&&K(e).is(n))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),K.fn.extend({has:function(e){var t=K(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(K.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,o=this.length,i=[],a=ie.test(e)||"string"!=typeof e?K(e,t||this.context):0;o>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&K.find.matchesSelector(n,e))){i.push(n);break}return this.pushStack(i.length>1?K.unique(i):i)},index:function(e){return e?"string"==typeof e?$.call(K(e),this[0]):$.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(K.unique(K.merge(this.get(),K(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),K.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return K.dir(e,"parentNode")},parentsUntil:function(e,t,n){return K.dir(e,"parentNode",n)},next:function(e){return o(e,"nextSibling")},prev:function(e){return o(e,"previousSibling")},nextAll:function(e){return K.dir(e,"nextSibling")},prevAll:function(e){return K.dir(e,"previousSibling")},nextUntil:function(e,t,n){return K.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return K.dir(e,"previousSibling",n)},siblings:function(e){return K.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return K.sibling(e.firstChild)},contents:function(e){return e.contentDocument||K.merge([],e.childNodes)}},function(e,t){K.fn[e]=function(n,r){var o=K.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(o=K.filter(r,o)),this.length>1&&(de[e]||K.unique(o),fe.test(e)&&o.reverse()),this.pushStack(o)}});var pe=/\S+/g,he={};K.Callbacks=function(e){e="string"==typeof e?he[e]||i(e):K.extend({},e);var t,n,r,o,a,s,l=[],u=!e.once&&[],c=function(i){for(t=e.memory&&i,n=!0,s=o||0,o=0,a=l.length,r=!0;l&&a>s;s++)if(l[s].apply(i[0],i[1])===!1&&e.stopOnFalse){t=!1;break}r=!1,l&&(u?u.length&&c(u.shift()):t?l=[]:f.disable())},f={add:function(){if(l){var n=l.length;!function i(t){K.each(t,function(t,n){var r=K.type(n);"function"===r?e.unique&&f.has(n)||l.push(n):n&&n.length&&"string"!==r&&i(n)})}(arguments),r?a=l.length:t&&(o=n,c(t))}return this},remove:function(){return l&&K.each(arguments,function(e,t){for(var n;(n=K.inArray(t,l,n))>-1;)l.splice(n,1),r&&(a>=n&&a--,s>=n&&s--)}),this},has:function(e){return e?K.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=u=t=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,t||f.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||n&&!u||(t=t||[],t=[e,t.slice?t.slice():t],r?u.push(t):c(t)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!n}};return f},K.extend({Deferred:function(e){var t=[["resolve","done",K.Callbacks("once memory"),"resolved"],["reject","fail",K.Callbacks("once memory"),"rejected"],["notify","progress",K.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return K.Deferred(function(n){K.each(t,function(t,i){var a=K.isFunction(e[t])&&e[t];o[i[1]](function(){var e=a&&a.apply(this,arguments);e&&K.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[i[0]+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?K.extend(e,r):r}},o={};return r.pipe=r.then,K.each(t,function(e,i){var a=i[2],s=i[3];r[i[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),o[i[0]]=function(){return o[i[0]+"With"](this===o?r:this,arguments),this},o[i[0]+"With"]=a.fireWith}),r.promise(o),e&&e.call(o,o),o},when:function(e){var t,n,r,o=0,i=V.call(arguments),a=i.length,s=1!==a||e&&K.isFunction(e.promise)?a:0,l=1===s?e:K.Deferred(),u=function(e,n,r){return function(o){n[e]=this,r[e]=arguments.length>1?V.call(arguments):o,r===t?l.notifyWith(n,r):--s||l.resolveWith(n,r)}};if(a>1)for(t=new Array(a),n=new Array(a),r=new Array(a);a>o;o++)i[o]&&K.isFunction(i[o].promise)?i[o].promise().done(u(o,r,i)).fail(l.reject).progress(u(o,n,t)):--s;return s||l.resolveWith(r,i),l.promise()}});var ge;K.fn.ready=function(e){return K.ready.promise().done(e),this},K.extend({isReady:!1,readyWait:1,holdReady:function(e){e?K.readyWait++:K.ready(!0)},ready:function(e){(e===!0?--K.readyWait:K.isReady)||(K.isReady=!0,e!==!0&&--K.readyWait>0||(ge.resolveWith(J,[K]),K.fn.triggerHandler&&(K(J).triggerHandler("ready"),K(J).off("ready"))))}}),K.ready.promise=function(t){return ge||(ge=K.Deferred(),"complete"===J.readyState?setTimeout(K.ready):(J.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1))),ge.promise(t)},K.ready.promise();var ve=K.access=function(e,t,n,r,o,i,a){var s=0,l=e.length,u=null==n;if("object"===K.type(n)){o=!0;for(s in n)K.access(e,t,s,n[s],!0,i,a)}else if(void 0!==r&&(o=!0,K.isFunction(r)||(a=!0),u&&(a?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(K(e),n)})),t))for(;l>s;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return o?e:u?t.call(e):l?t(e[0],n):i};K.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},s.uid=1,s.accepts=K.acceptData,s.prototype={key:function(e){if(!s.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=s.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,K.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,o=this.key(e),i=this.cache[o];if("string"==typeof t)i[t]=n;else if(K.isEmptyObject(i))K.extend(this.cache[o],t);else for(r in t)i[r]=t[r];return i},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?(r=this.get(e,t),void 0!==r?r:this.get(e,K.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,o,i=this.key(e),a=this.cache[i];if(void 0===t)this.cache[i]={};else{K.isArray(t)?r=t.concat(t.map(K.camelCase)):(o=K.camelCase(t),t in a?r=[t,o]:(r=o,r=r in a?[r]:r.match(pe)||[])),n=r.length;for(;n--;)delete a[r[n]]}},hasData:function(e){return!K.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var me=new s,ye=new s,xe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,be=/([A-Z])/g;K.extend({hasData:function(e){return ye.hasData(e)||me.hasData(e)},data:function(e,t,n){return ye.access(e,t,n)},removeData:function(e,t){ye.remove(e,t)},_data:function(e,t,n){return me.access(e,t,n)},_removeData:function(e,t){me.remove(e,t)}}),K.fn.extend({data:function(e,t){var n,r,o,i=this[0],a=i&&i.attributes;if(void 0===e){if(this.length&&(o=ye.get(i),1===i.nodeType&&!me.get(i,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=K.camelCase(r.slice(5)),l(i,r,o[r])));me.set(i,"hasDataAttrs",!0)}return o}return"object"==typeof e?this.each(function(){ye.set(this,e)}):ve(this,function(t){var n,r=K.camelCase(e);if(i&&void 0===t){if(n=ye.get(i,e),void 0!==n)return n;if(n=ye.get(i,r),void 0!==n)return n;if(n=l(i,r,void 0),void 0!==n)return n}else this.each(function(){var n=ye.get(this,r);ye.set(this,r,t),-1!==e.indexOf("-")&&void 0!==n&&ye.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ye.remove(this,e)})}}),K.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=me.get(e,t),n&&(!r||K.isArray(n)?r=me.access(e,t,K.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=K.queue(e,t),r=n.length,o=n.shift(),i=K._queueHooks(e,t),a=function(){K.dequeue(e,t)};"inprogress"===o&&(o=n.shift(),r--),o&&("fx"===t&&n.unshift("inprogress"),delete i.stop,o.call(e,a,i)),!r&&i&&i.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return me.get(e,n)||me.access(e,n,{empty:K.Callbacks("once memory").add(function(){me.remove(e,[t+"queue",n])})})}}),K.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?K.queue(this[0],e):void 0===t?this:this.each(function(){var n=K.queue(this,e,t);K._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&K.dequeue(this,e)})},dequeue:function(e){return this.each(function(){K.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,o=K.Deferred(),i=this,a=this.length,s=function(){--r||o.resolveWith(i,[i])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=me.get(i[a],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(s));return s(),o.promise(t)}});var we=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_e=["Top","Right","Bottom","Left"],ke=function(e,t){return e=t||e,"none"===K.css(e,"display")||!K.contains(e.ownerDocument,e)},Ae=/^(?:checkbox|radio)$/i;!function(){var e=J.createDocumentFragment(),t=e.appendChild(J.createElement("div")),n=J.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),G.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",G.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Me="undefined";G.focusinBubbles="onfocusin"in e;var ze=/^key/,je=/^(?:mouse|pointer|contextmenu)|click/,Ee=/^(?:focusinfocus|focusoutblur)$/,Se=/^([^.]*)(?:\.(.+)|)$/;K.event={global:{},add:function(e,t,n,r,o){var i,a,s,l,u,c,f,d,p,h,g,v=me.get(e);if(v)for(n.handler&&(i=n,n=i.handler,o=i.selector),n.guid||(n.guid=K.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(t){return typeof K!==Me&&K.event.triggered!==t.type?K.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(pe)||[""],u=t.length;u--;)s=Se.exec(t[u])||[],p=g=s[1],h=(s[2]||"").split(".").sort(),p&&(f=K.event.special[p]||{},p=(o?f.delegateType:f.bindType)||p,f=K.event.special[p]||{},c=K.extend({type:p,origType:g,data:r,handler:n,guid:n.guid,selector:o,needsContext:o&&K.expr.match.needsContext.test(o),namespace:h.join(".")},i),(d=l[p])||(d=l[p]=[],d.delegateCount=0,f.setup&&f.setup.call(e,r,h,a)!==!1||e.addEventListener&&e.addEventListener(p,a,!1)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),o?d.splice(d.delegateCount++,0,c):d.push(c),K.event.global[p]=!0)},remove:function(e,t,n,r,o){var i,a,s,l,u,c,f,d,p,h,g,v=me.hasData(e)&&me.get(e);if(v&&(l=v.events)){for(t=(t||"").match(pe)||[""],u=t.length;u--;)if(s=Se.exec(t[u])||[],p=g=s[1],h=(s[2]||"").split(".").sort(),p){for(f=K.event.special[p]||{},p=(r?f.delegateType:f.bindType)||p,d=l[p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=i=d.length;i--;)c=d[i],!o&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(d.splice(i,1),c.selector&&d.delegateCount--,f.remove&&f.remove.call(e,c));a&&!d.length&&(f.teardown&&f.teardown.call(e,h,v.handle)!==!1||K.removeEvent(e,p,v.handle),delete l[p])}else for(p in l)K.event.remove(e,p+t[u],n,r,!0);K.isEmptyObject(l)&&(delete v.handle,me.remove(e,"events"))}},trigger:function(t,n,r,o){var i,a,s,l,u,c,f,d=[r||J],p=Z.call(t,"type")?t.type:t,h=Z.call(t,"namespace")?t.namespace.split("."):[];if(a=s=r=r||J,3!==r.nodeType&&8!==r.nodeType&&!Ee.test(p+K.event.triggered)&&(p.indexOf(".")>=0&&(h=p.split("."),p=h.shift(),h.sort()),u=p.indexOf(":")<0&&"on"+p,t=t[K.expando]?t:new K.Event(p,"object"==typeof t&&t),t.isTrigger=o?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:K.makeArray(n,[t]),f=K.event.special[p]||{},o||!f.trigger||f.trigger.apply(r,n)!==!1)){if(!o&&!f.noBubble&&!K.isWindow(r)){for(l=f.delegateType||p,Ee.test(l+p)||(a=a.parentNode);a;a=a.parentNode)d.push(a),s=a;s===(r.ownerDocument||J)&&d.push(s.defaultView||s.parentWindow||e)}for(i=0;(a=d[i++])&&!t.isPropagationStopped();)t.type=i>1?l:f.bindType||p,c=(me.get(a,"events")||{})[t.type]&&me.get(a,"handle"),c&&c.apply(a,n),c=u&&a[u],c&&c.apply&&K.acceptData(a)&&(t.result=c.apply(a,n),t.result===!1&&t.preventDefault());return t.type=p,o||t.isDefaultPrevented()||f._default&&f._default.apply(d.pop(),n)!==!1||!K.acceptData(r)||u&&K.isFunction(r[p])&&!K.isWindow(r)&&(s=r[u],s&&(r[u]=null),K.event.triggered=p,r[p](),K.event.triggered=void 0,s&&(r[u]=s)),t.result}},dispatch:function(e){e=K.event.fix(e);var t,n,r,o,i,a=[],s=V.call(arguments),l=(me.get(this,"events")||{})[e.type]||[],u=K.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(a=K.event.handlers.call(this,e,l),t=0;(o=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,n=0;(i=o.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((K.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,s),void 0!==r&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,o,i,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==e.type){for(r=[],n=0;s>n;n++)i=t[n],o=i.selector+" ",void 0===r[o]&&(r[o]=i.needsContext?K(o,this).index(l)>=0:K.find(o,this,null,[l]).length),r[o]&&r.push(i);r.length&&a.push({elem:l,handlers:r})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,o,i=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||J,r=n.documentElement,o=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||o&&o.scrollLeft||0)-(r&&r.clientLeft||o&&o.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||o&&o.scrollTop||0)-(r&&r.clientTop||o&&o.clientTop||0)),e.which||void 0===i||(e.which=1&i?1:2&i?3:4&i?2:0),e}},fix:function(e){if(e[K.expando])return e;var t,n,r,o=e.type,i=e,a=this.fixHooks[o];for(a||(this.fixHooks[o]=a=je.test(o)?this.mouseHooks:ze.test(o)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new K.Event(i),t=r.length;t--;)n=r[t],e[n]=i[n];return e.target||(e.target=J),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,i):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==f()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&K.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return K.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var o=K.extend(new K.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?K.event.trigger(o,null,t):K.event.dispatch.call(t,o),o.isDefaultPrevented()&&n.preventDefault()}},K.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},K.Event=function(e,t){return this instanceof K.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?u:c):this.type=e,t&&K.extend(this,t),this.timeStamp=e&&e.timeStamp||K.now(),void(this[K.expando]=!0)):new K.Event(e,t)},K.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=u,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=u,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=u,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},K.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){K.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,o=e.relatedTarget,i=e.handleObj;return(!o||o!==r&&!K.contains(r,o))&&(e.type=i.origType,n=i.handler.apply(this,arguments),e.type=t),n}}}),G.focusinBubbles||K.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){K.event.simulate(t,e.target,K.event.fix(e),!0)};K.event.special[t]={setup:function(){var r=this.ownerDocument||this,o=me.access(r,t);o||r.addEventListener(e,n,!0),me.access(r,t,(o||0)+1)},teardown:function(){var r=this.ownerDocument||this,o=me.access(r,t)-1;o?me.access(r,t,o):(r.removeEventListener(e,n,!0),me.remove(r,t))}}}),K.fn.extend({on:function(e,t,n,r,o){var i,a;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(a in e)this.on(a,t,n,e[a],o);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),r===!1)r=c;else if(!r)return this;return 1===o&&(i=r,r=function(e){return K().off(e),i.apply(this,arguments)},r.guid=i.guid||(i.guid=K.guid++)),this.each(function(){K.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,o;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,K(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(o in e)this.off(o,t,e[o]);return this}return(t===!1||"function"==typeof t)&&(n=t,t=void 0),n===!1&&(n=c),this.each(function(){K.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){K.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?K.event.trigger(e,t,n,!0):void 0}});var Te=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ne=/<([\w:]+)/,Ce=/<|&#?\w+;/,Oe=/<(?:script|style|link)/i,qe=/checked\s*(?:[^=]|=\s*.checked.)/i,De=/^$|\/(?:java|ecma)script/i,Fe=/^true\/(.*)/,Le=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Pe={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Pe.optgroup=Pe.option,Pe.tbody=Pe.tfoot=Pe.colgroup=Pe.caption=Pe.thead,Pe.th=Pe.td,K.extend({clone:function(e,t,n){var r,o,i,a,s=e.cloneNode(!0),l=K.contains(e.ownerDocument,e);if(!(G.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||K.isXMLDoc(e)))for(a=m(s),i=m(e),r=0,o=i.length;o>r;r++)y(i[r],a[r]);if(t)if(n)for(i=i||m(e),a=a||m(s),r=0,o=i.length;o>r;r++)v(i[r],a[r]);else v(e,s);return a=m(s,"script"),a.length>0&&g(a,!l&&m(e,"script")),s},buildFragment:function(e,t,n,r){for(var o,i,a,s,l,u,c=t.createDocumentFragment(),f=[],d=0,p=e.length;p>d;d++)if(o=e[d],o||0===o)if("object"===K.type(o))K.merge(f,o.nodeType?[o]:o);else if(Ce.test(o)){for(i=i||c.appendChild(t.createElement("div")),a=(Ne.exec(o)||["",""])[1].toLowerCase(),s=Pe[a]||Pe._default,i.innerHTML=s[1]+o.replace(Te,"<$1></$2>")+s[2],u=s[0];u--;)i=i.lastChild;K.merge(f,i.childNodes),i=c.firstChild,i.textContent=""}else f.push(t.createTextNode(o));for(c.textContent="",d=0;o=f[d++];)if((!r||-1===K.inArray(o,r))&&(l=K.contains(o.ownerDocument,o),i=m(c.appendChild(o),"script"),l&&g(i),n))for(u=0;o=i[u++];)De.test(o.type||"")&&n.push(o);return c},cleanData:function(e){for(var t,n,r,o,i=K.event.special,a=0;void 0!==(n=e[a]);a++){if(K.acceptData(n)&&(o=n[me.expando],o&&(t=me.cache[o]))){if(t.events)for(r in t.events)i[r]?K.event.remove(n,r):K.removeEvent(n,r,t.handle);me.cache[o]&&delete me.cache[o]}delete ye.cache[n[ye.expando]]}}}),K.fn.extend({text:function(e){return ve(this,function(e){return void 0===e?K.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=d(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?K.filter(e,this):this,o=0;null!=(n=r[o]);o++)t||1!==n.nodeType||K.cleanData(m(n)),n.parentNode&&(t&&K.contains(n.ownerDocument,n)&&g(m(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(K.cleanData(m(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return K.clone(this,e,t)})},html:function(e){return ve(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Oe.test(e)&&!Pe[(Ne.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Te,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(K.cleanData(m(t,!1)),t.innerHTML=e);t=0}catch(o){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,K.cleanData(m(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=H.apply([],e);var n,r,o,i,a,s,l=0,u=this.length,c=this,f=u-1,d=e[0],g=K.isFunction(d);if(g||u>1&&"string"==typeof d&&!G.checkClone&&qe.test(d))return this.each(function(n){var r=c.eq(n);g&&(e[0]=d.call(this,n,r.html())),r.domManip(e,t)});if(u&&(n=K.buildFragment(e,this[0].ownerDocument,!1,this),r=n.firstChild,1===n.childNodes.length&&(n=r),r)){for(o=K.map(m(n,"script"),p),i=o.length;u>l;l++)a=n,l!==f&&(a=K.clone(a,!0,!0),i&&K.merge(o,m(a,"script"))),t.call(this[l],a,l);if(i)for(s=o[o.length-1].ownerDocument,K.map(o,h),l=0;i>l;l++)a=o[l],De.test(a.type||"")&&!me.access(a,"globalEval")&&K.contains(s,a)&&(a.src?K._evalUrl&&K._evalUrl(a.src):K.globalEval(a.textContent.replace(Le,"")))}return this}}),K.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){K.fn[e]=function(e){for(var n,r=[],o=K(e),i=o.length-1,a=0;i>=a;a++)n=a===i?this:this.clone(!0),K(o[a])[t](n),Y.apply(r,n.get());return this.pushStack(r)}});var Re,Ie={},Be=/^margin/,Ue=new RegExp("^("+we+")(?!px)[a-z%]+$","i"),Ve=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)};!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a.innerHTML="",o.appendChild(i);var t=e.getComputedStyle(a,null);n="1%"!==t.top,r="4px"===t.width,o.removeChild(i)}var n,r,o=J.documentElement,i=J.createElement("div"),a=J.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",G.clearCloneStyle="content-box"===a.style.backgroundClip,i.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",i.appendChild(a),e.getComputedStyle&&K.extend(G,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==r&&t(),r},reliableMarginRight:function(){var t,n=a.appendChild(J.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",o.appendChild(i),t=!parseFloat(e.getComputedStyle(n,null).marginRight),o.removeChild(i),a.removeChild(n),t}}))}(),K.swap=function(e,t,n,r){var o,i,a={};for(i in t)a[i]=e.style[i],e.style[i]=t[i];o=n.apply(e,r||[]);for(i in t)e.style[i]=a[i];return o};var He=/^(none|table(?!-c[ea]).+)/,Ye=new RegExp("^("+we+")(.*)$","i"),$e=new RegExp("^([+-])=("+we+")","i"),We={position:"absolute",visibility:"hidden",display:"block"},Xe={letterSpacing:"0",fontWeight:"400"},Ze=["Webkit","O","Moz","ms"];K.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=w(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,i,a,s=K.camelCase(t),l=e.style;return t=K.cssProps[s]||(K.cssProps[s]=k(l,s)),a=K.cssHooks[t]||K.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(o=a.get(e,!1,r))?o:l[t]:(i=typeof n,"string"===i&&(o=$e.exec(n))&&(n=(o[1]+1)*o[2]+parseFloat(K.css(e,t)),i="number"),null!=n&&n===n&&("number"!==i||K.cssNumber[s]||(n+="px"),G.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(l[t]=n)),void 0)}},css:function(e,t,n,r){var o,i,a,s=K.camelCase(t);return t=K.cssProps[s]||(K.cssProps[s]=k(e.style,s)),a=K.cssHooks[t]||K.cssHooks[s],a&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=w(e,t,r)),"normal"===o&&t in Xe&&(o=Xe[t]),""===n||n?(i=parseFloat(o),n===!0||K.isNumeric(i)?i||0:o):o}}),K.each(["height","width"],function(e,t){K.cssHooks[t]={get:function(e,n,r){return n?He.test(K.css(e,"display"))&&0===e.offsetWidth?K.swap(e,We,function(){return z(e,t,r)}):z(e,t,r):void 0},set:function(e,n,r){var o=r&&Ve(e);return A(e,n,r?M(e,t,r,"border-box"===K.css(e,"boxSizing",!1,o),o):0)}}}),K.cssHooks.marginRight=_(G.reliableMarginRight,function(e,t){return t?K.swap(e,{display:"inline-block"},w,[e,"marginRight"]):void 0}),K.each({margin:"",padding:"",border:"Width"},function(e,t){K.cssHooks[e+t]={expand:function(n){for(var r=0,o={},i="string"==typeof n?n.split(" "):[n];4>r;r++)o[e+_e[r]+t]=i[r]||i[r-2]||i[0];return o}},Be.test(e)||(K.cssHooks[e+t].set=A)}),K.fn.extend({css:function(e,t){return ve(this,function(e,t,n){var r,o,i={},a=0;if(K.isArray(t)){for(r=Ve(e),o=t.length;o>a;a++)i[t[a]]=K.css(e,t[a],!1,r);return i}return void 0!==n?K.style(e,t,n):K.css(e,t)},e,t,arguments.length>1)},show:function(){return j(this,!0)},hide:function(){return j(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ke(this)?K(this).show():K(this).hide()})}}),K.Tween=E,E.prototype={constructor:E,init:function(e,t,n,r,o,i){this.elem=e,this.prop=n,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=i||(K.cssNumber[n]?"":"px")},cur:function(){var e=E.propHooks[this.prop];return e&&e.get?e.get(this):E.propHooks._default.get(this)},run:function(e){var t,n=E.propHooks[this.prop];return this.pos=t=this.options.duration?K.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):E.propHooks._default.set(this),this}},E.prototype.init.prototype=E.prototype,E.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=K.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){K.fx.step[e.prop]?K.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[K.cssProps[e.prop]]||K.cssHooks[e.prop])?K.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},E.propHooks.scrollTop=E.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},K.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},K.fx=E.prototype.init,K.fx.step={};var Ge,Je,Qe=/^(?:toggle|show|hide)$/,Ke=new RegExp("^(?:([+-])=|)("+we+")([a-z%]*)$","i"),et=/queueHooks$/,tt=[C],nt={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),o=Ke.exec(t),i=o&&o[3]||(K.cssNumber[e]?"":"px"),a=(K.cssNumber[e]||"px"!==i&&+r)&&Ke.exec(K.css(n.elem,e)),s=1,l=20;if(a&&a[3]!==i){i=i||a[3],o=o||[],a=+r||1;do s=s||".5",a/=s,K.style(n.elem,e,a+i);while(s!==(s=n.cur()/r)&&1!==s&&--l)}return o&&(a=n.start=+a||+r||0,n.unit=i,n.end=o[1]?a+(o[1]+1)*o[2]:+o[2]),n}]};K.Animation=K.extend(q,{tweener:function(e,t){K.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,o=e.length;o>r;r++)n=e[r],nt[n]=nt[n]||[],nt[n].unshift(t)},prefilter:function(e,t){t?tt.unshift(e):tt.push(e)}}),K.speed=function(e,t,n){var r=e&&"object"==typeof e?K.extend({},e):{complete:n||!n&&t||K.isFunction(e)&&e,duration:e,easing:n&&t||t&&!K.isFunction(t)&&t};return r.duration=K.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in K.fx.speeds?K.fx.speeds[r.duration]:K.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){K.isFunction(r.old)&&r.old.call(this),r.queue&&K.dequeue(this,r.queue)},r},K.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ke).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var o=K.isEmptyObject(e),i=K.speed(t,n,r),a=function(){var t=q(this,K.extend({},e),i);(o||me.get(this,"finish"))&&t.stop(!0)};return a.finish=a,o||i.queue===!1?this.each(a):this.queue(i.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,o=null!=e&&e+"queueHooks",i=K.timers,a=me.get(this);if(o)a[o]&&a[o].stop&&r(a[o]);else for(o in a)a[o]&&a[o].stop&&et.test(o)&&r(a[o]);for(o=i.length;o--;)i[o].elem!==this||null!=e&&i[o].queue!==e||(i[o].anim.stop(n),t=!1,i.splice(o,1));(t||!n)&&K.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=me.get(this),r=n[e+"queue"],o=n[e+"queueHooks"],i=K.timers,a=r?r.length:0;for(n.finish=!0,K.queue(this,e,[]),o&&o.stop&&o.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===e&&(i[t].anim.stop(!0),
i.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),K.each(["toggle","show","hide"],function(e,t){var n=K.fn[t];K.fn[t]=function(e,r,o){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(T(t,!0),e,r,o)}}),K.each({slideDown:T("show"),slideUp:T("hide"),slideToggle:T("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){K.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),K.timers=[],K.fx.tick=function(){var e,t=0,n=K.timers;for(Ge=K.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||K.fx.stop(),Ge=void 0},K.fx.timer=function(e){K.timers.push(e),e()?K.fx.start():K.timers.pop()},K.fx.interval=13,K.fx.start=function(){Je||(Je=setInterval(K.fx.tick,K.fx.interval))},K.fx.stop=function(){clearInterval(Je),Je=null},K.fx.speeds={slow:600,fast:200,_default:400},K.fn.delay=function(e,t){return e=K.fx?K.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=J.createElement("input"),t=J.createElement("select"),n=t.appendChild(J.createElement("option"));e.type="checkbox",G.checkOn=""!==e.value,G.optSelected=n.selected,t.disabled=!0,G.optDisabled=!n.disabled,e=J.createElement("input"),e.value="t",e.type="radio",G.radioValue="t"===e.value}();var rt,ot,it=K.expr.attrHandle;K.fn.extend({attr:function(e,t){return ve(this,K.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){K.removeAttr(this,e)})}}),K.extend({attr:function(e,t,n){var r,o,i=e.nodeType;if(e&&3!==i&&8!==i&&2!==i)return typeof e.getAttribute===Me?K.prop(e,t,n):(1===i&&K.isXMLDoc(e)||(t=t.toLowerCase(),r=K.attrHooks[t]||(K.expr.match.bool.test(t)?ot:rt)),void 0===n?r&&"get"in r&&null!==(o=r.get(e,t))?o:(o=K.find.attr(e,t),null==o?void 0:o):null!==n?r&&"set"in r&&void 0!==(o=r.set(e,n,t))?o:(e.setAttribute(t,n+""),n):void K.removeAttr(e,t))},removeAttr:function(e,t){var n,r,o=0,i=t&&t.match(pe);if(i&&1===e.nodeType)for(;n=i[o++];)r=K.propFix[n]||n,K.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!G.radioValue&&"radio"===t&&K.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),ot={set:function(e,t,n){return t===!1?K.removeAttr(e,n):e.setAttribute(n,n),n}},K.each(K.expr.match.bool.source.match(/\w+/g),function(e,t){var n=it[t]||K.find.attr;it[t]=function(e,t,r){var o,i;return r||(i=it[t],it[t]=o,o=null!=n(e,t,r)?t.toLowerCase():null,it[t]=i),o}});var at=/^(?:input|select|textarea|button)$/i;K.fn.extend({prop:function(e,t){return ve(this,K.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[K.propFix[e]||e]})}}),K.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,o,i,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return i=1!==a||!K.isXMLDoc(e),i&&(t=K.propFix[t]||t,o=K.propHooks[t]),void 0!==n?o&&"set"in o&&void 0!==(r=o.set(e,n,t))?r:e[t]=n:o&&"get"in o&&null!==(r=o.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||at.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),G.optSelected||(K.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),K.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){K.propFix[this.toLowerCase()]=this});var st=/[\t\r\n\f]/g;K.fn.extend({addClass:function(e){var t,n,r,o,i,a,s="string"==typeof e&&e,l=0,u=this.length;if(K.isFunction(e))return this.each(function(t){K(this).addClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(pe)||[];u>l;l++)if(n=this[l],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(st," "):" ")){for(i=0;o=t[i++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");a=K.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,r,o,i,a,s=0===arguments.length||"string"==typeof e&&e,l=0,u=this.length;if(K.isFunction(e))return this.each(function(t){K(this).removeClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(pe)||[];u>l;l++)if(n=this[l],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(st," "):"")){for(i=0;o=t[i++];)for(;r.indexOf(" "+o+" ")>=0;)r=r.replace(" "+o+" "," ");a=e?K.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(K.isFunction(e)?function(n){K(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,r=0,o=K(this),i=e.match(pe)||[];t=i[r++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else(n===Me||"boolean"===n)&&(this.className&&me.set(this,"__className__",this.className),this.className=this.className||e===!1?"":me.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(st," ").indexOf(t)>=0)return!0;return!1}});var lt=/\r/g;K.fn.extend({val:function(e){var t,n,r,o=this[0];{if(arguments.length)return r=K.isFunction(e),this.each(function(n){var o;1===this.nodeType&&(o=r?e.call(this,n,K(this).val()):e,null==o?o="":"number"==typeof o?o+="":K.isArray(o)&&(o=K.map(o,function(e){return null==e?"":e+""})),t=K.valHooks[this.type]||K.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,o,"value")||(this.value=o))});if(o)return t=K.valHooks[o.type]||K.valHooks[o.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(o,"value"))?n:(n=o.value,"string"==typeof n?n.replace(lt,""):null==n?"":n)}}}),K.extend({valHooks:{option:{get:function(e){var t=K.find.attr(e,"value");return null!=t?t:K.trim(K.text(e))}},select:{get:function(e){for(var t,n,r=e.options,o=e.selectedIndex,i="select-one"===e.type||0>o,a=i?null:[],s=i?o+1:r.length,l=0>o?s:i?o:0;s>l;l++)if(n=r[l],!(!n.selected&&l!==o||(G.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&K.nodeName(n.parentNode,"optgroup"))){if(t=K(n).val(),i)return t;a.push(t)}return a},set:function(e,t){for(var n,r,o=e.options,i=K.makeArray(t),a=o.length;a--;)r=o[a],(r.selected=K.inArray(r.value,i)>=0)&&(n=!0);return n||(e.selectedIndex=-1),i}}}}),K.each(["radio","checkbox"],function(){K.valHooks[this]={set:function(e,t){return K.isArray(t)?e.checked=K.inArray(K(e).val(),t)>=0:void 0}},G.checkOn||(K.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),K.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){K.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),K.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var ut=K.now(),ct=/\?/;K.parseJSON=function(e){return JSON.parse(e+"")},K.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(r){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&K.error("Invalid XML: "+e),t};var ft=/#.*$/,dt=/([?&])_=[^&]*/,pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,ht=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,gt=/^(?:GET|HEAD)$/,vt=/^\/\//,mt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,yt={},xt={},bt="*/".concat("*"),wt=e.location.href,_t=mt.exec(wt.toLowerCase())||[];K.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wt,type:"GET",isLocal:ht.test(_t[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":bt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":K.parseJSON,"text xml":K.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?L(L(e,K.ajaxSettings),t):L(K.ajaxSettings,e)},ajaxPrefilter:D(yt),ajaxTransport:D(xt),ajax:function(e,t){function n(e,t,n,a){var l,c,m,y,b,_=t;2!==x&&(x=2,s&&clearTimeout(s),r=void 0,i=a||"",w.readyState=e>0?4:0,l=e>=200&&300>e||304===e,n&&(y=P(f,w,n)),y=R(f,y,w,l),l?(f.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(K.lastModified[o]=b),b=w.getResponseHeader("etag"),b&&(K.etag[o]=b)),204===e||"HEAD"===f.type?_="nocontent":304===e?_="notmodified":(_=y.state,c=y.data,m=y.error,l=!m)):(m=_,(e||!_)&&(_="error",0>e&&(e=0))),w.status=e,w.statusText=(t||_)+"",l?h.resolveWith(d,[c,_,w]):h.rejectWith(d,[w,_,m]),w.statusCode(v),v=void 0,u&&p.trigger(l?"ajaxSuccess":"ajaxError",[w,f,l?c:m]),g.fireWith(d,[w,_]),u&&(p.trigger("ajaxComplete",[w,f]),--K.active||K.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,o,i,a,s,l,u,c,f=K.ajaxSetup({},t),d=f.context||f,p=f.context&&(d.nodeType||d.jquery)?K(d):K.event,h=K.Deferred(),g=K.Callbacks("once memory"),v=f.statusCode||{},m={},y={},x=0,b="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!a)for(a={};t=pt.exec(i);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?i:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=y[n]=y[n]||e,m[e]=t),this},overrideMimeType:function(e){return x||(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)v[t]=[v[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||b;return r&&r.abort(t),n(0,t),this}};if(h.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,f.url=((e||f.url||wt)+"").replace(ft,"").replace(vt,_t[1]+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=K.trim(f.dataType||"*").toLowerCase().match(pe)||[""],null==f.crossDomain&&(l=mt.exec(f.url.toLowerCase()),f.crossDomain=!(!l||l[1]===_t[1]&&l[2]===_t[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(_t[3]||("http:"===_t[1]?"80":"443")))),f.data&&f.processData&&"string"!=typeof f.data&&(f.data=K.param(f.data,f.traditional)),F(yt,f,t,w),2===x)return w;u=K.event&&f.global,u&&0===K.active++&&K.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!gt.test(f.type),o=f.url,f.hasContent||(f.data&&(o=f.url+=(ct.test(o)?"&":"?")+f.data,delete f.data),f.cache===!1&&(f.url=dt.test(o)?o.replace(dt,"$1_="+ut++):o+(ct.test(o)?"&":"?")+"_="+ut++)),f.ifModified&&(K.lastModified[o]&&w.setRequestHeader("If-Modified-Since",K.lastModified[o]),K.etag[o]&&w.setRequestHeader("If-None-Match",K.etag[o])),(f.data&&f.hasContent&&f.contentType!==!1||t.contentType)&&w.setRequestHeader("Content-Type",f.contentType),w.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+bt+"; q=0.01":""):f.accepts["*"]);for(c in f.headers)w.setRequestHeader(c,f.headers[c]);if(f.beforeSend&&(f.beforeSend.call(d,w,f)===!1||2===x))return w.abort();b="abort";for(c in{success:1,error:1,complete:1})w[c](f[c]);if(r=F(xt,f,t,w)){w.readyState=1,u&&p.trigger("ajaxSend",[w,f]),f.async&&f.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},f.timeout));try{x=1,r.send(m,n)}catch(_){if(!(2>x))throw _;n(-1,_)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return K.get(e,t,n,"json")},getScript:function(e,t){return K.get(e,void 0,t,"script")}}),K.each(["get","post"],function(e,t){K[t]=function(e,n,r,o){return K.isFunction(n)&&(o=o||r,r=n,n=void 0),K.ajax({url:e,type:t,dataType:o,data:n,success:r})}}),K._evalUrl=function(e){return K.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},K.fn.extend({wrapAll:function(e){var t;return K.isFunction(e)?this.each(function(t){K(this).wrapAll(e.call(this,t))}):(this[0]&&(t=K(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(K.isFunction(e)?function(t){K(this).wrapInner(e.call(this,t))}:function(){var t=K(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=K.isFunction(e);return this.each(function(n){K(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){K.nodeName(this,"body")||K(this).replaceWith(this.childNodes)}).end()}}),K.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},K.expr.filters.visible=function(e){return!K.expr.filters.hidden(e)};var kt=/%20/g,At=/\[\]$/,Mt=/\r?\n/g,zt=/^(?:submit|button|image|reset|file)$/i,jt=/^(?:input|select|textarea|keygen)/i;K.param=function(e,t){var n,r=[],o=function(e,t){t=K.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=K.ajaxSettings&&K.ajaxSettings.traditional),K.isArray(e)||e.jquery&&!K.isPlainObject(e))K.each(e,function(){o(this.name,this.value)});else for(n in e)I(n,e[n],t,o);return r.join("&").replace(kt,"+")},K.fn.extend({serialize:function(){return K.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=K.prop(this,"elements");return e?K.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!K(this).is(":disabled")&&jt.test(this.nodeName)&&!zt.test(e)&&(this.checked||!Ae.test(e))}).map(function(e,t){var n=K(this).val();return null==n?null:K.isArray(n)?K.map(n,function(e){return{name:t.name,value:e.replace(Mt,"\r\n")}}):{name:t.name,value:n.replace(Mt,"\r\n")}}).get()}}),K.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var Et=0,St={},Tt={0:200,1223:204},Nt=K.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in St)St[e]()}),G.cors=!!Nt&&"withCredentials"in Nt,G.ajax=Nt=!!Nt,K.ajaxTransport(function(e){var t;return G.cors||Nt&&!e.crossDomain?{send:function(n,r){var o,i=e.xhr(),a=++Et;if(i.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(o in e.xhrFields)i[o]=e.xhrFields[o];e.mimeType&&i.overrideMimeType&&i.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(o in n)i.setRequestHeader(o,n[o]);t=function(e){return function(){t&&(delete St[a],t=i.onload=i.onerror=null,"abort"===e?i.abort():"error"===e?r(i.status,i.statusText):r(Tt[i.status]||i.status,i.statusText,"string"==typeof i.responseText?{text:i.responseText}:void 0,i.getAllResponseHeaders()))}},i.onload=t(),i.onerror=t("error"),t=St[a]=t("abort");try{i.send(e.hasContent&&e.data||null)}catch(s){if(t)throw s}},abort:function(){t&&t()}}:void 0}),K.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return K.globalEval(e),e}}}),K.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),K.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,o){t=K("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&o("error"===e.type?404:200,e.type)}),J.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Ct=[],Ot=/(=)\?(?=&|$)|\?\?/;K.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ct.pop()||K.expando+"_"+ut++;return this[e]=!0,e}}),K.ajaxPrefilter("json jsonp",function(t,n,r){var o,i,a,s=t.jsonp!==!1&&(Ot.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ot.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(o=t.jsonpCallback=K.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Ot,"$1"+o):t.jsonp!==!1&&(t.url+=(ct.test(t.url)?"&":"?")+t.jsonp+"="+o),t.converters["script json"]=function(){return a||K.error(o+" was not called"),a[0]},t.dataTypes[0]="json",i=e[o],e[o]=function(){a=arguments},r.always(function(){e[o]=i,t[o]&&(t.jsonpCallback=n.jsonpCallback,Ct.push(o)),a&&K.isFunction(i)&&i(a[0]),a=i=void 0}),"script"):void 0}),K.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||J;var r=ae.exec(e),o=!n&&[];return r?[t.createElement(r[1])]:(r=K.buildFragment([e],t,o),o&&o.length&&K(o).remove(),K.merge([],r.childNodes))};var qt=K.fn.load;K.fn.load=function(e,t,n){if("string"!=typeof e&&qt)return qt.apply(this,arguments);var r,o,i,a=this,s=e.indexOf(" ");return s>=0&&(r=K.trim(e.slice(s)),e=e.slice(0,s)),K.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&K.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){i=arguments,a.html(r?K("<div>").append(K.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){a.each(n,i||[e.responseText,t,e])}),this},K.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){K.fn[t]=function(e){return this.on(t,e)}}),K.expr.filters.animated=function(e){return K.grep(K.timers,function(t){return e===t.elem}).length};var Dt=e.document.documentElement;K.offset={setOffset:function(e,t,n){var r,o,i,a,s,l,u,c=K.css(e,"position"),f=K(e),d={};"static"===c&&(e.style.position="relative"),s=f.offset(),i=K.css(e,"top"),l=K.css(e,"left"),u=("absolute"===c||"fixed"===c)&&(i+l).indexOf("auto")>-1,u?(r=f.position(),a=r.top,o=r.left):(a=parseFloat(i)||0,o=parseFloat(l)||0),K.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+o),"using"in t?t.using.call(e,d):f.css(d)}},K.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){K.offset.setOffset(this,e,t)});var t,n,r=this[0],o={top:0,left:0},i=r&&r.ownerDocument;if(i)return t=i.documentElement,K.contains(t,r)?(typeof r.getBoundingClientRect!==Me&&(o=r.getBoundingClientRect()),n=B(i),{top:o.top+n.pageYOffset-t.clientTop,left:o.left+n.pageXOffset-t.clientLeft}):o},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===K.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),K.nodeName(e[0],"html")||(r=e.offset()),r.top+=K.css(e[0],"borderTopWidth",!0),r.left+=K.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-K.css(n,"marginTop",!0),left:t.left-r.left-K.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Dt;e&&!K.nodeName(e,"html")&&"static"===K.css(e,"position");)e=e.offsetParent;return e||Dt})}}),K.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var r="pageYOffset"===n;K.fn[t]=function(o){return ve(this,function(t,o,i){var a=B(t);return void 0===i?a?a[n]:t[o]:void(a?a.scrollTo(r?e.pageXOffset:i,r?i:e.pageYOffset):t[o]=i)},t,o,arguments.length,null)}}),K.each(["top","left"],function(e,t){K.cssHooks[t]=_(G.pixelPosition,function(e,n){return n?(n=w(e,t),Ue.test(n)?K(e).position()[t]+"px":n):void 0})}),K.each({Height:"height",Width:"width"},function(e,t){K.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){K.fn[r]=function(r,o){var i=arguments.length&&(n||"boolean"!=typeof r),a=n||(r===!0||o===!0?"margin":"border");return ve(this,function(t,n,r){var o;return K.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===r?K.css(t,n,a):K.style(t,n,r,a)},t,i?r:void 0,i,null)}})}),K.fn.size=function(){return this.length},K.fn.andSelf=K.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return K});var Ft=e.jQuery,Lt=e.$;return K.noConflict=function(t){return e.$===K&&(e.$=Lt),t&&e.jQuery===K&&(e.jQuery=Ft),K},typeof t===Me&&(e.jQuery=e.$=K),K}),!function(){function e(e){return e&&(e.ownerDocument||e.document||e).documentElement}function t(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}function n(e,t){return t>e?-1:e>t?1:e>=t?0:0/0}function r(e){return null===e?0/0:+e}function o(e){return!isNaN(e)}function i(e){return{left:function(t,n,r,o){for(arguments.length<3&&(r=0),arguments.length<4&&(o=t.length);o>r;){var i=r+o>>>1;e(t[i],n)<0?r=i+1:o=i}return r},right:function(t,n,r,o){for(arguments.length<3&&(r=0),arguments.length<4&&(o=t.length);o>r;){var i=r+o>>>1;e(t[i],n)>0?o=i:r=i+1}return r}}}function a(e){return e.length}function s(e){for(var t=1;e*t%1;)t*=10;return t}function l(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function u(){this._=Object.create(null)}function c(e){return(e+="")===ga||e[0]===va?va+e:e}function f(e){return(e+="")[0]===va?e.slice(1):e}function d(e){return c(e)in this._}function p(e){return(e=c(e))in this._&&delete this._[e]}function h(){var e=[];for(var t in this._)e.push(f(t));return e}function g(){var e=0;for(var t in this._)++e;return e}function v(){for(var e in this._)return!1;return!0}function m(){this._=Object.create(null)}function y(e){return e}function x(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function b(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=ma.length;r>n;++n){var o=ma[n]+t;if(o in e)return o}}function w(){}function _(){}function k(e){function t(){for(var t,r=n,o=-1,i=r.length;++o<i;)(t=r[o].on)&&t.apply(this,arguments);return e}var n=[],r=new u;return t.on=function(t,o){var i,a=r.get(t);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,i=n.indexOf(a)).concat(n.slice(i+1)),r.remove(t)),o&&n.push(r.set(t,{on:o})),e)},t}function A(){na.event.preventDefault()}function M(){for(var e,t=na.event;e=t.sourceEvent;)t=e;return t}function z(e){for(var t=new _,n=0,r=arguments.length;++n<r;)t[arguments[n]]=k(t);return t.of=function(n,r){return function(o){try{var i=o.sourceEvent=na.event;o.target=e,na.event=o,t[o.type].apply(n,r)}finally{na.event=i}}},t}function j(e){return xa(e,ka),e}function E(e){return"function"==typeof e?e:function(){return ba(e,this)}}function S(e){return"function"==typeof e?e:function(){return wa(e,this)}}function T(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function o(){this.setAttribute(e,t)}function i(){this.setAttributeNS(e.space,e.local,t)}function a(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function s(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=na.ns.qualify(e),null==t?e.local?r:n:"function"==typeof t?e.local?s:a:e.local?i:o}function N(e){return e.trim().replace(/\s+/g," ")}function C(e){return new RegExp("(?:^|\\s+)"+na.requote(e)+"(?:\\s+|$)","g")}function O(e){return(e+"").trim().split(/^|\s+/)}function q(e,t){function n(){for(var n=-1;++n<o;)e[n](this,t)}function r(){for(var n=-1,r=t.apply(this,arguments);++n<o;)e[n](this,r)}e=O(e).map(D);var o=e.length;return"function"==typeof t?r:n}function D(e){var t=C(e);return function(n,r){if(o=n.classList)return r?o.add(e):o.remove(e);var o=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(o)||n.setAttribute("class",N(o+" "+e))):n.setAttribute("class",N(o.replace(t," ")))}}function F(e,t,n){function r(){this.style.removeProperty(e)}function o(){this.style.setProperty(e,t,n)}function i(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return null==t?r:"function"==typeof t?i:o}function L(e,t){function n(){delete this[e]}function r(){this[e]=t}function o(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?o:r}function P(e){function t(){var t=this.ownerDocument,n=this.namespaceURI;return n?t.createElementNS(n,e):t.createElement(e)}function n(){return this.ownerDocument.createElementNS(e.space,e.local)}return"function"==typeof e?e:(e=na.ns.qualify(e)).local?n:t}function R(){var e=this.parentNode;e&&e.removeChild(this)}function I(e){return{__data__:e}}function B(e){return function(){return _a(this,e)}}function U(e){return arguments.length||(e=n),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function V(e,t){for(var n=0,r=e.length;r>n;n++)for(var o,i=e[n],a=0,s=i.length;s>a;a++)(o=i[a])&&t(o,a,n);return e}function H(e){return xa(e,Ma),e}function Y(e){var t,n;return function(r,o,i){var a,s=e[i].update,l=s.length;for(i!=n&&(n=i,t=0),o>=t&&(t=o+1);!(a=s[t])&&++t<l;);return a}}function $(e,t,n){function r(){var t=this[a];t&&(this.removeEventListener(e,t,t.$),delete this[a])}function o(){var o=l(t,oa(arguments));r.call(this),this.addEventListener(e,this[a]=o,o.$=n),o._=t}function i(){var t,n=new RegExp("^__on([^.]+)"+na.requote(e)+"$");for(var r in this)if(t=r.match(n)){var o=this[r];this.removeEventListener(t[1],o,o.$),delete this[r]}}var a="__on"+e,s=e.indexOf("."),l=W;s>0&&(e=e.slice(0,s));var u=za.get(e);return u&&(e=u,l=X),s?t?o:r:t?w:i}function W(e,t){return function(n){var r=na.event;na.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{na.event=r}}}function X(e,t){var n=W(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}function Z(n){var r=".dragsuppress-"+ ++Ea,o="click"+r,i=na.select(t(n)).on("touchmove"+r,A).on("dragstart"+r,A).on("selectstart"+r,A);if(null==ja&&(ja="onselectstart"in n?!1:b(n.style,"userSelect")),ja){var a=e(n).style,s=a[ja];a[ja]="none"}return function(e){if(i.on(r,null),ja&&(a[ja]=s),e){var t=function(){i.on(o,null)};i.on(o,function(){A(),t()},!0),setTimeout(t,0)}}}function G(e,n){n.changedTouches&&(n=n.changedTouches[0]);var r=e.ownerSVGElement||e;if(r.createSVGPoint){var o=r.createSVGPoint();if(0>Sa){var i=t(e);if(i.scrollX||i.scrollY){r=na.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var a=r[0][0].getScreenCTM();Sa=!(a.f||a.e),r.remove()}}return Sa?(o.x=n.pageX,o.y=n.pageY):(o.x=n.clientX,o.y=n.clientY),o=o.matrixTransform(e.getScreenCTM().inverse()),[o.x,o.y]}var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}function J(){return na.event.changedTouches[0].identifier}function Q(e){return e>0?1:0>e?-1:0}function K(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function ee(e){return e>1?0:-1>e?Ca:Math.acos(e)}function te(e){return e>1?Da:-1>e?-Da:Math.asin(e)}function ne(e){return((e=Math.exp(e))-1/e)/2}function re(e){return((e=Math.exp(e))+1/e)/2}function oe(e){return((e=Math.exp(2*e))-1)/(e+1)}function ie(e){return(e=Math.sin(e/2))*e}function ae(){}function se(e,t,n){return this instanceof se?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof se?new se(e.h,e.s,e.l):we(""+e,_e,se):new se(e,t,n)}function le(e,t,n){function r(e){return e>360?e-=360:0>e&&(e+=360),60>e?i+(a-i)*e/60:180>e?a:240>e?i+(a-i)*(240-e)/60:i}function o(e){return Math.round(255*r(e))}var i,a;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,a=.5>=n?n*(1+t):n+t-n*t,i=2*n-a,new me(o(e+120),o(e),o(e-120))}function ue(e,t,n){return this instanceof ue?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof ue?new ue(e.h,e.c,e.l):e instanceof fe?pe(e.l,e.a,e.b):pe((e=ke((e=na.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new ue(e,t,n)}function ce(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new fe(n,Math.cos(e*=Fa)*t,Math.sin(e)*t)}function fe(e,t,n){return this instanceof fe?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof fe?new fe(e.l,e.a,e.b):e instanceof ue?ce(e.h,e.c,e.l):ke((e=me(e)).r,e.g,e.b):new fe(e,t,n)}function de(e,t,n){var r=(e+16)/116,o=r+t/500,i=r-n/200;return o=he(o)*Wa,r=he(r)*Xa,i=he(i)*Za,new me(ve(3.2404542*o-1.5371385*r-.4985314*i),ve(-.969266*o+1.8760108*r+.041556*i),ve(.0556434*o-.2040259*r+1.0572252*i))}function pe(e,t,n){return e>0?new ue(Math.atan2(n,t)*La,Math.sqrt(t*t+n*n),e):new ue(0/0,0/0,e)}function he(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ge(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ve(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function me(e,t,n){return this instanceof me?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof me?new me(e.r,e.g,e.b):we(""+e,me,le):new me(e,t,n)}function ye(e){return new me(e>>16,e>>8&255,255&e)}function xe(e){return ye(e)+""}function be(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function we(e,t,n){var r,o,i,a=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/i.exec(e))switch(o=r[2].split(","),r[1]){case"hsl":return n(parseFloat(o[0]),parseFloat(o[1])/100,parseFloat(o[2])/100);case"rgb":return t(Me(o[0]),Me(o[1]),Me(o[2]))}return(i=Qa.get(e.toLowerCase()))?t(i.r,i.g,i.b):(null==e||"#"!==e.charAt(0)||isNaN(i=parseInt(e.slice(1),16))||(4===e.length?(a=(3840&i)>>4,a=a>>4|a,s=240&i,s=s>>4|s,l=15&i,l=l<<4|l):7===e.length&&(a=(16711680&i)>>16,s=(65280&i)>>8,l=255&i)),t(a,s,l))}function _e(e,t,n){var r,o,i=Math.min(e/=255,t/=255,n/=255),a=Math.max(e,t,n),s=a-i,l=(a+i)/2;return s?(o=.5>l?s/(a+i):s/(2-a-i),r=e==a?(t-n)/s+(n>t?6:0):t==a?(n-e)/s+2:(e-t)/s+4,r*=60):(r=0/0,o=l>0&&1>l?0:r),new se(r,o,l)}function ke(e,t,n){e=Ae(e),t=Ae(t),n=Ae(n);var r=ge((.4124564*e+.3575761*t+.1804375*n)/Wa),o=ge((.2126729*e+.7151522*t+.072175*n)/Xa),i=ge((.0193339*e+.119192*t+.9503041*n)/Za);return fe(116*o-16,500*(r-o),200*(o-i))}function Ae(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Me(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function ze(e){return"function"==typeof e?e:function(){return e}}function je(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Ee(t,n,e,r)}}function Ee(e,t,n,r){function o(){var e,t=l.status;if(!t&&Te(l)||t>=200&&300>t||304===t){try{e=n.call(i,l)}catch(r){return void a.error.call(i,r)}a.load.call(i,e)}else a.error.call(i,l)}var i={},a=na.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,u=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(e)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=o:l.onreadystatechange=function(){l.readyState>3&&o()},l.onprogress=function(e){var t=na.event;na.event=e;try{a.progress.call(i,l)}finally{na.event=t}},i.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?s[e]:(null==t?delete s[e]:s[e]=t+"",i)},i.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",i):t},i.responseType=function(e){return arguments.length?(u=e,i):u},i.response=function(e){return n=e,i},["get","post"].forEach(function(e){i[e]=function(){return i.send.apply(i,[e].concat(oa(arguments)))}}),i.send=function(n,r,o){if(2===arguments.length&&"function"==typeof r&&(o=r,r=null),l.open(n,e,!0),null==t||"accept"in s||(s.accept=t+",*/*"),l.setRequestHeader)for(var c in s)l.setRequestHeader(c,s[c]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=u&&(l.responseType=u),null!=o&&i.on("error",o).on("load",function(e){o(null,e)}),a.beforesend.call(i,l),l.send(null==r?null:r),i},i.abort=function(){return l.abort(),i},na.rebind(i,a,"on"),null==r?i:i.get(Se(r))}function Se(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function Te(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function Ne(){var e=Ce(),t=Oe()-e;t>24?(isFinite(t)&&(clearTimeout(ns),ns=setTimeout(Ne,t)),ts=0):(ts=1,os(Ne))}function Ce(){var e=Date.now();for(rs=Ka;rs;)e>=rs.t&&(rs.f=rs.c(e-rs.t)),rs=rs.n;return e}function Oe(){for(var e,t=Ka,n=1/0;t;)t.f?t=e?e.n=t.n:Ka=t.n:(t.t<n&&(n=t.t),t=(e=t).n);return es=e,n}function qe(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1);

}function De(e,t){var n=Math.pow(10,3*ha(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Fe(e){var t=e.decimal,n=e.thousands,r=e.grouping,o=e.currency,i=r&&n?function(e,t){for(var o=e.length,i=[],a=0,s=r[0],l=0;o>0&&s>0&&(l+s+1>t&&(s=Math.max(1,t-l)),i.push(e.substring(o-=s,o+s)),!((l+=s+1)>t));)s=r[a=(a+1)%r.length];return i.reverse().join(n)}:y;return function(e){var n=as.exec(e),r=n[1]||" ",a=n[2]||">",s=n[3]||"-",l=n[4]||"",u=n[5],c=+n[6],f=n[7],d=n[8],p=n[9],h=1,g="",v="",m=!1,y=!0;switch(d&&(d=+d.substring(1)),(u||"0"===r&&"="===a)&&(u=r="0",a="="),p){case"n":f=!0,p="g";break;case"%":h=100,v="%",p="f";break;case"p":h=100,v="%",p="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+p.toLowerCase());case"c":y=!1;case"d":m=!0,d=0;break;case"s":h=-1,p="r"}"$"===l&&(g=o[0],v=o[1]),"r"!=p||d||(p="g"),null!=d&&("g"==p?d=Math.max(1,Math.min(21,d)):("e"==p||"f"==p)&&(d=Math.max(0,Math.min(20,d)))),p=ss.get(p)||Le;var x=u&&f;return function(e){var n=v;if(m&&e%1)return"";var o=0>e||0===e&&0>1/e?(e=-e,"-"):"-"===s?"":s;if(0>h){var l=na.formatPrefix(e,d);e=l.scale(e),n=l.symbol+v}else e*=h;e=p(e,d);var b,w,_=e.lastIndexOf(".");if(0>_){var k=y?e.lastIndexOf("e"):-1;0>k?(b=e,w=""):(b=e.substring(0,k),w=e.substring(k))}else b=e.substring(0,_),w=t+e.substring(_+1);!u&&f&&(b=i(b,1/0));var A=g.length+b.length+w.length+(x?0:o.length),M=c>A?new Array(A=c-A+1).join(r):"";return x&&(b=i(M+b,M.length?c-w.length:1/0)),o+=g,e=b+w,("<"===a?o+e+M:">"===a?M+o+e:"^"===a?M.substring(0,A>>=1)+o+e+M.substring(A):o+(x?e:M+e))+n}}}function Le(e){return e+""}function Pe(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Re(e,t,n){function r(t){var n=e(t),r=i(n,1);return r-t>t-n?n:r}function o(n){return t(n=e(new us(n-1)),1),n}function i(e,n){return t(e=new us(+e),n),e}function a(e,r,i){var a=o(e),s=[];if(i>1)for(;r>a;)n(a)%i||s.push(new Date(+a)),t(a,1);else for(;r>a;)s.push(new Date(+a)),t(a,1);return s}function s(e,t,n){try{us=Pe;var r=new Pe;return r._=e,a(r,t,n)}finally{us=Date}}e.floor=e,e.round=r,e.ceil=o,e.offset=i,e.range=a;var l=e.utc=Ie(e);return l.floor=l,l.round=Ie(r),l.ceil=Ie(o),l.offset=Ie(i),l.range=s,e}function Ie(e){return function(t,n){try{us=Pe;var r=new Pe;return r._=t,e(r,n)._}finally{us=Date}}}function Be(e){function t(e){function t(t){for(var n,o,i,a=[],s=-1,l=0;++s<r;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(o=fs[n=e.charAt(++s)])&&(n=e.charAt(++s)),(i=E[n])&&(n=i(t,null==o?"e"===n?" ":"0":o)),a.push(n),l=s+1);return a.push(e.slice(l,s)),a.join("")}var r=e.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},o=n(r,e,t,0);if(o!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&us!==Pe,a=new(i?Pe:us);return"j"in r?a.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(a.setFullYear(r.y,0,1),a.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(a.getDay()+5)%7:r.w+7*r.U-(a.getDay()+6)%7)):a.setFullYear(r.y,r.m,r.d),a.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),i?a._:a},t.toString=function(){return e},t}function n(e,t,n,r){for(var o,i,a,s=0,l=t.length,u=n.length;l>s;){if(r>=u)return-1;if(o=t.charCodeAt(s++),37===o){if(a=t.charAt(s++),i=S[a in fs?t.charAt(s++):a],!i||(r=i(e,n,r))<0)return-1}else if(o!=n.charCodeAt(r++))return-1}return r}function r(e,t,n){_.lastIndex=0;var r=_.exec(t.slice(n));return r?(e.w=k.get(r[0].toLowerCase()),n+r[0].length):-1}function o(e,t,n){b.lastIndex=0;var r=b.exec(t.slice(n));return r?(e.w=w.get(r[0].toLowerCase()),n+r[0].length):-1}function i(e,t,n){z.lastIndex=0;var r=z.exec(t.slice(n));return r?(e.m=j.get(r[0].toLowerCase()),n+r[0].length):-1}function a(e,t,n){A.lastIndex=0;var r=A.exec(t.slice(n));return r?(e.m=M.get(r[0].toLowerCase()),n+r[0].length):-1}function s(e,t,r){return n(e,E.c.toString(),t,r)}function l(e,t,r){return n(e,E.x.toString(),t,r)}function u(e,t,r){return n(e,E.X.toString(),t,r)}function c(e,t,n){var r=x.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}var f=e.dateTime,d=e.date,p=e.time,h=e.periods,g=e.days,v=e.shortDays,m=e.months,y=e.shortMonths;t.utc=function(e){function n(e){try{us=Pe;var t=new us;return t._=e,r(t)}finally{us=Date}}var r=t(e);return n.parse=function(e){try{us=Pe;var t=r.parse(e);return t&&t._}finally{us=Date}},n.toString=r.toString,n},t.multi=t.utc.multi=st;var x=na.map(),b=Ve(g),w=He(g),_=Ve(v),k=He(v),A=Ve(m),M=He(m),z=Ve(y),j=He(y);h.forEach(function(e,t){x.set(e.toLowerCase(),t)});var E={a:function(e){return v[e.getDay()]},A:function(e){return g[e.getDay()]},b:function(e){return y[e.getMonth()]},B:function(e){return m[e.getMonth()]},c:t(f),d:function(e,t){return Ue(e.getDate(),t,2)},e:function(e,t){return Ue(e.getDate(),t,2)},H:function(e,t){return Ue(e.getHours(),t,2)},I:function(e,t){return Ue(e.getHours()%12||12,t,2)},j:function(e,t){return Ue(1+ls.dayOfYear(e),t,3)},L:function(e,t){return Ue(e.getMilliseconds(),t,3)},m:function(e,t){return Ue(e.getMonth()+1,t,2)},M:function(e,t){return Ue(e.getMinutes(),t,2)},p:function(e){return h[+(e.getHours()>=12)]},S:function(e,t){return Ue(e.getSeconds(),t,2)},U:function(e,t){return Ue(ls.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Ue(ls.mondayOfYear(e),t,2)},x:t(d),X:t(p),y:function(e,t){return Ue(e.getFullYear()%100,t,2)},Y:function(e,t){return Ue(e.getFullYear()%1e4,t,4)},Z:it,"%":function(){return"%"}},S={a:r,A:o,b:i,B:a,c:s,d:Ke,e:Ke,H:tt,I:tt,j:et,L:ot,m:Qe,M:nt,p:c,S:rt,U:$e,w:Ye,W:We,x:l,X:u,y:Ze,Y:Xe,Z:Ge,"%":at};return t}function Ue(e,t,n){var r=0>e?"-":"",o=(r?-e:e)+"",i=o.length;return r+(n>i?new Array(n-i+1).join(t)+o:o)}function Ve(e){return new RegExp("^(?:"+e.map(na.requote).join("|")+")","i")}function He(e){for(var t=new u,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Ye(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function $e(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function We(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function Xe(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Ze(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n,n+2));return r?(e.y=Je(+r[0]),n+r[0].length):-1}function Ge(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Je(e){return e+(e>68?1900:2e3)}function Qe(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Ke(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function et(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function tt(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function nt(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function rt(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ot(e,t,n){ds.lastIndex=0;var r=ds.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function it(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=ha(t)/60|0,o=ha(t)%60;return n+Ue(r,"0",2)+Ue(o,"0",2)}function at(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function st(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}function lt(){}function ut(e,t,n){var r=n.s=e+t,o=r-e,i=r-o;n.t=e-i+(t-o)}function ct(e,t){e&&ms.hasOwnProperty(e.type)&&ms[e.type](e,t)}function ft(e,t,n){var r,o=-1,i=e.length-n;for(t.lineStart();++o<i;)r=e[o],t.point(r[0],r[1],r[2]);t.lineEnd()}function dt(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)ft(e[n],t,1);t.polygonEnd()}function pt(){function e(e,t){e*=Fa,t=t*Fa/2+Ca/4;var n=e-r,a=n>=0?1:-1,s=a*n,l=Math.cos(t),u=Math.sin(t),c=i*u,f=o*l+c*Math.cos(s),d=c*a*Math.sin(s);xs.add(Math.atan2(d,f)),r=e,o=l,i=u}var t,n,r,o,i;bs.point=function(a,s){bs.point=e,r=(t=a)*Fa,o=Math.cos(s=(n=s)*Fa/2+Ca/4),i=Math.sin(s)},bs.lineEnd=function(){e(t,n)}}function ht(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function gt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function vt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function mt(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function yt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function xt(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function bt(e){return[Math.atan2(e[1],e[0]),te(e[2])]}function wt(e,t){return ha(e[0]-t[0])<Ta&&ha(e[1]-t[1])<Ta}function _t(e,t){e*=Fa;var n=Math.cos(t*=Fa);kt(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function kt(e,t,n){++ws,ks+=(e-ks)/ws,As+=(t-As)/ws,Ms+=(n-Ms)/ws}function At(){function e(e,o){e*=Fa;var i=Math.cos(o*=Fa),a=i*Math.cos(e),s=i*Math.sin(e),l=Math.sin(o),u=Math.atan2(Math.sqrt((u=n*l-r*s)*u+(u=r*a-t*l)*u+(u=t*s-n*a)*u),t*a+n*s+r*l);_s+=u,zs+=u*(t+(t=a)),js+=u*(n+(n=s)),Es+=u*(r+(r=l)),kt(t,n,r)}var t,n,r;Cs.point=function(o,i){o*=Fa;var a=Math.cos(i*=Fa);t=a*Math.cos(o),n=a*Math.sin(o),r=Math.sin(i),Cs.point=e,kt(t,n,r)}}function Mt(){Cs.point=_t}function zt(){function e(e,t){e*=Fa;var n=Math.cos(t*=Fa),a=n*Math.cos(e),s=n*Math.sin(e),l=Math.sin(t),u=o*l-i*s,c=i*a-r*l,f=r*s-o*a,d=Math.sqrt(u*u+c*c+f*f),p=r*a+o*s+i*l,h=d&&-ee(p)/d,g=Math.atan2(d,p);Ss+=h*u,Ts+=h*c,Ns+=h*f,_s+=g,zs+=g*(r+(r=a)),js+=g*(o+(o=s)),Es+=g*(i+(i=l)),kt(r,o,i)}var t,n,r,o,i;Cs.point=function(a,s){t=a,n=s,Cs.point=e,a*=Fa;var l=Math.cos(s*=Fa);r=l*Math.cos(a),o=l*Math.sin(a),i=Math.sin(s),kt(r,o,i)},Cs.lineEnd=function(){e(t,n),Cs.lineEnd=Mt,Cs.point=_t}}function jt(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function Et(){return!0}function St(e,t,n,r,o){var i=[],a=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(wt(n,r)){o.lineStart();for(var s=0;t>s;++s)o.point((n=e[s])[0],n[1]);return void o.lineEnd()}var l=new Nt(n,e,null,!0),u=new Nt(n,null,l,!1);l.o=u,i.push(l),a.push(u),l=new Nt(r,e,null,!1),u=new Nt(r,null,l,!0),l.o=u,i.push(l),a.push(u)}}),a.sort(t),Tt(i),Tt(a),i.length){for(var s=0,l=n,u=a.length;u>s;++s)a[s].e=l=!l;for(var c,f,d=i[0];;){for(var p=d,h=!0;p.v;)if((p=p.n)===d)return;c=p.z,o.lineStart();do{if(p.v=p.o.v=!0,p.e){if(h)for(var s=0,u=c.length;u>s;++s)o.point((f=c[s])[0],f[1]);else r(p.x,p.n.x,1,o);p=p.n}else{if(h){c=p.p.z;for(var s=c.length-1;s>=0;--s)o.point((f=c[s])[0],f[1])}else r(p.x,p.p.x,-1,o);p=p.p}p=p.o,c=p.z,h=!h}while(!p.v);o.lineEnd()}}}function Tt(e){if(t=e.length){for(var t,n,r=0,o=e[0];++r<t;)o.n=n=e[r],n.p=o,o=n;o.n=n=e[0],n.p=o}}function Nt(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ct(e,t,n,r){return function(o,i){function a(t,n){var r=o(t,n);e(t=r[0],n=r[1])&&i.point(t,n)}function s(e,t){var n=o(e,t);v.point(n[0],n[1])}function l(){y.point=s,v.lineStart()}function u(){y.point=a,v.lineEnd()}function c(e,t){g.push([e,t]);var n=o(e,t);b.point(n[0],n[1])}function f(){b.lineStart(),g=[]}function d(){c(g[0][0],g[0][1]),b.lineEnd();var e,t=b.clean(),n=x.buffer(),r=n.length;if(g.pop(),h.push(g),g=null,r)if(1&t){e=n[0];var o,r=e.length-1,a=-1;if(r>0){for(w||(i.polygonStart(),w=!0),i.lineStart();++a<r;)i.point((o=e[a])[0],o[1]);i.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),p.push(n.filter(Ot))}var p,h,g,v=t(i),m=o.invert(r[0],r[1]),y={point:a,lineStart:l,lineEnd:u,polygonStart:function(){y.point=c,y.lineStart=f,y.lineEnd=d,p=[],h=[]},polygonEnd:function(){y.point=a,y.lineStart=l,y.lineEnd=u,p=na.merge(p);var e=Rt(m,h);p.length?(w||(i.polygonStart(),w=!0),St(p,Dt,e,n,i)):e&&(w||(i.polygonStart(),w=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),w&&(i.polygonEnd(),w=!1),p=h=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}},x=qt(),b=t(x),w=!1;return y}}function Ot(e){return e.length>1}function qt(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:w,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Dt(e,t){return((e=e.x)[0]<0?e[1]-Da-Ta:Da-e[1])-((t=t.x)[0]<0?t[1]-Da-Ta:Da-t[1])}function Ft(e){var t,n=0/0,r=0/0,o=0/0;return{lineStart:function(){e.lineStart(),t=1},point:function(i,a){var s=i>0?Ca:-Ca,l=ha(i-n);ha(l-Ca)<Ta?(e.point(n,r=(r+a)/2>0?Da:-Da),e.point(o,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(i,r),t=0):o!==s&&l>=Ca&&(ha(n-o)<Ta&&(n-=o*Ta),ha(i-s)<Ta&&(i-=s*Ta),r=Lt(n,r,i,a),e.point(o,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=i,r=a),o=s},lineEnd:function(){e.lineEnd(),n=r=0/0},clean:function(){return 2-t}}}function Lt(e,t,n,r){var o,i,a=Math.sin(e-n);return ha(a)>Ta?Math.atan((Math.sin(t)*(i=Math.cos(r))*Math.sin(n)-Math.sin(r)*(o=Math.cos(t))*Math.sin(e))/(o*i*a)):(t+r)/2}function Pt(e,t,n,r){var o;if(null==e)o=n*Da,r.point(-Ca,o),r.point(0,o),r.point(Ca,o),r.point(Ca,0),r.point(Ca,-o),r.point(0,-o),r.point(-Ca,-o),r.point(-Ca,0),r.point(-Ca,o);else if(ha(e[0]-t[0])>Ta){var i=e[0]<t[0]?Ca:-Ca;o=n*i/2,r.point(-i,o),r.point(0,o),r.point(i,o)}else r.point(t[0],t[1])}function Rt(e,t){var n=e[0],r=e[1],o=[Math.sin(n),-Math.cos(n),0],i=0,a=0;xs.reset();for(var s=0,l=t.length;l>s;++s){var u=t[s],c=u.length;if(c)for(var f=u[0],d=f[0],p=f[1]/2+Ca/4,h=Math.sin(p),g=Math.cos(p),v=1;;){v===c&&(v=0),e=u[v];var m=e[0],y=e[1]/2+Ca/4,x=Math.sin(y),b=Math.cos(y),w=m-d,_=w>=0?1:-1,k=_*w,A=k>Ca,M=h*x;if(xs.add(Math.atan2(M*_*Math.sin(k),g*b+M*Math.cos(k))),i+=A?w+_*Oa:w,A^d>=n^m>=n){var z=vt(ht(f),ht(e));xt(z);var j=vt(o,z);xt(j);var E=(A^w>=0?-1:1)*te(j[2]);(r>E||r===E&&(z[0]||z[1]))&&(a+=A^w>=0?1:-1)}if(!v++)break;d=m,h=x,g=b,f=e}}return(-Ta>i||Ta>i&&0>xs)^1&a}function It(e){function t(e,t){return Math.cos(e)*Math.cos(t)>i}function n(e){var n,i,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(f,d){var p,h=[f,d],g=t(f,d),v=a?g?0:o(f,d):g?o(f+(0>f?Ca:-Ca),d):0;if(!n&&(u=l=g)&&e.lineStart(),g!==l&&(p=r(n,h),(wt(n,p)||wt(h,p))&&(h[0]+=Ta,h[1]+=Ta,g=t(h[0],h[1]))),g!==l)c=0,g?(e.lineStart(),p=r(h,n),e.point(p[0],p[1])):(p=r(n,h),e.point(p[0],p[1]),e.lineEnd()),n=p;else if(s&&n&&a^g){var m;v&i||!(m=r(h,n,!0))||(c=0,a?(e.lineStart(),e.point(m[0][0],m[0][1]),e.point(m[1][0],m[1][1]),e.lineEnd()):(e.point(m[1][0],m[1][1]),e.lineEnd(),e.lineStart(),e.point(m[0][0],m[0][1])))}!g||n&&wt(n,h)||e.point(h[0],h[1]),n=h,l=g,i=v},lineEnd:function(){l&&e.lineEnd(),n=null},clean:function(){return c|(u&&l)<<1}}}function r(e,t,n){var r=ht(e),o=ht(t),a=[1,0,0],s=vt(r,o),l=gt(s,s),u=s[0],c=l-u*u;if(!c)return!n&&e;var f=i*l/c,d=-i*u/c,p=vt(a,s),h=yt(a,f),g=yt(s,d);mt(h,g);var v=p,m=gt(h,v),y=gt(v,v),x=m*m-y*(gt(h,h)-1);if(!(0>x)){var b=Math.sqrt(x),w=yt(v,(-m-b)/y);if(mt(w,h),w=bt(w),!n)return w;var _,k=e[0],A=t[0],M=e[1],z=t[1];k>A&&(_=k,k=A,A=_);var j=A-k,E=ha(j-Ca)<Ta,S=E||Ta>j;if(!E&&M>z&&(_=M,M=z,z=_),S?E?M+z>0^w[1]<(ha(w[0]-k)<Ta?M:z):M<=w[1]&&w[1]<=z:j>Ca^(k<=w[0]&&w[0]<=A)){var T=yt(v,(-m+b)/y);return mt(T,h),[w,bt(T)]}}}function o(t,n){var r=a?e:Ca-e,o=0;return-r>t?o|=1:t>r&&(o|=2),-r>n?o|=4:n>r&&(o|=8),o}var i=Math.cos(e),a=i>0,s=ha(i)>Ta,l=hn(e,6*Fa);return Ct(t,n,l,a?[0,-e]:[-Ca,e-Ca])}function Bt(e,t,n,r){return function(o){var i,a=o.a,s=o.b,l=a.x,u=a.y,c=s.x,f=s.y,d=0,p=1,h=c-l,g=f-u;if(i=e-l,h||!(i>0)){if(i/=h,0>h){if(d>i)return;p>i&&(p=i)}else if(h>0){if(i>p)return;i>d&&(d=i)}if(i=n-l,h||!(0>i)){if(i/=h,0>h){if(i>p)return;i>d&&(d=i)}else if(h>0){if(d>i)return;p>i&&(p=i)}if(i=t-u,g||!(i>0)){if(i/=g,0>g){if(d>i)return;p>i&&(p=i)}else if(g>0){if(i>p)return;i>d&&(d=i)}if(i=r-u,g||!(0>i)){if(i/=g,0>g){if(i>p)return;i>d&&(d=i)}else if(g>0){if(d>i)return;p>i&&(p=i)}return d>0&&(o.a={x:l+d*h,y:u+d*g}),1>p&&(o.b={x:l+p*h,y:u+p*g}),o}}}}}}function Ut(e,t,n,r){function o(r,o){return ha(r[0]-e)<Ta?o>0?0:3:ha(r[0]-n)<Ta?o>0?2:1:ha(r[1]-t)<Ta?o>0?1:0:o>0?3:2}function i(e,t){return a(e.x,t.x)}function a(e,t){var n=o(e,1),r=o(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(s){function l(e){for(var t=0,n=v.length,r=e[1],o=0;n>o;++o)for(var i,a=1,s=v[o],l=s.length,u=s[0];l>a;++a)i=s[a],u[1]<=r?i[1]>r&&K(u,i,e)>0&&++t:i[1]<=r&&K(u,i,e)<0&&--t,u=i;return 0!==t}function u(i,s,l,u){var c=0,f=0;if(null==i||(c=o(i,l))!==(f=o(s,l))||a(i,s)<0^l>0){do u.point(0===c||3===c?e:n,c>1?r:t);while((c=(c+l+4)%4)!==f)}else u.point(s[0],s[1])}function c(o,i){return o>=e&&n>=o&&i>=t&&r>=i}function f(e,t){c(e,t)&&s.point(e,t)}function d(){S.point=h,v&&v.push(m=[]),A=!0,k=!1,w=_=0/0}function p(){g&&(h(y,x),b&&k&&j.rejoin(),g.push(j.buffer())),S.point=f,k&&s.lineEnd()}function h(e,t){e=Math.max(-qs,Math.min(qs,e)),t=Math.max(-qs,Math.min(qs,t));var n=c(e,t);if(v&&m.push([e,t]),A)y=e,x=t,b=n,A=!1,n&&(s.lineStart(),s.point(e,t));else if(n&&k)s.point(e,t);else{var r={a:{x:w,y:_},b:{x:e,y:t}};E(r)?(k||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),M=!1):n&&(s.lineStart(),s.point(e,t),M=!1)}w=e,_=t,k=n}var g,v,m,y,x,b,w,_,k,A,M,z=s,j=qt(),E=Bt(e,t,n,r),S={point:f,lineStart:d,lineEnd:p,polygonStart:function(){s=j,g=[],v=[],M=!0},polygonEnd:function(){s=z,g=na.merge(g);var t=l([e,r]),n=M&&t,o=g.length;(n||o)&&(s.polygonStart(),n&&(s.lineStart(),u(null,null,1,s),s.lineEnd()),o&&St(g,i,t,u,s),s.polygonEnd()),g=v=m=null}};return S}}function Vt(e){var t=0,n=Ca/3,r=an(e),o=r(t,n);return o.parallels=function(e){return arguments.length?r(t=e[0]*Ca/180,n=e[1]*Ca/180):[t/Ca*180,n/Ca*180]},o}function Ht(e,t){function n(e,t){var n=Math.sqrt(i-2*o*Math.sin(t))/o;return[n*Math.sin(e*=o),a-n*Math.cos(e)]}var r=Math.sin(e),o=(r+Math.sin(t))/2,i=1+r*(2*o-r),a=Math.sqrt(i)/o;return n.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/o,te((i-(e*e+n*n)*o*o)/(2*o))]},n}function Yt(){function e(e,t){Fs+=o*e-r*t,r=e,o=t}var t,n,r,o;Bs.point=function(i,a){Bs.point=e,t=r=i,n=o=a},Bs.lineEnd=function(){e(t,n)}}function $t(e,t){Ls>e&&(Ls=e),e>Rs&&(Rs=e),Ps>t&&(Ps=t),t>Is&&(Is=t)}function Wt(){function e(e,t){a.push("M",e,",",t,i)}function t(e,t){a.push("M",e,",",t),s.point=n}function n(e,t){a.push("L",e,",",t)}function r(){s.point=e}function o(){a.push("Z")}var i=Xt(4.5),a=[],s={point:e,lineStart:function(){s.point=t},lineEnd:r,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=r,s.point=e},pointRadius:function(e){return i=Xt(e),s},result:function(){if(a.length){var e=a.join("");return a=[],e}}};return s}function Xt(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Zt(e,t){ks+=e,As+=t,++Ms}function Gt(){function e(e,r){var o=e-t,i=r-n,a=Math.sqrt(o*o+i*i);zs+=a*(t+e)/2,js+=a*(n+r)/2,Es+=a,Zt(t=e,n=r)}var t,n;Vs.point=function(r,o){Vs.point=e,Zt(t=r,n=o)}}function Jt(){Vs.point=Zt}function Qt(){function e(e,t){var n=e-r,i=t-o,a=Math.sqrt(n*n+i*i);zs+=a*(r+e)/2,js+=a*(o+t)/2,Es+=a,a=o*e-r*t,Ss+=a*(r+e),Ts+=a*(o+t),Ns+=3*a,Zt(r=e,o=t)}var t,n,r,o;Vs.point=function(i,a){Vs.point=e,Zt(t=r=i,n=o=a)},Vs.lineEnd=function(){e(t,n)}}function Kt(e){function t(t,n){e.moveTo(t+a,n),e.arc(t,n,a,0,Oa)}function n(t,n){e.moveTo(t,n),s.point=r}function r(t,n){e.lineTo(t,n)}function o(){s.point=t}function i(){e.closePath()}var a=4.5,s={point:t,lineStart:function(){s.point=n},lineEnd:o,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=o,s.point=t},pointRadius:function(e){return a=e,s},result:w};return s}function en(e){function t(e){return(s?r:n)(e)}function n(t){return rn(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function r(t){function n(n,r){n=e(n,r),t.point(n[0],n[1])}function r(){x=0/0,A.point=i,t.lineStart()}function i(n,r){var i=ht([n,r]),a=e(n,r);o(x,b,y,w,_,k,x=a[0],b=a[1],y=n,w=i[0],_=i[1],k=i[2],s,t),t.point(x,b)}function a(){A.point=n,t.lineEnd()}function l(){r(),A.point=u,A.lineEnd=c}function u(e,t){i(f=e,d=t),p=x,h=b,g=w,v=_,m=k,A.point=i}function c(){o(x,b,y,w,_,k,p,h,f,g,v,m,s,t),A.lineEnd=a,a()}var f,d,p,h,g,v,m,y,x,b,w,_,k,A={point:n,lineStart:r,lineEnd:a,polygonStart:function(){t.polygonStart(),A.lineStart=l},polygonEnd:function(){t.polygonEnd(),A.lineStart=r}};return A}function o(t,n,r,s,l,u,c,f,d,p,h,g,v,m){var y=c-t,x=f-n,b=y*y+x*x;if(b>4*i&&v--){var w=s+p,_=l+h,k=u+g,A=Math.sqrt(w*w+_*_+k*k),M=Math.asin(k/=A),z=ha(ha(k)-1)<Ta||ha(r-d)<Ta?(r+d)/2:Math.atan2(_,w),j=e(z,M),E=j[0],S=j[1],T=E-t,N=S-n,C=x*T-y*N;(C*C/b>i||ha((y*T+x*N)/b-.5)>.3||a>s*p+l*h+u*g)&&(o(t,n,r,s,l,u,E,S,z,w/=A,_/=A,k,v,m),m.point(E,S),o(E,S,z,w,_,k,c,f,d,p,h,g,v,m))}}var i=.5,a=Math.cos(30*Fa),s=16;return t.precision=function(e){return arguments.length?(s=(i=e*e)>0&&16,t):Math.sqrt(i)},t}function tn(e){var t=en(function(t,n){return e([t*La,n*La])});return function(e){return sn(t(e))}}function nn(e){this.stream=e}function rn(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function on(e){return an(function(){return e})()}function an(e){function t(e){return e=s(e[0]*Fa,e[1]*Fa),[e[0]*d+l,u-e[1]*d]}function n(e){return e=s.invert((e[0]-l)/d,(u-e[1])/d),e&&[e[0]*La,e[1]*La]}function r(){s=jt(a=cn(m,x,b),i);var e=i(g,v);return l=p-e[0]*d,u=h+e[1]*d,o()}function o(){return c&&(c.valid=!1,c=null),t}var i,a,s,l,u,c,f=en(function(e,t){return e=i(e,t),[e[0]*d+l,u-e[1]*d]}),d=150,p=480,h=250,g=0,v=0,m=0,x=0,b=0,w=Os,_=y,k=null,A=null;return t.stream=function(e){return c&&(c.valid=!1),c=sn(w(a,f(_(e)))),c.valid=!0,c},t.clipAngle=function(e){return arguments.length?(w=null==e?(k=e,Os):It((k=+e)*Fa),o()):k},t.clipExtent=function(e){return arguments.length?(A=e,_=e?Ut(e[0][0],e[0][1],e[1][0],e[1][1]):y,o()):A},t.scale=function(e){return arguments.length?(d=+e,r()):d},t.translate=function(e){return arguments.length?(p=+e[0],h=+e[1],r()):[p,h]},t.center=function(e){return arguments.length?(g=e[0]%360*Fa,v=e[1]%360*Fa,r()):[g*La,v*La]},t.rotate=function(e){return arguments.length?(m=e[0]%360*Fa,x=e[1]%360*Fa,b=e.length>2?e[2]%360*Fa:0,r()):[m*La,x*La,b*La]},na.rebind(t,f,"precision"),function(){return i=e.apply(this,arguments),t.invert=i.invert&&n,r()}}function sn(e){return rn(e,function(t,n){e.point(t*Fa,n*Fa)})}function ln(e,t){return[e,t]}function un(e,t){return[e>Ca?e-Oa:-Ca>e?e+Oa:e,t]}function cn(e,t,n){return e?t||n?jt(dn(e),pn(t,n)):dn(e):t||n?pn(t,n):un}function fn(e){return function(t,n){return t+=e,[t>Ca?t-Oa:-Ca>t?t+Oa:t,n]}}function dn(e){var t=fn(e);return t.invert=fn(-e),t}function pn(e,t){function n(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*r+s*o;return[Math.atan2(l*i-c*a,s*r-u*o),te(c*i+l*a)]}var r=Math.cos(e),o=Math.sin(e),i=Math.cos(t),a=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*i-l*a;return[Math.atan2(l*i+u*a,s*r+c*o),te(c*r-s*o)]},n}function hn(e,t){var n=Math.cos(e),r=Math.sin(e);return function(o,i,a,s){var l=a*t;null!=o?(o=gn(n,o),i=gn(n,i),(a>0?i>o:o>i)&&(o+=a*Oa)):(o=e+a*Oa,i=e-.5*l);for(var u,c=o;a>0?c>i:i>c;c-=l)s.point((u=bt([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],u[1])}}function gn(e,t){var n=ht(t);n[0]-=e,xt(n);var r=ee(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Ta)%(2*Math.PI)}function vn(e,t,n){var r=na.range(e,t-Ta,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function mn(e,t,n){var r=na.range(e,t-Ta,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function yn(e){return e.source}function xn(e){return e.target}function bn(e,t,n,r){var o=Math.cos(t),i=Math.sin(t),a=Math.cos(r),s=Math.sin(r),l=o*Math.cos(e),u=o*Math.sin(e),c=a*Math.cos(n),f=a*Math.sin(n),d=2*Math.asin(Math.sqrt(ie(r-t)+o*a*ie(n-e))),p=1/Math.sin(d),h=d?function(e){var t=Math.sin(e*=d)*p,n=Math.sin(d-e)*p,r=n*l+t*c,o=n*u+t*f,a=n*i+t*s;return[Math.atan2(o,r)*La,Math.atan2(a,Math.sqrt(r*r+o*o))*La]}:function(){return[e*La,t*La]};return h.distance=d,h}function wn(){function e(e,o){var i=Math.sin(o*=Fa),a=Math.cos(o),s=ha((e*=Fa)-t),l=Math.cos(s);Hs+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=r*i-n*a*l)*s),n*i+r*a*l),t=e,n=i,r=a}var t,n,r;Ys.point=function(o,i){t=o*Fa,n=Math.sin(i*=Fa),r=Math.cos(i),Ys.point=e},Ys.lineEnd=function(){Ys.point=Ys.lineEnd=w}}function _n(e,t){function n(t,n){var r=Math.cos(t),o=Math.cos(n),i=e(r*o);return[i*o*Math.sin(t),i*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),o=t(r),i=Math.sin(o),a=Math.cos(o);return[Math.atan2(e*i,r*a),Math.asin(r&&n*i/r)]},n}function kn(e,t){function n(e,t){a>0?-Da+Ta>t&&(t=-Da+Ta):t>Da-Ta&&(t=Da-Ta);var n=a/Math.pow(o(t),i);return[n*Math.sin(i*e),a-n*Math.cos(i*e)]}var r=Math.cos(e),o=function(e){return Math.tan(Ca/4+e/2)},i=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(o(t)/o(e)),a=r*Math.pow(o(e),i)/i;return i?(n.invert=function(e,t){var n=a-t,r=Q(i)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/i,2*Math.atan(Math.pow(a/r,1/i))-Da]},n):Mn}function An(e,t){function n(e,t){var n=i-t;return[n*Math.sin(o*e),i-n*Math.cos(o*e)]}var r=Math.cos(e),o=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),i=r/o+e;return ha(o)<Ta?ln:(n.invert=function(e,t){var n=i-t;return[Math.atan2(e,n)/o,i-Q(o)*Math.sqrt(e*e+n*n)]},n)}function Mn(e,t){return[e,Math.log(Math.tan(Ca/4+t/2))]}function zn(e){var t,n=on(e),r=n.scale,o=n.translate,i=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=o.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var a=i.apply(n,arguments);if(a===n){if(t=null==e){var s=Ca*r(),l=o();i([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else t&&(a=null);return a},n.clipExtent(null)}function jn(e,t){return[Math.log(Math.tan(Ca/4+t/2)),-e]}function En(e){return e[0]}function Sn(e){return e[1]}function Tn(e){for(var t=e.length,n=[0,1],r=2,o=2;t>o;o++){for(;r>1&&K(e[n[r-2]],e[n[r-1]],e[o])<=0;)--r;n[r++]=o}return n.slice(0,r)}function Nn(e,t){return e[0]-t[0]||e[1]-t[1]}function Cn(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function On(e,t,n,r){var o=e[0],i=n[0],a=t[0]-o,s=r[0]-i,l=e[1],u=n[1],c=t[1]-l,f=r[1]-u,d=(s*(l-u)-f*(o-i))/(f*a-s*c);return[o+d*a,l+d*c]}function qn(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function Dn(){nr(this),this.edge=this.site=this.circle=null}function Fn(e){var t=rl.pop()||new Dn;return t.site=e,t}function Ln(e){Wn(e),el.remove(e),rl.push(e),nr(e)}function Pn(e){var t=e.circle,n=t.x,r=t.cy,o={x:n,y:r},i=e.P,a=e.N,s=[e];Ln(e);for(var l=i;l.circle&&ha(n-l.circle.x)<Ta&&ha(r-l.circle.cy)<Ta;)i=l.P,s.unshift(l),Ln(l),l=i;s.unshift(l),Wn(l);for(var u=a;u.circle&&ha(n-u.circle.x)<Ta&&ha(r-u.circle.cy)<Ta;)a=u.N,s.push(u),Ln(u),u=a;s.push(u),Wn(u);var c,f=s.length;for(c=1;f>c;++c)u=s[c],l=s[c-1],Kn(u.edge,l.site,u.site,o);l=s[0],u=s[f-1],u.edge=Jn(l.site,u.site,null,o),$n(l),$n(u)}function Rn(e){for(var t,n,r,o,i=e.x,a=e.y,s=el._;s;)if(r=In(s,a)-i,r>Ta)s=s.L;else{if(o=i-Bn(s,a),!(o>Ta)){r>-Ta?(t=s.P,n=s):o>-Ta?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var l=Fn(e);if(el.insert(t,l),t||n){if(t===n)return Wn(t),n=Fn(t.site),el.insert(l,n),l.edge=n.edge=Jn(t.site,l.site),$n(t),void $n(n);if(!n)return void(l.edge=Jn(t.site,l.site));Wn(t),Wn(n);var u=t.site,c=u.x,f=u.y,d=e.x-c,p=e.y-f,h=n.site,g=h.x-c,v=h.y-f,m=2*(d*v-p*g),y=d*d+p*p,x=g*g+v*v,b={x:(v*y-p*x)/m+c,y:(d*x-g*y)/m+f};Kn(n.edge,u,h,b),l.edge=Jn(u,e,null,b),n.edge=Jn(e,h,null,b),$n(t),$n(n)}}function In(e,t){var n=e.site,r=n.x,o=n.y,i=o-t;if(!i)return r;var a=e.P;if(!a)return-(1/0);n=a.site;var s=n.x,l=n.y,u=l-t;if(!u)return s;var c=s-r,f=1/i-1/u,d=c/u;return f?(-d+Math.sqrt(d*d-2*f*(c*c/(-2*u)-l+u/2+o-i/2)))/f+r:(r+s)/2}function Bn(e,t){var n=e.N;if(n)return In(n,t);var r=e.site;return r.y===t?r.x:1/0}function Un(e){this.site=e,this.edges=[]}function Vn(e){for(var t,n,r,o,i,a,s,l,u,c,f=e[0][0],d=e[1][0],p=e[0][1],h=e[1][1],g=Ks,v=g.length;v--;)if(i=g[v],i&&i.prepare())for(s=i.edges,l=s.length,a=0;l>a;)c=s[a].end(),r=c.x,o=c.y,u=s[++a%l].start(),t=u.x,n=u.y,(ha(r-t)>Ta||ha(o-n)>Ta)&&(s.splice(a,0,new er(Qn(i.site,c,ha(r-f)<Ta&&h-o>Ta?{x:f,y:ha(t-f)<Ta?n:h}:ha(o-h)<Ta&&d-r>Ta?{x:ha(n-h)<Ta?t:d,y:h}:ha(r-d)<Ta&&o-p>Ta?{x:d,y:ha(t-d)<Ta?n:p}:ha(o-p)<Ta&&r-f>Ta?{x:ha(n-p)<Ta?t:f,y:p}:null),i.site,null)),++l)}function Hn(e,t){return t.angle-e.angle}function Yn(){nr(this),this.x=this.y=this.arc=this.site=this.cy=null}function $n(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,o=e.site,i=n.site;if(r!==i){var a=o.x,s=o.y,l=r.x-a,u=r.y-s,c=i.x-a,f=i.y-s,d=2*(l*f-u*c);if(!(d>=-Na)){var p=l*l+u*u,h=c*c+f*f,g=(f*p-u*h)/d,v=(l*h-c*p)/d,f=v+s,m=ol.pop()||new Yn;m.arc=e,m.site=o,m.x=g+a,m.y=f+Math.sqrt(g*g+v*v),m.cy=f,e.circle=m;for(var y=null,x=nl._;x;)if(m.y<x.y||m.y===x.y&&m.x<=x.x){if(!x.L){y=x.P;break}x=x.L}else{if(!x.R){y=x;break}x=x.R}nl.insert(y,m),y||(tl=m)}}}}function Wn(e){var t=e.circle;t&&(t.P||(tl=t.N),nl.remove(t),ol.push(t),nr(t),e.circle=null)}function Xn(e){for(var t,n=Qs,r=Bt(e[0][0],e[0][1],e[1][0],e[1][1]),o=n.length;o--;)t=n[o],(!Zn(t,e)||!r(t)||ha(t.a.x-t.b.x)<Ta&&ha(t.a.y-t.b.y)<Ta)&&(t.a=t.b=null,n.splice(o,1))}function Zn(e,t){var n=e.b;if(n)return!0;var r,o,i=e.a,a=t[0][0],s=t[1][0],l=t[0][1],u=t[1][1],c=e.l,f=e.r,d=c.x,p=c.y,h=f.x,g=f.y,v=(d+h)/2,m=(p+g)/2;if(g===p){if(a>v||v>=s)return;if(d>h){if(i){if(i.y>=u)return}else i={x:v,y:l};n={x:v,y:u}}else{if(i){if(i.y<l)return}else i={x:v,y:u};n={x:v,y:l}}}else if(r=(d-h)/(g-p),o=m-r*v,-1>r||r>1)if(d>h){if(i){if(i.y>=u)return}else i={x:(l-o)/r,y:l};n={x:(u-o)/r,y:u}}else{if(i){if(i.y<l)return}else i={x:(u-o)/r,y:u};n={x:(l-o)/r,y:l}}else if(g>p){if(i){if(i.x>=s)return}else i={x:a,y:r*a+o};n={x:s,y:r*s+o}}else{if(i){if(i.x<a)return}else i={x:s,y:r*s+o};n={x:a,y:r*a+o}}return e.a=i,e.b=n,!0}function Gn(e,t){this.l=e,this.r=t,this.a=this.b=null}function Jn(e,t,n,r){var o=new Gn(e,t);return Qs.push(o),n&&Kn(o,e,t,n),r&&Kn(o,t,e,r),Ks[e.i].edges.push(new er(o,e,t)),Ks[t.i].edges.push(new er(o,t,e)),o}function Qn(e,t,n){var r=new Gn(e,null);return r.a=t,r.b=n,Qs.push(r),r}function Kn(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function er(e,t,n){var r=e.a,o=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(o.x-r.x,r.y-o.y):Math.atan2(r.x-o.x,o.y-r.y)}function tr(){this._=null}function nr(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function rr(e,t){var n=t,r=t.R,o=n.U;o?o.L===n?o.L=r:o.R=r:e._=r,r.U=o,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function or(e,t){var n=t,r=t.L,o=n.U;o?o.L===n?o.L=r:o.R=r:e._=r,r.U=o,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ir(e){for(;e.L;)e=e.L;return e}function ar(e,t){var n,r,o,i=e.sort(sr).pop();for(Qs=[],Ks=new Array(e.length),el=new tr,nl=new tr;;)if(o=tl,i&&(!o||i.y<o.y||i.y===o.y&&i.x<o.x))(i.x!==n||i.y!==r)&&(Ks[i.i]=new Un(i),Rn(i),n=i.x,r=i.y),i=e.pop();else{if(!o)break;Pn(o.arc)}t&&(Xn(t),Vn(t));var a={cells:Ks,edges:Qs};return el=nl=Qs=Ks=null,a}function sr(e,t){return t.y-e.y||t.x-e.x}function lr(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function ur(e){return e.x}function cr(e){return e.y}function fr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function dr(e,t,n,r,o,i){if(!e(t,n,r,o,i)){var a=.5*(n+o),s=.5*(r+i),l=t.nodes;l[0]&&dr(e,l[0],n,r,a,s),l[1]&&dr(e,l[1],a,r,o,s),l[2]&&dr(e,l[2],n,s,a,i),l[3]&&dr(e,l[3],a,s,o,i)}}function pr(e,t,n,r,o,i,a){var s,l=1/0;return function u(e,c,f,d,p){if(!(c>i||f>a||r>d||o>p)){if(h=e.point){var h,g=t-e.x,v=n-e.y,m=g*g+v*v;if(l>m){var y=Math.sqrt(l=m);r=t-y,o=n-y,i=t+y,a=n+y,s=h}}for(var x=e.nodes,b=.5*(c+d),w=.5*(f+p),_=t>=b,k=n>=w,A=k<<1|_,M=A+4;M>A;++A)if(e=x[3&A])switch(3&A){case 0:u(e,c,f,b,w);break;case 1:u(e,b,f,d,w);break;case 2:u(e,c,w,b,p);break;case 3:u(e,b,w,d,p)}}}(e,r,o,i,a),s}function hr(e,t){e=na.rgb(e),t=na.rgb(t);var n=e.r,r=e.g,o=e.b,i=t.r-n,a=t.g-r,s=t.b-o;return function(e){return"#"+be(Math.round(n+i*e))+be(Math.round(r+a*e))+be(Math.round(o+s*e))}}function gr(e,t){var n,r={},o={};for(n in e)n in t?r[n]=yr(e[n],t[n]):o[n]=e[n];

for(n in t)n in e||(o[n]=t[n]);return function(e){for(n in r)o[n]=r[n](e);return o}}function vr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function mr(e,t){var n,r,o,i=al.lastIndex=sl.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=al.exec(e))&&(r=sl.exec(t));)(o=r.index)>i&&(o=t.slice(i,o),s[a]?s[a]+=o:s[++a]=o),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:vr(n,r)})),i=sl.lastIndex;return i<t.length&&(o=t.slice(i),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var n,r=0;t>r;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function yr(e,t){for(var n,r=na.interpolators.length;--r>=0&&!(n=na.interpolators[r](e,t)););return n}function xr(e,t){var n,r=[],o=[],i=e.length,a=t.length,s=Math.min(e.length,t.length);for(n=0;s>n;++n)r.push(yr(e[n],t[n]));for(;i>n;++n)o[n]=e[n];for(;a>n;++n)o[n]=t[n];return function(e){for(n=0;s>n;++n)o[n]=r[n](e);return o}}function br(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function wr(e){return function(t){return 1-e(1-t)}}function _r(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function kr(e){return e*e}function Ar(e){return e*e*e}function Mr(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function zr(e){return function(t){return Math.pow(t,e)}}function jr(e){return 1-Math.cos(e*Da)}function Er(e){return Math.pow(2,10*(e-1))}function Sr(e){return 1-Math.sqrt(1-e*e)}function Tr(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Oa*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Oa/t)}}function Nr(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function Cr(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Or(e,t){e=na.hcl(e),t=na.hcl(t);var n=e.h,r=e.c,o=e.l,i=t.h-n,a=t.c-r,s=t.l-o;return isNaN(a)&&(a=0,r=isNaN(r)?t.c:r),isNaN(i)?(i=0,n=isNaN(n)?t.h:n):i>180?i-=360:-180>i&&(i+=360),function(e){return ce(n+i*e,r+a*e,o+s*e)+""}}function qr(e,t){e=na.hsl(e),t=na.hsl(t);var n=e.h,r=e.s,o=e.l,i=t.h-n,a=t.s-r,s=t.l-o;return isNaN(a)&&(a=0,r=isNaN(r)?t.s:r),isNaN(i)?(i=0,n=isNaN(n)?t.h:n):i>180?i-=360:-180>i&&(i+=360),function(e){return le(n+i*e,r+a*e,o+s*e)+""}}function Dr(e,t){e=na.lab(e),t=na.lab(t);var n=e.l,r=e.a,o=e.b,i=t.l-n,a=t.a-r,s=t.b-o;return function(e){return de(n+i*e,r+a*e,o+s*e)+""}}function Fr(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Lr(e){var t=[e.a,e.b],n=[e.c,e.d],r=Rr(t),o=Pr(t,n),i=Rr(Ir(n,t,-o))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,o*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*La,this.translate=[e.e,e.f],this.scale=[r,i],this.skew=i?Math.atan2(o,i)*La:0}function Pr(e,t){return e[0]*t[0]+e[1]*t[1]}function Rr(e){var t=Math.sqrt(Pr(e,e));return t&&(e[0]/=t,e[1]/=t),t}function Ir(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function Br(e,t){var n,r=[],o=[],i=na.transform(e),a=na.transform(t),s=i.translate,l=a.translate,u=i.rotate,c=a.rotate,f=i.skew,d=a.skew,p=i.scale,h=a.scale;return s[0]!=l[0]||s[1]!=l[1]?(r.push("translate(",null,",",null,")"),o.push({i:1,x:vr(s[0],l[0])},{i:3,x:vr(s[1],l[1])})):r.push(l[0]||l[1]?"translate("+l+")":""),u!=c?(u-c>180?c+=360:c-u>180&&(u+=360),o.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:vr(u,c)})):c&&r.push(r.pop()+"rotate("+c+")"),f!=d?o.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:vr(f,d)}):d&&r.push(r.pop()+"skewX("+d+")"),p[0]!=h[0]||p[1]!=h[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),o.push({i:n-4,x:vr(p[0],h[0])},{i:n-2,x:vr(p[1],h[1])})):(1!=h[0]||1!=h[1])&&r.push(r.pop()+"scale("+h+")"),n=o.length,function(e){for(var t,i=-1;++i<n;)r[(t=o[i]).i]=t.x(e);return r.join("")}}function Ur(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function Vr(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Hr(e){for(var t=e.source,n=e.target,r=$r(t,n),o=[t];t!==r;)t=t.parent,o.push(t);for(var i=o.length;n!==r;)o.splice(i,0,n),n=n.parent;return o}function Yr(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function $r(e,t){if(e===t)return e;for(var n=Yr(e),r=Yr(t),o=n.pop(),i=r.pop(),a=null;o===i;)a=o,o=n.pop(),i=r.pop();return a}function Wr(e){e.fixed|=2}function Xr(e){e.fixed&=-7}function Zr(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Gr(e){e.fixed&=-5}function Jr(e,t,n){var r=0,o=0;if(e.charge=0,!e.leaf)for(var i,a=e.nodes,s=a.length,l=-1;++l<s;)i=a[l],null!=i&&(Jr(i,t,n),e.charge+=i.charge,r+=i.charge*i.cx,o+=i.charge*i.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var u=t*n[e.point.index];e.charge+=e.pointCharge=u,r+=u*e.point.x,o+=u*e.point.y}e.cx=r/e.charge,e.cy=o/e.charge}function Qr(e,t){return na.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=oo,e}function Kr(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(o=e.children)&&(r=o.length))for(var r,o;--r>=0;)n.push(o[r])}function eo(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(i=e.children)&&(o=i.length))for(var o,i,a=-1;++a<o;)n.push(i[a]);for(;null!=(e=r.pop());)t(e)}function to(e){return e.children}function no(e){return e.value}function ro(e,t){return t.value-e.value}function oo(e){return na.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function io(e){return e.x}function ao(e){return e.y}function so(e,t,n){e.y0=t,e.y=n}function lo(e){return na.range(e.length)}function uo(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function co(e){for(var t,n=1,r=0,o=e[0][1],i=e.length;i>n;++n)(t=e[n][1])>o&&(r=n,o=t);return r}function fo(e){return e.reduce(po,0)}function po(e,t){return e+t[1]}function ho(e,t){return go(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function go(e,t){for(var n=-1,r=+e[0],o=(e[1]-r)/t,i=[];++n<=t;)i[n]=o*n+r;return i}function vo(e){return[na.min(e),na.max(e)]}function mo(e,t){return e.value-t.value}function yo(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function xo(e,t){e._pack_next=t,t._pack_prev=e}function bo(e,t){var n=t.x-e.x,r=t.y-e.y,o=e.r+t.r;return.999*o*o>n*n+r*r}function wo(e){function t(e){c=Math.min(e.x-e.r,c),f=Math.max(e.x+e.r,f),d=Math.min(e.y-e.r,d),p=Math.max(e.y+e.r,p)}if((n=e.children)&&(u=n.length)){var n,r,o,i,a,s,l,u,c=1/0,f=-(1/0),d=1/0,p=-(1/0);if(n.forEach(_o),r=n[0],r.x=-r.r,r.y=0,t(r),u>1&&(o=n[1],o.x=o.r,o.y=0,t(o),u>2))for(i=n[2],Mo(r,o,i),t(i),yo(r,i),r._pack_prev=i,yo(i,o),o=r._pack_next,a=3;u>a;a++){Mo(r,o,i=n[a]);var h=0,g=1,v=1;for(s=o._pack_next;s!==o;s=s._pack_next,g++)if(bo(s,i)){h=1;break}if(1==h)for(l=r._pack_prev;l!==s._pack_prev&&!bo(l,i);l=l._pack_prev,v++);h?(v>g||g==v&&o.r<r.r?xo(r,o=s):xo(r=l,o),a--):(yo(r,i),o=i,t(i))}var m=(c+f)/2,y=(d+p)/2,x=0;for(a=0;u>a;a++)i=n[a],i.x-=m,i.y-=y,x=Math.max(x,i.r+Math.sqrt(i.x*i.x+i.y*i.y));e.r=x,n.forEach(ko)}}function _o(e){e._pack_next=e._pack_prev=e}function ko(e){delete e._pack_next,delete e._pack_prev}function Ao(e,t,n,r){var o=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,o)for(var i=-1,a=o.length;++i<a;)Ao(o[i],t,n,r)}function Mo(e,t,n){var r=e.r+n.r,o=t.x-e.x,i=t.y-e.y;if(r&&(o||i)){var a=t.r+n.r,s=o*o+i*i;a*=a,r*=r;var l=.5+(r-a)/(2*s),u=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=e.x+l*o+u*i,n.y=e.y+l*i-u*o}else n.x=e.x+r,n.y=e.y}function zo(e,t){return e.parent==t.parent?1:2}function jo(e){var t=e.children;return t.length?t[0]:e.t}function Eo(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function So(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function To(e){for(var t,n=0,r=0,o=e.children,i=o.length;--i>=0;)t=o[i],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function No(e,t,n){return e.a.parent===t.parent?e.a:n}function Co(e){return 1+na.max(e,function(e){return e.y})}function Oo(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function qo(e){var t=e.children;return t&&t.length?qo(t[0]):e}function Do(e){var t,n=e.children;return n&&(t=n.length)?Do(n[t-1]):e}function Fo(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Lo(e,t){var n=e.x+t[3],r=e.y+t[0],o=e.dx-t[1]-t[3],i=e.dy-t[0]-t[2];return 0>o&&(n+=o/2,o=0),0>i&&(r+=i/2,i=0),{x:n,y:r,dx:o,dy:i}}function Po(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function Ro(e){return e.rangeExtent?e.rangeExtent():Po(e.range())}function Io(e,t,n,r){var o=n(e[0],e[1]),i=r(t[0],t[1]);return function(e){return i(o(e))}}function Bo(e,t){var n,r=0,o=e.length-1,i=e[r],a=e[o];return i>a&&(n=r,r=o,o=n,n=i,i=a,a=n),e[r]=t.floor(i),e[o]=t.ceil(a),e}function Uo(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:yl}function Vo(e,t,n,r){var o=[],i=[],a=0,s=Math.min(e.length,t.length)-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<=s;)o.push(n(e[a-1],e[a])),i.push(r(t[a-1],t[a]));return function(t){var n=na.bisect(e,t,1,s)-1;return i[n](o[n](t))}}function Ho(e,t,n,r){function o(){var o=Math.min(e.length,t.length)>2?Vo:Io,l=r?Vr:Ur;return a=o(e,t,l,n),s=o(t,e,l,yr),i}function i(e){return a(e)}var a,s;return i.invert=function(e){return s(e)},i.domain=function(t){return arguments.length?(e=t.map(Number),o()):e},i.range=function(e){return arguments.length?(t=e,o()):t},i.rangeRound=function(e){return i.range(e).interpolate(Fr)},i.clamp=function(e){return arguments.length?(r=e,o()):r},i.interpolate=function(e){return arguments.length?(n=e,o()):n},i.ticks=function(t){return Xo(e,t)},i.tickFormat=function(t,n){return Zo(e,t,n)},i.nice=function(t){return $o(e,t),o()},i.copy=function(){return Ho(e,t,n,r)},o()}function Yo(e,t){return na.rebind(e,t,"range","rangeRound","interpolate","clamp")}function $o(e,t){return Bo(e,Uo(Wo(e,t)[2]))}function Wo(e,t){null==t&&(t=10);var n=Po(e),r=n[1]-n[0],o=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),i=t/r*o;return.15>=i?o*=10:.35>=i?o*=5:.75>=i&&(o*=2),n[0]=Math.ceil(n[0]/o)*o,n[1]=Math.floor(n[1]/o)*o+.5*o,n[2]=o,n}function Xo(e,t){return na.range.apply(na,Wo(e,t))}function Zo(e,t,n){var r=Wo(e,t);if(n){var o=as.exec(n);if(o.shift(),"s"===o[8]){var i=na.formatPrefix(Math.max(ha(r[0]),ha(r[1])));return o[7]||(o[7]="."+Go(i.scale(r[2]))),o[8]="f",n=na.format(o.join("")),function(e){return n(i.scale(e))+i.symbol}}o[7]||(o[7]="."+Jo(o[8],r)),n=o.join("")}else n=",."+Go(r[2])+"f";return na.format(n)}function Go(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function Jo(e,t){var n=Go(t[2]);return e in xl?Math.abs(n-Go(Math.max(ha(t[0]),ha(t[1]))))+ +("e"!==e):n-2*("%"===e)}function Qo(e,t,n,r){function o(e){return(n?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function i(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function a(t){return e(o(t))}return a.invert=function(t){return i(e.invert(t))},a.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(o)),a):r},a.base=function(n){return arguments.length?(t=+n,e.domain(r.map(o)),a):t},a.nice=function(){var t=Bo(r.map(o),n?Math:wl);return e.domain(t),r=t.map(i),a},a.ticks=function(){var e=Po(r),a=[],s=e[0],l=e[1],u=Math.floor(o(s)),c=Math.ceil(o(l)),f=t%1?2:t;if(isFinite(c-u)){if(n){for(;c>u;u++)for(var d=1;f>d;d++)a.push(i(u)*d);a.push(i(u))}else for(a.push(i(u));u++<c;)for(var d=f-1;d>0;d--)a.push(i(u)*d);for(u=0;a[u]<s;u++);for(c=a.length;a[c-1]>l;c--);a=a.slice(u,c)}return a},a.tickFormat=function(e,t){if(!arguments.length)return bl;arguments.length<2?t=bl:"function"!=typeof t&&(t=na.format(t));var r,s=Math.max(.1,e/a.ticks().length),l=n?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(e){return e/i(l(o(e)+r))<=s?t(e):""}},a.copy=function(){return Qo(e.copy(),t,n,r)},Yo(a,e)}function Ko(e,t,n){function r(t){return e(o(t))}var o=ei(t),i=ei(1/t);return r.invert=function(t){return i(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(o)),r):n},r.ticks=function(e){return Xo(n,e)},r.tickFormat=function(e,t){return Zo(n,e,t)},r.nice=function(e){return r.domain($o(n,e))},r.exponent=function(a){return arguments.length?(o=ei(t=a),i=ei(1/t),e.domain(n.map(o)),r):t},r.copy=function(){return Ko(e.copy(),t,n)},Yo(r,e)}function ei(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function ti(e,t){function n(n){return i[((o.get(n)||("range"===t.t?o.set(n,e.push(n)):0/0))-1)%i.length]}function r(t,n){return na.range(e.length).map(function(e){return t+n*e})}var o,i,a;return n.domain=function(r){if(!arguments.length)return e;e=[],o=new u;for(var i,a=-1,s=r.length;++a<s;)o.has(i=r[a])||o.set(i,e.push(i));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(i=e,a=0,t={t:"range",a:arguments},n):i},n.rangePoints=function(o,s){arguments.length<2&&(s=0);var l=o[0],u=o[1],c=e.length<2?(l=(l+u)/2,0):(u-l)/(e.length-1+s);return i=r(l+c*s/2,c),a=0,t={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(o,s){arguments.length<2&&(s=0);var l=o[0],u=o[1],c=e.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(e.length-1+s)|0;return i=r(l+Math.round(c*s/2+(u-l-(e.length-1+s)*c)/2),c),a=0,t={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(o,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=o[1]<o[0],c=o[u-0],f=o[1-u],d=(f-c)/(e.length-s+2*l);return i=r(c+d*l,d),u&&i.reverse(),a=d*(1-s),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(o,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=o[1]<o[0],c=o[u-0],f=o[1-u],d=Math.floor((f-c)/(e.length-s+2*l));return i=r(c+Math.round((f-c-(e.length-s)*d)/2),d),u&&i.reverse(),a=Math.round(d*(1-s)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return Po(t.a[0])},n.copy=function(){return ti(e,t)},n.domain(e)}function ni(e,t){function i(){var n=0,r=t.length;for(s=[];++n<r;)s[n-1]=na.quantile(e,n/r);return a}function a(e){return isNaN(e=+e)?void 0:t[na.bisect(s,e)]}var s;return a.domain=function(t){return arguments.length?(e=t.map(r).filter(o).sort(n),i()):e},a.range=function(e){return arguments.length?(t=e,i()):t},a.quantiles=function(){return s},a.invertExtent=function(n){return n=t.indexOf(n),0>n?[0/0,0/0]:[n>0?s[n-1]:e[0],n<s.length?s[n]:e[e.length-1]]},a.copy=function(){return ni(e,t)},i()}function ri(e,t,n){function r(t){return n[Math.max(0,Math.min(a,Math.floor(i*(t-e))))]}function o(){return i=n.length/(t-e),a=n.length-1,r}var i,a;return r.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],o()):[e,t]},r.range=function(e){return arguments.length?(n=e,o()):n},r.invertExtent=function(t){return t=n.indexOf(t),t=0>t?0/0:t/i+e,[t,t+1/i]},r.copy=function(){return ri(e,t,n)},o()}function oi(e,t){function n(n){return n>=n?t[na.bisect(e,n)]:void 0}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return oi(e,t)},n}function ii(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return Xo(e,t)},t.tickFormat=function(t,n){return Zo(e,t,n)},t.copy=function(){return ii(e)},t}function ai(){return 0}function si(e){return e.innerRadius}function li(e){return e.outerRadius}function ui(e){return e.startAngle}function ci(e){return e.endAngle}function fi(e){return e&&e.padAngle}function di(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function pi(e,t,n,r,o){var i=e[0]-t[0],a=e[1]-t[1],s=(o?r:-r)/Math.sqrt(i*i+a*a),l=s*a,u=-s*i,c=e[0]+l,f=e[1]+u,d=t[0]+l,p=t[1]+u,h=(c+d)/2,g=(f+p)/2,v=d-c,m=p-f,y=v*v+m*m,x=n-r,b=c*p-d*f,w=(0>m?-1:1)*Math.sqrt(x*x*y-b*b),_=(b*m-v*w)/y,k=(-b*v-m*w)/y,A=(b*m+v*w)/y,M=(-b*v+m*w)/y,z=_-h,j=k-g,E=A-h,S=M-g;return z*z+j*j>E*E+S*S&&(_=A,k=M),[[_-l,k-u],[_*n/x,k*n/x]]}function hi(e){function t(t){function a(){u.push("M",i(e(c),s))}for(var l,u=[],c=[],f=-1,d=t.length,p=ze(n),h=ze(r);++f<d;)o.call(this,l=t[f],f)?c.push([+p.call(this,l,f),+h.call(this,l,f)]):c.length&&(a(),c=[]);return c.length&&a(),u.length?u.join(""):null}var n=En,r=Sn,o=Et,i=gi,a=i.key,s=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(o=e,t):o},t.interpolate=function(e){return arguments.length?(a="function"==typeof e?i=e:(i=jl.get(e)||gi).key,t):a},t.tension=function(e){return arguments.length?(s=e,t):s},t}function gi(e){return e.join("L")}function vi(e){return gi(e)+"Z"}function mi(e){for(var t=0,n=e.length,r=e[0],o=[r[0],",",r[1]];++t<n;)o.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&o.push("H",r[0]),o.join("")}function yi(e){for(var t=0,n=e.length,r=e[0],o=[r[0],",",r[1]];++t<n;)o.push("V",(r=e[t])[1],"H",r[0]);return o.join("")}function xi(e){for(var t=0,n=e.length,r=e[0],o=[r[0],",",r[1]];++t<n;)o.push("H",(r=e[t])[0],"V",r[1]);return o.join("")}function bi(e,t){return e.length<4?gi(e):e[1]+ki(e.slice(1,-1),Ai(e,t))}function wi(e,t){return e.length<3?gi(e):e[0]+ki((e.push(e[0]),e),Ai([e[e.length-2]].concat(e,[e[1]]),t))}function _i(e,t){return e.length<3?gi(e):e[0]+ki(e,Ai(e,t))}function ki(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return gi(e);var n=e.length!=t.length,r="",o=e[0],i=e[1],a=t[0],s=a,l=1;if(n&&(r+="Q"+(i[0]-2*a[0]/3)+","+(i[1]-2*a[1]/3)+","+i[0]+","+i[1],o=e[1],l=2),t.length>1){s=t[1],i=e[l],l++,r+="C"+(o[0]+a[0])+","+(o[1]+a[1])+","+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1];for(var u=2;u<t.length;u++,l++)i=e[l],s=t[u],r+="S"+(i[0]-s[0])+","+(i[1]-s[1])+","+i[0]+","+i[1]}if(n){var c=e[l];r+="Q"+(i[0]+2*s[0]/3)+","+(i[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function Ai(e,t){for(var n,r=[],o=(1-t)/2,i=e[0],a=e[1],s=1,l=e.length;++s<l;)n=i,i=a,a=e[s],r.push([o*(a[0]-n[0]),o*(a[1]-n[1])]);return r}function Mi(e){if(e.length<3)return gi(e);var t=1,n=e.length,r=e[0],o=r[0],i=r[1],a=[o,o,o,(r=e[1])[0]],s=[i,i,i,r[1]],l=[o,",",i,"L",Si(Tl,a),",",Si(Tl,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Ti(l,a,s);return e.pop(),l.push("L",r),l.join("")}function zi(e){if(e.length<4)return gi(e);for(var t,n=[],r=-1,o=e.length,i=[0],a=[0];++r<3;)t=e[r],i.push(t[0]),a.push(t[1]);for(n.push(Si(Tl,i)+","+Si(Tl,a)),--r;++r<o;)t=e[r],i.shift(),i.push(t[0]),a.shift(),a.push(t[1]),Ti(n,i,a);return n.join("")}function ji(e){for(var t,n,r=-1,o=e.length,i=o+4,a=[],s=[];++r<4;)n=e[r%o],a.push(n[0]),s.push(n[1]);for(t=[Si(Tl,a),",",Si(Tl,s)],--r;++r<i;)n=e[r%o],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Ti(t,a,s);return t.join("")}function Ei(e,t){var n=e.length-1;if(n)for(var r,o,i=e[0][0],a=e[0][1],s=e[n][0]-i,l=e[n][1]-a,u=-1;++u<=n;)r=e[u],o=u/n,r[0]=t*r[0]+(1-t)*(i+o*s),r[1]=t*r[1]+(1-t)*(a+o*l);return Mi(e)}function Si(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Ti(e,t,n){e.push("C",Si(El,t),",",Si(El,n),",",Si(Sl,t),",",Si(Sl,n),",",Si(Tl,t),",",Si(Tl,n))}function Ni(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Ci(e){for(var t=0,n=e.length-1,r=[],o=e[0],i=e[1],a=r[0]=Ni(o,i);++t<n;)r[t]=(a+(a=Ni(o=i,i=e[t+1])))/2;return r[t]=a,r}function Oi(e){for(var t,n,r,o,i=[],a=Ci(e),s=-1,l=e.length-1;++s<l;)t=Ni(e[s],e[s+1]),ha(t)<Ta?a[s]=a[s+1]=0:(n=a[s]/t,r=a[s+1]/t,o=n*n+r*r,o>9&&(o=3*t/Math.sqrt(o),a[s]=o*n,a[s+1]=o*r));for(s=-1;++s<=l;)o=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),i.push([o||0,a[s]*o||0]);return i}function qi(e){return e.length<3?gi(e):e[0]+ki(e,Oi(e))}function Di(e){for(var t,n,r,o=-1,i=e.length;++o<i;)t=e[o],n=t[0],r=t[1]-Da,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function Fi(e){function t(t){function l(){g.push("M",s(e(m),f),c,u(e(v.reverse()),f),"Z")}for(var d,p,h,g=[],v=[],m=[],y=-1,x=t.length,b=ze(n),w=ze(o),_=n===r?function(){return p}:ze(r),k=o===i?function(){return h}:ze(i);++y<x;)a.call(this,d=t[y],y)?(v.push([p=+b.call(this,d,y),h=+w.call(this,d,y)]),m.push([+_.call(this,d,y),+k.call(this,d,y)])):v.length&&(l(),v=[],m=[]);return v.length&&l(),g.length?g.join(""):null}var n=En,r=En,o=0,i=Sn,a=Et,s=gi,l=s.key,u=s,c="L",f=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(o=i=e,t):i},t.y0=function(e){return arguments.length?(o=e,t):o},t.y1=function(e){return arguments.length?(i=e,t):i},t.defined=function(e){return arguments.length?(a=e,t):a},t.interpolate=function(e){return arguments.length?(l="function"==typeof e?s=e:(s=jl.get(e)||gi).key,u=s.reverse||s,c=s.closed?"M":"L",t):l},t.tension=function(e){return arguments.length?(f=e,t):f},t}function Li(e){return e.radius}function Pi(e){return[e.x,e.y]}function Ri(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-Da;return[n*Math.cos(r),n*Math.sin(r)]}}function Ii(){return 64}function Bi(){return"circle"}function Ui(e){var t=Math.sqrt(e/Ca);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Vi(e){return function(){var t,n;(t=this[e])&&(n=t[t.active])&&(--t.count?delete t[t.active]:delete this[e],t.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function Hi(e,t,n){return xa(e,Ll),e.namespace=t,e.id=n,e}function Yi(e,t,n,r){var o=e.id,i=e.namespace;return V(e,"function"==typeof n?function(e,a,s){e[i][o].tween.set(t,r(n.call(e,e.__data__,a,s)))}:(n=r(n),function(e){e[i][o].tween.set(t,n)}))}function $i(e){return null==e&&(e=""),function(){this.textContent=e}}function Wi(e){return null==e?"__transition__":"__transition_"+e+"__"}function Xi(e,t,n,r,o){var i=e[n]||(e[n]={active:0,count:0}),a=i[r];if(!a){var s=o.time;a=i[r]={tween:new u,time:s,delay:o.delay,duration:o.duration,ease:o.ease,index:t},o=null,++i.count,na.timer(function(o){function l(n){if(i.active>r)return c();var o=i[i.active];o&&(--i.count,delete i[i.active],o.event&&o.event.interrupt.call(e,e.__data__,o.index)),i.active=r,a.event&&a.event.start.call(e,e.__data__,t),a.tween.forEach(function(n,r){(r=r.call(e,e.__data__,t))&&g.push(r)}),d=a.ease,f=a.duration,na.timer(function(){return h.c=u(n||1)?Et:u,1},0,s)}function u(n){if(i.active!==r)return 1;for(var o=n/f,s=d(o),l=g.length;l>0;)g[--l].call(e,s);return o>=1?(a.event&&a.event.end.call(e,e.__data__,t),c()):void 0}function c(){return--i.count?delete i[r]:delete e[n],1}var f,d,p=a.delay,h=rs,g=[];return h.t=p+s,o>=p?l(o-p):void(h.c=l)},0,s)}}function Zi(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function Gi(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}function Ji(e){return e.toISOString()}function Qi(e,t,n){function r(t){return e(t)}function o(e,n){var r=e[1]-e[0],o=r/n,i=na.bisect($l,o);return i==$l.length?[t.year,Wo(e.map(function(e){return e/31536e6}),n)[2]]:i?t[o/$l[i-1]<$l[i]/o?i-1:i]:[Zl,Wo(e,n)[2]]}return r.invert=function(t){return Ki(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(Ki)},r.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,Ki(+n+1),t).length}var i=r.domain(),a=Po(i),s=null==e?o(a,10):"number"==typeof e&&o(a,e);return s&&(e=s[0],t=s[1]),r.domain(Bo(i,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=Ki(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=Ki(+t+1);return t}}:e))},r.ticks=function(e,t){var n=Po(r.domain()),i=null==e?o(n,10):"number"==typeof e?o(n,e):!e.range&&[{range:e},t];return i&&(e=i[0],t=i[1]),e.range(n[0],Ki(+n[1]+1),1>t?1:t)},r.tickFormat=function(){return n},r.copy=function(){return Qi(e.copy(),t,n)},Yo(r,e)}function Ki(e){return new Date(e)}function ea(e){return JSON.parse(e.responseText)}function ta(e){var t=ia.createRange();return t.selectNode(ia.body),t.createContextualFragment(e.responseText)}var na={version:"3.5.5"},ra=[].slice,oa=function(e){return ra.call(e)},ia=this.document;if(ia)try{oa(ia.documentElement.childNodes)[0].nodeType}catch(aa){oa=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),ia)try{ia.createElement("DIV").style.setProperty("opacity",0,"")}catch(sa){var la=this.Element.prototype,ua=la.setAttribute,ca=la.setAttributeNS,fa=this.CSSStyleDeclaration.prototype,da=fa.setProperty;la.setAttribute=function(e,t){ua.call(this,e,t+"")},la.setAttributeNS=function(e,t,n){ca.call(this,e,t,n+"")},fa.setProperty=function(e,t,n){da.call(this,e,t+"",n)}}na.ascending=n,na.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:0/0},na.min=function(e,t){var n,r,o=-1,i=e.length;if(1===arguments.length){for(;++o<i;)if(null!=(r=e[o])&&r>=r){n=r;break}for(;++o<i;)null!=(r=e[o])&&n>r&&(n=r)}else{for(;++o<i;)if(null!=(r=t.call(e,e[o],o))&&r>=r){n=r;break}for(;++o<i;)null!=(r=t.call(e,e[o],o))&&n>r&&(n=r)}return n},na.max=function(e,t){var n,r,o=-1,i=e.length;if(1===arguments.length){for(;++o<i;)if(null!=(r=e[o])&&r>=r){n=r;break}for(;++o<i;)null!=(r=e[o])&&r>n&&(n=r)}else{for(;++o<i;)if(null!=(r=t.call(e,e[o],o))&&r>=r){n=r;break}for(;++o<i;)null!=(r=t.call(e,e[o],o))&&r>n&&(n=r)}return n},na.extent=function(e,t){var n,r,o,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r>=r){n=o=r;break}for(;++i<a;)null!=(r=e[i])&&(n>r&&(n=r),r>o&&(o=r))}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=o=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&(n>r&&(n=r),r>o&&(o=r))}return[n,o]},na.sum=function(e,t){var n,r=0,i=e.length,a=-1;if(1===arguments.length)for(;++a<i;)o(n=+e[a])&&(r+=n);else for(;++a<i;)o(n=+t.call(e,e[a],a))&&(r+=n);return r},na.mean=function(e,t){var n,i=0,a=e.length,s=-1,l=a;if(1===arguments.length)for(;++s<a;)o(n=r(e[s]))?i+=n:--l;else for(;++s<a;)o(n=r(t.call(e,e[s],s)))?i+=n:--l;return l?i/l:void 0},na.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),o=+e[r-1],i=n-r;return i?o+i*(e[r]-o):o},na.median=function(e,t){var i,a=[],s=e.length,l=-1;if(1===arguments.length)for(;++l<s;)o(i=r(e[l]))&&a.push(i);else for(;++l<s;)o(i=r(t.call(e,e[l],l)))&&a.push(i);return a.length?na.quantile(a.sort(n),.5):void 0},na.variance=function(e,t){var n,i,a=e.length,s=0,l=0,u=-1,c=0;if(1===arguments.length)for(;++u<a;)o(n=r(e[u]))&&(i=n-s,s+=i/++c,l+=i*(n-s));else for(;++u<a;)o(n=r(t.call(e,e[u],u)))&&(i=n-s,s+=i/++c,l+=i*(n-s));return c>1?l/(c-1):void 0},na.deviation=function(){var e=na.variance.apply(this,arguments);return e?Math.sqrt(e):e};var pa=i(n);na.bisectLeft=pa.left,na.bisect=na.bisectRight=pa.right,na.bisector=function(e){return i(1===e.length?function(t,r){return n(e(t),r)}:e)},na.shuffle=function(e,t,n){(i=arguments.length)<3&&(n=e.length,2>i&&(t=0));for(var r,o,i=n-t;i;)o=Math.random()*i--|0,r=e[i+t],e[i+t]=e[o+t],e[o+t]=r;return e},na.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},na.pairs=function(e){for(var t,n=0,r=e.length-1,o=e[0],i=new Array(0>r?0:r);r>n;)i[n]=[t=o,o=e[++n]];return i},na.zip=function(){if(!(r=arguments.length))return[];for(var e=-1,t=na.min(arguments,a),n=new Array(t);++e<t;)for(var r,o=-1,i=n[e]=new Array(r);++o<r;)i[o]=arguments[o][e];return n},na.transpose=function(e){return na.zip.apply(na,e)},na.keys=function(e){var t=[];for(var n in e)t.push(n);return t},na.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},na.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},na.merge=function(e){for(var t,n,r,o=e.length,i=-1,a=0;++i<o;)a+=e[i].length;for(n=new Array(a);--o>=0;)for(r=e[o],t=r.length;--t>=0;)n[--a]=r[t];return n};var ha=Math.abs;na.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n===1/0)throw new Error("infinite range");var r,o=[],i=s(ha(n)),a=-1;if(e*=i,t*=i,n*=i,0>n)for(;(r=e+n*++a)>t;)o.push(r/i);else for(;(r=e+n*++a)<t;)o.push(r/i);return o},na.map=function(e,t){var n=new u;if(e instanceof u)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,o=-1,i=e.length;if(1===arguments.length)for(;++o<i;)n.set(o,e[o]);else for(;++o<i;)n.set(t.call(e,r=e[o],o),r)}else for(var a in e)n.set(a,e[a]);return n};var ga="__proto__",va="\x00";l(u,{has:d,get:function(e){return this._[c(e)]},set:function(e,t){return this._[c(e)]=t},remove:p,keys:h,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:f(t),value:this._[t]});return e},size:g,empty:v,forEach:function(e){for(var t in this._)e.call(this,f(t),this._[t])}}),na.nest=function(){function e(t,a,s){if(s>=i.length)return r?r.call(o,a):n?a.sort(n):a;for(var l,c,f,d,p=-1,h=a.length,g=i[s++],v=new u;++p<h;)(d=v.get(l=g(c=a[p])))?d.push(c):v.set(l,[c]);return t?(c=t(),f=function(n,r){c.set(n,e(t,r,s))}):(c={},f=function(n,r){c[n]=e(t,r,s)}),v.forEach(f),c}function t(e,n){if(n>=i.length)return e;var r=[],o=a[n++];return e.forEach(function(e,o){r.push({key:e,values:t(o,n)})}),o?r.sort(function(e,t){return o(e.key,t.key)}):r}var n,r,o={},i=[],a=[];return o.map=function(t,n){return e(n,t,0)},o.entries=function(n){return t(e(na.map,n,0),0)},o.key=function(e){return i.push(e),o},o.sortKeys=function(e){return a[i.length-1]=e,o},o.sortValues=function(e){return n=e,o},o.rollup=function(e){return r=e,o},o},na.set=function(e){var t=new m;if(e)for(var n=0,r=e.length;r>n;++n)t.add(e[n]);return t},l(m,{has:d,add:function(e){return this._[c(e+="")]=!0,e},remove:p,values:h,size:g,empty:v,forEach:function(e){for(var t in this._)e.call(this,f(t))}}),na.behavior={},na.rebind=function(e,t){for(var n,r=1,o=arguments.length;++r<o;)e[n=arguments[r]]=x(e,t,t[n]);return e};var ma=["webkit","ms","moz","Moz","o","O"];na.dispatch=function(){for(var e=new _,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=k(e);return e},_.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},na.event=null,na.requote=function(e){return e.replace(ya,"\\$&")};var ya=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,xa={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},ba=function(e,t){return t.querySelector(e)},wa=function(e,t){return t.querySelectorAll(e)},_a=function(e,t){var n=e.matches||e[b(e,"matchesSelector")];return(_a=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(ba=function(e,t){return Sizzle(e,t)[0]||null},wa=Sizzle,_a=Sizzle.matchesSelector),na.selection=function(){return na.select(ia.documentElement)};var ka=na.selection.prototype=[];ka.select=function(e){var t,n,r,o,i=[];e=E(e);for(var a=-1,s=this.length;++a<s;){i.push(t=[]),t.parentNode=(r=this[a]).parentNode;for(var l=-1,u=r.length;++l<u;)(o=r[l])?(t.push(n=e.call(o,o.__data__,l,a)),n&&"__data__"in o&&(n.__data__=o.__data__)):t.push(null)}return j(i)},ka.selectAll=function(e){var t,n,r=[];e=S(e);for(var o=-1,i=this.length;++o<i;)for(var a=this[o],s=-1,l=a.length;++s<l;)(n=a[s])&&(r.push(t=oa(e.call(n,n.__data__,s,o))),t.parentNode=n);return j(r)};var Aa={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};na.ns={prefix:Aa,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.slice(0,t),e=e.slice(t+1)),Aa.hasOwnProperty(n)?{space:Aa[n],local:e}:e}},ka.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=na.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(T(t,e[t]));return this}return this.each(T(e,t))},ka.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=O(e)).length,o=-1;if(t=n.classList){for(;++o<r;)if(!t.contains(e[o]))return!1}else for(t=n.getAttribute("class");++o<r;)if(!C(e[o]).test(t))return!1;return!0}for(t in e)this.each(q(t,e[t]));return this}return this.each(q(e,t))},ka.style=function(e,n,r){var o=arguments.length;if(3>o){if("string"!=typeof e){2>o&&(n="");for(r in e)this.each(F(r,e[r],n));return this;

}if(2>o){var i=this.node();return t(i).getComputedStyle(i,null).getPropertyValue(e)}r=""}return this.each(F(e,n,r))},ka.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(L(t,e[t]));return this}return this.each(L(e,t))},ka.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},ka.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},ka.append=function(e){return e=P(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},ka.insert=function(e,t){return e=P(e),t=E(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},ka.remove=function(){return this.each(R)},ka.data=function(e,t){function n(e,n){var r,o,i,a=e.length,f=n.length,d=Math.min(a,f),p=new Array(f),h=new Array(f),g=new Array(a);if(t){var v,m=new u,y=new Array(a);for(r=-1;++r<a;)m.has(v=t.call(o=e[r],o.__data__,r))?g[r]=o:m.set(v,o),y[r]=v;for(r=-1;++r<f;)(o=m.get(v=t.call(n,i=n[r],r)))?o!==!0&&(p[r]=o,o.__data__=i):h[r]=I(i),m.set(v,!0);for(r=-1;++r<a;)m.get(y[r])!==!0&&(g[r]=e[r])}else{for(r=-1;++r<d;)o=e[r],i=n[r],o?(o.__data__=i,p[r]=o):h[r]=I(i);for(;f>r;++r)h[r]=I(n[r]);for(;a>r;++r)g[r]=e[r]}h.update=p,h.parentNode=p.parentNode=g.parentNode=e.parentNode,s.push(h),l.push(p),c.push(g)}var r,o,i=-1,a=this.length;if(!arguments.length){for(e=new Array(a=(r=this[0]).length);++i<a;)(o=r[i])&&(e[i]=o.__data__);return e}var s=H([]),l=j([]),c=j([]);if("function"==typeof e)for(;++i<a;)n(r=this[i],e.call(r,r.parentNode.__data__,i));else for(;++i<a;)n(r=this[i],e);return l.enter=function(){return s},l.exit=function(){return c},l},ka.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},ka.filter=function(e){var t,n,r,o=[];"function"!=typeof e&&(e=B(e));for(var i=0,a=this.length;a>i;i++){o.push(t=[]),t.parentNode=(n=this[i]).parentNode;for(var s=0,l=n.length;l>s;s++)(r=n[s])&&e.call(r,r.__data__,s,i)&&t.push(r)}return j(o)},ka.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],o=r.length-1,i=r[o];--o>=0;)(n=r[o])&&(i&&i!==n.nextSibling&&i.parentNode.insertBefore(n,i),i=n);return this},ka.sort=function(e){e=U.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},ka.each=function(e){return V(this,function(t,n,r){e.call(t,t.__data__,n,r)})},ka.call=function(e){var t=oa(arguments);return e.apply(t[0]=this,t),this},ka.empty=function(){return!this.node()},ka.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],r=0,o=n.length;o>r;r++){var i=n[r];if(i)return i}return null},ka.size=function(){var e=0;return V(this,function(){++e}),e};var Ma=[];na.selection.enter=H,na.selection.enter.prototype=Ma,Ma.append=ka.append,Ma.empty=ka.empty,Ma.node=ka.node,Ma.call=ka.call,Ma.size=ka.size,Ma.select=function(e){for(var t,n,r,o,i,a=[],s=-1,l=this.length;++s<l;){r=(o=this[s]).update,a.push(t=[]),t.parentNode=o.parentNode;for(var u=-1,c=o.length;++u<c;)(i=o[u])?(t.push(r[u]=n=e.call(o.parentNode,i.__data__,u,s)),n.__data__=i.__data__):t.push(null)}return j(a)},Ma.insert=function(e,t){return arguments.length<2&&(t=Y(this)),ka.insert.call(this,e,t)},na.select=function(t){var n;return"string"==typeof t?(n=[ba(t,ia)],n.parentNode=ia.documentElement):(n=[t],n.parentNode=e(t)),j([n])},na.selectAll=function(e){var t;return"string"==typeof e?(t=oa(wa(e,ia)),t.parentNode=ia.documentElement):(t=e,t.parentNode=null),j([t])},ka.on=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t=!1);for(n in e)this.each($(n,e[n],t));return this}if(2>r)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each($(e,t,n))};var za=na.map({mouseenter:"mouseover",mouseleave:"mouseout"});ia&&za.forEach(function(e){"on"+e in ia&&za.remove(e)});var ja,Ea=0;na.mouse=function(e){return G(e,M())};var Sa=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;na.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=M().changedTouches),t)for(var r,o=0,i=t.length;i>o;++o)if((r=t[o]).identifier===n)return G(e,r)},na.behavior.drag=function(){function e(){this.on("mousedown.drag",i).on("touchstart.drag",a)}function n(e,t,n,i,a){return function(){function s(){var e,n,r=t(d,g);r&&(e=r[0]-x[0],n=r[1]-x[1],h|=e|n,x=r,p({type:"drag",x:r[0]+u[0],y:r[1]+u[1],dx:e,dy:n}))}function l(){t(d,g)&&(m.on(i+v,null).on(a+v,null),y(h&&na.event.target===f),p({type:"dragend"}))}var u,c=this,f=na.event.target,d=c.parentNode,p=r.of(c,arguments),h=0,g=e(),v=".drag"+(null==g?"":"-"+g),m=na.select(n(f)).on(i+v,s).on(a+v,l),y=Z(f),x=t(d,g);o?(u=o.apply(c,arguments),u=[u.x-x[0],u.y-x[1]]):u=[0,0],p({type:"dragstart"})}}var r=z(e,"drag","dragstart","dragend"),o=null,i=n(w,na.mouse,t,"mousemove","mouseup"),a=n(J,na.touch,y,"touchmove","touchend");return e.origin=function(t){return arguments.length?(o=t,e):o},na.rebind(e,r,"on")},na.touches=function(e,t){return arguments.length<2&&(t=M().touches),t?oa(t).map(function(t){var n=G(e,t);return n.identifier=t.identifier,n}):[]};var Ta=1e-6,Na=Ta*Ta,Ca=Math.PI,Oa=2*Ca,qa=Oa-Ta,Da=Ca/2,Fa=Ca/180,La=180/Ca,Pa=Math.SQRT2,Ra=2,Ia=4;na.interpolateZoom=function(e,t){function n(e){var t=e*y;if(m){var n=re(g),a=i/(Ra*d)*(n*oe(Pa*t+g)-ne(g));return[r+a*u,o+a*c,i*n/re(Pa*t+g)]}return[r+e*u,o+e*c,i*Math.exp(Pa*t)]}var r=e[0],o=e[1],i=e[2],a=t[0],s=t[1],l=t[2],u=a-r,c=s-o,f=u*u+c*c,d=Math.sqrt(f),p=(l*l-i*i+Ia*f)/(2*i*Ra*d),h=(l*l-i*i-Ia*f)/(2*l*Ra*d),g=Math.log(Math.sqrt(p*p+1)-p),v=Math.log(Math.sqrt(h*h+1)-h),m=v-g,y=(m||Math.log(l/i))/Pa;return n.duration=1e3*y,n},na.behavior.zoom=function(){function e(e){e.on(N,f).on(Ua+".zoom",p).on("dblclick.zoom",h).on(q,d)}function n(e){return[(e[0]-M.x)/M.k,(e[1]-M.y)/M.k]}function r(e){return[e[0]*M.k+M.x,e[1]*M.k+M.y]}function o(e){M.k=Math.max(E[0],Math.min(E[1],e))}function i(e,t){t=r(t),M.x+=e[0]-t[0],M.y+=e[1]-t[1]}function a(t,n,r,a){t.__chart__={x:M.x,y:M.y,k:M.k},o(Math.pow(2,a)),i(v=n,r),t=na.select(t),S>0&&(t=t.transition().duration(S)),t.call(e.event)}function s(){w&&w.domain(b.range().map(function(e){return(e-M.x)/M.k}).map(b.invert)),k&&k.domain(_.range().map(function(e){return(e-M.y)/M.k}).map(_.invert))}function l(e){T++||e({type:"zoomstart"})}function u(e){s(),e({type:"zoom",scale:M.k,translate:[M.x,M.y]})}function c(e){--T||e({type:"zoomend"}),v=null}function f(){function e(){f=1,i(na.mouse(o),p),u(s)}function r(){d.on(C,null).on(O,null),h(f&&na.event.target===a),c(s)}var o=this,a=na.event.target,s=D.of(o,arguments),f=0,d=na.select(t(o)).on(C,e).on(O,r),p=n(na.mouse(o)),h=Z(o);Fl.call(o),l(s)}function d(){function e(){var e=na.touches(h);return p=M.k,e.forEach(function(e){e.identifier in v&&(v[e.identifier]=n(e))}),e}function t(){var t=na.event.target;na.select(t).on(b,r).on(w,s),_.push(t);for(var n=na.event.changedTouches,o=0,i=n.length;i>o;++o)v[n[o].identifier]=null;var l=e(),u=Date.now();if(1===l.length){if(500>u-x){var c=l[0];a(h,c,v[c.identifier],Math.floor(Math.log(M.k)/Math.LN2)+1),A()}x=u}else if(l.length>1){var c=l[0],f=l[1],d=c[0]-f[0],p=c[1]-f[1];m=d*d+p*p}}function r(){var e,t,n,r,a=na.touches(h);Fl.call(h);for(var s=0,l=a.length;l>s;++s,r=null)if(n=a[s],r=v[n.identifier]){if(t)break;e=n,t=r}if(r){var c=(c=n[0]-e[0])*c+(c=n[1]-e[1])*c,f=m&&Math.sqrt(c/m);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],o(f*p)}x=null,i(e,t),u(g)}function s(){if(na.event.touches.length){for(var t=na.event.changedTouches,n=0,r=t.length;r>n;++n)delete v[t[n].identifier];for(var o in v)return void e()}na.selectAll(_).on(y,null),k.on(N,f).on(q,d),z(),c(g)}var p,h=this,g=D.of(h,arguments),v={},m=0,y=".zoom-"+na.event.changedTouches[0].identifier,b="touchmove"+y,w="touchend"+y,_=[],k=na.select(h),z=Z(h);t(),l(g),k.on(N,null).on(q,t)}function p(){var e=D.of(this,arguments);y?clearTimeout(y):(g=n(v=m||na.mouse(this)),Fl.call(this),l(e)),y=setTimeout(function(){y=null,c(e)},50),A(),o(Math.pow(2,.002*Ba())*M.k),i(v,g),u(e)}function h(){var e=na.mouse(this),t=Math.log(M.k)/Math.LN2;a(this,e,n(e),na.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var g,v,m,y,x,b,w,_,k,M={x:0,y:0,k:1},j=[960,500],E=Va,S=250,T=0,N="mousedown.zoom",C="mousemove.zoom",O="mouseup.zoom",q="touchstart.zoom",D=z(e,"zoomstart","zoom","zoomend");return Ua||(Ua="onwheel"in ia?(Ba=function(){return-na.event.deltaY*(na.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ia?(Ba=function(){return na.event.wheelDelta},"mousewheel"):(Ba=function(){return-na.event.detail},"MozMousePixelScroll")),e.event=function(e){e.each(function(){var e=D.of(this,arguments),t=M;ql?na.select(this).transition().each("start.zoom",function(){M=this.__chart__||{x:0,y:0,k:1},l(e)}).tween("zoom:zoom",function(){var n=j[0],r=j[1],o=v?v[0]:n/2,i=v?v[1]:r/2,a=na.interpolateZoom([(o-M.x)/M.k,(i-M.y)/M.k,n/M.k],[(o-t.x)/t.k,(i-t.y)/t.k,n/t.k]);return function(t){var r=a(t),s=n/r[2];this.__chart__=M={x:o-r[0]*s,y:i-r[1]*s,k:s},u(e)}}).each("interrupt.zoom",function(){c(e)}).each("end.zoom",function(){c(e)}):(this.__chart__=M,l(e),u(e),c(e))})},e.translate=function(t){return arguments.length?(M={x:+t[0],y:+t[1],k:M.k},s(),e):[M.x,M.y]},e.scale=function(t){return arguments.length?(M={x:M.x,y:M.y,k:+t},s(),e):M.k},e.scaleExtent=function(t){return arguments.length?(E=null==t?Va:[+t[0],+t[1]],e):E},e.center=function(t){return arguments.length?(m=t&&[+t[0],+t[1]],e):m},e.size=function(t){return arguments.length?(j=t&&[+t[0],+t[1]],e):j},e.duration=function(t){return arguments.length?(S=+t,e):S},e.x=function(t){return arguments.length?(w=t,b=t.copy(),M={x:0,y:0,k:1},e):w},e.y=function(t){return arguments.length?(k=t,_=t.copy(),M={x:0,y:0,k:1},e):k},na.rebind(e,D,"on")};var Ba,Ua,Va=[0,1/0];na.color=ae,ae.prototype.toString=function(){return this.rgb()+""},na.hsl=se;var Ha=se.prototype=new ae;Ha.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new se(this.h,this.s,this.l/e)},Ha.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new se(this.h,this.s,e*this.l)},Ha.rgb=function(){return le(this.h,this.s,this.l)},na.hcl=ue;var Ya=ue.prototype=new ae;Ya.brighter=function(e){return new ue(this.h,this.c,Math.min(100,this.l+$a*(arguments.length?e:1)))},Ya.darker=function(e){return new ue(this.h,this.c,Math.max(0,this.l-$a*(arguments.length?e:1)))},Ya.rgb=function(){return ce(this.h,this.c,this.l).rgb()},na.lab=fe;var $a=18,Wa=.95047,Xa=1,Za=1.08883,Ga=fe.prototype=new ae;Ga.brighter=function(e){return new fe(Math.min(100,this.l+$a*(arguments.length?e:1)),this.a,this.b)},Ga.darker=function(e){return new fe(Math.max(0,this.l-$a*(arguments.length?e:1)),this.a,this.b)},Ga.rgb=function(){return de(this.l,this.a,this.b)},na.rgb=me;var Ja=me.prototype=new ae;Ja.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,o=30;return t||n||r?(t&&o>t&&(t=o),n&&o>n&&(n=o),r&&o>r&&(r=o),new me(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new me(o,o,o)},Ja.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new me(e*this.r,e*this.g,e*this.b)},Ja.hsl=function(){return _e(this.r,this.g,this.b)},Ja.toString=function(){return"#"+be(this.r)+be(this.g)+be(this.b)};var Qa=na.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Qa.forEach(function(e,t){Qa.set(e,ye(t))}),na.functor=ze,na.xhr=je(y),na.dsv=function(e,t){function n(e,n,i){arguments.length<3&&(i=n,n=null);var a=Ee(e,t,null==n?r:o(n),i);return a.row=function(e){return arguments.length?a.response(null==(n=e)?r:o(e)):n},a}function r(e){return n.parse(e.responseText)}function o(e){return function(t){return n.parse(t.responseText,e)}}function i(t){return t.map(a).join(e)}function a(e){return s.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var s=new RegExp('["'+e+"\n]"),l=e.charCodeAt(0);return n.parse=function(e,t){var r;return n.parseRows(e,function(e,n){if(r)return r(e,n-1);var o=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(o(e),n)}:o})},n.parseRows=function(e,t){function n(){if(c>=u)return a;if(o)return o=!1,i;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<u;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}c=n+2;var r=e.charCodeAt(n+1);return 13===r?(o=!0,10===e.charCodeAt(n+2)&&++c):10===r&&(o=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;u>c;){var r=e.charCodeAt(c++),s=1;if(10===r)o=!0;else if(13===r)o=!0,10===e.charCodeAt(c)&&(++c,++s);else if(r!==l)continue;return e.slice(t,c-s)}return e.slice(t)}for(var r,o,i={},a={},s=[],u=e.length,c=0,f=0;(r=n())!==a;){for(var d=[];r!==i&&r!==a;)d.push(r),r=n();t&&null==(d=t(d,f++))||s.push(d)}return s},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new m,o=[];return t.forEach(function(e){for(var t in e)r.has(t)||o.push(r.add(t))}),[o.map(a).join(e)].concat(t.map(function(t){return o.map(function(e){return a(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(i).join("\n")},n},na.csv=na.dsv(",","text/csv"),na.tsv=na.dsv("	","text/tab-separated-values");var Ka,es,ts,ns,rs,os=this[b(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};na.timer=function(e,t,n){var r=arguments.length;2>r&&(t=0),3>r&&(n=Date.now());var o=n+t,i={c:e,t:o,f:!1,n:null};es?es.n=i:Ka=i,es=i,ts||(ns=clearTimeout(ns),ts=1,os(Ne))},na.timer.flush=function(){Ce(),Oe()},na.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var is=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(De);na.formatPrefix=function(e,t){var n=0;return e&&(0>e&&(e*=-1),t&&(e=na.round(e,qe(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),is[8+n/3]};var as=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ss=na.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=na.round(e,qe(e,t))).toFixed(Math.max(0,Math.min(20,qe(e*(1+1e-15),t))))}}),ls=na.time={},us=Date;Pe.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){cs.setUTCDate.apply(this._,arguments)},setDay:function(){cs.setUTCDay.apply(this._,arguments)},setFullYear:function(){cs.setUTCFullYear.apply(this._,arguments)},setHours:function(){cs.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){cs.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){cs.setUTCMinutes.apply(this._,arguments)},setMonth:function(){cs.setUTCMonth.apply(this._,arguments)},setSeconds:function(){cs.setUTCSeconds.apply(this._,arguments)},setTime:function(){cs.setTime.apply(this._,arguments)}};var cs=Date.prototype;ls.year=Re(function(e){return e=ls.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),ls.years=ls.year.range,ls.years.utc=ls.year.utc.range,ls.day=Re(function(e){var t=new us(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),ls.days=ls.day.range,ls.days.utc=ls.day.utc.range,ls.dayOfYear=function(e){var t=ls.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=ls[e]=Re(function(e){return(e=ls.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=ls.year(e).getDay();return Math.floor((ls.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});ls[e+"s"]=n.range,ls[e+"s"].utc=n.utc.range,ls[e+"OfYear"]=function(e){var n=ls.year(e).getDay();return Math.floor((ls.dayOfYear(e)+(n+t)%7)/7)}}),ls.week=ls.sunday,ls.weeks=ls.sunday.range,ls.weeks.utc=ls.sunday.utc.range,ls.weekOfYear=ls.sundayOfYear;var fs={"-":"",_:" ",0:"0"},ds=/^\s*\d+/,ps=/^%/;na.locale=function(e){return{numberFormat:Fe(e),timeFormat:Be(e)}};var hs=na.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});na.format=hs.numberFormat,na.geo={},lt.prototype={s:0,t:0,add:function(e){ut(e,this.t,gs),ut(gs.s,this.s,this),this.s?this.t+=gs.t:this.s=gs.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var gs=new lt;na.geo.stream=function(e,t){e&&vs.hasOwnProperty(e.type)?vs[e.type](e,t):ct(e,t)};var vs={Feature:function(e,t){ct(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,o=n.length;++r<o;)ct(n[r].geometry,t)}},ms={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,o=n.length;++r<o;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){ft(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,o=n.length;++r<o;)ft(n[r],t,0)},Polygon:function(e,t){dt(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,o=n.length;++r<o;)dt(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,o=n.length;++r<o;)ct(n[r],t)}};na.geo.area=function(e){return ys=0,na.geo.stream(e,bs),ys};var ys,xs=new lt,bs={sphere:function(){ys+=4*Ca},point:w,lineStart:w,lineEnd:w,polygonStart:function(){xs.reset(),bs.lineStart=pt},polygonEnd:function(){var e=2*xs;ys+=0>e?4*Ca+e:e,bs.lineStart=bs.lineEnd=bs.point=w}};na.geo.bounds=function(){function e(e,t){x.push(b=[c=e,d=e]),f>t&&(f=t),t>p&&(p=t)}function t(t,n){var r=ht([t*Fa,n*Fa]);if(m){var o=vt(m,r),i=[o[1],-o[0],0],a=vt(i,o);xt(a),a=bt(a);var l=t-h,u=l>0?1:-1,g=a[0]*La*u,v=ha(l)>180;if(v^(g>u*h&&u*t>g)){var y=a[1]*La;y>p&&(p=y)}else if(g=(g+360)%360-180,v^(g>u*h&&u*t>g)){var y=-a[1]*La;f>y&&(f=y)}else f>n&&(f=n),n>p&&(p=n);v?h>t?s(c,t)>s(c,d)&&(d=t):s(t,d)>s(c,d)&&(c=t):d>=c?(c>t&&(c=t),t>d&&(d=t)):t>h?s(c,t)>s(c,d)&&(d=t):s(t,d)>s(c,d)&&(c=t)}else e(t,n);m=r,h=t}function n(){w.point=t}function r(){b[0]=c,b[1]=d,w.point=e,m=null}function o(e,n){if(m){var r=e-h;y+=ha(r)>180?r+(r>0?360:-360):r}else g=e,v=n;bs.point(e,n),t(e,n)}function i(){bs.lineStart()}function a(){o(g,v),bs.lineEnd(),ha(y)>Ta&&(c=-(d=180)),b[0]=c,b[1]=d,m=null}function s(e,t){return(t-=e)<0?t+360:t}function l(e,t){return e[0]-t[0]}function u(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var c,f,d,p,h,g,v,m,y,x,b,w={point:e,lineStart:n,lineEnd:r,polygonStart:function(){w.point=o,w.lineStart=i,w.lineEnd=a,y=0,bs.polygonStart()},polygonEnd:function(){bs.polygonEnd(),w.point=e,w.lineStart=n,w.lineEnd=r,0>xs?(c=-(d=180),f=-(p=90)):y>Ta?p=90:-Ta>y&&(f=-90),b[0]=c,b[1]=d}};return function(e){p=d=-(c=f=1/0),x=[],na.geo.stream(e,w);var t=x.length;if(t){x.sort(l);for(var n,r=1,o=x[0],i=[o];t>r;++r)n=x[r],u(n[0],o)||u(n[1],o)?(s(o[0],n[1])>s(o[0],o[1])&&(o[1]=n[1]),s(n[0],o[1])>s(o[0],o[1])&&(o[0]=n[0])):i.push(o=n);for(var a,n,h=-(1/0),t=i.length-1,r=0,o=i[t];t>=r;o=n,++r)n=i[r],(a=s(o[1],n[0]))>h&&(h=a,c=n[0],d=o[1])}return x=b=null,c===1/0||f===1/0?[[0/0,0/0],[0/0,0/0]]:[[c,f],[d,p]]}}(),na.geo.centroid=function(e){ws=_s=ks=As=Ms=zs=js=Es=Ss=Ts=Ns=0,na.geo.stream(e,Cs);var t=Ss,n=Ts,r=Ns,o=t*t+n*n+r*r;return Na>o&&(t=zs,n=js,r=Es,Ta>_s&&(t=ks,n=As,r=Ms),o=t*t+n*n+r*r,Na>o)?[0/0,0/0]:[Math.atan2(n,t)*La,te(r/Math.sqrt(o))*La]};var ws,_s,ks,As,Ms,zs,js,Es,Ss,Ts,Ns,Cs={sphere:w,point:_t,lineStart:At,lineEnd:Mt,polygonStart:function(){Cs.lineStart=zt},polygonEnd:function(){Cs.lineStart=At}},Os=Ct(Et,Ft,Pt,[-Ca,-Ca/2]),qs=1e9;na.geo.clipExtent=function(){var e,t,n,r,o,i,a={stream:function(e){return o&&(o.valid=!1),o=i(e),o.valid=!0,o},extent:function(s){return arguments.length?(i=Ut(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1]),o&&(o.valid=!1,o=null),a):[[e,t],[n,r]]}};return a.extent([[0,0],[960,500]])},(na.geo.conicEqualArea=function(){return Vt(Ht)}).raw=Ht,na.geo.albers=function(){return na.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},na.geo.albersUsa=function(){function e(e){var i=e[0],a=e[1];return t=null,n(i,a),t||(r(i,a),t)||o(i,a),t}var t,n,r,o,i=na.geo.albers(),a=na.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=na.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=i.scale(),n=i.translate(),r=(e[0]-n[0])/t,o=(e[1]-n[1])/t;return(o>=.12&&.234>o&&r>=-.425&&-.214>r?a:o>=.166&&.234>o&&r>=-.214&&-.115>r?s:i).invert(e)},e.stream=function(e){var t=i.stream(e),n=a.stream(e),r=s.stream(e);return{point:function(e,o){t.point(e,o),n.point(e,o),r.point(e,o)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},e.precision=function(t){return arguments.length?(i.precision(t),a.precision(t),s.precision(t),e):i.precision()},e.scale=function(t){return arguments.length?(i.scale(t),a.scale(.35*t),s.scale(t),e.translate(i.translate())):i.scale()},e.translate=function(t){if(!arguments.length)return i.translate();var u=i.scale(),c=+t[0],f=+t[1];return n=i.translate(t).clipExtent([[c-.455*u,f-.238*u],[c+.455*u,f+.238*u]]).stream(l).point,r=a.translate([c-.307*u,f+.201*u]).clipExtent([[c-.425*u+Ta,f+.12*u+Ta],[c-.214*u-Ta,f+.234*u-Ta]]).stream(l).point,o=s.translate([c-.205*u,f+.212*u]).clipExtent([[c-.214*u+Ta,f+.166*u+Ta],[c-.115*u-Ta,f+.234*u-Ta]]).stream(l).point,e},e.scale(1070)};var Ds,Fs,Ls,Ps,Rs,Is,Bs={point:w,lineStart:w,lineEnd:w,polygonStart:function(){Fs=0,Bs.lineStart=Yt},polygonEnd:function(){Bs.lineStart=Bs.lineEnd=Bs.point=w,Ds+=ha(Fs/2)}},Us={point:$t,lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Vs={point:Zt,lineStart:Gt,lineEnd:Jt,polygonStart:function(){Vs.lineStart=Qt},polygonEnd:function(){Vs.point=Zt,Vs.lineStart=Gt,Vs.lineEnd=Jt}};na.geo.path=function(){function e(e){return e&&("function"==typeof s&&i.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=o(i)),na.geo.stream(e,a)),i.result()}function t(){return a=null,e}var n,r,o,i,a,s=4.5;return e.area=function(e){return Ds=0,na.geo.stream(e,o(Bs)),Ds},e.centroid=function(e){return ks=As=Ms=zs=js=Es=Ss=Ts=Ns=0,na.geo.stream(e,o(Vs)),Ns?[Ss/Ns,Ts/Ns]:Es?[zs/Es,js/Es]:Ms?[ks/Ms,As/Ms]:[0/0,0/0]},e.bounds=function(e){return Rs=Is=-(Ls=Ps=1/0),na.geo.stream(e,o(Us)),[[Ls,Ps],[Rs,Is]]},e.projection=function(e){return arguments.length?(o=(n=e)?e.stream||tn(e):y,t()):n},e.context=function(e){return arguments.length?(i=null==(r=e)?new Wt:new Kt(e),"function"!=typeof s&&i.pointRadius(s),t()):r},e.pointRadius=function(t){return arguments.length?(s="function"==typeof t?t:(i.pointRadius(+t),+t),e):s},e.projection(na.geo.albersUsa()).context(null)},na.geo.transform=function(e){return{stream:function(t){var n=new nn(t);for(var r in e)n[r]=e[r];return n}}},nn.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},na.geo.projection=on,na.geo.projectionMutator=an,(na.geo.equirectangular=function(){return on(ln)}).raw=ln.invert=ln,na.geo.rotation=function(e){function t(t){return t=e(t[0]*Fa,t[1]*Fa),t[0]*=La,t[1]*=La,t}return e=cn(e[0]%360*Fa,e[1]*Fa,e.length>2?e[2]*Fa:0),t.invert=function(t){return t=e.invert(t[0]*Fa,t[1]*Fa),t[0]*=La,t[1]*=La,t},t},un.invert=ln,na.geo.circle=function(){function e(){var e="function"==typeof r?r.apply(this,arguments):r,t=cn(-e[0]*Fa,-e[1]*Fa,0).invert,o=[];return n(null,null,1,{point:function(e,n){o.push(e=t(e,n)),e[0]*=La,e[1]*=La}}),{type:"Polygon",coordinates:[o]}}var t,n,r=[0,0],o=6;return e.origin=function(t){return arguments.length?(r=t,e):r},e.angle=function(r){return arguments.length?(n=hn((t=+r)*Fa,o*Fa),e):t},e.precision=function(r){return arguments.length?(n=hn(t*Fa,(o=+r)*Fa),e):o},e.angle(90)},na.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Fa,o=e[1]*Fa,i=t[1]*Fa,a=Math.sin(r),s=Math.cos(r),l=Math.sin(o),u=Math.cos(o),c=Math.sin(i),f=Math.cos(i);return Math.atan2(Math.sqrt((n=f*a)*n+(n=u*c-l*f*s)*n),l*c+u*f*s)},na.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return na.range(Math.ceil(i/v)*v,o,v).map(d).concat(na.range(Math.ceil(u/m)*m,l,m).map(p)).concat(na.range(Math.ceil(r/h)*h,n,h).filter(function(e){return ha(e%v)>Ta}).map(c)).concat(na.range(Math.ceil(s/g)*g,a,g).filter(function(e){return ha(e%m)>Ta}).map(f))}var n,r,o,i,a,s,l,u,c,f,d,p,h=10,g=h,v=90,m=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[d(i).concat(p(l).slice(1),d(o).reverse().slice(1),p(u).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(i=+t[0][0],o=+t[1][0],u=+t[0][1],l=+t[1][1],i>o&&(t=i,i=o,o=t),u>l&&(t=u,u=l,l=t),e.precision(y)):[[i,u],[o,l]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),e.precision(y)):[[r,s],[n,a]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(v=+t[0],m=+t[1],e):[v,m]},e.minorStep=function(t){return arguments.length?(h=+t[0],g=+t[1],e):[h,g]},e.precision=function(t){return arguments.length?(y=+t,c=vn(s,a,90),f=mn(r,n,y),d=vn(u,l,90),p=mn(i,o,y),e):y},e.majorExtent([[-180,-90+Ta],[180,90-Ta]]).minorExtent([[-180,-80-Ta],[180,80+Ta]])},na.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||o.apply(this,arguments)]}}var t,n,r=yn,o=xn;return e.distance=function(){return na.geo.distance(t||r.apply(this,arguments),n||o.apply(this,arguments))},e.source=function(n){return arguments.length?(r=n,t="function"==typeof n?null:n,e):r},e.target=function(t){return arguments.length?(o=t,n="function"==typeof t?null:t,e):o},e.precision=function(){return arguments.length?e:0},e},na.geo.interpolate=function(e,t){return bn(e[0]*Fa,e[1]*Fa,t[0]*Fa,t[1]*Fa)},na.geo.length=function(e){return Hs=0,na.geo.stream(e,Ys),Hs};var Hs,Ys={sphere:w,point:w,lineStart:wn,lineEnd:w,polygonStart:w,polygonEnd:w},$s=_n(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(na.geo.azimuthalEqualArea=function(){return on($s)}).raw=$s;var Ws=_n(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},y);(na.geo.azimuthalEquidistant=function(){return on(Ws)}).raw=Ws,(na.geo.conicConformal=function(){return Vt(kn)}).raw=kn,(na.geo.conicEquidistant=function(){return Vt(An)}).raw=An;var Xs=_n(function(e){return 1/e},Math.atan);(na.geo.gnomonic=function(){return on(Xs)}).raw=Xs,Mn.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Da]},(na.geo.mercator=function(){return zn(Mn)}).raw=Mn;var Zs=_n(function(){return 1},Math.asin);(na.geo.orthographic=function(){return on(Zs)}).raw=Zs;var Gs=_n(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(na.geo.stereographic=function(){return on(Gs)}).raw=Gs,jn.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Da]},(na.geo.transverseMercator=function(){var e=zn(jn),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=jn,na.geom={},na.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,o=ze(n),i=ze(r),a=e.length,s=[],l=[];for(t=0;a>t;t++)s.push([+o.call(this,e[t],t),+i.call(this,e[t],t),t]);for(s.sort(Nn),t=0;a>t;t++)l.push([s[t][0],-s[t][1]]);var u=Tn(s),c=Tn(l),f=c[0]===u[0],d=c[c.length-1]===u[u.length-1],p=[];for(t=u.length-1;t>=0;--t)p.push(e[s[u[t]][2]]);for(t=+f;t<c.length-d;++t)p.push(e[s[c[t]][2]]);return p}var n=En,r=Sn;

return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t)},na.geom.polygon=function(e){return xa(e,Js),e};var Js=na.geom.polygon.prototype=[];Js.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],o=0;++t<n;)e=r,r=this[t],o+=e[1]*r[0]-e[0]*r[1];return.5*o},Js.centroid=function(e){var t,n,r=-1,o=this.length,i=0,a=0,s=this[o-1];for(arguments.length||(e=-1/(6*this.area()));++r<o;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],i+=(t[0]+s[0])*n,a+=(t[1]+s[1])*n;return[i*e,a*e]},Js.clip=function(e){for(var t,n,r,o,i,a,s=qn(e),l=-1,u=this.length-qn(this),c=this[u-1];++l<u;){for(t=e.slice(),e.length=0,o=this[l],i=t[(r=t.length-s)-1],n=-1;++n<r;)a=t[n],Cn(a,c,o)?(Cn(i,c,o)||e.push(On(i,a,c,o)),e.push(a)):Cn(i,c,o)&&e.push(On(i,a,c,o)),i=a;s&&e.push(e[0]),c=o}return e};var Qs,Ks,el,tl,nl,rl=[],ol=[];Un.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort(Hn),t.length},er.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},tr.prototype={insert:function(e,t){var n,r,o;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=ir(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(o=r.R,o&&o.C?(n.C=o.C=!1,r.C=!0,e=r):(e===n.R&&(rr(this,n),e=n,n=e.U),n.C=!1,r.C=!0,or(this,r))):(o=r.L,o&&o.C?(n.C=o.C=!1,r.C=!0,e=r):(e===n.L&&(or(this,n),e=n,n=e.U),n.C=!1,r.C=!0,rr(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,o=e.U,i=e.L,a=e.R;if(n=i?a?ir(a):i:a,o?o.L===e?o.L=n:o.R=n:this._=n,i&&a?(r=n.C,n.C=e.C,n.L=i,i.U=n,n!==a?(o=n.U,n.U=e.U,e=n.R,o.L=e,n.R=a,a.U=n):(n.U=o,o=n,e=n.R)):(r=e.C,e=n),e&&(e.U=o),!r){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===o.L){if(t=o.R,t.C&&(t.C=!1,o.C=!0,rr(this,o),t=o.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,or(this,t),t=o.R),t.C=o.C,o.C=t.R.C=!1,rr(this,o),e=this._;break}}else if(t=o.L,t.C&&(t.C=!1,o.C=!0,or(this,o),t=o.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,rr(this,t),t=o.L),t.C=o.C,o.C=t.L.C=!1,or(this,o),e=this._;break}t.C=!0,e=o,o=o.U}while(!e.C);e&&(e.C=!1)}}},na.geom.voronoi=function(e){function t(e){var t=new Array(e.length),r=s[0][0],o=s[0][1],i=s[1][0],a=s[1][1];return ar(n(e),s).cells.forEach(function(n,s){var l=n.edges,u=n.site,c=t[s]=l.length?l.map(function(e){var t=e.start();return[t.x,t.y]}):u.x>=r&&u.x<=i&&u.y>=o&&u.y<=a?[[r,a],[i,a],[i,o],[r,o]]:[];c.point=e[s]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(i(e,t)/Ta)*Ta,y:Math.round(a(e,t)/Ta)*Ta,i:t}})}var r=En,o=Sn,i=r,a=o,s=il;return e?t(e):(t.links=function(e){return ar(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return ar(n(e)).cells.forEach(function(n,r){for(var o,i,a=n.site,s=n.edges.sort(Hn),l=-1,u=s.length,c=s[u-1].edge,f=c.l===a?c.r:c.l;++l<u;)o=c,i=f,c=s[l].edge,f=c.l===a?c.r:c.l,r<i.i&&r<f.i&&lr(a,i,f)<0&&t.push([e[r],e[i.i],e[f.i]])}),t},t.x=function(e){return arguments.length?(i=ze(r=e),t):r},t.y=function(e){return arguments.length?(a=ze(o=e),t):o},t.clipExtent=function(e){return arguments.length?(s=null==e?il:e,t):s===il?null:s},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):s===il?null:s&&s[1]},t)};var il=[[-1e6,-1e6],[1e6,1e6]];na.geom.delaunay=function(e){return na.geom.voronoi().triangles(e)},na.geom.quadtree=function(e,t,n,r,o){function i(e){function i(e,t,n,r,o,i,a,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var l=e.x,c=e.y;if(null!=l)if(ha(l-n)+ha(c-r)<.01)u(e,t,n,r,o,i,a,s);else{var f=e.point;e.x=e.y=e.point=null,u(e,f,l,c,o,i,a,s),u(e,t,n,r,o,i,a,s)}else e.x=n,e.y=r,e.point=t}else u(e,t,n,r,o,i,a,s)}function u(e,t,n,r,o,a,s,l){var u=.5*(o+s),c=.5*(a+l),f=n>=u,d=r>=c,p=d<<1|f;e.leaf=!1,e=e.nodes[p]||(e.nodes[p]=fr()),f?o=u:s=u,d?a=c:l=c,i(e,t,n,r,o,a,s,l)}var c,f,d,p,h,g,v,m,y,x=ze(s),b=ze(l);if(null!=t)g=t,v=n,m=r,y=o;else if(m=y=-(g=v=1/0),f=[],d=[],h=e.length,a)for(p=0;h>p;++p)c=e[p],c.x<g&&(g=c.x),c.y<v&&(v=c.y),c.x>m&&(m=c.x),c.y>y&&(y=c.y),f.push(c.x),d.push(c.y);else for(p=0;h>p;++p){var w=+x(c=e[p],p),_=+b(c,p);g>w&&(g=w),v>_&&(v=_),w>m&&(m=w),_>y&&(y=_),f.push(w),d.push(_)}var k=m-g,A=y-v;k>A?y=v+k:m=g+A;var M=fr();if(M.add=function(e){i(M,e,+x(e,++p),+b(e,p),g,v,m,y)},M.visit=function(e){dr(e,M,g,v,m,y)},M.find=function(e){return pr(M,e[0],e[1],g,v,m,y)},p=-1,null==t){for(;++p<h;)i(M,e[p],f[p],d[p],g,v,m,y);--p}else e.forEach(M.add);return f=d=e=c=null,M}var a,s=En,l=Sn;return(a=arguments.length)?(s=ur,l=cr,3===a&&(o=n,r=t,n=t=0),i(e)):(i.x=function(e){return arguments.length?(s=e,i):s},i.y=function(e){return arguments.length?(l=e,i):l},i.extent=function(e){return arguments.length?(null==e?t=n=r=o=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],o=+e[1][1]),i):null==t?null:[[t,n],[r,o]]},i.size=function(e){return arguments.length?(null==e?t=n=r=o=null:(t=n=0,r=+e[0],o=+e[1]),i):null==t?null:[r-t,o-n]},i)},na.interpolateRgb=hr,na.interpolateObject=gr,na.interpolateNumber=vr,na.interpolateString=mr;var al=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sl=new RegExp(al.source,"g");na.interpolate=yr,na.interpolators=[function(e,t){var n=typeof t;return("string"===n?Qa.has(t)||/^(#|rgb\(|hsl\()/.test(t)?hr:mr:t instanceof ae?hr:Array.isArray(t)?xr:"object"===n&&isNaN(t)?gr:vr)(e,t)}],na.interpolateArray=xr;var ll=function(){return y},ul=na.map({linear:ll,poly:zr,quad:function(){return kr},cubic:function(){return Ar},sin:function(){return jr},exp:function(){return Er},circle:function(){return Sr},elastic:Tr,back:Nr,bounce:function(){return Cr}}),cl=na.map({"in":y,out:wr,"in-out":_r,"out-in":function(e){return _r(wr(e))}});na.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";return n=ul.get(n)||ll,r=cl.get(r)||y,br(r(n.apply(null,ra.call(arguments,1))))},na.interpolateHcl=Or,na.interpolateHsl=qr,na.interpolateLab=Dr,na.interpolateRound=Fr,na.transform=function(e){var t=ia.createElementNS(na.ns.prefix.svg,"g");return(na.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new Lr(n?n.matrix:fl)})(e)},Lr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var fl={a:1,b:0,c:0,d:1,e:0,f:0};na.interpolateTransform=Br,na.layout={},na.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(Hr(e[n]));return t}},na.layout.chord=function(){function e(){var e,u,f,d,p,h={},g=[],v=na.range(i),m=[];for(n=[],r=[],e=0,d=-1;++d<i;){for(u=0,p=-1;++p<i;)u+=o[d][p];g.push(u),m.push(na.range(i)),e+=u}for(a&&v.sort(function(e,t){return a(g[e],g[t])}),s&&m.forEach(function(e,t){e.sort(function(e,n){return s(o[t][e],o[t][n])})}),e=(Oa-c*i)/e,u=0,d=-1;++d<i;){for(f=u,p=-1;++p<i;){var y=v[d],x=m[y][p],b=o[y][x],w=u,_=u+=b*e;h[y+"-"+x]={index:y,subindex:x,startAngle:w,endAngle:_,value:b}}r[y]={index:y,startAngle:f,endAngle:u,value:(u-f)/e},u+=c}for(d=-1;++d<i;)for(p=d-1;++p<i;){var k=h[d+"-"+p],A=h[p+"-"+d];(k.value||A.value)&&n.push(k.value<A.value?{source:A,target:k}:{source:k,target:A})}l&&t()}function t(){n.sort(function(e,t){return l((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,r,o,i,a,s,l,u={},c=0;return u.matrix=function(e){return arguments.length?(i=(o=e)&&o.length,n=r=null,u):o},u.padding=function(e){return arguments.length?(c=e,n=r=null,u):c},u.sortGroups=function(e){return arguments.length?(a=e,n=r=null,u):a},u.sortSubgroups=function(e){return arguments.length?(s=e,n=null,u):s},u.sortChords=function(e){return arguments.length?(l=e,n&&t(),u):l},u.chords=function(){return n||e(),n},u.groups=function(){return r||e(),r},u},na.layout.force=function(){function e(e){return function(t,n,r,o){if(t.point!==e){var i=t.cx-e.x,a=t.cy-e.y,s=o-n,l=i*i+a*a;if(l>s*s/v){if(h>l){var u=t.charge/l;e.px-=i*u,e.py-=a*u}return!0}if(t.point&&l&&h>l){var u=t.pointCharge/l;e.px-=i*u,e.py-=a*u}}return!t.charge}}function t(e){e.px=na.event.x,e.py=na.event.y,s.resume()}var n,r,o,i,a,s={},l=na.dispatch("start","tick","end"),u=[1,1],c=.9,f=dl,d=pl,p=-30,h=hl,g=.1,v=.64,m=[],x=[];return s.tick=function(){if((r*=.99)<.005)return l.end({type:"end",alpha:r=0}),!0;var t,n,s,f,d,h,v,y,b,w=m.length,_=x.length;for(n=0;_>n;++n)s=x[n],f=s.source,d=s.target,y=d.x-f.x,b=d.y-f.y,(h=y*y+b*b)&&(h=r*i[n]*((h=Math.sqrt(h))-o[n])/h,y*=h,b*=h,d.x-=y*(v=f.weight/(d.weight+f.weight)),d.y-=b*v,f.x+=y*(v=1-v),f.y+=b*v);if((v=r*g)&&(y=u[0]/2,b=u[1]/2,n=-1,v))for(;++n<w;)s=m[n],s.x+=(y-s.x)*v,s.y+=(b-s.y)*v;if(p)for(Jr(t=na.geom.quadtree(m),r,a),n=-1;++n<w;)(s=m[n]).fixed||t.visit(e(s));for(n=-1;++n<w;)s=m[n],s.fixed?(s.x=s.px,s.y=s.py):(s.x-=(s.px-(s.px=s.x))*c,s.y-=(s.py-(s.py=s.y))*c);l.tick({type:"tick",alpha:r})},s.nodes=function(e){return arguments.length?(m=e,s):m},s.links=function(e){return arguments.length?(x=e,s):x},s.size=function(e){return arguments.length?(u=e,s):u},s.linkDistance=function(e){return arguments.length?(f="function"==typeof e?e:+e,s):f},s.distance=s.linkDistance,s.linkStrength=function(e){return arguments.length?(d="function"==typeof e?e:+e,s):d},s.friction=function(e){return arguments.length?(c=+e,s):c},s.charge=function(e){return arguments.length?(p="function"==typeof e?e:+e,s):p},s.chargeDistance=function(e){return arguments.length?(h=e*e,s):Math.sqrt(h)},s.gravity=function(e){return arguments.length?(g=+e,s):g},s.theta=function(e){return arguments.length?(v=e*e,s):Math.sqrt(v)},s.alpha=function(e){return arguments.length?(e=+e,r?r=e>0?e:0:e>0&&(l.start({type:"start",alpha:r=e}),na.timer(s.tick)),s):r},s.start=function(){function e(e,r){if(!n){for(n=new Array(l),s=0;l>s;++s)n[s]=[];for(s=0;c>s;++s){var o=x[s];n[o.source.index].push(o.target),n[o.target.index].push(o.source)}}for(var i,a=n[t],s=-1,u=a.length;++s<u;)if(!isNaN(i=a[s][e]))return i;return Math.random()*r}var t,n,r,l=m.length,c=x.length,h=u[0],g=u[1];for(t=0;l>t;++t)(r=m[t]).index=t,r.weight=0;for(t=0;c>t;++t)r=x[t],"number"==typeof r.source&&(r.source=m[r.source]),"number"==typeof r.target&&(r.target=m[r.target]),++r.source.weight,++r.target.weight;for(t=0;l>t;++t)r=m[t],isNaN(r.x)&&(r.x=e("x",h)),isNaN(r.y)&&(r.y=e("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(o=[],"function"==typeof f)for(t=0;c>t;++t)o[t]=+f.call(this,x[t],t);else for(t=0;c>t;++t)o[t]=f;if(i=[],"function"==typeof d)for(t=0;c>t;++t)i[t]=+d.call(this,x[t],t);else for(t=0;c>t;++t)i[t]=d;if(a=[],"function"==typeof p)for(t=0;l>t;++t)a[t]=+p.call(this,m[t],t);else for(t=0;l>t;++t)a[t]=p;return s.resume()},s.resume=function(){return s.alpha(.1)},s.stop=function(){return s.alpha(0)},s.drag=function(){return n||(n=na.behavior.drag().origin(y).on("dragstart.force",Wr).on("drag.force",t).on("dragend.force",Xr)),arguments.length?void this.on("mouseover.force",Zr).on("mouseout.force",Gr).call(n):n},na.rebind(s,l,"on")};var dl=20,pl=1,hl=1/0;na.layout.hierarchy=function(){function e(o){var i,a=[o],s=[];for(o.depth=0;null!=(i=a.pop());)if(s.push(i),(u=n.call(e,i,i.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)a.push(c=u[l]),c.parent=i,c.depth=i.depth+1;r&&(i.value=0),i.children=u}else r&&(i.value=+r.call(e,i,i.depth)||0),delete i.children;return eo(o,function(e){var n,o;t&&(n=e.children)&&n.sort(t),r&&(o=e.parent)&&(o.value+=e.value)}),s}var t=ro,n=to,r=no;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(r=t,e):r},e.revalue=function(t){return r&&(Kr(t,function(e){e.children&&(e.value=0)}),eo(t,function(t){var n;t.children||(t.value=+r.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},na.layout.partition=function(){function e(t,n,r,o){var i=t.children;if(t.x=n,t.y=t.depth*o,t.dx=r,t.dy=o,i&&(a=i.length)){var a,s,l,u=-1;for(r=t.value?r/t.value:0;++u<a;)e(s=i[u],n,l=s.value*r,o),n+=l}}function t(e){var n=e.children,r=0;if(n&&(o=n.length))for(var o,i=-1;++i<o;)r=Math.max(r,t(n[i]));return 1+r}function n(n,i){var a=r.call(this,n,i);return e(a[0],0,o[0],o[1]/t(a[0])),a}var r=na.layout.hierarchy(),o=[1,1];return n.size=function(e){return arguments.length?(o=e,n):o},Qr(n,r)},na.layout.pie=function(){function e(a){var s,l=a.length,u=a.map(function(n,r){return+t.call(e,n,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),f=("function"==typeof o?o.apply(this,arguments):o)-c,d=Math.min(Math.abs(f)/l,+("function"==typeof i?i.apply(this,arguments):i)),p=d*(0>f?-1:1),h=(f-l*p)/na.sum(u),g=na.range(l),v=[];return null!=n&&g.sort(n===gl?function(e,t){return u[t]-u[e]}:function(e,t){return n(a[e],a[t])}),g.forEach(function(e){v[e]={data:a[e],value:s=u[e],startAngle:c,endAngle:c+=s*h+p,padAngle:d}}),v}var t=Number,n=gl,r=0,o=Oa,i=0;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(r=t,e):r},e.endAngle=function(t){return arguments.length?(o=t,e):o},e.padAngle=function(t){return arguments.length?(i=t,e):i},e};var gl={};na.layout.stack=function(){function e(s,l){if(!(d=s.length))return s;var u=s.map(function(n,r){return t.call(e,n,r)}),c=u.map(function(t){return t.map(function(t,n){return[i.call(e,t,n),a.call(e,t,n)]})}),f=n.call(e,c,l);u=na.permute(u,f),c=na.permute(c,f);var d,p,h,g,v=r.call(e,c,l),m=u[0].length;for(h=0;m>h;++h)for(o.call(e,u[0][h],g=v[h],c[0][h][1]),p=1;d>p;++p)o.call(e,u[p][h],g+=c[p-1][h][1],c[p][h][1]);return s}var t=y,n=lo,r=uo,o=so,i=io,a=ao;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:vl.get(t)||lo,e):n},e.offset=function(t){return arguments.length?(r="function"==typeof t?t:ml.get(t)||uo,e):r},e.x=function(t){return arguments.length?(i=t,e):i},e.y=function(t){return arguments.length?(a=t,e):a},e.out=function(t){return arguments.length?(o=t,e):o},e};var vl=na.map({"inside-out":function(e){var t,n,r=e.length,o=e.map(co),i=e.map(fo),a=na.range(r).sort(function(e,t){return o[e]-o[t]}),s=0,l=0,u=[],c=[];for(t=0;r>t;++t)n=a[t],l>s?(s+=i[n],u.push(n)):(l+=i[n],c.push(n));return c.reverse().concat(u)},reverse:function(e){return na.range(e.length).reverse()},"default":lo}),ml=na.map({silhouette:function(e){var t,n,r,o=e.length,i=e[0].length,a=[],s=0,l=[];for(n=0;i>n;++n){for(t=0,r=0;o>t;t++)r+=e[t][n][1];r>s&&(s=r),a.push(r)}for(n=0;i>n;++n)l[n]=(s-a[n])/2;return l},wiggle:function(e){var t,n,r,o,i,a,s,l,u,c=e.length,f=e[0],d=f.length,p=[];for(p[0]=l=u=0,n=1;d>n;++n){for(t=0,o=0;c>t;++t)o+=e[t][n][1];for(t=0,i=0,s=f[n][0]-f[n-1][0];c>t;++t){for(r=0,a=(e[t][n][1]-e[t][n-1][1])/(2*s);t>r;++r)a+=(e[r][n][1]-e[r][n-1][1])/s;i+=a*e[t][n][1]}p[n]=l-=o?i/o*s:0,u>l&&(u=l)}for(n=0;d>n;++n)p[n]-=u;return p},expand:function(e){var t,n,r,o=e.length,i=e[0].length,a=1/o,s=[];for(n=0;i>n;++n){for(t=0,r=0;o>t;t++)r+=e[t][n][1];if(r)for(t=0;o>t;t++)e[t][n][1]/=r;else for(t=0;o>t;t++)e[t][n][1]=a}for(n=0;i>n;++n)s[n]=0;return s},zero:uo});na.layout.histogram=function(){function e(e,i){for(var a,s,l=[],u=e.map(n,this),c=r.call(this,u,i),f=o.call(this,c,u,i),i=-1,d=u.length,p=f.length-1,h=t?1:1/d;++i<p;)a=l[i]=[],a.dx=f[i+1]-(a.x=f[i]),a.y=0;if(p>0)for(i=-1;++i<d;)s=u[i],s>=c[0]&&s<=c[1]&&(a=l[na.bisect(f,s,1,p)-1],a.y+=h,a.push(e[i]));return l}var t=!0,n=Number,r=vo,o=ho;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(r=ze(t),e):r},e.bins=function(t){return arguments.length?(o="number"==typeof t?function(e){return go(e,t)}:ze(t),e):o},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},na.layout.pack=function(){function e(e,i){var a=n.call(this,e,i),s=a[0],l=o[0],u=o[1],c=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,eo(s,function(e){e.r=+c(e.value)}),eo(s,wo),r){var f=r*(t?1:Math.max(2*s.r/l,2*s.r/u))/2;eo(s,function(e){e.r+=f}),eo(s,wo),eo(s,function(e){e.r-=f})}return Ao(s,l/2,u/2,t?1:1/Math.max(2*s.r/l,2*s.r/u)),a}var t,n=na.layout.hierarchy().sort(mo),r=0,o=[1,1];return e.size=function(t){return arguments.length?(o=t,e):o},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(r=+t,e):r},Qr(e,n)},na.layout.tree=function(){function e(e,o){var c=a.call(this,e,o),f=c[0],d=t(f);if(eo(d,n),d.parent.m=-d.z,Kr(d,r),u)Kr(f,i);else{var p=f,h=f,g=f;Kr(f,function(e){e.x<p.x&&(p=e),e.x>h.x&&(h=e),e.depth>g.depth&&(g=e)});var v=s(p,h)/2-p.x,m=l[0]/(h.x+s(h,p)/2+v),y=l[1]/(g.depth||1);Kr(f,function(e){e.x=(e.x+v)*m,e.y=e.depth*y})}return c}function t(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var o,i=t.children,a=0,s=i.length;s>a;++a)r.push((i[a]=o={_:i[a],parent:t,children:(o=i[a].children)&&o.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=o);return n.children[0]}function n(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){To(e);var i=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+s(e._,r._),e.m=e.z-i):e.z=i}else r&&(e.z=r.z+s(e._,r._));e.parent.A=o(e,r,e.parent.A||n[0])}function r(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function o(e,t,n){if(t){for(var r,o=e,i=e,a=t,l=o.parent.children[0],u=o.m,c=i.m,f=a.m,d=l.m;a=Eo(a),o=jo(o),a&&o;)l=jo(l),i=Eo(i),i.a=e,r=a.z+f-o.z-u+s(a._,o._),r>0&&(So(No(a,e,n),e,r),u+=r,c+=r),f+=a.m,u+=o.m,d+=l.m,c+=i.m;a&&!Eo(i)&&(i.t=a,i.m+=f-c),o&&!jo(l)&&(l.t=o,l.m+=u-d,n=e)}return n}function i(e){e.x*=l[0],e.y=e.depth*l[1]}var a=na.layout.hierarchy().sort(null).value(null),s=zo,l=[1,1],u=null;return e.separation=function(t){return arguments.length?(s=t,e):s},e.size=function(t){return arguments.length?(u=null==(l=t)?i:null,e):u?null:l},e.nodeSize=function(t){return arguments.length?(u=null==(l=t)?null:i,e):u?l:null},Qr(e,a)},na.layout.cluster=function(){function e(e,i){var a,s=t.call(this,e,i),l=s[0],u=0;eo(l,function(e){var t=e.children;t&&t.length?(e.x=Oo(t),e.y=Co(t)):(e.x=a?u+=n(e,a):0,e.y=0,a=e)});var c=qo(l),f=Do(l),d=c.x-n(c,f)/2,p=f.x+n(f,c)/2;return eo(l,o?function(e){e.x=(e.x-l.x)*r[0],e.y=(l.y-e.y)*r[1]}:function(e){e.x=(e.x-d)/(p-d)*r[0],e.y=(1-(l.y?e.y/l.y:1))*r[1]}),s}var t=na.layout.hierarchy().sort(null).value(null),n=zo,r=[1,1],o=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(o=null==(r=t),e):o?null:r},e.nodeSize=function(t){return arguments.length?(o=null!=(r=t),e):o?r:null},Qr(e,t)},na.layout.treemap=function(){function e(e,t){for(var n,r,o=-1,i=e.length;++o<i;)r=(n=e[o]).value*(0>t?0:t),n.area=isNaN(r)||0>=r?0:r}function t(n){var i=n.children;if(i&&i.length){var a,s,l,u=f(n),c=[],d=i.slice(),h=1/0,g="slice"===p?u.dx:"dice"===p?u.dy:"slice-dice"===p?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(e(d,u.dx*u.dy/n.value),c.area=0;(l=d.length)>0;)c.push(a=d[l-1]),c.area+=a.area,"squarify"!==p||(s=r(c,g))<=h?(d.pop(),h=s):(c.area-=c.pop().area,o(c,g,u,!1),g=Math.min(u.dx,u.dy),c.length=c.area=0,h=1/0);c.length&&(o(c,g,u,!0),c.length=c.area=0),i.forEach(t)}}function n(t){var r=t.children;if(r&&r.length){var i,a=f(t),s=r.slice(),l=[];for(e(s,a.dx*a.dy/t.value),l.area=0;i=s.pop();)l.push(i),l.area+=i.area,null!=i.z&&(o(l,i.z?a.dx:a.dy,a,!s.length),l.length=l.area=0);r.forEach(n)}}function r(e,t){for(var n,r=e.area,o=0,i=1/0,a=-1,s=e.length;++a<s;)(n=e[a].area)&&(i>n&&(i=n),n>o&&(o=n));return r*=r,t*=t,r?Math.max(t*o*h/r,r/(t*i*h)):1/0}function o(e,t,n,r){var o,i=-1,a=e.length,s=n.x,u=n.y,c=t?l(e.area/t):0;if(t==n.dx){for((r||c>n.dy)&&(c=n.dy);++i<a;)o=e[i],o.x=s,o.y=u,o.dy=c,s+=o.dx=Math.min(n.x+n.dx-s,c?l(o.area/c):0);o.z=!0,o.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++i<a;)o=e[i],o.x=s,o.y=u,o.dx=c,u+=o.dy=Math.min(n.y+n.dy-u,c?l(o.area/c):0);o.z=!1,o.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function i(r){var o=a||s(r),i=o[0];return i.x=0,i.y=0,i.dx=u[0],i.dy=u[1],a&&s.revalue(i),e([i],i.dx*i.dy/i.value),(a?n:t)(i),d&&(a=o),o}var a,s=na.layout.hierarchy(),l=Math.round,u=[1,1],c=null,f=Fo,d=!1,p="squarify",h=.5*(1+Math.sqrt(5));return i.size=function(e){return arguments.length?(u=e,i):u},i.padding=function(e){function t(t){var n=e.call(i,t,t.depth);return null==n?Fo(t):Lo(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Lo(t,e)}if(!arguments.length)return c;var r;return f=null==(c=e)?Fo:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,i},i.round=function(e){return arguments.length?(l=e?Math.round:Number,i):l!=Number},i.sticky=function(e){return arguments.length?(d=e,a=null,i):d},i.ratio=function(e){return arguments.length?(h=e,i):h},i.mode=function(e){return arguments.length?(p=e+"",i):p},Qr(i,s)},na.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,r,o;do n=2*Math.random()-1,r=2*Math.random()-1,o=n*n+r*r;while(!o||o>1);return e+t*n*Math.sqrt(-2*Math.log(o)/o)}},logNormal:function(){var e=na.random.normal.apply(na,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=na.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t}}},na.scale={};var yl={floor:y,ceil:y};na.scale.linear=function(){return Ho([0,1],[0,1],yr,!1)};var xl={s:1,g:1,p:1,r:1,e:1};na.scale.log=function(){return Qo(na.scale.linear().domain([0,1]),10,!0,[1,10])};var bl=na.format(".0e"),wl={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};na.scale.pow=function(){return Ko(na.scale.linear(),1,[0,1])},na.scale.sqrt=function(){return na.scale.pow().exponent(.5)},na.scale.ordinal=function(){return ti([],{t:"range",a:[[]]})},na.scale.category10=function(){return na.scale.ordinal().range(_l)},na.scale.category20=function(){return na.scale.ordinal().range(kl)},na.scale.category20b=function(){return na.scale.ordinal().range(Al)},na.scale.category20c=function(){return na.scale.ordinal().range(Ml)};var _l=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(xe),kl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(xe),Al=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(xe),Ml=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(xe);na.scale.quantile=function(){return ni([],[])},na.scale.quantize=function(){return ri(0,1,[0,1])},na.scale.threshold=function(){return oi([.5],[0,1])},na.scale.identity=function(){return ii([0,1])},na.svg={},na.svg.arc=function(){function e(){var e=Math.max(0,+n.apply(this,arguments)),u=Math.max(0,+r.apply(this,arguments)),c=a.apply(this,arguments)-Da,f=s.apply(this,arguments)-Da,d=Math.abs(f-c),p=c>f?0:1;if(e>u&&(h=u,u=e,e=h),d>=qa)return t(u,p)+(e?t(e,1-p):"")+"Z";var h,g,v,m,y,x,b,w,_,k,A,M,z=0,j=0,E=[];if((m=(+l.apply(this,arguments)||0)/2)&&(v=i===zl?Math.sqrt(e*e+u*u):+i.apply(this,arguments),p||(j*=-1),u&&(j=te(v/u*Math.sin(m))),e&&(z=te(v/e*Math.sin(m)))),u){y=u*Math.cos(c+j),x=u*Math.sin(c+j),b=u*Math.cos(f-j),w=u*Math.sin(f-j);var S=Math.abs(f-c-2*j)<=Ca?0:1;if(j&&di(y,x,b,w)===p^S){var T=(c+f)/2;y=u*Math.cos(T),x=u*Math.sin(T),b=w=null}}else y=x=0;if(e){_=e*Math.cos(f-z),k=e*Math.sin(f-z),A=e*Math.cos(c+z),M=e*Math.sin(c+z);var N=Math.abs(c-f+2*z)<=Ca?0:1;if(z&&di(_,k,A,M)===1-p^N){var C=(c+f)/2;_=e*Math.cos(C),k=e*Math.sin(C),A=M=null}}else _=k=0;if((h=Math.min(Math.abs(u-e)/2,+o.apply(this,arguments)))>.001){g=u>e^p?0:1;var O=null==A?[_,k]:null==b?[y,x]:On([y,x],[A,M],[b,w],[_,k]),q=y-O[0],D=x-O[1],F=b-O[0],L=w-O[1],P=1/Math.sin(Math.acos((q*F+D*L)/(Math.sqrt(q*q+D*D)*Math.sqrt(F*F+L*L)))/2),R=Math.sqrt(O[0]*O[0]+O[1]*O[1]);if(null!=b){var I=Math.min(h,(u-R)/(P+1)),B=pi(null==A?[_,k]:[A,M],[y,x],u,I,p),U=pi([b,w],[_,k],u,I,p);h===I?E.push("M",B[0],"A",I,",",I," 0 0,",g," ",B[1],"A",u,",",u," 0 ",1-p^di(B[1][0],B[1][1],U[1][0],U[1][1]),",",p," ",U[1],"A",I,",",I," 0 0,",g," ",U[0]):E.push("M",B[0],"A",I,",",I," 0 1,",g," ",U[0])}else E.push("M",y,",",x);if(null!=A){var V=Math.min(h,(e-R)/(P-1)),H=pi([y,x],[A,M],e,-V,p),Y=pi([_,k],null==b?[y,x]:[b,w],e,-V,p);h===V?E.push("L",Y[0],"A",V,",",V," 0 0,",g," ",Y[1],"A",e,",",e," 0 ",p^di(Y[1][0],Y[1][1],H[1][0],H[1][1]),",",1-p," ",H[1],"A",V,",",V," 0 0,",g," ",H[0]):E.push("L",Y[0],"A",V,",",V," 0 0,",g," ",H[0])}else E.push("L",_,",",k)}else E.push("M",y,",",x),null!=b&&E.push("A",u,",",u," 0 ",S,",",p," ",b,",",w),E.push("L",_,",",k),null!=A&&E.push("A",e,",",e," 0 ",N,",",1-p," ",A,",",M);return E.push("Z"),E.join("")}function t(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var n=si,r=li,o=ai,i=zl,a=ui,s=ci,l=fi;return e.innerRadius=function(t){return arguments.length?(n=ze(t),e):n},e.outerRadius=function(t){return arguments.length?(r=ze(t),e):r},e.cornerRadius=function(t){return arguments.length?(o=ze(t),e):o},e.padRadius=function(t){return arguments.length?(i=t==zl?zl:ze(t),e):i},e.startAngle=function(t){return arguments.length?(a=ze(t),e):a},e.endAngle=function(t){return arguments.length?(s=ze(t),e):s},e.padAngle=function(t){return arguments.length?(l=ze(t),e):l},e.centroid=function(){var e=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-Da;return[Math.cos(t)*e,Math.sin(t)*e]},e};var zl="auto";na.svg.line=function(){return hi(y)};var jl=na.map({linear:gi,"linear-closed":vi,step:mi,"step-before":yi,"step-after":xi,basis:Mi,"basis-open":zi,"basis-closed":ji,bundle:Ei,cardinal:_i,"cardinal-open":bi,"cardinal-closed":wi,monotone:qi});jl.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var El=[0,2/3,1/3,0],Sl=[0,1/3,2/3,0],Tl=[0,1/6,2/3,1/6];na.svg.line.radial=function(){var e=hi(Di);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},yi.reverse=xi,xi.reverse=yi,na.svg.area=function(){return Fi(y)},na.svg.area.radial=function(){var e=Fi(Di);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},na.svg.chord=function(){function e(e,s){var l=t(this,i,e,s),u=t(this,a,e,s);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(n(l,u)?o(l.r,l.p1,l.r,l.p0):o(l.r,l.p1,u.r,u.p0)+r(u.r,u.p1,u.a1-u.a0)+o(u.r,u.p1,l.r,l.p0))+"Z"}function t(e,t,n,r){var o=t.call(e,n,r),i=s.call(e,o,r),a=l.call(e,o,r)-Da,c=u.call(e,o,r)-Da;return{r:i,a0:a,a1:c,p0:[i*Math.cos(a),i*Math.sin(a)],p1:[i*Math.cos(c),i*Math.sin(c)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function r(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Ca)+",1 "+t}function o(e,t,n,r){return"Q 0,0 "+r}var i=yn,a=xn,s=Li,l=ui,u=ci;return e.radius=function(t){return arguments.length?(s=ze(t),e):s},e.source=function(t){return arguments.length?(i=ze(t),e):i},e.target=function(t){return arguments.length?(a=ze(t),e):a},e.startAngle=function(t){return arguments.length?(l=ze(t),e):l},e.endAngle=function(t){return arguments.length?(u=ze(t),e):u},e},na.svg.diagonal=function(){function e(e,o){var i=t.call(this,e,o),a=n.call(this,e,o),s=(i.y+a.y)/2,l=[i,{x:i.x,y:s},{x:a.x,y:s},a];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=yn,n=xn,r=Pi;return e.source=function(n){return arguments.length?(t=ze(n),e):t},e.target=function(t){return arguments.length?(n=ze(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},na.svg.diagonal.radial=function(){var e=na.svg.diagonal(),t=Pi,n=e.projection;return e.projection=function(e){return arguments.length?n(Ri(t=e)):t},e},na.svg.symbol=function(){function e(e,r){return(Nl.get(t.call(this,e,r))||Ui)(n.call(this,e,r))}var t=Bi,n=Ii;return e.type=function(n){return arguments.length?(t=ze(n),e):t},e.size=function(t){return arguments.length?(n=ze(t),e):n},e};var Nl=na.map({circle:Ui,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Ol)),n=t*Ol;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Cl),n=t*Cl/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Cl),n=t*Cl/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});na.svg.symbolTypes=Nl.keys();var Cl=Math.sqrt(3),Ol=Math.tan(30*Fa);ka.transition=function(e){for(var t,n,r=ql||++Pl,o=Wi(e),i=[],a=Dl||{time:Date.now(),ease:Mr,delay:0,duration:250},s=-1,l=this.length;++s<l;){i.push(t=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(n=u[c])&&Xi(n,c,o,r,a),t.push(n)}return Hi(i,o,r)},ka.interrupt=function(e){return this.each(null==e?Fl:Vi(Wi(e)))};var ql,Dl,Fl=Vi(Wi()),Ll=[],Pl=0;Ll.call=ka.call,Ll.empty=ka.empty,Ll.node=ka.node,Ll.size=ka.size,na.transition=function(e,t){return e&&e.transition?ql?e.transition(t):e:na.selection().transition(e)},na.transition.prototype=Ll,Ll.select=function(e){var t,n,r,o=this.id,i=this.namespace,a=[];e=E(e);for(var s=-1,l=this.length;++s<l;){a.push(t=[]);for(var u=this[s],c=-1,f=u.length;++c<f;)(r=u[c])&&(n=e.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),Xi(n,c,i,o,r[i][o]),t.push(n)):t.push(null)}return Hi(a,i,o)},Ll.selectAll=function(e){var t,n,r,o,i,a=this.id,s=this.namespace,l=[];e=S(e);for(var u=-1,c=this.length;++u<c;)for(var f=this[u],d=-1,p=f.length;++d<p;)if(r=f[d]){i=r[s][a],n=e.call(r,r.__data__,d,u),l.push(t=[]);for(var h=-1,g=n.length;++h<g;)(o=n[h])&&Xi(o,h,s,a,i),t.push(o)}return Hi(l,s,a)},Ll.filter=function(e){var t,n,r,o=[];"function"!=typeof e&&(e=B(e));for(var i=0,a=this.length;a>i;i++){o.push(t=[]);for(var n=this[i],s=0,l=n.length;l>s;s++)(r=n[s])&&e.call(r,r.__data__,s,i)&&t.push(r)}return Hi(o,this.namespace,this.id)},Ll.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):V(this,null==t?function(t){t[r][n].tween.remove(e)}:function(o){o[r][n].tween.set(e,t)})},Ll.attr=function(e,t){function n(){this.removeAttribute(s)}function r(){this.removeAttributeNS(s.space,s.local)}function o(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(s);return n!==e&&(t=a(n,e),function(e){this.setAttribute(s,t(e))})})}function i(e){return null==e?r:(e+="",function(){var t,n=this.getAttributeNS(s.space,s.local);return n!==e&&(t=a(n,e),function(e){this.setAttributeNS(s.space,s.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var a="transform"==e?Br:yr,s=na.ns.qualify(e);return Yi(this,"attr."+e,t,s.local?i:o)},Ll.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(o));return r&&function(e){this.setAttribute(o,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(o.space,o.local));return r&&function(e){this.setAttributeNS(o.space,o.local,r(e))}}var o=na.ns.qualify(e);return this.tween("attr."+e,o.local?r:n)},Ll.style=function(e,n,r){function o(){this.style.removeProperty(e)}function i(n){return null==n?o:(n+="",function(){var o,i=t(this).getComputedStyle(this,null).getPropertyValue(e);return i!==n&&(o=yr(i,n),function(t){this.style.setProperty(e,o(t),r)})})}var a=arguments.length;if(3>a){if("string"!=typeof e){2>a&&(n="");for(r in e)this.style(r,e[r],n);return this}r=""}return Yi(this,"style."+e,n,i)},Ll.styleTween=function(e,n,r){function o(o,i){var a=n.call(this,o,i,t(this).getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),r)}}return arguments.length<3&&(r=""),this.tween("style."+e,o)},Ll.text=function(e){return Yi(this,"text",e,$i);

},Ll.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Ll.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=na.ease.apply(na,arguments)),V(this,function(r){r[n][t].ease=e}))},Ll.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:V(this,"function"==typeof e?function(r,o,i){r[n][t].delay=+e.call(r,r.__data__,o,i)}:(e=+e,function(r){r[n][t].delay=e}))},Ll.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:V(this,"function"==typeof e?function(r,o,i){r[n][t].duration=Math.max(1,e.call(r,r.__data__,o,i))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},Ll.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var o=Dl,i=ql;try{ql=n,V(this,function(t,o,i){Dl=t[r][n],e.call(t,t.__data__,o,i)})}finally{Dl=o,ql=i}}else V(this,function(o){var i=o[r][n];(i.event||(i.event=na.dispatch("start","end","interrupt"))).on(e,t)});return this},Ll.transition=function(){for(var e,t,n,r,o=this.id,i=++Pl,a=this.namespace,s=[],l=0,u=this.length;u>l;l++){s.push(e=[]);for(var t=this[l],c=0,f=t.length;f>c;c++)(n=t[c])&&(r=n[a][o],Xi(n,c,a,i,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),e.push(n)}return Hi(s,a,i)},na.svg.axis=function(){function e(e){e.each(function(){var e,u=na.select(this),c=this.__chart__||n,f=this.__chart__=n.copy(),d=null==l?f.ticks?f.ticks.apply(f,s):f.domain():l,p=null==t?f.tickFormat?f.tickFormat.apply(f,s):y:t,h=u.selectAll(".tick").data(d,f),g=h.enter().insert("g",".domain").attr("class","tick").style("opacity",Ta),v=na.transition(h.exit()).style("opacity",Ta).remove(),m=na.transition(h.order()).style("opacity",1),x=Math.max(o,0)+a,b=Ro(f),w=u.selectAll(".domain").data([0]),_=(w.enter().append("path").attr("class","domain"),na.transition(w));g.append("line"),g.append("text");var k,A,M,z,j=g.select("line"),E=m.select("line"),S=h.select("text").text(p),T=g.select("text"),N=m.select("text"),C="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(e=Zi,k="x",M="y",A="x2",z="y2",S.attr("dy",0>C?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+b[0]+","+C*i+"V0H"+b[1]+"V"+C*i)):(e=Gi,k="y",M="x",A="y2",z="x2",S.attr("dy",".32em").style("text-anchor",0>C?"end":"start"),_.attr("d","M"+C*i+","+b[0]+"H0V"+b[1]+"H"+C*i)),j.attr(z,C*o),T.attr(M,C*x),E.attr(A,0).attr(z,C*o),N.attr(k,0).attr(M,C*x),f.rangeBand){var O=f,q=O.rangeBand()/2;c=f=function(e){return O(e)+q}}else c.rangeBand?c=f:v.call(e,f,c);g.call(e,c,f),m.call(e,f,f)})}var t,n=na.scale.linear(),r=Rl,o=6,i=6,a=3,s=[10],l=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in Il?t+"":Rl,e):r},e.ticks=function(){return arguments.length?(s=arguments,e):s},e.tickValues=function(t){return arguments.length?(l=t,e):l},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(o=+t,i=+arguments[n-1],e):o},e.innerTickSize=function(t){return arguments.length?(o=+t,e):o},e.outerTickSize=function(t){return arguments.length?(i=+t,e):i},e.tickPadding=function(t){return arguments.length?(a=+t,e):a},e.tickSubdivide=function(){return arguments.length&&e},e};var Rl="bottom",Il={top:1,right:1,bottom:1,left:1};na.svg.brush=function(){function e(t){t.each(function(){var t=na.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",i).on("touchstart.brush",i),a=t.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=t.selectAll(".resize").data(g,y);s.exit().remove(),s.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Bl[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",e.empty()?"none":null);var l,f=na.transition(t),d=na.transition(a);u&&(l=Ro(u),d.attr("x",l[0]).attr("width",l[1]-l[0]),r(f)),c&&(l=Ro(c),d.attr("y",l[0]).attr("height",l[1]-l[0]),o(f)),n(f)})}function n(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+f[+/e$/.test(e)]+","+d[+/^s/.test(e)]+")"})}function r(e){e.select(".extent").attr("x",f[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",f[1]-f[0])}function o(e){e.select(".extent").attr("y",d[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",d[1]-d[0])}function i(){function i(){32==na.event.keyCode&&(S||(x=null,N[0]-=f[1],N[1]-=d[1],S=2),A())}function g(){32==na.event.keyCode&&2==S&&(N[0]+=f[1],N[1]+=d[1],S=0,A())}function v(){var e=na.mouse(w),t=!1;b&&(e[0]+=b[0],e[1]+=b[1]),S||(na.event.altKey?(x||(x=[(f[0]+f[1])/2,(d[0]+d[1])/2]),N[0]=f[+(e[0]<x[0])],N[1]=d[+(e[1]<x[1])]):x=null),j&&m(e,u,0)&&(r(M),t=!0),E&&m(e,c,1)&&(o(M),t=!0),t&&(n(M),k({type:"brush",mode:S?"move":"resize"}))}function m(e,t,n){var r,o,i=Ro(t),l=i[0],u=i[1],c=N[n],g=n?d:f,v=g[1]-g[0];return S&&(l-=c,u-=v+c),r=(n?h:p)?Math.max(l,Math.min(u,e[n])):e[n],S?o=(r+=c)+v:(x&&(c=Math.max(l,Math.min(u,2*x[n]-r))),r>c?(o=r,r=c):o=c),g[0]!=r||g[1]!=o?(n?s=null:a=null,g[0]=r,g[1]=o,!0):void 0}function y(){v(),M.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),na.select("body").style("cursor",null),C.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),T(),k({type:"brushend"})}var x,b,w=this,_=na.select(na.event.target),k=l.of(w,arguments),M=na.select(w),z=_.datum(),j=!/^(n|s)$/.test(z)&&u,E=!/^(e|w)$/.test(z)&&c,S=_.classed("extent"),T=Z(w),N=na.mouse(w),C=na.select(t(w)).on("keydown.brush",i).on("keyup.brush",g);if(na.event.changedTouches?C.on("touchmove.brush",v).on("touchend.brush",y):C.on("mousemove.brush",v).on("mouseup.brush",y),M.interrupt().selectAll("*").interrupt(),S)N[0]=f[0]-N[0],N[1]=d[0]-N[1];else if(z){var O=+/w$/.test(z),q=+/^n/.test(z);b=[f[1-O]-N[0],d[1-q]-N[1]],N[0]=f[O],N[1]=d[q]}else na.event.altKey&&(x=N.slice());M.style("pointer-events","none").selectAll(".resize").style("display",null),na.select("body").style("cursor",_.style("cursor")),k({type:"brushstart"}),v()}var a,s,l=z(e,"brushstart","brush","brushend"),u=null,c=null,f=[0,0],d=[0,0],p=!0,h=!0,g=Ul[0];return e.event=function(e){e.each(function(){var e=l.of(this,arguments),t={x:f,y:d,i:a,j:s},n=this.__chart__||t;this.__chart__=t,ql?na.select(this).transition().each("start.brush",function(){a=n.i,s=n.j,f=n.x,d=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=xr(f,t.x),r=xr(d,t.y);return a=s=null,function(o){f=t.x=n(o),d=t.y=r(o),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=t.i,s=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(u=t,g=Ul[!u<<1|!c],e):u},e.y=function(t){return arguments.length?(c=t,g=Ul[!u<<1|!c],e):c},e.clamp=function(t){return arguments.length?(u&&c?(p=!!t[0],h=!!t[1]):u?p=!!t:c&&(h=!!t),e):u&&c?[p,h]:u?p:c?h:null},e.extent=function(t){var n,r,o,i,l;return arguments.length?(u&&(n=t[0],r=t[1],c&&(n=n[0],r=r[0]),a=[n,r],u.invert&&(n=u(n),r=u(r)),n>r&&(l=n,n=r,r=l),(n!=f[0]||r!=f[1])&&(f=[n,r])),c&&(o=t[0],i=t[1],u&&(o=o[1],i=i[1]),s=[o,i],c.invert&&(o=c(o),i=c(i)),o>i&&(l=o,o=i,i=l),(o!=d[0]||i!=d[1])&&(d=[o,i])),e):(u&&(a?(n=a[0],r=a[1]):(n=f[0],r=f[1],u.invert&&(n=u.invert(n),r=u.invert(r)),n>r&&(l=n,n=r,r=l))),c&&(s?(o=s[0],i=s[1]):(o=d[0],i=d[1],c.invert&&(o=c.invert(o),i=c.invert(i)),o>i&&(l=o,o=i,i=l))),u&&c?[[n,o],[r,i]]:u?[n,r]:c&&[o,i])},e.clear=function(){return e.empty()||(f=[0,0],d=[0,0],a=s=null),e},e.empty=function(){return!!u&&f[0]==f[1]||!!c&&d[0]==d[1]},na.rebind(e,l,"on")};var Bl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Ul=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Vl=ls.format=hs.timeFormat,Hl=Vl.utc,Yl=Hl("%Y-%m-%dT%H:%M:%S.%LZ");Vl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Ji:Yl,Ji.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Ji.toString=Yl.toString,ls.second=Re(function(e){return new us(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),ls.seconds=ls.second.range,ls.seconds.utc=ls.second.utc.range,ls.minute=Re(function(e){return new us(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),ls.minutes=ls.minute.range,ls.minutes.utc=ls.minute.utc.range,ls.hour=Re(function(e){var t=e.getTimezoneOffset()/60;return new us(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),ls.hours=ls.hour.range,ls.hours.utc=ls.hour.utc.range,ls.month=Re(function(e){return e=ls.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),ls.months=ls.month.range,ls.months.utc=ls.month.utc.range;var $l=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Wl=[[ls.second,1],[ls.second,5],[ls.second,15],[ls.second,30],[ls.minute,1],[ls.minute,5],[ls.minute,15],[ls.minute,30],[ls.hour,1],[ls.hour,3],[ls.hour,6],[ls.hour,12],[ls.day,1],[ls.day,2],[ls.week,1],[ls.month,1],[ls.month,3],[ls.year,1]],Xl=Vl.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Et]]),Zl={range:function(e,t,n){return na.range(Math.ceil(e/n)*n,+t,n).map(Ki)},floor:y,ceil:y};Wl.year=ls.year,ls.scale=function(){return Qi(na.scale.linear(),Wl,Xl)};var Gl=Wl.map(function(e){return[e[0].utc,e[1]]}),Jl=Hl.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Et]]);Gl.year=ls.year.utc,ls.scale.utc=function(){return Qi(na.scale.linear(),Gl,Jl)},na.text=je(function(e){return e.responseText}),na.json=function(e,t){return Ee(e,"application/json",ea,t)},na.html=function(e,t){return Ee(e,"text/html",ta,t)},na.xml=je(function(e){return e.responseXML}),"function"==typeof define&&define.amd?define(na):"object"==typeof module&&module.exports&&(module.exports=na),this.d3=na}(),function t(e,n,r){function o(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};e[a][0].call(c.exports,function(t){var n=e[a][1][t];return o(n?n:t)},c,c.exports,t,e,n,r)}return n[a].exports}for(var i="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){var r,o,i;r={},"undefined"!=typeof window&&(window.d3plus=r),t.exports=r,r.version="1.7.1 - Viridian",r.repo="https://github.com/alexandersimoes/d3plus/",r.array={comparator:e("./array/comparator.coffee"),contains:e("./array/contains.coffee"),sort:e("./array/sort.coffee"),update:e("./array/update.coffee")},r.client={css:e("./client/css.coffee"),ie:e("./client/ie.js"),pointer:e("./client/pointer.coffee"),prefix:e("./client/prefix.coffee"),rtl:e("./client/rtl.coffee"),scrollbar:e("./client/scrollbar.coffee"),touch:e("./client/touch.coffee")},r.color={legible:e("./color/legible.coffee"),lighter:e("./color/lighter.coffee"),mix:e("./color/mix.coffee"),random:e("./color/random.coffee"),scale:e("./color/scale.coffee"),sort:e("./color/sort.coffee"),text:e("./color/text.coffee"),validate:e("./color/validate.coffee")},r.data={bestRegress:e("./data/bestRegress.coffee"),lof:e("./data/lof.coffee"),mad:e("./data/mad.coffee")},r.font={sizes:e("./font/sizes.coffee"),validate:e("./font/validate.coffee")},r.form=e("./form/form.js"),r.geom={largestRect:e("./geom/largestRect.coffee"),offset:e("./geom/offset.coffee"),path2poly:e("./geom/path2poly.coffee")},r.network={cluster:e("./network/cluster.coffee"),distance:e("./network/distance.coffee"),normalize:e("./network/normalize.coffee"),shortestPath:e("./network/shortestPath.coffee"),smallestGap:e("./network/smallestGap.coffee"),subgraph:e("./network/subgraph.coffee")},r.number={format:e("./number/format.coffee")},r.object={merge:e("./object/merge.coffee"),validate:e("./object/validate.coffee")},r.string={format:e("./string/format.js"),list:e("./string/list.coffee"),strip:e("./string/strip.js"),title:e("./string/title.coffee")},r.textwrap=e("./textwrap/textwrap.coffee"),r.tooltip={create:e("./tooltip/create.js"),move:e("./tooltip/move.coffee"),remove:e("./tooltip/remove.coffee")},r.util={buckets:e("./util/buckets.coffee"),child:e("./util/child.coffee"),closest:e("./util/closest.coffee"),copy:e("./util/copy.coffee"),d3selection:e("./util/d3selection.coffee"),dataurl:e("./util/dataURL.coffee"),uniques:e("./util/uniques.coffee")},r.viz=e("./viz/viz.coffee"),i=e("./client/css.coffee"),o=e("./core/console/print.coffee"),i("d3plus.css")&&o.warning("d3plus.css has been deprecated, you do not need to load this file.",r.repo+"releases/tag/v1.4.0")},{"./array/comparator.coffee":35,"./array/contains.coffee":36,"./array/sort.coffee":37,"./array/update.coffee":38,"./client/css.coffee":39,"./client/ie.js":40,"./client/pointer.coffee":41,"./client/prefix.coffee":42,"./client/rtl.coffee":43,"./client/scrollbar.coffee":44,"./client/touch.coffee":45,"./color/legible.coffee":46,"./color/lighter.coffee":47,"./color/mix.coffee":48,"./color/random.coffee":49,"./color/scale.coffee":50,"./color/sort.coffee":51,"./color/text.coffee":52,"./color/validate.coffee":53,"./core/console/print.coffee":54,"./data/bestRegress.coffee":94,"./data/lof.coffee":95,"./data/mad.coffee":96,"./font/sizes.coffee":97,"./font/validate.coffee":98,"./form/form.js":99,"./geom/largestRect.coffee":155,"./geom/offset.coffee":156,"./geom/path2poly.coffee":157,"./network/cluster.coffee":158,"./network/distance.coffee":159,"./network/normalize.coffee":160,"./network/shortestPath.coffee":161,"./network/smallestGap.coffee":162,"./network/subgraph.coffee":163,"./number/format.coffee":164,"./object/merge.coffee":165,"./object/validate.coffee":166,"./string/format.js":167,"./string/list.coffee":168,"./string/strip.js":169,"./string/title.coffee":170,"./textwrap/textwrap.coffee":194,"./tooltip/create.js":195,"./tooltip/move.coffee":196,"./tooltip/remove.coffee":197,"./util/buckets.coffee":198,"./util/child.coffee":199,"./util/closest.coffee":200,"./util/copy.coffee":201,"./util/d3selection.coffee":202,"./util/dataURL.coffee":203,"./util/uniques.coffee":204,"./viz/viz.coffee":319}],2:[function(e,t,n){function r(e,t){var n=this;if(!(n instanceof r))return new r(e,t);var o,i=typeof e;if("number"===i)o=+e;else if("string"===i)o=r.byteLength(e,t);else{if("object"!==i||null===e)throw new TypeError("must start with number, buffer, array or string");"Buffer"===e.type&&F(e.data)&&(e=e.data),o=+e.length}if(o>L)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+L.toString(16)+" bytes");0>o?o=0:o>>>=0,r.TYPED_ARRAY_SUPPORT?n=r._augment(new Uint8Array(o)):(n.length=o,n._isBuffer=!0);var a;if(r.TYPED_ARRAY_SUPPORT&&"number"==typeof e.byteLength)n._set(e);else if(z(e))if(r.isBuffer(e))for(a=0;o>a;a++)n[a]=e.readUInt8(a);else for(a=0;o>a;a++)n[a]=(e[a]%256+256)%256;else if("string"===i)n.write(e,0,t);else if("number"===i&&!r.TYPED_ARRAY_SUPPORT)for(a=0;o>a;a++)n[a]=0;return o>0&&o<=r.poolSize&&(n.parent=P),n}function o(e,t){if(!(this instanceof o))return new o(e,t);var n=new r(e,t);return delete n.parent,n}function i(e,t,n,r){n=Number(n)||0;var o=e.length-n;r?(r=Number(r),r>o&&(r=o)):r=o;var i=t.length;if(i%2!==0)throw new Error("Invalid hex string");r>i/2&&(r=i/2);for(var a=0;r>a;a++){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))throw new Error("Invalid hex string");e[n+a]=s}return a}function a(e,t,n,r){var o=C(E(t,e.length-n),e,n,r);return o}function s(e,t,n,r){var o=C(S(t),e,n,r);return o}function l(e,t,n,r){return s(e,t,n,r)}function u(e,t,n,r){var o=C(N(t),e,n,r);return o}function c(e,t,n,r){var o=C(T(t,e.length-n),e,n,r);return o}function f(e,t,n){return q.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function d(e,t,n){var r="",o="";n=Math.min(e.length,n);for(var i=t;n>i;i++)e[i]<=127?(r+=O(o)+String.fromCharCode(e[i]),o=""):o+="%"+e[i].toString(16);return r+O(o)}function p(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;n>o;o++)r+=String.fromCharCode(127&e[o]);return r}function h(e,t,n){var r="";n=Math.min(e.length,n);for(var o=t;n>o;o++)r+=String.fromCharCode(e[o]);return r}function g(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var o="",i=t;n>i;i++)o+=j(e[i]);return o}function v(e,t,n){for(var r=e.slice(t,n),o="",i=0;i<r.length;i+=2)o+=String.fromCharCode(r[i]+256*r[i+1]);return o}function m(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function y(e,t,n,o,i,a){if(!r.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(t>i||a>t)throw new RangeError("value is out of bounds");if(n+o>e.length)throw new RangeError("index out of range")}function x(e,t,n,r){0>t&&(t=65535+t+1);for(var o=0,i=Math.min(e.length-n,2);i>o;o++)e[n+o]=(t&255<<8*(r?o:1-o))>>>8*(r?o:1-o)}function b(e,t,n,r){0>t&&(t=4294967295+t+1);for(var o=0,i=Math.min(e.length-n,4);i>o;o++)e[n+o]=t>>>8*(r?o:3-o)&255}function w(e,t,n,r,o,i){if(t>o||i>t)throw new RangeError("value is out of bounds");if(n+r>e.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function _(e,t,n,r,o){return o||w(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),D.write(e,t,n,r,23,4),n+4}function k(e,t,n,r,o){return o||w(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),D.write(e,t,n,r,52,8),n+8}function A(e){if(e=M(e).replace(I,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function M(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function z(e){return F(e)||r.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function j(e){return 16>e?"0"+e.toString(16):e.toString(16)}function E(e,t){t=t||1/0;for(var n,r=e.length,o=null,i=[],a=0;r>a;a++){if(n=e.charCodeAt(a),n>55295&&57344>n){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(a+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(56320>n){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=o-55296<<10|n-56320|65536,o=null}else o&&((t-=3)>-1&&i.push(239,191,189),o=null);if(128>n){if((t-=1)<0)break;i.push(n)}else if(2048>n){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(2097152>n))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function S(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t}function T(e,t){for(var n,r,o,i=[],a=0;a<e.length&&!((t-=2)<0);a++)n=e.charCodeAt(a),r=n>>8,o=n%256,i.push(o),i.push(r);return i}function N(e){return q.toByteArray(A(e))}function C(e,t,n,r){for(var o=0;r>o&&!(o+n>=t.length||o>=e.length);o++)t[o+n]=e[o];return o}function O(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}var q=e("base64-js"),D=e("ieee754"),F=e("is-array");n.Buffer=r,n.SlowBuffer=o,n.INSPECT_MAX_BYTES=50,r.poolSize=8192;var L=1073741823,P={};r.TYPED_ARRAY_SUPPORT=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(n){return!1}}(),r.isBuffer=function(e){return!(null==e||!e._isBuffer)},r.compare=function(e,t){if(!r.isBuffer(e)||!r.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,o=t.length,i=0,a=Math.min(n,o);a>i&&e[i]===t[i];i++);return i!==a&&(n=e[i],o=t[i]),o>n?-1:n>o?1:0},r.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(e,t){if(!F(e))throw new TypeError("list argument must be an Array of Buffers.");if(0===e.length)return new r(0);if(1===e.length)return e[0];var n;if(void 0===t)for(t=0,n=0;n<e.length;n++)t+=e[n].length;var o=new r(t),i=0;for(n=0;n<e.length;n++){var a=e[n];a.copy(o,i),i+=a.length}return o},r.byteLength=function(e,t){var n;switch(e+="",t||"utf8"){case"ascii":case"binary":case"raw":n=e.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*e.length;break;case"hex":n=e.length>>>1;break;case"utf8":case"utf-8":n=E(e).length;break;case"base64":n=N(e).length;break;default:n=e.length}return n},r.prototype.length=void 0,r.prototype.parent=void 0,r.prototype.toString=function(e,t,n){var r=!1;if(t>>>=0,n=void 0===n||n===1/0?this.length:n>>>0,e||(e="utf8"),0>t&&(t=0),n>this.length&&(n=this.length),t>=n)return"";for(;;)switch(e){case"hex":return g(this,t,n);case"utf8":case"utf-8":return d(this,t,n);case"ascii":return p(this,t,n);case"binary":return h(this,t,n);case"base64":return f(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}},r.prototype.equals=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===r.compare(this,e)},r.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},r.prototype.compare=function(e){if(!r.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?0:r.compare(this,e)},r.prototype.indexOf=function(e,t){function n(e,t,n){for(var r=-1,o=0;n+o<e.length;o++)if(e[n+o]===t[-1===r?0:o-r]){if(-1===r&&(r=o),o-r+1===t.length)return n+r}else r=-1;return-1}if(t>2147483647?t=2147483647:-2147483648>t&&(t=-2147483648),t>>=0,0===this.length)return-1;if(t>=this.length)return-1;if(0>t&&(t=Math.max(this.length+t,0)),"string"==typeof e)return 0===e.length?-1:String.prototype.indexOf.call(this,e,t);if(r.isBuffer(e))return n(this,e,t);if("number"==typeof e)return r.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,e,t):n(this,[e],t);throw new TypeError("val must be string, number or Buffer")},r.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},r.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},r.prototype.write=function(e,t,n,r){if(isFinite(t))isFinite(n)||(r=n,n=void 0);else{var o=r;r=t,t=n,n=o}if(t=Number(t)||0,0>n||0>t||t>this.length)throw new RangeError("attempt to write outside buffer bounds");var f=this.length-t;n?(n=Number(n),n>f&&(n=f)):n=f,r=String(r||"utf8").toLowerCase();var d;switch(r){case"hex":d=i(this,e,t,n);break;case"utf8":case"utf-8":d=a(this,e,t,n);break;case"ascii":d=s(this,e,t,n);break;case"binary":d=l(this,e,t,n);break;case"base64":d=u(this,e,t,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":d=c(this,e,t,n);break;default:throw new TypeError("Unknown encoding: "+r)}return d},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),e>t&&(t=e);var o;if(r.TYPED_ARRAY_SUPPORT)o=r._augment(this.subarray(e,t));else{var i=t-e;o=new r(i,void 0);for(var a=0;i>a;a++)o[a]=this[a+e]}return o.length&&(o.parent=this.parent||this),o},r.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||m(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return r},r.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||m(e,t,this.length);for(var r=this[e+--t],o=1;t>0&&(o*=256);)r+=this[e+--t]*o;return r},r.prototype.readUInt8=function(e,t){return t||m(e,1,this.length),this[e]},r.prototype.readUInt16LE=function(e,t){return t||m(e,2,this.length),this[e]|this[e+1]<<8},r.prototype.readUInt16BE=function(e,t){return t||m(e,2,this.length),this[e]<<8|this[e+1]},r.prototype.readUInt32LE=function(e,t){return t||m(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},r.prototype.readUInt32BE=function(e,t){return t||m(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},r.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||m(e,t,this.length);for(var r=this[e],o=1,i=0;++i<t&&(o*=256);)r+=this[e+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},r.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||m(e,t,this.length);for(var r=t,o=1,i=this[e+--r];r>0&&(o*=256);)i+=this[e+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},r.prototype.readInt8=function(e,t){return t||m(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},r.prototype.readInt16LE=function(e,t){t||m(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt16BE=function(e,t){t||m(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt32LE=function(e,t){return t||m(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},r.prototype.readInt32BE=function(e,t){return t||m(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},r.prototype.readFloatLE=function(e,t){return t||m(e,4,this.length),D.read(this,e,!0,23,4)},r.prototype.readFloatBE=function(e,t){return t||m(e,4,this.length),D.read(this,e,!1,23,4)},r.prototype.readDoubleLE=function(e,t){return t||m(e,8,this.length),D.read(this,e,!0,52,8)},r.prototype.readDoubleBE=function(e,t){return t||m(e,8,this.length),D.read(this,e,!1,52,8)},r.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||y(this,e,t,n,Math.pow(2,8*n),0);var o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o>>>0&255;return t+n},r.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||y(this,e,t,n,Math.pow(2,8*n),0);var o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i>>>0&255;return t+n},r.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||y(this,e,t,1,255,0),r.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=e,t+1},r.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||y(this,e,t,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):x(this,e,t,!0),t+2},r.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||y(this,e,t,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):x(this,e,t,!1),t+2},r.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||y(this,e,t,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e):b(this,e,t,!0),t+4},r.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||y(this,e,t,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):b(this,e,t,!1),t+4},r.prototype.writeIntLE=function(e,t,n,r){e=+e,t>>>=0,r||y(this,e,t,n,Math.pow(2,8*n-1)-1,-Math.pow(2,8*n-1));var o=0,i=1,a=0>e?1:0;for(this[t]=255&e;++o<n&&(i*=256);)this[t+o]=(e/i>>0)-a&255;return t+n},r.prototype.writeIntBE=function(e,t,n,r){e=+e,t>>>=0,r||y(this,e,t,n,Math.pow(2,8*n-1)-1,-Math.pow(2,8*n-1));var o=n-1,i=1,a=0>e?1:0;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=(e/i>>0)-a&255;return t+n},r.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||y(this,e,t,1,127,-128),r.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=e,t+1},r.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||y(this,e,t,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8):x(this,e,t,!0),t+2},r.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||y(this,e,t,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=e):x(this,e,t,!1),t+2},r.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||y(this,e,t,4,2147483647,-2147483648),r.TYPED_ARRAY_SUPPORT?(this[t]=e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):b(this,e,t,!0),t+4},r.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||y(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),r.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e):b(this,e,t,!1),t+4},r.prototype.writeFloatLE=function(e,t,n){return _(this,e,t,!0,n)},r.prototype.writeFloatBE=function(e,t,n){return _(this,e,t,!1,n)},r.prototype.writeDoubleLE=function(e,t,n){return k(this,e,t,!0,n)},r.prototype.writeDoubleBE=function(e,t,n){return k(this,e,t,!1,n)},r.prototype.copy=function(e,t,n,o){if(n||(n=0),o||0===o||(o=this.length),t>=e.length&&(t=e.length),t||(t=0),o>0&&n>o&&(o=n),o===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>o)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),e.length-t<o-n&&(o=e.length-t+n);var i=o-n;if(1e3>i||!r.TYPED_ARRAY_SUPPORT)for(var a=0;i>a;a++)e[a+t]=this[a+n];else e._set(this.subarray(n,n+i),t);return i},r.prototype.fill=function(e,t,n){if(e||(e=0),t||(t=0),n||(n=this.length),t>n)throw new RangeError("end < start");if(n!==t&&0!==this.length){if(0>t||t>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof e)for(r=t;n>r;r++)this[r]=e;else{var o=E(e.toString()),i=o.length;for(r=t;n>r;r++)this[r]=o[r%i]}return this}},r.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(r.TYPED_ARRAY_SUPPORT)return new r(this).buffer;for(var e=new Uint8Array(this.length),t=0,n=e.length;n>t;t+=1)e[t]=this[t];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var R=r.prototype;r._augment=function(e){return e.constructor=r,e._isBuffer=!0,e._set=e.set,e.get=R.get,e.set=R.set,e.write=R.write,e.toString=R.toString,e.toLocaleString=R.toString,e.toJSON=R.toJSON,e.equals=R.equals,e.compare=R.compare,e.indexOf=R.indexOf,e.copy=R.copy,e.slice=R.slice,e.readUIntLE=R.readUIntLE,e.readUIntBE=R.readUIntBE,e.readUInt8=R.readUInt8,e.readUInt16LE=R.readUInt16LE,e.readUInt16BE=R.readUInt16BE,e.readUInt32LE=R.readUInt32LE,e.readUInt32BE=R.readUInt32BE,e.readIntLE=R.readIntLE,e.readIntBE=R.readIntBE,e.readInt8=R.readInt8,e.readInt16LE=R.readInt16LE,e.readInt16BE=R.readInt16BE,e.readInt32LE=R.readInt32LE,e.readInt32BE=R.readInt32BE,e.readFloatLE=R.readFloatLE,e.readFloatBE=R.readFloatBE,e.readDoubleLE=R.readDoubleLE,e.readDoubleBE=R.readDoubleBE,e.writeUInt8=R.writeUInt8,e.writeUIntLE=R.writeUIntLE,e.writeUIntBE=R.writeUIntBE,e.writeUInt16LE=R.writeUInt16LE,e.writeUInt16BE=R.writeUInt16BE,e.writeUInt32LE=R.writeUInt32LE,e.writeUInt32BE=R.writeUInt32BE,e.writeIntLE=R.writeIntLE,e.writeIntBE=R.writeIntBE,e.writeInt8=R.writeInt8,e.writeInt16LE=R.writeInt16LE,e.writeInt16BE=R.writeInt16BE,e.writeInt32LE=R.writeInt32LE,e.writeInt32BE=R.writeInt32BE,e.writeFloatLE=R.writeFloatLE,e.writeFloatBE=R.writeFloatBE,e.writeDoubleLE=R.writeDoubleLE,
e.writeDoubleBE=R.writeDoubleBE,e.fill=R.fill,e.inspect=R.inspect,e.toArrayBuffer=R.toArrayBuffer,e};var I=/[^+\/0-9A-z\-]/g},{"base64-js":3,ieee754:4,"is-array":5}],3:[function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(e){"use strict";function t(e){var t=e.charCodeAt(0);return t===a||t===f?62:t===s||t===d?63:l>t?-1:l+10>t?t-l+26+26:c+26>t?t-c:u+26>t?t-u+26:void 0}function n(e){function n(e){u[f++]=e}var r,o,a,s,l,u;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=e.length;l="="===e.charAt(c-2)?2:"="===e.charAt(c-1)?1:0,u=new i(3*e.length/4-l),a=l>0?e.length-4:e.length;var f=0;for(r=0,o=0;a>r;r+=4,o+=3)s=t(e.charAt(r))<<18|t(e.charAt(r+1))<<12|t(e.charAt(r+2))<<6|t(e.charAt(r+3)),n((16711680&s)>>16),n((65280&s)>>8),n(255&s);return 2===l?(s=t(e.charAt(r))<<2|t(e.charAt(r+1))>>4,n(255&s)):1===l&&(s=t(e.charAt(r))<<10|t(e.charAt(r+1))<<4|t(e.charAt(r+2))>>2,n(s>>8&255),n(255&s)),u}function o(e){function t(e){return r.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var o,i,a,s=e.length%3,l="";for(o=0,a=e.length-s;a>o;o+=3)i=(e[o]<<16)+(e[o+1]<<8)+e[o+2],l+=n(i);switch(s){case 1:i=e[e.length-1],l+=t(i>>2),l+=t(i<<4&63),l+="==";break;case 2:i=(e[e.length-2]<<8)+e[e.length-1],l+=t(i>>10),l+=t(i>>4&63),l+=t(i<<2&63),l+="="}return l}var i="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),s="/".charCodeAt(0),l="0".charCodeAt(0),u="a".charCodeAt(0),c="A".charCodeAt(0),f="-".charCodeAt(0),d="_".charCodeAt(0);e.toByteArray=n,e.fromByteArray=o}("undefined"==typeof n?this.base64js={}:n)},{}],4:[function(e,t,n){n.read=function(e,t,n,r,o){var i,a,s=8*o-r-1,l=(1<<s)-1,u=l>>1,c=-7,f=n?o-1:0,d=n?-1:1,p=e[t+f];for(f+=d,i=p&(1<<-c)-1,p>>=-c,c+=s;c>0;i=256*i+e[t+f],f+=d,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=d,c-=8);if(0===i)i=1-u;else{if(i===l)return a?0/0:(p?-1:1)*(1/0);a+=Math.pow(2,r),i-=u}return(p?-1:1)*a*Math.pow(2,i-r)},n.write=function(e,t,n,r,o,i){var a,s,l,u=8*i-o-1,c=(1<<u)-1,f=c>>1,d=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,h=r?1:-1,g=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+f>=1?d/l:d*Math.pow(2,1-f),t*l>=2&&(a++,l/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*l-1)*Math.pow(2,o),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;e[n+p]=255&s,p+=h,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[n+p]=255&a,p+=h,a/=256,u-=8);e[n+p-h]|=128*g}},{}],5:[function(e,t,n){var r=Array.isArray,o=Object.prototype.toString;t.exports=r||function(e){return!!e&&"[object Array]"==o.call(e)}},{}],6:[function(e,t,n){t.exports=e("./lib/heap")},{"./lib/heap":7}],7:[function(e,t,n){(function(){var e,r,o,i,a,s,l,u,c,f,d,p,h,g,v;o=Math.floor,f=Math.min,r=function(e,t){return t>e?-1:e>t?1:0},c=function(e,t,n,i,a){var s;if(null==n&&(n=0),null==a&&(a=r),0>n)throw new Error("lo must be non-negative");for(null==i&&(i=e.length);i>n;)s=o((n+i)/2),a(t,e[s])<0?i=s:n=s+1;return[].splice.apply(e,[n,n-n].concat(t)),t},s=function(e,t,n){return null==n&&(n=r),e.push(t),g(e,0,e.length-1,n)},a=function(e,t){var n,o;return null==t&&(t=r),n=e.pop(),e.length?(o=e[0],e[0]=n,v(e,0,t)):o=n,o},u=function(e,t,n){var o;return null==n&&(n=r),o=e[0],e[0]=t,v(e,0,n),o},l=function(e,t,n){var o;return null==n&&(n=r),e.length&&n(e[0],t)<0&&(o=[e[0],t],t=o[0],e[0]=o[1],v(e,0,n)),t},i=function(e,t){var n,i,a,s,l,u;for(null==t&&(t=r),s=function(){u=[];for(var t=0,n=o(e.length/2);n>=0?n>t:t>n;n>=0?t++:t--)u.push(t);return u}.apply(this).reverse(),l=[],i=0,a=s.length;a>i;i++)n=s[i],l.push(v(e,n,t));return l},h=function(e,t,n){var o;return null==n&&(n=r),o=e.indexOf(t),-1!==o?(g(e,0,o,n),v(e,o,n)):void 0},d=function(e,t,n){var o,a,s,u,c;if(null==n&&(n=r),a=e.slice(0,t),!a.length)return a;for(i(a,n),c=e.slice(t),s=0,u=c.length;u>s;s++)o=c[s],l(a,o,n);return a.sort(n).reverse()},p=function(e,t,n){var o,s,l,u,d,p,h,g,v,m;if(null==n&&(n=r),10*t<=e.length){if(u=e.slice(0,t).sort(n),!u.length)return u;for(l=u[u.length-1],g=e.slice(t),d=0,h=g.length;h>d;d++)o=g[d],n(o,l)<0&&(c(u,o,0,null,n),u.pop(),l=u[u.length-1]);return u}for(i(e,n),m=[],s=p=0,v=f(t,e.length);v>=0?v>p:p>v;s=v>=0?++p:--p)m.push(a(e,n));return m},g=function(e,t,n,o){var i,a,s;for(null==o&&(o=r),i=e[n];n>t&&(s=n-1>>1,a=e[s],o(i,a)<0);)e[n]=a,n=s;return e[n]=i},v=function(e,t,n){var o,i,a,s,l;for(null==n&&(n=r),i=e.length,l=t,a=e[t],o=2*t+1;i>o;)s=o+1,i>s&&!(n(e[o],e[s])<0)&&(o=s),e[t]=e[o],t=o,o=2*t+1;return e[t]=a,g(e,l,t,n)},e=function(){function e(e){this.cmp=null!=e?e:r,this.nodes=[]}return e.push=s,e.pop=a,e.replace=u,e.pushpop=l,e.heapify=i,e.updateItem=h,e.nlargest=d,e.nsmallest=p,e.prototype.push=function(e){return s(this.nodes,e,this.cmp)},e.prototype.pop=function(){return a(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return u(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return l(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return i(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return h(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return t=new e,t.nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),function(e,r){return"function"==typeof define&&define.amd?define([],r):"object"==typeof n?t.exports=r():e.Heap=r()}(this,function(){return e})}).call(this)},{}],8:[function(require,module,exports){(function(global){"use strict";var numeric="undefined"==typeof exports?function(){}:exports;"undefined"!=typeof global&&(global.numeric=numeric),numeric.version="1.2.6",numeric.bench=function(e,t){var n,r,o,i;for("undefined"==typeof t&&(t=15),o=.5,n=new Date;;){for(o*=2,i=o;i>3;i-=4)e(),e(),e(),e();for(;i>0;)e(),i--;if(r=new Date,r-n>t)break}for(i=o;i>3;i-=4)e(),e(),e(),e();for(;i>0;)e(),i--;return r=new Date,1e3*(3*o-1)/(r-n)},numeric._myIndexOf=function(e){var t,n=this.length;for(t=0;n>t;++t)if(this[t]===e)return t;return-1},numeric.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:numeric._myIndexOf,numeric.Function=Function,numeric.precision=4,numeric.largeArray=50,numeric.prettyPrint=function(e){function t(e){if(0===e)return"0";if(isNaN(e))return"NaN";if(0>e)return"-"+t(-e);if(isFinite(e)){var n=Math.floor(Math.log(e)/Math.log(10)),r=e/Math.pow(10,n),o=r.toPrecision(numeric.precision);return 10===parseFloat(o)&&(n++,r=1,o=r.toPrecision(numeric.precision)),parseFloat(o).toString()+"e"+n.toString()}return"Infinity"}function n(e){var o;if("undefined"==typeof e)return r.push(Array(numeric.precision+8).join(" ")),!1;if("string"==typeof e)return r.push('"'+e+'"'),!1;if("boolean"==typeof e)return r.push(e.toString()),!1;if("number"==typeof e){var i=t(e),a=e.toPrecision(numeric.precision),s=parseFloat(e.toString()).toString(),l=[i,a,s,parseFloat(a).toString(),parseFloat(s).toString()];for(o=1;o<l.length;o++)l[o].length<i.length&&(i=l[o]);return r.push(Array(numeric.precision+8-i.length).join(" ")+i),!1}if(null===e)return r.push("null"),!1;if("function"==typeof e){r.push(e.toString());var u=!1;for(o in e)e.hasOwnProperty(o)&&(r.push(u?",\n":"\n{"),u=!0,r.push(o),r.push(": \n"),n(e[o]));return u&&r.push("}\n"),!0}if(e instanceof Array){if(e.length>numeric.largeArray)return r.push("...Large Array..."),!0;var u=!1;for(r.push("["),o=0;o<e.length;o++)o>0&&(r.push(","),u&&r.push("\n ")),u=n(e[o]);return r.push("]"),!0}r.push("{");var u=!1;for(o in e)e.hasOwnProperty(o)&&(u&&r.push(",\n"),u=!0,r.push(o),r.push(": \n"),n(e[o]));return r.push("}"),!0}var r=[];return n(e),r.join("")},numeric.parseDate=function(e){function t(e){if("string"==typeof e)return Date.parse(e.replace(/-/g,"/"));if(!(e instanceof Array))throw new Error("parseDate: parameter must be arrays of strings");var n,r=[];for(n=0;n<e.length;n++)r[n]=t(e[n]);return r}return t(e)},numeric.parseFloat=function(e){function t(e){if("string"==typeof e)return parseFloat(e);if(!(e instanceof Array))throw new Error("parseFloat: parameter must be arrays of strings");var n,r=[];for(n=0;n<e.length;n++)r[n]=t(e[n]);return r}return t(e)},numeric.parseCSV=function(e){var t,n,r=e.split("\n"),o=[],i=/(([^'",]*)|('[^']*')|("[^"]*")),/g,a=/^\s*(([+-]?[0-9]+(\.[0-9]*)?(e[+-]?[0-9]+)?)|([+-]?[0-9]*(\.[0-9]+)?(e[+-]?[0-9]+)?))\s*$/,s=function(e){return e.substr(0,e.length-1)},l=0;for(n=0;n<r.length;n++){var u,c=(r[n]+",").match(i);if(c.length>0){for(o[l]=[],t=0;t<c.length;t++)u=s(c[t]),o[l][t]=a.test(u)?parseFloat(u):u;l++}}return o},numeric.toCSV=function(e){var t,n,r,o,i,a,s=numeric.dim(e);for(r=s[0],o=s[1],a=[],t=0;r>t;t++){for(i=[],n=0;r>n;n++)i[n]=e[t][n].toString();a[t]=i.join(", ")}return a.join("\n")+"\n"},numeric.getURL=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),t},numeric.imageURL=function(e){function t(e){var t,n,r,o,i,a,s,l,u=e.length,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f="";for(t=0;u>t;t+=3)n=e[t],r=e[t+1],o=e[t+2],i=n>>2,a=((3&n)<<4)+(r>>4),s=((15&r)<<2)+(o>>6),l=63&o,t+1>=u?s=l=64:t+2>=u&&(l=64),f+=c.charAt(i)+c.charAt(a)+c.charAt(s)+c.charAt(l);return f}function n(e,t,n){"undefined"==typeof t&&(t=0),"undefined"==typeof n&&(n=e.length);{var r,o=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],i=-1,a=0;e.length}for(r=t;n>r;r++)a=255&(i^e[r]),i=i>>>8^o[a];return-1^i}var r,o,i,a,s,l,u,c,f,d,p=e[0].length,h=e[0][0].length,g=[137,80,78,71,13,10,26,10,0,0,0,13,73,72,68,82,h>>24&255,h>>16&255,h>>8&255,255&h,p>>24&255,p>>16&255,p>>8&255,255&p,8,2,0,0,0,-1,-2,-3,-4,-5,-6,-7,-8,73,68,65,84,8,29];for(d=n(g,12,29),g[29]=d>>24&255,g[30]=d>>16&255,g[31]=d>>8&255,g[32]=255&d,r=1,o=0,u=0;p>u;u++){for(g.push(p-1>u?0:1),s=3*h+1+(0===u)&255,l=3*h+1+(0===u)>>8&255,g.push(s),g.push(l),g.push(255&~s),g.push(255&~l),0===u&&g.push(0),c=0;h>c;c++)for(i=0;3>i;i++)s=e[i][u][c],s=s>255?255:0>s?0:Math.round(s),r=(r+s)%65521,o=(o+r)%65521,g.push(s);g.push(0)}return f=(o<<16)+r,g.push(f>>24&255),g.push(f>>16&255),g.push(f>>8&255),g.push(255&f),a=g.length-41,g[33]=a>>24&255,g[34]=a>>16&255,g[35]=a>>8&255,g[36]=255&a,d=n(g,37),g.push(d>>24&255),g.push(d>>16&255),g.push(d>>8&255),g.push(255&d),g.push(0),g.push(0),g.push(0),g.push(0),g.push(73),g.push(69),g.push(78),g.push(68),g.push(174),g.push(66),g.push(96),g.push(130),"data:image/png;base64,"+t(g)},numeric._dim=function(e){for(var t=[];"object"==typeof e;)t.push(e.length),e=e[0];return t},numeric.dim=function(e){var t,n;return"object"==typeof e?(t=e[0],"object"==typeof t?(n=t[0],"object"==typeof n?numeric._dim(e):[e.length,t.length]):[e.length]):[]},numeric.mapreduce=function(e,t){return Function("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+t+';\nif(typeof x === "number") { var xi = x; '+e+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+e+";\n    xi = x[i-1];\n    "+e+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+e+"\n}\nreturn accum;")},numeric.mapreduce2=function(e,t){return Function("x","var n = x.length;\nvar i,xi;\n"+t+";\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+e+";\n}\nreturn accum;")},numeric.same=function e(t,n){var r,o;if(!(t instanceof Array&&n instanceof Array))return!1;if(o=t.length,o!==n.length)return!1;for(r=0;o>r;r++)if(t[r]!==n[r]){if("object"!=typeof t[r])return!1;if(!e(t[r],n[r]))return!1}return!0},numeric.rep=function(e,t,n){"undefined"==typeof n&&(n=0);var r,o=e[n],i=Array(o);if(n===e.length-1){for(r=o-2;r>=0;r-=2)i[r+1]=t,i[r]=t;return-1===r&&(i[0]=t),i}for(r=o-1;r>=0;r--)i[r]=numeric.rep(e,t,n+1);return i},numeric.dotMMsmall=function(e,t){var n,r,o,i,a,s,l,u,c,f,d;for(i=e.length,a=t.length,s=t[0].length,l=Array(i),n=i-1;n>=0;n--){for(u=Array(s),c=e[n],o=s-1;o>=0;o--){for(f=c[a-1]*t[a-1][o],r=a-2;r>=1;r-=2)d=r-1,f+=c[r]*t[r][o]+c[d]*t[d][o];0===r&&(f+=c[0]*t[0][o]),u[o]=f}l[n]=u}return l},numeric._getCol=function(e,t,n){var r,o=e.length;for(r=o-1;r>0;--r)n[r]=e[r][t],--r,n[r]=e[r][t];0===r&&(n[0]=e[0][t])},numeric.dotMMbig=function(e,t){var n,r,o,i,a=numeric._getCol,s=t.length,l=Array(s),u=e.length,c=t[0].length,f=new Array(u),d=numeric.dotVV;for(--s,--u,r=u;-1!==r;--r)f[r]=Array(c);for(--c,r=c;-1!==r;--r)for(a(t,r,l),o=u;-1!==o;--o)i=0,n=e[o],f[o][r]=d(n,l);return f},numeric.dotMV=function(e,t){var n,r=e.length,o=(t.length,Array(r)),i=numeric.dotVV;for(n=r-1;n>=0;n--)o[n]=i(e[n],t);return o},numeric.dotVM=function(e,t){var n,r,o,i,a,s,l;for(o=e.length,i=t[0].length,a=Array(i),r=i-1;r>=0;r--){for(s=e[o-1]*t[o-1][r],n=o-2;n>=1;n-=2)l=n-1,s+=e[n]*t[n][r]+e[l]*t[l][r];0===n&&(s+=e[0]*t[0][r]),a[r]=s}return a},numeric.dotVV=function(e,t){var n,r,o=e.length,i=e[o-1]*t[o-1];for(n=o-2;n>=1;n-=2)r=n-1,i+=e[n]*t[n]+e[r]*t[r];return 0===n&&(i+=e[0]*t[0]),i},numeric.dot=function(e,t){var n=numeric.dim;switch(1e3*n(e).length+n(t).length){case 2002:return t.length<10?numeric.dotMMsmall(e,t):numeric.dotMMbig(e,t);case 2001:return numeric.dotMV(e,t);case 1002:return numeric.dotVM(e,t);case 1001:return numeric.dotVV(e,t);case 1e3:return numeric.mulVS(e,t);case 1:return numeric.mulSV(e,t);case 0:return e*t;default:throw new Error("numeric.dot only works on vectors and matrices")}},numeric.diag=function(e){var t,n,r,o,i=e.length,a=Array(i);for(t=i-1;t>=0;t--){for(o=Array(i),n=t+2,r=i-1;r>=n;r-=2)o[r]=0,o[r-1]=0;for(r>t&&(o[r]=0),o[t]=e[t],r=t-1;r>=1;r-=2)o[r]=0,o[r-1]=0;0===r&&(o[0]=0),a[t]=o}return a},numeric.getDiag=function(e){var t,n=Math.min(e.length,e[0].length),r=Array(n);for(t=n-1;t>=1;--t)r[t]=e[t][t],--t,r[t]=e[t][t];return 0===t&&(r[0]=e[0][0]),r},numeric.identity=function(e){return numeric.diag(numeric.rep([e],1))},numeric.pointwise=function(e,t,n){"undefined"==typeof n&&(n="");var r,o,i=[],a=/\[i\]$/,s="",l=!1;for(r=0;r<e.length;r++)a.test(e[r])?(o=e[r].substring(0,e[r].length-3),s=o):o=e[r],"ret"===o&&(l=!0),i.push(o);return i[e.length]="_s",i[e.length+1]="_k",i[e.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+s+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(l?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+e.join(",")+",_s,_k+1);\n    return ret;\n}\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n    "+t+"\n}\nreturn ret;",Function.apply(null,i)},numeric.pointwise2=function(e,t,n){"undefined"==typeof n&&(n="");var r,o,i=[],a=/\[i\]$/,s="",l=!1;for(r=0;r<e.length;r++)a.test(e[r])?(o=e[r].substring(0,e[r].length-3),s=o):o=e[r],"ret"===o&&(l=!0),i.push(o);return i[e.length]="var _n = "+s+".length;\nvar i"+(l?"":", ret = Array(_n)")+";\n"+n+"\nfor(i=_n-1;i!==-1;--i) {\n"+t+"\n}\nreturn ret;",Function.apply(null,i)},numeric._biforeach=function t(e,n,r,o,i){if(o===r.length-1)return void i(e,n);var a,s=r[o];for(a=s-1;a>=0;a--)t("object"==typeof e?e[a]:e,"object"==typeof n?n[a]:n,r,o+1,i)},numeric._biforeach2=function n(e,t,r,o,i){if(o===r.length-1)return i(e,t);var a,s=r[o],l=Array(s);for(a=s-1;a>=0;--a)l[a]=n("object"==typeof e?e[a]:e,"object"==typeof t?t[a]:t,r,o+1,i);return l},numeric._foreach=function r(e,t,n,o){if(n===t.length-1)return void o(e);var i,a=t[n];for(i=a-1;i>=0;i--)r(e[i],t,n+1,o)},numeric._foreach2=function o(e,t,n,r){if(n===t.length-1)return r(e);var i,a=t[n],s=Array(a);for(i=a-1;i>=0;i--)s[i]=o(e[i],t,n+1,r);return s},numeric.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},numeric.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},numeric.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],numeric.mathfuns2=["atan2","pow","max","min"],numeric.ops1={neg:"-",not:"!",bnot:"~",clone:""},numeric.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi)","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){var e,t;for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],numeric.ops2[t]=t;for(e in numeric.ops2)if(numeric.ops2.hasOwnProperty(e)){t=numeric.ops2[e];var n,r,o="";-1!==numeric.myIndexOf.call(numeric.mathfuns2,e)?(o="var "+t+" = Math."+t+";\n",n=function(e,n,r){return e+" = "+t+"("+n+","+r+")"},r=function(e,n){return e+" = "+t+"("+e+","+n+")"}):(n=function(e,n,r){return e+" = "+n+" "+t+" "+r},r=numeric.opseq.hasOwnProperty(e+"eq")?function(e,n){return e+" "+t+"= "+n}:function(e,n){return e+" = "+e+" "+t+" "+n}),numeric[e+"VV"]=numeric.pointwise2(["x[i]","y[i]"],n("ret[i]","x[i]","y[i]"),o),numeric[e+"SV"]=numeric.pointwise2(["x","y[i]"],n("ret[i]","x","y[i]"),o),numeric[e+"VS"]=numeric.pointwise2(["x[i]","y"],n("ret[i]","x[i]","y"),o),numeric[e]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+e+"VV, VS = numeric."+e+"VS, SV = numeric."+e+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+r("x","y")+"\n}\nreturn x;\n"),numeric[t]=numeric[e],numeric[e+"eqV"]=numeric.pointwise2(["ret[i]","x[i]"],r("ret[i]","x[i]"),o),numeric[e+"eqS"]=numeric.pointwise2(["ret[i]","x"],r("ret[i]","x"),o),numeric[e+"eq"]=Function("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+e+"eqV, S = numeric."+e+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n')}for(e=0;e<numeric.mathfuns2.length;++e)t=numeric.mathfuns2[e],delete numeric.ops2[t];for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],numeric.ops1[t]=t;for(e in numeric.ops1)numeric.ops1.hasOwnProperty(e)&&(o="",t=numeric.ops1[e],-1!==numeric.myIndexOf.call(numeric.mathfuns,e)&&Math.hasOwnProperty(t)&&(o="var "+t+" = Math."+t+";\n"),numeric[e+"eqV"]=numeric.pointwise2(["ret[i]"],"ret[i] = "+t+"(ret[i]);",o),numeric[e+"eq"]=Function("x",'if(typeof x !== "object") return '+t+"x\nvar i;\nvar V = numeric."+e+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),numeric[e+"V"]=numeric.pointwise2(["x[i]"],"ret[i] = "+t+"(x[i]);",o),numeric[e]=Function("x",'if(typeof x !== "object") return '+t+"(x)\nvar i;\nvar V = numeric."+e+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(e=0;e<numeric.mathfuns.length;++e)t=numeric.mathfuns[e],delete numeric.ops1[t];for(e in numeric.mapreducers)numeric.mapreducers.hasOwnProperty(e)&&(t=numeric.mapreducers[e],numeric[e+"V"]=numeric.mapreduce2(t[0],t[1]),numeric[e]=Function("x","s","k",t[1]+'if(typeof x !== "object") {    xi = x;\n'+t[0]+';\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+e+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+t[0]+";\n}\nreturn accum;\n"))}(),numeric.truncVV=numeric.pointwise(["x[i]","y[i]"],"ret[i] = round(x[i]/y[i])*y[i];","var round = Math.round;"),numeric.truncVS=numeric.pointwise(["x[i]","y"],"ret[i] = round(x[i]/y)*y;","var round = Math.round;"),numeric.truncSV=numeric.pointwise(["x","y[i]"],"ret[i] = round(x/y[i])*y[i];","var round = Math.round;"),numeric.trunc=function(e,t){return"object"==typeof e?"object"==typeof t?numeric.truncVV(e,t):numeric.truncVS(e,t):"object"==typeof t?numeric.truncSV(e,t):Math.round(e/t)*t},numeric.inv=function(e){var t,n,r,o,i,a,s,e,l=numeric.dim(e),u=Math.abs,c=l[0],f=l[1],d=numeric.clone(e),p=numeric.identity(c);for(a=0;f>a;++a){var h=-1,g=-1;for(i=a;i!==c;++i)s=u(d[i][a]),s>g&&(h=i,g=s);for(n=d[h],d[h]=d[a],d[a]=n,o=p[h],p[h]=p[a],p[a]=o,e=n[a],s=a;s!==f;++s)n[s]/=e;for(s=f-1;-1!==s;--s)o[s]/=e;for(i=c-1;-1!==i;--i)if(i!==a){for(t=d[i],r=p[i],e=t[a],s=a+1;s!==f;++s)t[s]-=n[s]*e;for(s=f-1;s>0;--s)r[s]-=o[s]*e,--s,r[s]-=o[s]*e;0===s&&(r[0]-=o[0]*e)}}return p},numeric.det=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: det() only works on square matrices");var n,r,o,i,a,s,l,u,c=t[0],f=1,d=numeric.clone(e);for(r=0;c-1>r;r++){for(o=r,n=r+1;c>n;n++)Math.abs(d[n][r])>Math.abs(d[o][r])&&(o=n);for(o!==r&&(l=d[o],d[o]=d[r],d[r]=l,f*=-1),i=d[r],n=r+1;c>n;n++){for(a=d[n],s=a[r]/i[r],o=r+1;c-1>o;o+=2)u=o+1,a[o]-=i[o]*s,a[u]-=i[u]*s;o!==c&&(a[o]-=i[o]*s)}if(0===i[r])return 0;f*=i[r]}return f*d[r][r]},numeric.transpose=function(e){var t,n,r,o,i,a=e.length,s=e[0].length,l=Array(s);for(n=0;s>n;n++)l[n]=Array(a);for(t=a-1;t>=1;t-=2){for(o=e[t],r=e[t-1],n=s-1;n>=1;--n)i=l[n],i[t]=o[n],i[t-1]=r[n],--n,i=l[n],i[t]=o[n],i[t-1]=r[n];0===n&&(i=l[0],i[t]=o[0],i[t-1]=r[0])}if(0===t){for(r=e[0],n=s-1;n>=1;--n)l[n][0]=r[n],--n,l[n][0]=r[n];0===n&&(l[0][0]=r[0])}return l},numeric.negtranspose=function(e){var t,n,r,o,i,a=e.length,s=e[0].length,l=Array(s);for(n=0;s>n;n++)l[n]=Array(a);for(t=a-1;t>=1;t-=2){for(o=e[t],r=e[t-1],n=s-1;n>=1;--n)i=l[n],i[t]=-o[n],i[t-1]=-r[n],--n,i=l[n],i[t]=-o[n],i[t-1]=-r[n];0===n&&(i=l[0],i[t]=-o[0],i[t-1]=-r[0])}if(0===t){for(r=e[0],n=s-1;n>=1;--n)l[n][0]=-r[n],--n,l[n][0]=-r[n];0===n&&(l[0][0]=-r[0])}return l},numeric._random=function i(e,t){var n,r,o=e[t],a=Array(o);if(t===e.length-1){for(r=Math.random,n=o-1;n>=1;n-=2)a[n]=r(),a[n-1]=r();return 0===n&&(a[0]=r()),a}for(n=o-1;n>=0;n--)a[n]=i(e,t+1);return a},numeric.random=function(e){return numeric._random(e,0)},numeric.norm2=function(e){return Math.sqrt(numeric.norm2Squared(e))},numeric.linspace=function(e,t,n){if("undefined"==typeof n&&(n=Math.max(Math.round(t-e)+1,1)),2>n)return 1===n?[e]:[];var r,o=Array(n);for(n--,r=n;r>=0;r--)o[r]=(r*t+(n-r)*e)/n;return o},numeric.getBlock=function(e,t,n){function r(e,i){var a,s=t[i],l=n[i]-s,u=Array(l);if(i===o.length-1){for(a=l;a>=0;a--)u[a]=e[a+s];return u}for(a=l;a>=0;a--)u[a]=r(e[a+s],i+1);return u}var o=numeric.dim(e);return r(e,0)},numeric.setBlock=function(e,t,n,r){function o(e,r,a){var s,l=t[a],u=n[a]-l;if(a===i.length-1)for(s=u;s>=0;s--)e[s+l]=r[s];for(s=u;s>=0;s--)o(e[s+l],r[s],a+1)}var i=numeric.dim(e);return o(e,r,0),e},numeric.getRange=function(e,t,n){var r,o,i,a,s=t.length,l=n.length,u=Array(s);for(r=s-1;-1!==r;--r)for(u[r]=Array(l),i=u[r],a=e[t[r]],o=l-1;-1!==o;--o)i[o]=a[n[o]];return u},numeric.blockMatrix=function(e){var t=numeric.dim(e);if(t.length<4)return numeric.blockMatrix([e]);var n,r,o,i,a,s=t[0],l=t[1];for(n=0,r=0,o=0;s>o;++o)n+=e[o][0].length;for(i=0;l>i;++i)r+=e[0][i][0].length;var u=Array(n);for(o=0;n>o;++o)u[o]=Array(r);var c,f,d,p,h,g=0;for(o=0;s>o;++o){for(c=r,i=l-1;-1!==i;--i)for(a=e[o][i],c-=a[0].length,d=a.length-1;-1!==d;--d)for(h=a[d],f=u[g+d],p=h.length-1;-1!==p;--p)f[c+p]=h[p];g+=e[o][0].length}return u},numeric.tensor=function(e,t){if("number"==typeof e||"number"==typeof t)return numeric.mul(e,t);var n=numeric.dim(e),r=numeric.dim(t);if(1!==n.length||1!==r.length)throw new Error("numeric: tensor product is only defined for vectors");var o,i,a,s,l=n[0],u=r[0],c=Array(l);for(i=l-1;i>=0;i--){for(o=Array(u),s=e[i],a=u-1;a>=3;--a)o[a]=s*t[a],--a,o[a]=s*t[a],--a,o[a]=s*t[a],--a,o[a]=s*t[a];for(;a>=0;)o[a]=s*t[a],--a;c[i]=o}return c},numeric.T=function(e,t){this.x=e,this.y=t},numeric.t=function(e,t){return new numeric.T(e,t)},numeric.Tbinop=function(e,t,n,r,o){numeric.indexOf;if("string"!=typeof o){var i;o="";for(i in numeric)numeric.hasOwnProperty(i)&&(e.indexOf(i)>=0||t.indexOf(i)>=0||n.indexOf(i)>=0||r.indexOf(i)>=0)&&i.length>1&&(o+="var "+i+" = numeric."+i+";\n")}return Function(["y"],"var x = this;\nif(!(y instanceof numeric.T)) { y = new numeric.T(y); }\n"+o+"\nif(x.y) {  if(y.y) {    return new numeric.T("+r+");\n  }\n  return new numeric.T("+n+");\n}\nif(y.y) {\n  return new numeric.T("+t+");\n}\nreturn new numeric.T("+e+");\n")},numeric.T.prototype.add=numeric.Tbinop("add(x.x,y.x)","add(x.x,y.x),y.y","add(x.x,y.x),x.y","add(x.x,y.x),add(x.y,y.y)"),numeric.T.prototype.sub=numeric.Tbinop("sub(x.x,y.x)","sub(x.x,y.x),neg(y.y)","sub(x.x,y.x),x.y","sub(x.x,y.x),sub(x.y,y.y)"),numeric.T.prototype.mul=numeric.Tbinop("mul(x.x,y.x)","mul(x.x,y.x),mul(x.x,y.y)","mul(x.x,y.x),mul(x.y,y.x)","sub(mul(x.x,y.x),mul(x.y,y.y)),add(mul(x.x,y.y),mul(x.y,y.x))"),numeric.T.prototype.reciprocal=function(){var e=numeric.mul,t=numeric.div;if(this.y){var n=numeric.add(e(this.x,this.x),e(this.y,this.y));return new numeric.T(t(this.x,n),t(numeric.neg(this.y),n))}return new T(t(1,this.x))},numeric.T.prototype.div=function a(e){if(e instanceof numeric.T||(e=new numeric.T(e)),e.y)return this.mul(e.reciprocal());var a=numeric.div;return this.y?new numeric.T(a(this.x,e.x),a(this.y,e.x)):new numeric.T(a(this.x,e.x))},numeric.T.prototype.dot=numeric.Tbinop("dot(x.x,y.x)","dot(x.x,y.x),dot(x.x,y.y)","dot(x.x,y.x),dot(x.y,y.x)","sub(dot(x.x,y.x),dot(x.y,y.y)),add(dot(x.x,y.y),dot(x.y,y.x))"),numeric.T.prototype.transpose=function(){var e=numeric.transpose,t=this.x,n=this.y;return n?new numeric.T(e(t),e(n)):new numeric.T(e(t))},numeric.T.prototype.transjugate=function(){var e=numeric.transpose,t=this.x,n=this.y;return n?new numeric.T(e(t),numeric.negtranspose(n)):new numeric.T(e(t))},numeric.Tunop=function(e,t,n){return"string"!=typeof n&&(n=""),Function("var x = this;\n"+n+"\nif(x.y) {  "+t+";\n}\n"+e+";\n")},numeric.T.prototype.exp=numeric.Tunop("return new numeric.T(ex)","return new numeric.T(mul(cos(x.y),ex),mul(sin(x.y),ex))","var ex = numeric.exp(x.x), cos = numeric.cos, sin = numeric.sin, mul = numeric.mul;"),numeric.T.prototype.conj=numeric.Tunop("return new numeric.T(x.x);","return new numeric.T(x.x,numeric.neg(x.y));"),numeric.T.prototype.neg=numeric.Tunop("return new numeric.T(neg(x.x));","return new numeric.T(neg(x.x),neg(x.y));","var neg = numeric.neg;"),numeric.T.prototype.sin=numeric.Tunop("return new numeric.T(numeric.sin(x.x))","return x.exp().sub(x.neg().exp()).div(new numeric.T(0,2));"),numeric.T.prototype.cos=numeric.Tunop("return new numeric.T(numeric.cos(x.x))","return x.exp().add(x.neg().exp()).div(2);"),numeric.T.prototype.abs=numeric.Tunop("return new numeric.T(numeric.abs(x.x));","return new numeric.T(numeric.sqrt(numeric.add(mul(x.x,x.x),mul(x.y,x.y))));","var mul = numeric.mul;"),numeric.T.prototype.log=numeric.Tunop("return new numeric.T(numeric.log(x.x));","var theta = new numeric.T(numeric.atan2(x.y,x.x)), r = x.abs();\nreturn new numeric.T(numeric.log(r.x),theta.x);"),numeric.T.prototype.norm2=numeric.Tunop("return numeric.norm2(x.x);","var f = numeric.norm2Squared;\nreturn Math.sqrt(f(x.x)+f(x.y));"),numeric.T.prototype.inv=function(){var e=this;if("undefined"==typeof e.y)return new numeric.T(numeric.inv(e.x));var t,n,r,o,i,a,s,l,u,c,f,t,n,r,d,p,h,g,v,m,y,x=e.x.length,b=numeric.identity(x),w=numeric.rep([x,x],0),_=numeric.clone(e.x),k=numeric.clone(e.y);for(t=0;x>t;t++){for(h=_[t][t],g=k[t][t],d=h*h+g*g,r=t,n=t+1;x>n;n++)h=_[n][t],g=k[n][t],p=h*h+g*g,p>d&&(r=n,d=p);for(r!==t&&(y=_[t],_[t]=_[r],_[r]=y,y=k[t],k[t]=k[r],k[r]=y,y=b[t],b[t]=b[r],b[r]=y,y=w[t],w[t]=w[r],w[r]=y),o=_[t],i=k[t],l=b[t],u=w[t],h=o[t],g=i[t],n=t+1;x>n;n++)v=o[n],m=i[n],o[n]=(v*h+m*g)/d,i[n]=(m*h-v*g)/d;for(n=0;x>n;n++)v=l[n],m=u[n],l[n]=(v*h+m*g)/d,u[n]=(m*h-v*g)/d;for(n=t+1;x>n;n++){for(a=_[n],s=k[n],c=b[n],f=w[n],h=a[t],g=s[t],r=t+1;x>r;r++)v=o[r],m=i[r],a[r]-=v*h-m*g,s[r]-=m*h+v*g;for(r=0;x>r;r++)v=l[r],m=u[r],c[r]-=v*h-m*g,f[r]-=m*h+v*g}}for(t=x-1;t>0;t--)for(l=b[t],u=w[t],n=t-1;n>=0;n--)for(c=b[n],f=w[n],h=_[n][t],g=k[n][t],r=x-1;r>=0;r--)v=l[r],m=u[r],c[r]-=h*v-g*m,f[r]-=h*m+g*v;return new numeric.T(b,w)},numeric.T.prototype.get=function(e){var t,n=this.x,r=this.y,o=0,i=e.length;if(r){for(;i>o;)t=e[o],n=n[t],r=r[t],o++;return new numeric.T(n,r)}for(;i>o;)t=e[o],n=n[t],o++;return new numeric.T(n)},numeric.T.prototype.set=function(e,t){var n,r=this.x,o=this.y,i=0,a=e.length,s=t.x,l=t.y;if(0===a)return l?this.y=l:o&&(this.y=void 0),this.x=r,this;if(l){for(o||(o=numeric.rep(numeric.dim(r),0),this.y=o);a-1>i;)n=e[i],r=r[n],o=o[n],i++;return n=e[i],r[n]=s,o[n]=l,this}if(o){for(;a-1>i;)n=e[i],r=r[n],o=o[n],i++;return n=e[i],r[n]=s,o[n]=s instanceof Array?numeric.rep(numeric.dim(s),0):0,this}for(;a-1>i;)n=e[i],r=r[n],i++;return n=e[i],r[n]=s,this},numeric.T.prototype.getRows=function(e,t){var n,r,o=t-e+1,i=Array(o),a=this.x,s=this.y;

for(n=e;t>=n;n++)i[n-e]=a[n];if(s){for(r=Array(o),n=e;t>=n;n++)r[n-e]=s[n];return new numeric.T(i,r)}return new numeric.T(i)},numeric.T.prototype.setRows=function(e,t,n){var r,o=this.x,i=this.y,a=n.x,s=n.y;for(r=e;t>=r;r++)o[r]=a[r-e];if(s)for(i||(i=numeric.rep(numeric.dim(o),0),this.y=i),r=e;t>=r;r++)i[r]=s[r-e];else if(i)for(r=e;t>=r;r++)i[r]=numeric.rep([a[r-e].length],0);return this},numeric.T.prototype.getRow=function(e){var t=this.x,n=this.y;return n?new numeric.T(t[e],n[e]):new numeric.T(t[e])},numeric.T.prototype.setRow=function(e,t){var n=this.x,r=this.y,o=t.x,i=t.y;return n[e]=o,i?(r||(r=numeric.rep(numeric.dim(n),0),this.y=r),r[e]=i):r&&(r=numeric.rep([o.length],0)),this},numeric.T.prototype.getBlock=function(e,t){var n=this.x,r=this.y,o=numeric.getBlock;return r?new numeric.T(o(n,e,t),o(r,e,t)):new numeric.T(o(n,e,t))},numeric.T.prototype.setBlock=function(e,t,n){n instanceof numeric.T||(n=new numeric.T(n));var r=this.x,o=this.y,i=numeric.setBlock,a=n.x,s=n.y;return s?(o||(this.y=numeric.rep(numeric.dim(this),0),o=this.y),i(r,e,t,a),i(o,e,t,s),this):(i(r,e,t,a),void(o&&i(o,e,t,numeric.rep(numeric.dim(a),0))))},numeric.T.rep=function(e,t){var n=numeric.T;t instanceof n||(t=new n(t));var r=t.x,o=t.y,i=numeric.rep;return o?new n(i(e,r),i(e,o)):new n(i(e,r))},numeric.T.diag=function s(e){e instanceof numeric.T||(e=new numeric.T(e));var t=e.x,n=e.y,s=numeric.diag;return n?new numeric.T(s(t),s(n)):new numeric.T(s(t))},numeric.T.eig=function(){if(this.y)throw new Error("eig: not implemented for complex matrices.");return numeric.eig(this.x)},numeric.T.identity=function(e){return new numeric.T(numeric.identity(e))},numeric.T.prototype.getDiag=function(){var e=numeric,t=this.x,n=this.y;return n?new e.T(e.getDiag(t),e.getDiag(n)):new e.T(e.getDiag(t))},numeric.house=function(e){var t=numeric.clone(e),n=e[0]>=0?1:-1,r=n*numeric.norm2(e);t[0]+=r;var o=numeric.norm2(t);if(0===o)throw new Error("eig: internal error");return numeric.div(t,o)},numeric.toUpperHessenberg=function(e){var t=numeric.dim(e);if(2!==t.length||t[0]!==t[1])throw new Error("numeric: toUpperHessenberg() only works on square matrices");var n,r,o,i,a,s,l,u,c,f,d=t[0],p=numeric.clone(e),h=numeric.identity(d);for(r=0;d-2>r;r++){for(i=Array(d-r-1),n=r+1;d>n;n++)i[n-r-1]=p[n][r];if(numeric.norm2(i)>0){for(a=numeric.house(i),s=numeric.getBlock(p,[r+1,r],[d-1,d-1]),l=numeric.tensor(a,numeric.dot(a,s)),n=r+1;d>n;n++)for(u=p[n],c=l[n-r-1],o=r;d>o;o++)u[o]-=2*c[o-r];for(s=numeric.getBlock(p,[0,r+1],[d-1,d-1]),l=numeric.tensor(numeric.dot(s,a),a),n=0;d>n;n++)for(u=p[n],c=l[n],o=r+1;d>o;o++)u[o]-=2*c[o-r-1];for(s=Array(d-r-1),n=r+1;d>n;n++)s[n-r-1]=h[n];for(l=numeric.tensor(a,numeric.dot(a,s)),n=r+1;d>n;n++)for(f=h[n],c=l[n-r-1],o=0;d>o;o++)f[o]-=2*c[o]}}return{H:p,Q:h}},numeric.epsilon=2.220446049250313e-16,numeric.QRFrancis=function(e,t){"undefined"==typeof t&&(t=1e4),e=numeric.clone(e);var n,r,o,i,a,s,l,u,c,f,d,p,h,g,v,m,y,x,b=(numeric.clone(e),numeric.dim(e)),w=b[0],_=numeric.identity(w);if(3>w)return{Q:_,B:[[0,w-1]]};var k=numeric.epsilon;for(x=0;t>x;x++){for(m=0;w-1>m;m++)if(Math.abs(e[m+1][m])<k*(Math.abs(e[m][m])+Math.abs(e[m+1][m+1]))){var A=numeric.QRFrancis(numeric.getBlock(e,[0,0],[m,m]),t),M=numeric.QRFrancis(numeric.getBlock(e,[m+1,m+1],[w-1,w-1]),t);for(p=Array(m+1),v=0;m>=v;v++)p[v]=_[v];for(h=numeric.dot(A.Q,p),v=0;m>=v;v++)_[v]=h[v];for(p=Array(w-m-1),v=m+1;w>v;v++)p[v-m-1]=_[v];for(h=numeric.dot(M.Q,p),v=m+1;w>v;v++)_[v]=h[v-m-1];return{Q:_,B:A.B.concat(numeric.add(M.B,m+1))}}if(o=e[w-2][w-2],i=e[w-2][w-1],a=e[w-1][w-2],s=e[w-1][w-1],u=o+s,l=o*s-i*a,c=numeric.getBlock(e,[0,0],[2,2]),u*u>=4*l){var z,j;z=.5*(u+Math.sqrt(u*u-4*l)),j=.5*(u-Math.sqrt(u*u-4*l)),c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,z+j)),numeric.diag(numeric.rep([3],z*j)))}else c=numeric.add(numeric.sub(numeric.dot(c,c),numeric.mul(c,u)),numeric.diag(numeric.rep([3],l)));for(n=[c[0][0],c[1][0],c[2][0]],r=numeric.house(n),p=[e[0],e[1],e[2]],h=numeric.tensor(r,numeric.dot(r,p)),v=0;3>v;v++)for(d=e[v],g=h[v],y=0;w>y;y++)d[y]-=2*g[y];for(p=numeric.getBlock(e,[0,0],[w-1,2]),h=numeric.tensor(numeric.dot(p,r),r),v=0;w>v;v++)for(d=e[v],g=h[v],y=0;3>y;y++)d[y]-=2*g[y];for(p=[_[0],_[1],_[2]],h=numeric.tensor(r,numeric.dot(r,p)),v=0;3>v;v++)for(f=_[v],g=h[v],y=0;w>y;y++)f[y]-=2*g[y];var E;for(m=0;w-2>m;m++){for(y=m;m+1>=y;y++)if(Math.abs(e[y+1][y])<k*(Math.abs(e[y][y])+Math.abs(e[y+1][y+1]))){var A=numeric.QRFrancis(numeric.getBlock(e,[0,0],[y,y]),t),M=numeric.QRFrancis(numeric.getBlock(e,[y+1,y+1],[w-1,w-1]),t);for(p=Array(y+1),v=0;y>=v;v++)p[v]=_[v];for(h=numeric.dot(A.Q,p),v=0;y>=v;v++)_[v]=h[v];for(p=Array(w-y-1),v=y+1;w>v;v++)p[v-y-1]=_[v];for(h=numeric.dot(M.Q,p),v=y+1;w>v;v++)_[v]=h[v-y-1];return{Q:_,B:A.B.concat(numeric.add(M.B,y+1))}}for(E=Math.min(w-1,m+3),n=Array(E-m),v=m+1;E>=v;v++)n[v-m-1]=e[v][m];for(r=numeric.house(n),p=numeric.getBlock(e,[m+1,m],[E,w-1]),h=numeric.tensor(r,numeric.dot(r,p)),v=m+1;E>=v;v++)for(d=e[v],g=h[v-m-1],y=m;w>y;y++)d[y]-=2*g[y-m];for(p=numeric.getBlock(e,[0,m+1],[w-1,E]),h=numeric.tensor(numeric.dot(p,r),r),v=0;w>v;v++)for(d=e[v],g=h[v],y=m+1;E>=y;y++)d[y]-=2*g[y-m-1];for(p=Array(E-m),v=m+1;E>=v;v++)p[v-m-1]=_[v];for(h=numeric.tensor(r,numeric.dot(r,p)),v=m+1;E>=v;v++)for(f=_[v],g=h[v-m-1],y=0;w>y;y++)f[y]-=2*g[y]}}throw new Error("numeric: eigenvalue iteration does not converge -- increase maxiter?")},numeric.eig=function(e,t){var n,r,o,i,a,s,l,u,c,f,d,p,h,g,v,m,y,x=numeric.toUpperHessenberg(e),b=numeric.QRFrancis(x.H,t),w=numeric.T,_=e.length,k=b.B,A=numeric.dot(b.Q,numeric.dot(x.H,numeric.transpose(b.Q))),M=new w(numeric.dot(b.Q,x.Q)),z=k.length,j=Math.sqrt;for(r=0;z>r;r++)if(n=k[r][0],n===k[r][1]);else{if(i=n+1,a=A[n][n],s=A[n][i],l=A[i][n],u=A[i][i],0===s&&0===l)continue;c=-a-u,f=a*u-s*l,d=c*c-4*f,d>=0?(p=0>c?-.5*(c-j(d)):-.5*(c+j(d)),m=(a-p)*(a-p)+s*s,y=l*l+(u-p)*(u-p),m>y?(m=j(m),g=(a-p)/m,v=s/m):(y=j(y),g=l/y,v=(u-p)/y),o=new w([[v,-g],[g,v]]),M.setRows(n,i,o.dot(M.getRows(n,i)))):(p=-.5*c,h=.5*j(-d),m=(a-p)*(a-p)+s*s,y=l*l+(u-p)*(u-p),m>y?(m=j(m+h*h),g=(a-p)/m,v=s/m,p=0,h/=m):(y=j(y+h*h),g=l/y,v=(u-p)/y,p=h/y,h=0),o=new w([[v,-g],[g,v]],[[p,h],[h,-p]]),M.setRows(n,i,o.dot(M.getRows(n,i))))}var E=M.dot(e).dot(M.transjugate()),_=e.length,S=numeric.T.identity(_);for(i=0;_>i;i++)if(i>0)for(r=i-1;r>=0;r--){var T=E.get([r,r]),N=E.get([i,i]);numeric.neq(T.x,N.x)||numeric.neq(T.y,N.y)?(p=E.getRow(r).getBlock([r],[i-1]),h=S.getRow(i).getBlock([r],[i-1]),S.set([i,r],E.get([r,i]).neg().sub(p.dot(h)).div(T.sub(N)))):S.setRow(i,S.getRow(r))}for(i=0;_>i;i++)p=S.getRow(i),S.setRow(i,p.div(p.norm2()));return S=S.transpose(),S=M.transjugate().dot(S),{lambda:E.getDiag(),E:S}},numeric.ccsSparse=function(e){var t,n,r,o,i=e.length,a=[];for(r=i-1;-1!==r;--r){n=e[r];for(o in n){for(o=parseInt(o);o>=a.length;)a[a.length]=0;0!==n[o]&&a[o]++}}var t=a.length,s=Array(t+1);for(s[0]=0,r=0;t>r;++r)s[r+1]=s[r]+a[r];var l=Array(s[t]),u=Array(s[t]);for(r=i-1;-1!==r;--r){n=e[r];for(o in n)0!==n[o]&&(a[o]--,l[s[o]+a[o]]=r,u[s[o]+a[o]]=n[o])}return[s,l,u]},numeric.ccsFull=function(e){var t,n,r,o,i=e[0],a=e[1],s=e[2],l=numeric.ccsDim(e),u=l[0],c=l[1],f=numeric.rep([u,c],0);for(t=0;c>t;t++)for(r=i[t],o=i[t+1],n=r;o>n;++n)f[a[n]][t]=s[n];return f},numeric.ccsTSolve=function(e,t,n,r,o){function i(e){var t;if(0===n[e]){for(n[e]=1,t=a[e];t<a[e+1];++t)i(s[t]);o[f]=e,++f}}var a=e[0],s=e[1],l=e[2],u=a.length-1,c=Math.max,f=0;"undefined"==typeof r&&(n=numeric.rep([u],0)),"undefined"==typeof r&&(r=numeric.linspace(0,n.length-1)),"undefined"==typeof o&&(o=[]);var d,p,h,g,v,m,y;for(d=r.length-1;-1!==d;--d)i(r[d]);for(o.length=f,d=o.length-1;-1!==d;--d)n[o[d]]=0;for(d=r.length-1;-1!==d;--d)p=r[d],n[p]=t[p];for(d=o.length-1;-1!==d;--d){for(p=o[d],h=a[p],g=c(a[p+1],h),v=h;v!==g;++v)if(s[v]===p){n[p]/=l[v];break}for(y=n[p],v=h;v!==g;++v)m=s[v],m!==p&&(n[m]-=y*l[v])}return n},numeric.ccsDFS=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS.prototype.dfs=function(e,t,n,r,o,i){var a,s,l,u=0,c=o.length,f=this.k,d=this.k1,p=this.j;if(0===r[e])for(r[e]=1,p[0]=e,f[0]=s=t[e],d[0]=l=t[e+1];;)if(s>=l){if(o[c]=p[u],0===u)return;++c,--u,s=f[u],l=d[u]}else a=i[n[s]],0===r[a]?(r[a]=1,f[u]=s,++u,p[u]=a,s=t[a],d[u]=l=t[a+1]):++s},numeric.ccsLPSolve=function(e,t,n,r,o,i,a){var s,l,u,c,f,d,p,h,g,v=e[0],m=e[1],y=e[2],x=(v.length-1,t[0]),b=t[1],w=t[2];for(l=x[o],u=x[o+1],r.length=0,s=l;u>s;++s)a.dfs(i[b[s]],v,m,n,r,i);for(s=r.length-1;-1!==s;--s)n[r[s]]=0;for(s=l;s!==u;++s)c=i[b[s]],n[c]=w[s];for(s=r.length-1;-1!==s;--s){for(c=r[s],f=v[c],d=v[c+1],p=f;d>p;++p)if(i[m[p]]===c){n[c]/=y[p];break}for(g=n[c],p=f;d>p;++p)h=i[m[p]],h!==c&&(n[h]-=g*y[p])}return n},numeric.ccsLUP1=function(e,t){var n,r,o,i,a,s,l,u=e[0].length-1,c=[numeric.rep([u+1],0),[],[]],f=[numeric.rep([u+1],0),[],[]],d=c[0],p=c[1],h=c[2],g=f[0],v=f[1],m=f[2],y=numeric.rep([u],0),x=numeric.rep([u],0),b=numeric.ccsLPSolve,w=(Math.max,Math.abs),_=numeric.linspace(0,u-1),k=numeric.linspace(0,u-1),A=new numeric.ccsDFS(u);for("undefined"==typeof t&&(t=1),n=0;u>n;++n){for(b(c,e,y,x,n,k,A),i=-1,a=-1,r=x.length-1;-1!==r;--r)o=x[r],n>=o||(s=w(y[o]),s>i&&(a=o,i=s));for(w(y[n])<t*i&&(r=_[n],i=_[a],_[n]=i,k[i]=n,_[a]=r,k[r]=a,i=y[n],y[n]=y[a],y[a]=i),i=d[n],a=g[n],l=y[n],p[i]=_[n],h[i]=1,++i,r=x.length-1;-1!==r;--r)o=x[r],s=y[o],x[r]=0,y[o]=0,n>=o?(v[a]=o,m[a]=s,++a):(p[i]=_[o],h[i]=s/l,++i);d[n+1]=i,g[n+1]=a}for(r=p.length-1;-1!==r;--r)p[r]=k[p[r]];return{L:c,U:f,P:_,Pinv:k}},numeric.ccsDFS0=function(e){this.k=Array(e),this.k1=Array(e),this.j=Array(e)},numeric.ccsDFS0.prototype.dfs=function(e,t,n,r,o,i,a){var s,l,u,c=0,f=o.length,d=this.k,p=this.k1,h=this.j;if(0===r[e])for(r[e]=1,h[0]=e,d[0]=l=t[i[e]],p[0]=u=t[i[e]+1];;){if(isNaN(l))throw new Error("Ow!");if(l>=u){if(o[f]=i[h[c]],0===c)return;++f,--c,l=d[c],u=p[c]}else s=n[l],0===r[s]?(r[s]=1,d[c]=l,++c,h[c]=s,s=i[s],l=t[s],p[c]=u=t[s+1]):++l}},numeric.ccsLPSolve0=function(e,t,n,r,o,i,a,s){var l,u,c,f,d,p,h,g,v,m=e[0],y=e[1],x=e[2],b=(m.length-1,t[0]),w=t[1],_=t[2];for(u=b[o],c=b[o+1],r.length=0,l=u;c>l;++l)s.dfs(w[l],m,y,n,r,i,a);for(l=r.length-1;-1!==l;--l)f=r[l],n[a[f]]=0;for(l=u;l!==c;++l)f=w[l],n[f]=_[l];for(l=r.length-1;-1!==l;--l){for(f=r[l],g=a[f],d=m[f],p=m[f+1],h=d;p>h;++h)if(y[h]===g){n[g]/=x[h];break}for(v=n[g],h=d;p>h;++h)n[y[h]]-=v*x[h];n[g]=v}},numeric.ccsLUP0=function(e,t){var n,r,o,i,a,s,l,u=e[0].length-1,c=[numeric.rep([u+1],0),[],[]],f=[numeric.rep([u+1],0),[],[]],d=c[0],p=c[1],h=c[2],g=f[0],v=f[1],m=f[2],y=numeric.rep([u],0),x=numeric.rep([u],0),b=numeric.ccsLPSolve0,w=(Math.max,Math.abs),_=numeric.linspace(0,u-1),k=numeric.linspace(0,u-1),A=new numeric.ccsDFS0(u);for("undefined"==typeof t&&(t=1),n=0;u>n;++n){for(b(c,e,y,x,n,k,_,A),i=-1,a=-1,r=x.length-1;-1!==r;--r)o=x[r],n>=o||(s=w(y[_[o]]),s>i&&(a=o,i=s));for(w(y[_[n]])<t*i&&(r=_[n],i=_[a],_[n]=i,k[i]=n,_[a]=r,k[r]=a),i=d[n],a=g[n],l=y[_[n]],p[i]=_[n],h[i]=1,++i,r=x.length-1;-1!==r;--r)o=x[r],s=y[_[o]],x[r]=0,y[_[o]]=0,n>=o?(v[a]=o,m[a]=s,++a):(p[i]=_[o],h[i]=s/l,++i);d[n+1]=i,g[n+1]=a}for(r=p.length-1;-1!==r;--r)p[r]=k[p[r]];return{L:c,U:f,P:_,Pinv:k}},numeric.ccsLUP=numeric.ccsLUP0,numeric.ccsDim=function(e){return[numeric.sup(e[1])+1,e[0].length-1]},numeric.ccsGetBlock=function(e,t,n){var r=numeric.ccsDim(e),o=r[0],i=r[1];"undefined"==typeof t?t=numeric.linspace(0,o-1):"number"==typeof t&&(t=[t]),"undefined"==typeof n?n=numeric.linspace(0,i-1):"number"==typeof n&&(n=[n]);var a,s,l,u,c,f=t.length,d=n.length,p=numeric.rep([i],0),h=[],g=[],v=[p,h,g],m=e[0],y=e[1],x=e[2],b=numeric.rep([o],0),w=0,_=numeric.rep([o],0);for(s=0;d>s;++s){u=n[s];var k=m[u],A=m[u+1];for(a=k;A>a;++a)l=y[a],_[l]=1,b[l]=x[a];for(a=0;f>a;++a)c=t[a],_[c]&&(h[w]=a,g[w]=b[t[a]],++w);for(a=k;A>a;++a)l=y[a],_[l]=0;p[s+1]=w}return v},numeric.ccsDot=function(e,t){var n,r,o,i,a,s,l,u,c,f,d,p=e[0],h=e[1],g=e[2],v=t[0],m=t[1],y=t[2],x=numeric.ccsDim(e),b=numeric.ccsDim(t),w=x[0],_=(x[1],b[1]),k=numeric.rep([w],0),A=numeric.rep([w],0),M=Array(w),z=numeric.rep([_],0),j=[],E=[],S=[z,j,E];for(o=0;o!==_;++o){for(i=v[o],a=v[o+1],c=0,r=i;a>r;++r)for(f=m[r],d=y[r],s=p[f],l=p[f+1],n=s;l>n;++n)u=h[n],0===A[u]&&(M[c]=u,A[u]=1,c+=1),k[u]=k[u]+g[n]*d;for(i=z[o],a=i+c,z[o+1]=a,r=c-1;-1!==r;--r)d=i+r,n=M[r],j[d]=n,E[d]=k[n],A[n]=0,k[n]=0;z[o+1]=z[o]+c}return S},numeric.ccsLUPSolve=function(e,t){var n=e.L,r=e.U,o=(e.P,t[0]),i=!1;"object"!=typeof o&&(t=[[0,t.length],numeric.linspace(0,t.length-1),t],o=t[0],i=!0);var a,s,l,u,c,f,d=t[1],p=t[2],h=n[0].length-1,g=o.length-1,v=numeric.rep([h],0),m=Array(h),y=numeric.rep([h],0),x=Array(h),b=numeric.rep([g+1],0),w=[],_=[],k=numeric.ccsTSolve,A=0;for(a=0;g>a;++a){for(c=0,l=o[a],u=o[a+1],s=l;u>s;++s)f=e.Pinv[d[s]],x[c]=f,y[f]=p[s],++c;for(x.length=c,k(n,y,v,x,m),s=x.length-1;-1!==s;--s)y[x[s]]=0;if(k(r,v,y,m,x),i)return y;for(s=m.length-1;-1!==s;--s)v[m[s]]=0;for(s=x.length-1;-1!==s;--s)f=x[s],w[A]=f,_[A]=y[f],y[f]=0,++A;b[a+1]=A}return[b,w,_]},numeric.ccsbinop=function(e,t){return"undefined"==typeof t&&(t=""),Function("X","Y","var Xi = X[0], Xj = X[1], Xv = X[2];\nvar Yi = Y[0], Yj = Y[1], Yv = Y[2];\nvar n = Xi.length-1,m = Math.max(numeric.sup(Xj),numeric.sup(Yj))+1;\nvar Zi = numeric.rep([n+1],0), Zj = [], Zv = [];\nvar x = numeric.rep([m],0),y = numeric.rep([m],0);\nvar xk,yk,zk;\nvar i,j,j0,j1,k,p=0;\n"+t+"for(i=0;i<n;++i) {\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Xj[j];\n    x[k] = 1;\n    Zj[p] = k;\n    ++p;\n  }\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Yj[j];\n    y[k] = Yv[j];\n    if(x[k] === 0) {\n      Zj[p] = k;\n      ++p;\n    }\n  }\n  Zi[i+1] = p;\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = Xv[j];\n  j0 = Zi[i]; j1 = Zi[i+1];\n  for(j=j0;j!==j1;++j) {\n    k = Zj[j];\n    xk = x[k];\n    yk = y[k];\n"+e+"\n    Zv[j] = zk;\n  }\n  j0 = Xi[i]; j1 = Xi[i+1];\n  for(j=j0;j!==j1;++j) x[Xj[j]] = 0;\n  j0 = Yi[i]; j1 = Yi[i+1];\n  for(j=j0;j!==j1;++j) y[Yj[j]] = 0;\n}\nreturn [Zi,Zj,Zv];")},function(){var k,A,B,C;for(k in numeric.ops2)A=isFinite(eval("1"+numeric.ops2[k]+"0"))?"[Y[0],Y[1],numeric."+k+"(X,Y[2])]":"NaN",B=isFinite(eval("0"+numeric.ops2[k]+"1"))?"[X[0],X[1],numeric."+k+"(X[2],Y)]":"NaN",C=isFinite(eval("1"+numeric.ops2[k]+"0"))&&isFinite(eval("0"+numeric.ops2[k]+"1"))?"numeric.ccs"+k+"MM(X,Y)":"NaN",numeric["ccs"+k+"MM"]=numeric.ccsbinop("zk = xk "+numeric.ops2[k]+"yk;"),numeric["ccs"+k]=Function("X","Y",'if(typeof X === "number") return '+A+';\nif(typeof Y === "number") return '+B+";\nreturn "+C+";\n")}(),numeric.ccsScatter=function(e){var t,n=e[0],r=e[1],o=e[2],i=numeric.sup(r)+1,a=n.length,s=numeric.rep([i],0),l=Array(a),u=Array(a),c=numeric.rep([i],0);for(t=0;a>t;++t)c[r[t]]++;for(t=0;i>t;++t)s[t+1]=s[t]+c[t];var f,d,p=s.slice(0);for(t=0;a>t;++t)d=r[t],f=p[d],l[f]=n[t],u[f]=o[t],p[d]=p[d]+1;return[s,l,u]},numeric.ccsGather=function(e){var t,n,r,o,i,a=e[0],s=e[1],l=e[2],u=a.length-1,c=s.length,f=Array(c),d=Array(c),p=Array(c);for(i=0,t=0;u>t;++t)for(r=a[t],o=a[t+1],n=r;n!==o;++n)d[i]=t,f[i]=s[n],p[i]=l[n],++i;return[f,d,p]},numeric.sdim=function l(e,t,n){if("undefined"==typeof t&&(t=[]),"object"!=typeof e)return t;"undefined"==typeof n&&(n=0),n in t||(t[n]=0),e.length>t[n]&&(t[n]=e.length);var r;for(r in e)e.hasOwnProperty(r)&&l(e[r],t,n+1);return t},numeric.sclone=function u(e,t,n){"undefined"==typeof t&&(t=0),"undefined"==typeof n&&(n=numeric.sdim(e).length);var r,o=Array(e.length);if(t===n-1){for(r in e)e.hasOwnProperty(r)&&(o[r]=e[r]);return o}for(r in e)e.hasOwnProperty(r)&&(o[r]=u(e[r],t+1,n));return o},numeric.sdiag=function(e){var t,n,r=e.length,o=Array(r);for(t=r-1;t>=1;t-=2)n=t-1,o[t]=[],o[t][t]=e[t],o[n]=[],o[n][n]=e[n];return 0===t&&(o[0]=[],o[0][0]=e[t]),o},numeric.sidentity=function(e){return numeric.sdiag(numeric.rep([e],1))},numeric.stranspose=function(e){{var t,n,r,o=[];e.length}for(t in e)if(e.hasOwnProperty(t)){r=e[t];for(n in r)r.hasOwnProperty(n)&&("object"!=typeof o[n]&&(o[n]=[]),o[n][t]=r[n])}return o},numeric.sLUP=function(e,t){throw new Error("The function numeric.sLUP had a bug in it and has been removed. Please use the new numeric.ccsLUP function instead.")},numeric.sdotMM=function(e,t){var n,r,o,i,a,s,l,u=e.length,c=(t.length,numeric.stranspose(t)),f=c.length,d=Array(u);for(o=u-1;o>=0;o--){for(l=[],n=e[o],a=f-1;a>=0;a--){s=0,r=c[a];for(i in n)n.hasOwnProperty(i)&&i in r&&(s+=n[i]*r[i]);s&&(l[a]=s)}d[o]=l}return d},numeric.sdotMV=function(e,t){var n,r,o,i,a=e.length,s=Array(a);for(r=a-1;r>=0;r--){n=e[r],i=0;for(o in n)n.hasOwnProperty(o)&&t[o]&&(i+=n[o]*t[o]);i&&(s[r]=i)}return s},numeric.sdotVM=function(e,t){var n,r,o,i,a=[];for(n in e)if(e.hasOwnProperty(n)){o=t[n],i=e[n];for(r in o)o.hasOwnProperty(r)&&(a[r]||(a[r]=0),a[r]+=i*o[r])}return a},numeric.sdotVV=function(e,t){var n,r=0;for(n in e)e[n]&&t[n]&&(r+=e[n]*t[n]);return r},numeric.sdot=function(e,t){var n=numeric.sdim(e).length,r=numeric.sdim(t).length,o=1e3*n+r;switch(o){case 0:return e*t;case 1001:return numeric.sdotVV(e,t);case 2001:return numeric.sdotMV(e,t);case 1002:return numeric.sdotVM(e,t);case 2002:return numeric.sdotMM(e,t);default:throw new Error("numeric.sdot not implemented for tensors of order "+n+" and "+r)}},numeric.sscatter=function(e){var t,n,r,o,i=e[0].length,a=e.length,s=[];for(n=i-1;n>=0;--n)if(e[a-1][n]){for(o=s,r=0;a-2>r;r++)t=e[r][n],o[t]||(o[t]=[]),o=o[t];o[e[r][n]]=e[r+1][n]}return s},numeric.sgather=function c(e,t,n){"undefined"==typeof t&&(t=[]),"undefined"==typeof n&&(n=[]);var r,o,i;r=n.length;for(o in e)if(e.hasOwnProperty(o))if(n[r]=parseInt(o),i=e[o],"number"==typeof i){if(i){if(0===t.length)for(o=r+1;o>=0;--o)t[o]=[];for(o=r;o>=0;--o)t[o].push(n[o]);t[r+1].push(i)}}else c(i,t,n);return n.length>r&&n.pop(),t},numeric.cLU=function(e){var t,n,r,o,i,a,s=e[0],l=e[1],u=e[2],c=s.length,f=0;for(t=0;c>t;t++)s[t]>f&&(f=s[t]);f++;var d,p,h,g=Array(f),v=Array(f),m=numeric.rep([f],1/0),y=numeric.rep([f],-(1/0));for(r=0;c>r;r++)t=s[r],n=l[r],n<m[t]&&(m[t]=n),n>y[t]&&(y[t]=n);for(t=0;f-1>t;t++)y[t]>y[t+1]&&(y[t+1]=y[t]);for(t=f-1;t>=1;t--)m[t]<m[t-1]&&(m[t-1]=m[t]);var x=0,b=0;for(t=0;f>t;t++)v[t]=numeric.rep([y[t]-m[t]+1],0),g[t]=numeric.rep([t-m[t]],0),x+=t-m[t]+1,b+=y[t]-t+1;for(r=0;c>r;r++)t=s[r],v[t][l[r]-m[t]]=u[r];for(t=0;f-1>t;t++)for(o=t-m[t],d=v[t],n=t+1;m[n]<=t&&f>n;n++)if(i=t-m[n],a=y[t]-t,p=v[n],h=p[i]/d[o]){for(r=1;a>=r;r++)p[r+i]-=h*d[r+o];g[n][t-m[n]]=h}var c,w,_,d=[],p=[],k=[],A=[],M=[],z=[];for(c=0,w=0,t=0;f>t;t++){for(o=m[t],i=y[t],_=v[t],n=t;i>=n;n++)_[n-o]&&(d[c]=t,p[c]=n,k[c]=_[n-o],c++);for(_=g[t],n=o;t>n;n++)_[n-o]&&(A[w]=t,M[w]=n,z[w]=_[n-o],w++);A[w]=t,M[w]=t,z[w]=1,w++}return{U:[d,p,k],L:[A,M,z]}},numeric.cLUsolve=function(e,t){var n,r,o=e.L,i=e.U,a=numeric.clone(t),s=o[0],l=o[1],u=o[2],c=i[0],f=i[1],d=i[2],p=c.length,h=(s.length,a.length);for(r=0,n=0;h>n;n++){for(;l[r]<n;)a[n]-=u[r]*a[l[r]],r++;r++}for(r=p-1,n=h-1;n>=0;n--){for(;f[r]>n;)a[n]-=d[r]*a[f[r]],r--;a[n]/=d[r],r--}return a},numeric.cgrid=function(e,t){"number"==typeof e&&(e=[e,e]);var n,r,o,i=numeric.rep(e,-1);if("function"!=typeof t)switch(t){case"L":t=function(t,n){return t>=e[0]/2||n<e[1]/2};break;default:t=function(e,t){return!0}}for(o=0,n=1;n<e[0]-1;n++)for(r=1;r<e[1]-1;r++)t(n,r)&&(i[n][r]=o,o++);return i},numeric.cdelsq=function(e){var t,n,r,o,i,a=[[-1,0],[0,-1],[0,1],[1,0]],s=numeric.dim(e),l=s[0],u=s[1],c=[],f=[],d=[];for(t=1;l-1>t;t++)for(n=1;u-1>n;n++)if(!(e[t][n]<0)){for(r=0;4>r;r++)o=t+a[r][0],i=n+a[r][1],e[o][i]<0||(c.push(e[t][n]),f.push(e[o][i]),d.push(-1));c.push(e[t][n]),f.push(e[t][n]),d.push(4)}return[c,f,d]},numeric.cdotMV=function(e,t){var n,r,o,i=e[0],a=e[1],s=e[2],l=i.length;for(o=0,r=0;l>r;r++)i[r]>o&&(o=i[r]);for(o++,n=numeric.rep([o],0),r=0;l>r;r++)n[i[r]]+=s[r]*t[a[r]];return n},numeric.Spline=function(e,t,n,r,o){this.x=e,this.yl=t,this.yr=n,this.kl=r,this.kr=o},numeric.Spline.prototype._at=function(e,t){var e,n,r,o,i=this.x,a=this.yl,s=this.yr,l=this.kl,u=this.kr,c=numeric.add,f=numeric.sub,d=numeric.mul;n=f(d(l[t],i[t+1]-i[t]),f(s[t+1],a[t])),r=c(d(u[t+1],i[t]-i[t+1]),f(s[t+1],a[t])),o=(e-i[t])/(i[t+1]-i[t]);var p=o*(1-o);return c(c(c(d(1-o,a[t]),d(o,s[t+1])),d(n,p*(1-o))),d(r,p*o))},numeric.Spline.prototype.at=function(e){if("number"==typeof e){var t,n,r,o=this.x,i=o.length,a=Math.floor;for(t=0,n=i-1;n-t>1;)r=a((t+n)/2),o[r]<=e?t=r:n=r;return this._at(e,t)}var s,i=e.length,l=Array(i);for(s=i-1;-1!==s;--s)l[s]=this.at(e[s]);return l},numeric.Spline.prototype.diff=function(){var e,t,n,r=this.x,o=this.yl,i=this.yr,a=this.kl,s=this.kr,l=o.length,u=a,c=s,f=Array(l),d=Array(l),p=numeric.add,h=numeric.mul,g=numeric.div,v=numeric.sub;for(e=l-1;-1!==e;--e)t=r[e+1]-r[e],n=v(i[e+1],o[e]),f[e]=g(p(h(n,6),h(a[e],-4*t),h(s[e+1],-2*t)),t*t),d[e+1]=g(p(h(n,-6),h(a[e],2*t),h(s[e+1],4*t)),t*t);return new numeric.Spline(r,u,c,f,d)},numeric.Spline.prototype.roots=function(){function e(e){return e*e}var t=[],n=this.x,r=this.yl,o=this.yr,i=this.kl,a=this.kr;"number"==typeof r[0]&&(r=[r],o=[o],i=[i],a=[a]);var s,l,u,c,f,d,p,h,g,v,m,y,x,b,w,_,k,A,M,z,j,E,S,T,N=r.length,C=n.length-1,t=Array(N),O=Math.sqrt;for(s=0;s!==N;++s){for(c=r[s],f=o[s],d=i[s],p=a[s],h=[],l=0;l!==C;l++){for(l>0&&f[l]*c[l]<0&&h.push(n[l]),_=n[l+1]-n[l],k=n[l],m=c[l],y=f[l+1],g=d[l]/_,v=p[l+1]/_,w=e(g-v+3*(m-y))+12*v*m,x=v+3*m+2*g-3*y,b=3*(v+g+2*(m-y)),0>=w?(M=x/b,A=M>n[l]&&M<n[l+1]?[n[l],M,n[l+1]]:[n[l],n[l+1]]):(M=(x-O(w))/b,z=(x+O(w))/b,A=[n[l]],M>n[l]&&M<n[l+1]&&A.push(M),z>n[l]&&z<n[l+1]&&A.push(z),A.push(n[l+1])),E=A[0],M=this._at(E,l),u=0;u<A.length-1;u++)if(S=A[u+1],z=this._at(S,l),0!==M)if(0===z||M*z>0)E=S,M=z;else{for(var q=0;;){if(T=(M*S-z*E)/(M-z),E>=T||T>=S)break;if(j=this._at(T,l),j*z>0)S=T,z=j,-1===q&&(M*=.5),q=-1;else{if(!(j*M>0))break;E=T,M=j,1===q&&(z*=.5),q=1}}h.push(T),E=A[u+1],M=this._at(E,l)}else h.push(E),E=S,M=z;0===z&&h.push(S)}t[s]=h}return"number"==typeof this.yl[0]?t[0]:t},numeric.spline=function(e,t,n,r){var o,i=e.length,a=[],s=[],l=[],u=numeric.sub,c=numeric.mul,f=numeric.add;for(o=i-2;o>=0;o--)s[o]=e[o+1]-e[o],l[o]=u(t[o+1],t[o]);("string"==typeof n||"string"==typeof r)&&(n=r="periodic");var d=[[],[],[]];switch(typeof n){case"undefined":a[0]=c(3/(s[0]*s[0]),l[0]),d[0].push(0,0),d[1].push(0,1),d[2].push(2/s[0],1/s[0]);break;case"string":a[0]=f(c(3/(s[i-2]*s[i-2]),l[i-2]),c(3/(s[0]*s[0]),l[0])),d[0].push(0,0,0),d[1].push(i-2,0,1),d[2].push(1/s[i-2],2/s[i-2]+2/s[0],1/s[0]);break;default:a[0]=n,d[0].push(0),d[1].push(0),d[2].push(1)}for(o=1;i-1>o;o++)a[o]=f(c(3/(s[o-1]*s[o-1]),l[o-1]),c(3/(s[o]*s[o]),l[o])),d[0].push(o,o,o),d[1].push(o-1,o,o+1),d[2].push(1/s[o-1],2/s[o-1]+2/s[o],1/s[o]);switch(typeof r){case"undefined":a[i-1]=c(3/(s[i-2]*s[i-2]),l[i-2]),d[0].push(i-1,i-1),d[1].push(i-2,i-1),d[2].push(1/s[i-2],2/s[i-2]);break;case"string":d[1][d[1].length-1]=0;break;default:a[i-1]=r,d[0].push(i-1),d[1].push(i-1),d[2].push(1)}a="number"!=typeof a[0]?numeric.transpose(a):[a];var p=Array(a.length);if("string"==typeof n)for(o=p.length-1;-1!==o;--o)p[o]=numeric.ccsLUPSolve(numeric.ccsLUP(numeric.ccsScatter(d)),a[o]),p[o][i-1]=p[o][0];else for(o=p.length-1;-1!==o;--o)p[o]=numeric.cLUsolve(numeric.cLU(d),a[o]);return p="number"==typeof t[0]?p[0]:numeric.transpose(p),new numeric.Spline(e,t,t,p,p)},numeric.fftpow2=function f(e,t){var n=e.length;if(1!==n){var r,o,i=Math.cos,a=Math.sin,s=Array(n/2),l=Array(n/2),u=Array(n/2),c=Array(n/2);for(o=n/2,r=n-1;-1!==r;--r)--o,u[o]=e[r],c[o]=t[r],--r,s[o]=e[r],l[o]=t[r];f(s,l),f(u,c),o=n/2;var d,p,h,g=-6.283185307179586/n;for(r=n-1;-1!==r;--r)--o,-1===o&&(o=n/2-1),d=g*r,p=i(d),h=a(d),e[r]=s[o]+p*u[o]-h*c[o],t[r]=l[o]+p*c[o]+h*u[o]}},numeric._ifftpow2=function d(e,t){var n=e.length;if(1!==n){var r,o,i=Math.cos,a=Math.sin,s=Array(n/2),l=Array(n/2),u=Array(n/2),c=Array(n/2);for(o=n/2,r=n-1;-1!==r;--r)--o,u[o]=e[r],c[o]=t[r],--r,s[o]=e[r],l[o]=t[r];d(s,l),d(u,c),o=n/2;var f,p,h,g=6.283185307179586/n;for(r=n-1;-1!==r;--r)--o,-1===o&&(o=n/2-1),f=g*r,p=i(f),h=a(f),e[r]=s[o]+p*u[o]-h*c[o],t[r]=l[o]+p*c[o]+h*u[o]}},numeric.ifftpow2=function(e,t){numeric._ifftpow2(e,t),numeric.diveq(e,e.length),numeric.diveq(t,t.length)},numeric.convpow2=function(e,t,n,r){numeric.fftpow2(e,t),numeric.fftpow2(n,r);var o,i,a,s,l,u=e.length;for(o=u-1;-1!==o;--o)i=e[o],s=t[o],a=n[o],l=r[o],e[o]=i*a-s*l,t[o]=i*l+s*a;numeric.ifftpow2(e,t)},numeric.T.prototype.fft=function(){{var e,t,n=this.x,r=this.y,o=n.length,i=Math.log,a=i(2),s=Math.ceil(i(2*o-1)/a),l=Math.pow(2,s),u=numeric.rep([l],0),c=numeric.rep([l],0),f=Math.cos,d=Math.sin,p=-3.141592653589793/o,h=numeric.rep([l],0),g=numeric.rep([l],0);Math.floor(o/2)}for(e=0;o>e;e++)h[e]=n[e];if("undefined"!=typeof r)for(e=0;o>e;e++)g[e]=r[e];for(u[0]=1,e=1;l/2>=e;e++)t=p*e*e,u[e]=f(t),c[e]=d(t),u[l-e]=f(t),c[l-e]=d(t);var v=new numeric.T(h,g),m=new numeric.T(u,c);return v=v.mul(m),numeric.convpow2(v.x,v.y,numeric.clone(m.x),numeric.neg(m.y)),v=v.mul(m),v.x.length=o,v.y.length=o,v},numeric.T.prototype.ifft=function(){{var e,t,n=this.x,r=this.y,o=n.length,i=Math.log,a=i(2),s=Math.ceil(i(2*o-1)/a),l=Math.pow(2,s),u=numeric.rep([l],0),c=numeric.rep([l],0),f=Math.cos,d=Math.sin,p=3.141592653589793/o,h=numeric.rep([l],0),g=numeric.rep([l],0);Math.floor(o/2)}for(e=0;o>e;e++)h[e]=n[e];if("undefined"!=typeof r)for(e=0;o>e;e++)g[e]=r[e];for(u[0]=1,e=1;l/2>=e;e++)t=p*e*e,u[e]=f(t),c[e]=d(t),u[l-e]=f(t),c[l-e]=d(t);var v=new numeric.T(h,g),m=new numeric.T(u,c);return v=v.mul(m),numeric.convpow2(v.x,v.y,numeric.clone(m.x),numeric.neg(m.y)),v=v.mul(m),v.x.length=o,v.y.length=o,v.div(o)},numeric.gradient=function(e,t){var n=t.length,r=e(t);if(isNaN(r))throw new Error("gradient: f(x) is a NaN!");var o,i,a,s,l,u,c,f,d,p,h=Math.max,g=numeric.clone(t),v=Array(n),h=(numeric.div,numeric.sub,Math.max),m=.001,y=Math.abs,x=Math.min,b=0;for(o=0;n>o;o++)for(var w=h(1e-6*r,1e-8);;){if(++b,b>20)throw new Error("Numerical gradient fails");if(g[o]=t[o]+w,i=e(g),g[o]=t[o]-w,a=e(g),g[o]=t[o],isNaN(i)||isNaN(a))w/=16;else{if(v[o]=(i-a)/(2*w),l=t[o]-w,u=t[o],c=t[o]+w,f=(i-r)/w,d=(r-a)/w,p=h(y(v[o]),y(r),y(i),y(a),y(l),y(u),y(c),1e-8),s=x(h(y(f-v[o]),y(d-v[o]),y(f-d))/p,w/p),!(s>m))break;w/=16}}return v},numeric.uncmin=function(e,t,n,r,o,i,a){var s=numeric.gradient;"undefined"==typeof a&&(a={}),"undefined"==typeof n&&(n=1e-8),"undefined"==typeof r&&(r=function(t){return s(e,t)}),"undefined"==typeof o&&(o=1e3),t=numeric.clone(t);var l,u,c=t.length,f=e(t);if(isNaN(f))throw new Error("uncmin: f(x0) is a NaN!");var d=Math.max,p=numeric.norm2;n=d(n,numeric.epsilon);var h,g,v,m,y,x,b,w,_,k,A=a.Hinv||numeric.identity(c),M=numeric.dot,z=(numeric.inv,numeric.sub),j=numeric.add,E=numeric.tensor,S=numeric.div,T=numeric.mul,N=numeric.all,C=numeric.isFinite,O=numeric.neg,q=0,D="";for(g=r(t);o>q;){if("function"==typeof i&&i(q,t,f,g,A)){D="Callback returned true";break}if(!N(C(g))){D="Gradient has Infinity or NaN";break}if(h=O(M(A,g)),!N(C(h))){D="Search direction has Infinity or NaN";break}if(k=p(h),n>k){D="Newton step smaller than tol";break}for(_=1,u=M(g,h),y=t;o>q&&!(n>_*k)&&(m=T(h,_),y=j(t,m),l=e(y),l-f>=.1*_*u||isNaN(l));)_*=.5,++q;if(n>_*k){D="Line search step size smaller than tol";break}if(q===o){D="maxit reached during line search";break}v=r(y),x=z(v,g),w=M(x,m),b=M(A,x),A=z(j(A,T((w+M(x,b))/(w*w),E(m,m))),S(j(E(b,m),E(m,b)),w)),t=y,f=l,g=v,++q}return{solution:t,f:f,gradient:g,invHessian:A,iterations:q,message:D}},numeric.Dopri=function(e,t,n,r,o,i,a){this.x=e,this.y=t,this.f=n,this.ymid=r,this.iterations=o,this.events=a,this.message=i},numeric.Dopri.prototype._at=function(e,t){function n(e){return e*e}var r,o,i,a,s,l,e,u,c,f,d,p=this,h=p.x,g=p.y,v=p.f,m=p.ymid,y=(h.length,Math.floor,.5),x=numeric.add,b=numeric.mul,w=numeric.sub;return r=h[t],o=h[t+1],a=g[t],s=g[t+1],u=o-r,i=r+y*u,l=m[t],c=w(v[t],b(a,1/(r-i)+2/(r-o))),f=w(v[t+1],b(s,1/(o-i)+2/(o-r))),d=[n(e-o)*(e-i)/n(r-o)/(r-i),n(e-r)*n(e-o)/n(r-i)/n(o-i),n(e-r)*(e-i)/n(o-r)/(o-i),(e-r)*n(e-o)*(e-i)/n(r-o)/(r-i),(e-o)*n(e-r)*(e-i)/n(r-o)/(o-i)],x(x(x(x(b(a,d[0]),b(l,d[1])),b(s,d[2])),b(c,d[3])),b(f,d[4]))},numeric.Dopri.prototype.at=function(e){var t,n,r,o=Math.floor;if("number"!=typeof e){var i=e.length,a=Array(i);for(t=i-1;-1!==t;--t)a[t]=this.at(e[t]);return a}var s=this.x;for(t=0,n=s.length-1;n-t>1;)r=o(.5*(t+n)),s[r]<=e?t=r:n=r;return this._at(e,t)},numeric.dopri=function(e,t,n,r,o,i,a){"undefined"==typeof o&&(o=1e-6),"undefined"==typeof i&&(i=1e3);var s,l,u,c,f,d,p,h,g,v,m,y,x,b=[e],w=[n],_=[r(e,n)],k=[],A=.2,M=[.075,.225],z=[44/45,-56/15,32/9],j=[19372/6561,-25360/2187,64448/6561,-212/729],E=[9017/3168,-355/33,46732/5247,49/176,-5103/18656],S=[35/384,0,500/1113,125/192,-2187/6784,11/84],T=[.10013431883002395,0,.3918321794184259,-0.02982460176594817,.05893268337240795,-0.04497888809104361,.023904308236133973],N=[.2,.3,.8,8/9,1,1],C=[-71/57600,0,71/16695,-71/1920,17253/339200,-22/525,.025],O=0,q=(t-e)/10,D=0,F=numeric.add,L=numeric.mul,P=(Math.max,Math.min),R=Math.abs,I=numeric.norminf,B=Math.pow,U=numeric.any,V=numeric.lt,H=numeric.and,Y=(numeric.sub,new numeric.Dopri(b,w,_,k,-1,""));for("function"==typeof a&&(m=a(e,n));t>e&&i>D;)if(++D,e+q>t&&(q=t-e),s=r(e+N[0]*q,F(n,L(A*q,_[O]))),l=r(e+N[1]*q,F(F(n,L(M[0]*q,_[O])),L(M[1]*q,s))),u=r(e+N[2]*q,F(F(F(n,L(z[0]*q,_[O])),L(z[1]*q,s)),L(z[2]*q,l))),c=r(e+N[3]*q,F(F(F(F(n,L(j[0]*q,_[O])),L(j[1]*q,s)),L(j[2]*q,l)),L(j[3]*q,u))),f=r(e+N[4]*q,F(F(F(F(F(n,L(E[0]*q,_[O])),L(E[1]*q,s)),L(E[2]*q,l)),L(E[3]*q,u)),L(E[4]*q,c))),g=F(F(F(F(F(n,L(_[O],q*S[0])),L(l,q*S[2])),L(u,q*S[3])),L(c,q*S[4])),L(f,q*S[5])),d=r(e+q,g),p=F(F(F(F(F(L(_[O],q*C[0]),L(l,q*C[2])),L(u,q*C[3])),L(c,q*C[4])),L(f,q*C[5])),L(d,q*C[6])),v="number"==typeof p?R(p):I(p),v>o){if(q=.2*q*B(o/v,.25),e+q===e){Y.msg="Step size became too small";break}}else{if(k[O]=F(F(F(F(F(F(n,L(_[O],q*T[0])),L(l,q*T[2])),L(u,q*T[3])),L(c,q*T[4])),L(f,q*T[5])),L(d,q*T[6])),++O,b[O]=e+q,w[O]=g,_[O]=d,"function"==typeof a){var $,W,X=e,Z=e+.5*q;if(y=a(Z,k[O-1]),x=H(V(m,0),V(0,y)),U(x)||(X=Z,Z=e+q,m=y,y=a(Z,g),x=H(V(m,0),V(0,y))),U(x)){for(var G,J,Q=0,K=1,ee=1;;){if("number"==typeof m)W=(ee*y*X-K*m*Z)/(ee*y-K*m);else for(W=Z,h=m.length-1;-1!==h;--h)m[h]<0&&y[h]>0&&(W=P(W,(ee*y[h]*X-K*m[h]*Z)/(ee*y[h]-K*m[h])));if(X>=W||W>=Z)break;$=Y._at(W,O-1),J=a(W,$),G=H(V(m,0),V(0,J)),U(G)?(Z=W,y=J,x=G,ee=1,-1===Q?K*=.5:K=1,Q=-1):(X=W,m=J,K=1,1===Q?ee*=.5:ee=1,Q=1)}return g=Y._at(.5*(e+W),O-1),Y.f[O]=r(W,$),Y.x[O]=W,Y.y[O]=$,Y.ymid[O-1]=g,Y.events=x,Y.iterations=D,Y}}e+=q,n=g,m=y,q=P(.8*q*B(o/v,.25),4*q)}return Y.iterations=D,Y},numeric.LU=function(e,t){t=t||!1;var n,r,o,i,a,s,l,u,c,f=Math.abs,d=e.length,p=d-1,h=new Array(d);for(t||(e=numeric.clone(e)),o=0;d>o;++o){for(l=o,s=e[o],c=f(s[o]),r=o+1;d>r;++r)i=f(e[r][o]),i>c&&(c=i,l=r);for(h[o]=l,l!=o&&(e[o]=e[l],e[l]=s,s=e[o]),a=s[o],n=o+1;d>n;++n)e[n][o]/=a;for(n=o+1;d>n;++n){for(u=e[n],r=o+1;p>r;++r)u[r]-=u[o]*s[r],++r,u[r]-=u[o]*s[r];r===p&&(u[r]-=u[o]*s[r])}}return{LU:e,P:h}},numeric.LUsolve=function(e,t){var n,r,o,i,a,s=e.LU,l=s.length,u=numeric.clone(t),c=e.P;for(n=l-1;-1!==n;--n)u[n]=t[n];for(n=0;l>n;++n)for(o=c[n],c[n]!==n&&(a=u[n],u[n]=u[o],u[o]=a),i=s[n],r=0;n>r;++r)u[n]-=u[r]*i[r];for(n=l-1;n>=0;--n){for(i=s[n],r=n+1;l>r;++r)u[n]-=u[r]*i[r];u[n]/=i[n]}return u},numeric.solve=function(e,t,n){return numeric.LUsolve(numeric.LU(e,n),t)},numeric.echelonize=function(e){var t,n,r,o,i,a,s,l,u=numeric.dim(e),c=u[0],f=u[1],d=numeric.identity(c),p=Array(c),h=Math.abs,g=numeric.diveq;for(e=numeric.clone(e),t=0;c>t;++t){for(r=0,i=e[t],a=d[t],n=1;f>n;++n)h(i[r])<h(i[n])&&(r=n);for(p[t]=r,g(a,i[r]),g(i,i[r]),n=0;c>n;++n)if(n!==t){for(s=e[n],l=s[r],o=f-1;-1!==o;--o)s[o]-=i[o]*l;for(s=d[n],o=c-1;-1!==o;--o)s[o]-=a[o]*l}}return{I:d,A:e,P:p}},numeric.__solveLP=function(e,t,n,r,o,i,a){var s,l,u,c,f=numeric.sum,d=(numeric.log,numeric.mul),p=numeric.sub,h=numeric.dot,g=numeric.div,v=numeric.add,m=e.length,y=n.length,x=!1,b=0,w=1,_=(numeric.transpose(t),numeric.svd,numeric.transpose),k=(numeric.leq,Math.sqrt),A=Math.abs,M=(numeric.muleq,numeric.norminf,numeric.any,Math.min),z=numeric.all,j=numeric.gt,E=Array(m),S=Array(y),T=(numeric.rep([y],1),numeric.solve),N=p(n,h(t,i)),C=h(e,e);for(u=b;o>u;++u){var O,q;for(O=y-1;-1!==O;--O)S[O]=g(t[O],N[O]);

var D=_(S);for(O=m-1;-1!==O;--O)E[O]=f(D[O]);w=.25*A(C/h(e,E));var F=100*k(C/h(E,E));for((!isFinite(w)||w>F)&&(w=F),c=v(e,d(w,E)),l=h(D,S),O=m-1;-1!==O;--O)l[O][O]+=1;q=T(l,g(c,w),!0);var L=g(N,h(t,q)),P=1;for(O=y-1;-1!==O;--O)L[O]<0&&(P=M(P,-.999*L[O]));if(s=p(i,d(q,P)),N=p(n,h(t,s)),!z(j(N,0)))return{solution:i,message:"",iterations:u};if(i=s,r>w)return{solution:s,message:"",iterations:u};if(a){var R=h(e,c),I=h(t,c);for(x=!0,O=y-1;-1!==O;--O)if(R*I[O]<0){x=!1;break}}else x=i[m-1]>=0?!1:!0;if(x)return{solution:s,message:"Unbounded",iterations:u}}return{solution:i,message:"maximum iteration count exceeded",iterations:u}},numeric._solveLP=function(e,t,n,r,o){var i,a=e.length,s=n.length,l=(numeric.sum,numeric.log,numeric.mul,numeric.sub),u=numeric.dot,c=(numeric.div,numeric.add,numeric.rep([a],0).concat([1])),f=numeric.rep([s,1],-1),d=numeric.blockMatrix([[t,f]]),p=n,i=numeric.rep([a],0).concat(Math.max(0,numeric.sup(numeric.neg(n)))+1),h=numeric.__solveLP(c,d,p,r,o,i,!1),g=numeric.clone(h.solution);g.length=a;var v=numeric.inf(l(n,u(t,g)));if(0>v)return{solution:0/0,message:"Infeasible",iterations:h.iterations};var m=numeric.__solveLP(e,t,n,r,o-h.iterations,g,!0);return m.iterations+=h.iterations,m},numeric.solveLP=function(e,t,n,r,o,i,a){if("undefined"==typeof a&&(a=1e3),"undefined"==typeof i&&(i=numeric.epsilon),"undefined"==typeof r)return numeric._solveLP(e,t,n,i,a);var s,l=r.length,u=r[0].length,c=t.length,f=numeric.echelonize(r),d=numeric.rep([u],0),p=f.P,h=[];for(s=p.length-1;-1!==s;--s)d[p[s]]=1;for(s=u-1;-1!==s;--s)0===d[s]&&h.push(s);var g=numeric.getRange,v=numeric.linspace(0,l-1),m=numeric.linspace(0,c-1),y=g(r,v,h),x=g(t,m,p),b=g(t,m,h),w=numeric.dot,_=numeric.sub,k=w(x,f.I),A=_(b,w(k,y)),M=_(n,w(k,o)),z=Array(p.length),j=Array(h.length);for(s=p.length-1;-1!==s;--s)z[s]=e[p[s]];for(s=h.length-1;-1!==s;--s)j[s]=e[h[s]];var E=_(j,w(z,w(f.I,y))),S=numeric._solveLP(E,A,M,i,a),T=S.solution;if(T!==T)return S;var N=w(f.I,_(o,w(y,T))),C=Array(e.length);for(s=p.length-1;-1!==s;--s)C[p[s]]=N[s];for(s=h.length-1;-1!==s;--s)C[h[s]]=T[s];return{solution:C,message:S.message,iterations:S.iterations}},numeric.MPStoLP=function(e){function t(t){throw new Error("MPStoLP: "+t+"\nLine "+n+": "+e[n]+"\nCurrent state: "+s[a]+"\n")}e instanceof String&&e.split("\n");var n,r,o,i,a=0,s=["Initial state","NAME","ROWS","COLUMNS","RHS","BOUNDS","ENDATA"],l=e.length,u=0,c={},f=[],d=0,p={},h=0,g=[],v=[],m=[];for(n=0;l>n;++n){o=e[n];var y=o.match(/\S*/g),x=[];for(r=0;r<y.length;++r)""!==y[r]&&x.push(y[r]);if(0!==x.length){for(r=0;r<s.length&&o.substr(0,s[r].length)!==s[r];++r);if(r<s.length){if(a=r,1===r&&(i=x[1]),6===r)return{name:i,c:g,A:numeric.transpose(v),b:m,rows:c,vars:p}}else switch(a){case 0:case 1:t("Unexpected line");case 2:switch(x[0]){case"N":0===u?u=x[1]:t("Two or more N rows");break;case"L":c[x[1]]=d,f[d]=1,m[d]=0,++d;break;case"G":c[x[1]]=d,f[d]=-1,m[d]=0,++d;break;case"E":c[x[1]]=d,f[d]=0,m[d]=0,++d;break;default:t("Parse error "+numeric.prettyPrint(x))}break;case 3:p.hasOwnProperty(x[0])||(p[x[0]]=h,g[h]=0,v[h]=numeric.rep([d],0),++h);var b=p[x[0]];for(r=1;r<x.length;r+=2)if(x[r]!==u){var w=c[x[r]];v[b][w]=(f[w]<0?-1:1)*parseFloat(x[r+1])}else g[b]=parseFloat(x[r+1]);break;case 4:for(r=1;r<x.length;r+=2)m[c[x[r]]]=(f[c[x[r]]]<0?-1:1)*parseFloat(x[r+1]);break;case 5:break;case 6:t("Internal error")}}}t("Reached end of file without ENDATA")},numeric.seedrandom={pow:Math.pow,random:Math.random},function(e,t,n,r,o,i,a){function s(e){var t,r,o=this,i=e.length,a=0,s=o.i=o.j=o.m=0;for(o.S=[],o.c=[],i||(e=[i++]);n>a;)o.S[a]=a++;for(a=0;n>a;a++)t=o.S[a],s=c(s+t+e[a%i]),r=o.S[s],o.S[a]=r,o.S[s]=t;o.g=function(e){var t=o.S,r=c(o.i+1),i=t[r],a=c(o.j+i),s=t[a];t[r]=s,t[a]=i;for(var l=t[c(i+s)];--e;)r=c(r+1),i=t[r],a=c(a+i),s=t[a],t[r]=s,t[a]=i,l=l*n+t[c(i+s)];return o.i=r,o.j=a,l},o.g(n)}function l(e,t,n,r,o){if(n=[],o=typeof e,t&&"object"==o)for(r in e)if(r.indexOf("S")<5)try{n.push(l(e[r],t-1))}catch(i){}return n.length?n:e+("string"!=o?"\x00":"")}function u(e,t,n,r){for(e+="",n=0,r=0;r<e.length;r++)t[c(r)]=c((n^=19*t[c(r)])+e.charCodeAt(r));e="";for(r in t)e+=String.fromCharCode(t[r]);return e}function c(e){return e&n-1}t.seedrandom=function(c,f){var d,p=[];return c=u(l(f?[c,e]:arguments.length?c:[(new Date).getTime(),e,window],3),p),d=new s(p),u(d.S,e),t.random=function(){for(var e=d.g(r),t=a,s=0;o>e;)e=(e+s)*n,t*=n,s=d.g(1);for(;e>=i;)e/=2,t/=2,s>>>=1;return(e+s)/t},c},a=t.pow(n,r),o=t.pow(2,o),i=2*o,u(t.random(),e)}([],numeric.seedrandom,256,6,52),function(e){function t(e){if("object"!=typeof e)return e;var n,r=[],o=e.length;for(n=0;o>n;n++)r[n+1]=t(e[n]);return r}function n(e){if("object"!=typeof e)return e;var t,r=[],o=e.length;for(t=1;o>t;t++)r[t-1]=n(e[t]);return r}function r(e,t,n){var r,o,i,a,s;for(i=1;n>=i;i+=1){for(e[i][i]=1/e[i][i],s=-e[i][i],r=1;i>r;r+=1)e[r][i]=s*e[r][i];if(a=i+1,a>n)break;for(o=a;n>=o;o+=1)for(s=e[i][o],e[i][o]=0,r=1;i>=r;r+=1)e[r][o]=e[r][o]+s*e[r][i]}}function o(e,t,n,r){var o,i,a,s;for(i=1;n>=i;i+=1){for(s=0,o=1;i>o;o+=1)s+=e[o][i]*r[o];r[i]=(r[i]-s)/e[i][i]}for(a=1;n>=a;a+=1)for(i=n+1-a,r[i]=r[i]/e[i][i],s=-r[i],o=1;i>o;o+=1)r[o]=r[o]+s*e[o][i]}function i(e,t,n,r){var o,i,a,s,l,u;for(i=1;n>=i;i+=1){if(r[1]=i,u=0,a=i-1,1>a){if(u=e[i][i]-u,0>=u)break;e[i][i]=Math.sqrt(u)}else{for(s=1;a>=s;s+=1){for(l=e[s][i],o=1;s>o;o+=1)l-=e[o][i]*e[o][s];l/=e[s][s],e[s][i]=l,u+=l*l}if(u=e[i][i]-u,0>=u)break;e[i][i]=Math.sqrt(u)}r[1]=0}}function a(e,t,n,a,s,l,u,c,f,d,p,h,g,v,m,y){function x(){for(v[1]=v[1]+1,z=O,A=1;d>=A;A+=1){for(z+=1,R=-c[A],M=1;a>=M;M+=1)R+=u[M][A]*s[M];if(Math.abs(R)<W&&(R=0),A>p)m[z]=R;else if(m[z]=-Math.abs(R),R>0){for(M=1;a>=M;M+=1)u[M][A]=-u[M][A];c[A]=-c[A]}}for(A=1;g>=A;A+=1)m[O+h[A]]=0;for(D=0,P=0,A=1;d>=A;A+=1)m[O+A]<P*m[L+A]&&(D=A,P=m[O+A]/m[L+A]);return 0===D?999:0}function b(){for(A=1;a>=A;A+=1){for(R=0,M=1;a>=M;M+=1)R+=e[M][A]*u[M][D];m[A]=R}for(j=T,A=1;a>=A;A+=1)m[j+A]=0;for(M=g+1;a>=M;M+=1)for(A=1;a>=A;A+=1)m[j+A]=m[j+A]+e[A][M]*m[M];for(Y=!0,A=g;A>=1;A-=1){for(R=m[A],z=C+A*(A+3)/2,j=z-A,M=A+1;g>=M;M+=1)R-=m[z]*m[N+M],z+=M;if(R/=m[j],m[N+A]=R,h[A]<p)break;if(0>R)break;Y=!1,S=A}if(!Y)for(I=m[q+S]/m[N+S],A=1;g>=A&&!(h[A]<p)&&!(m[N+A]<0);A+=1)P=m[q+A]/m[N+A],I>P&&(I=P,S=A);for(R=0,A=T+1;T+a>=A;A+=1)R+=m[A]*m[A];if(Math.abs(R)<=W){if(Y)return y[1]=1,999;for(A=1;g>=A;A+=1)m[q+A]=m[q+A]-I*m[N+A];return m[q+g+1]=m[q+g+1]+I,700}for(R=0,A=1;a>=A;A+=1)R+=m[T+A]*u[A][D];for(B=-m[O+D]/R,$=!0,Y||B>I&&(B=I,$=!1),A=1;a>=A;A+=1)s[A]=s[A]+B*m[T+A],Math.abs(s[A])<W&&(s[A]=0);for(l[1]=l[1]+B*R*(B/2+m[q+g+1]),A=1;g>=A;A+=1)m[q+A]=m[q+A]-B*m[N+A];if(m[q+g+1]=m[q+g+1]+B,!$){for(R=-c[D],M=1;a>=M;M+=1)R+=s[M]*u[M][D];if(D>p)m[O+D]=R;else if(m[O+D]=-Math.abs(R),R>0){for(M=1;a>=M;M+=1)u[M][D]=-u[M][D];c[D]=-c[D]}return 700}for(g+=1,h[g]=D,z=C+(g-1)*g/2+1,A=1;g-1>=A;A+=1)m[z]=m[A],z+=1;if(g===a)m[z]=m[a];else{for(A=a;A>=g+1&&0!==m[A]&&(U=Math.max(Math.abs(m[A-1]),Math.abs(m[A])),V=Math.min(Math.abs(m[A-1]),Math.abs(m[A])),P=m[A-1]>=0?Math.abs(U*Math.sqrt(1+V*V/(U*U))):-Math.abs(U*Math.sqrt(1+V*V/(U*U))),U=m[A-1]/P,V=m[A]/P,1!==U);A-=1)if(0===U)for(m[A-1]=V*P,M=1;a>=M;M+=1)P=e[M][A-1],e[M][A-1]=e[M][A],e[M][A]=P;else for(m[A-1]=P,H=V/(1+U),M=1;a>=M;M+=1)P=U*e[M][A-1]+V*e[M][A],e[M][A]=H*(e[M][A-1]+P)-e[M][A],e[M][A-1]=P;m[z]=m[g]}return 0}function w(){if(z=C+S*(S+1)/2+1,j=z+S,0===m[j])return 798;if(U=Math.max(Math.abs(m[j-1]),Math.abs(m[j])),V=Math.min(Math.abs(m[j-1]),Math.abs(m[j])),P=m[j-1]>=0?Math.abs(U*Math.sqrt(1+V*V/(U*U))):-Math.abs(U*Math.sqrt(1+V*V/(U*U))),U=m[j-1]/P,V=m[j]/P,1===U)return 798;if(0===U){for(A=S+1;g>=A;A+=1)P=m[j-1],m[j-1]=m[j],m[j]=P,j+=A;for(A=1;a>=A;A+=1)P=e[A][S],e[A][S]=e[A][S+1],e[A][S+1]=P}else{for(H=V/(1+U),A=S+1;g>=A;A+=1)P=U*m[j-1]+V*m[j],m[j]=H*(m[j-1]+P)-m[j],m[j-1]=P,j+=A;for(A=1;a>=A;A+=1)P=U*e[A][S]+V*e[A][S+1],e[A][S+1]=H*(e[A][S]+P)-e[A][S+1],e[A][S]=P}return 0}function _(){for(j=z-S,A=1;S>=A;A+=1)m[j]=m[z],z+=1,j+=1;return m[q+S]=m[q+S+1],h[S]=h[S+1],S+=1,g>S?797:0}function k(){return m[q+g]=m[q+g+1],m[q+g+1]=0,h[g]=0,g-=1,v[2]=v[2]+1,0}var A,M,z,j,E,S,T,N,C,O,q,D,F,L,P,R,I,B,U,V,H,Y,$,W,X,Z,G;F=Math.min(a,d),z=2*a+F*(F+5)/2+2*d+1,W=1e-60;do W+=W,X=1+.1*W,Z=1+.2*W;while(1>=X||1>=Z);for(A=1;a>=A;A+=1)m[A]=t[A];for(A=a+1;z>=A;A+=1)m[A]=0;for(A=1;d>=A;A+=1)h[A]=0;if(E=[],0===y[1]){if(i(e,n,a,E),0!==E[1])return void(y[1]=2);o(e,n,a,t),r(e,n,a)}else{for(M=1;a>=M;M+=1)for(s[M]=0,A=1;M>=A;A+=1)s[M]=s[M]+e[A][M]*t[A];for(M=1;a>=M;M+=1)for(t[M]=0,A=M;a>=A;A+=1)t[M]=t[M]+e[M][A]*s[A]}for(l[1]=0,M=1;a>=M;M+=1)for(s[M]=t[M],l[1]=l[1]+m[M]*s[M],m[M]=0,A=M+1;a>=A;A+=1)e[A][M]=0;for(l[1]=-l[1]/2,y[1]=0,T=a,N=T+a,q=N+F,C=q+F+1,O=C+F*(F+1)/2,L=O+d,A=1;d>=A;A+=1){for(R=0,M=1;a>=M;M+=1)R+=u[M][A]*u[M][A];m[L+A]=Math.sqrt(R)}for(g=0,v[1]=0,v[2]=0,G=0;;){if(G=x(),999===G)return;for(;;){if(G=b(),0===G)break;if(999===G)return;if(700===G)if(S===g)k();else{for(;;)if(w(),G=_(),797!==G)break;k()}}}}function s(e,r,o,i,s,l){e=t(e),r=t(r),o=t(o);var u,c,f,d,p,h,g=[],v=[],m=[],y=[],x=[];if(s=s||0,l=l?t(l):[void 0,0],i=i?t(i):[],c=e.length-1,f=o[1].length-1,!i)for(u=1;f>=u;u+=1)i[u]=0;for(u=1;f>=u;u+=1)v[u]=0;for(d=0,p=Math.min(c,f),u=1;c>=u;u+=1)m[u]=0;for(g[1]=0,u=1;2*c+p*(p+5)/2+2*f+1>=u;u+=1)y[u]=0;for(u=1;2>=u;u+=1)x[u]=0;return a(e,r,c,c,m,g,o,i,c,f,s,v,d,x,y,l),h="",1===l[1]&&(h="constraints are inconsistent, no solution!"),2===l[1]&&(h="matrix D in quadratic function is not positive definite!"),{solution:n(m),value:n(g),unconstrained_solution:n(r),iterations:n(x),iact:n(v),message:h}}e.solveQP=s}(numeric),numeric.svd=function(e){function t(e,t){return e=Math.abs(e),t=Math.abs(t),e>t?e*Math.sqrt(1+t*t/e/e):0==t?e:t*Math.sqrt(1+e*e/t/t)}var n,r=numeric.epsilon,o=1e-64/r,i=50,a=0,s=0,l=0,u=0,c=0,f=numeric.clone(e),d=f.length,p=f[0].length;if(p>d)throw"Need more rows than columns";var h=new Array(p),g=new Array(p);for(s=0;p>s;s++)h[s]=g[s]=0;var v=numeric.rep([p,p],0),m=0,y=0,x=0,b=0,w=0,_=0,k=0;for(s=0;p>s;s++){for(h[s]=y,k=0,c=s+1,l=s;d>l;l++)k+=f[l][s]*f[l][s];if(o>=k)y=0;else for(m=f[s][s],y=Math.sqrt(k),m>=0&&(y=-y),x=m*y-k,f[s][s]=m-y,l=c;p>l;l++){for(k=0,u=s;d>u;u++)k+=f[u][s]*f[u][l];for(m=k/x,u=s;d>u;u++)f[u][l]+=m*f[u][s]}for(g[s]=y,k=0,l=c;p>l;l++)k+=f[s][l]*f[s][l];if(o>=k)y=0;else{for(m=f[s][s+1],y=Math.sqrt(k),m>=0&&(y=-y),x=m*y-k,f[s][s+1]=m-y,l=c;p>l;l++)h[l]=f[s][l]/x;for(l=c;d>l;l++){for(k=0,u=c;p>u;u++)k+=f[l][u]*f[s][u];for(u=c;p>u;u++)f[l][u]+=k*h[u]}}w=Math.abs(g[s])+Math.abs(h[s]),w>b&&(b=w)}for(s=p-1;-1!=s;s+=-1){if(0!=y){for(x=y*f[s][s+1],l=c;p>l;l++)v[l][s]=f[s][l]/x;for(l=c;p>l;l++){for(k=0,u=c;p>u;u++)k+=f[s][u]*v[u][l];for(u=c;p>u;u++)v[u][l]+=k*v[u][s]}}for(l=c;p>l;l++)v[s][l]=0,v[l][s]=0;v[s][s]=1,y=h[s],c=s}for(s=p-1;-1!=s;s+=-1){for(c=s+1,y=g[s],l=c;p>l;l++)f[s][l]=0;if(0!=y){for(x=f[s][s]*y,l=c;p>l;l++){for(k=0,u=c;d>u;u++)k+=f[u][s]*f[u][l];for(m=k/x,u=s;d>u;u++)f[u][l]+=m*f[u][s]}for(l=s;d>l;l++)f[l][s]=f[l][s]/y}else for(l=s;d>l;l++)f[l][s]=0;f[s][s]+=1}for(r*=b,u=p-1;-1!=u;u+=-1)for(var A=0;i>A;A++){var M=!1;for(c=u;-1!=c;c+=-1){if(Math.abs(h[c])<=r){M=!0;break}if(Math.abs(g[c-1])<=r)break}if(!M){a=0,k=1;var z=c-1;for(s=c;u+1>s&&(m=k*h[s],h[s]=a*h[s],!(Math.abs(m)<=r));s++)for(y=g[s],x=t(m,y),g[s]=x,a=y/x,k=-m/x,l=0;d>l;l++)w=f[l][z],_=f[l][s],f[l][z]=w*a+_*k,f[l][s]=-w*k+_*a}if(_=g[u],c==u){if(0>_)for(g[u]=-_,l=0;p>l;l++)v[l][u]=-v[l][u];break}if(A>=i-1)throw"Error: no convergence.";for(b=g[c],w=g[u-1],y=h[u-1],x=h[u],m=((w-_)*(w+_)+(y-x)*(y+x))/(2*x*w),y=t(m,1),m=0>m?((b-_)*(b+_)+x*(w/(m-y)-x))/b:((b-_)*(b+_)+x*(w/(m+y)-x))/b,a=1,k=1,s=c+1;u+1>s;s++){for(y=h[s],w=g[s],x=k*y,y=a*y,_=t(m,x),h[s-1]=_,a=m/_,k=x/_,m=b*a+y*k,y=-b*k+y*a,x=w*k,w*=a,l=0;p>l;l++)b=v[l][s-1],_=v[l][s],v[l][s-1]=b*a+_*k,v[l][s]=-b*k+_*a;for(_=t(m,x),g[s-1]=_,a=m/_,k=x/_,m=a*y+k*w,b=-k*y+a*w,l=0;d>l;l++)w=f[l][s-1],_=f[l][s],f[l][s-1]=w*a+_*k,f[l][s]=-w*k+_*a}h[c]=0,h[u]=m,g[u]=b}for(s=0;s<g.length;s++)g[s]<r&&(g[s]=0);for(s=0;p>s;s++)for(l=s-1;l>=0;l--)if(g[l]<g[s]){for(a=g[l],g[l]=g[s],g[s]=a,u=0;u<f.length;u++)n=f[u][s],f[u][s]=f[u][l],f[u][l]=n;for(u=0;u<v.length;u++)n=v[u][s],v[u][s]=v[u][l],v[u][l]=n;s=l}return{U:f,S:g,V:v}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(e,t,n){!function(){"use strict";function e(e,t){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r}function n(e,t,n){var r=t.x,o=t.y,i=n.x-r,a=n.y-o;if(0!==i||0!==a){var s=((e.x-r)*i+(e.y-o)*a)/(i*i+a*a);s>1?(r=n.x,o=n.y):s>0&&(r+=i*s,o+=a*s)}return i=e.x-r,a=e.y-o,i*i+a*a}function r(t,n){for(var r,o=t[0],i=[o],a=1,s=t.length;s>a;a++)r=t[a],e(r,o)>n&&(i.push(r),o=r);return o!==r&&i.push(r),i}function o(e,t){var r,o,i,a,s=e.length,l="undefined"!=typeof Uint8Array?Uint8Array:Array,u=new l(s),c=0,f=s-1,d=[],p=[];for(u[c]=u[f]=1;f;){for(o=0,r=c+1;f>r;r++)i=n(e[r],e[c],e[f]),i>o&&(a=r,o=i);o>t&&(u[a]=1,d.push(c,a,a,f)),f=d.pop(),c=d.pop()}for(r=0;s>r;r++)u[r]&&p.push(e[r]);return p}function i(e,t,n){var i=void 0!==t?t*t:1;return e=n?e:r(e,i),e=o(e,i)}"function"==typeof define&&define.amd?define(function(){return i}):"undefined"!=typeof t?t.exports=i:"undefined"!=typeof self?self.simplify=i:window.simplify=i}()},{}],10:[function(e,t,n){"use strict";function r(e,t,n,r){this.points=e,this.ids=t,this.dimension=r,this.length=n}function o(e){var t,n,o;if(Array.isArray(e)){if(t=e.length,0===t)return new r(null,null,0,0);n=e[0].length,o=a(f.mallocDouble(t*(n+1)),[t,n+1]),l(e,o.hi(t,n))}else{t=e.shape[0],n=e.shape[1];var i=e.dtype;i="int8"===i||"int16"===i||"int32"===i?"int32":"uint8"===i||"uint8_clamped"===i||"buffer"===i||"uint16"===i||"uint32"===i?"uint32":"float32"===i?"float32":"float64",o=a(f.malloc(t*(n+1)),[t,n+1]),u.assign(o.hi(t,n),e)}for(var h=0;t>h;++h)o.set(h,n,h);for(var g=c.malloc([t,n],e.dtype),v=f.mallocInt32(t),m=0,y=g.data,x=o.data,b=(p.log2(p.nextPow2(t)),s.compile(o.order,!0,o.dtype)),w=[o];t>m;){var _=w.shift(),k=_,A=0|k.shape[0];if(A>1){var M,z=p.log2(m+1)%n,j=d.root(A);M=b(k,j,function(e,t){return e.get(z)-t.get(z)});for(var E=g.index(m,0),S=M.offset,h=0;n>h;++h)y[E++]=x[S++];v[m]=x[S],m+=1,w.push(k.hi(j)),A>2&&w.push(k.lo(j+1))}else{for(var S=k.offset,E=g.index(m,0),h=0;n>h;++h)y[E+h]=x[S++];v[m]=x[S],m+=1}}return f.free(o.data),new r(g,v,t,n)}function i(e){var t=e.p,n=e.i;if(t){for(var o=t.length,i=f.mallocFloat64(o),s=0;o>s;++s)i[s]=t[s];for(var l=n.length,u=f.mallocInt32(l),s=0;l>s;++s)u[s]=n[s];var c=o/l|0;return new r(a(i,[l,c]),u,l,c)}return new r(null,null,0,e.d)}t.exports=o,t.exports.deserialize=i;var a=e("ndarray"),s=e("ndarray-select"),l=e("ndarray-pack"),u=e("ndarray-ops"),c=e("ndarray-scratch"),f=e("typedarray-pool"),d=e("inorder-tree-layout"),p=e("bit-twiddle"),h=e("./lib/heap.js"),g=r.prototype;g.serialize=function(){return this.length>0?{p:Array.prototype.slice.call(this.points.data,0,this.length*this.dimension),i:Array.prototype.slice.call(this.ids,0,this.length)}:{d:this.dimension}},g.range=function(e,t,n){var r=this.length;if(!(1>r)){for(var o=this.dimension,i=0;o>i;++i)if(t[i]<e[i])return;var a,s=this.points,u=this.ids,d=c.malloc([r,2,o]),h=f.mallocInt32(r),g=d.data,v=s.data,m=1,y=0;for(h[0]=0,l(e,d.pick(0,0)),l(t,d.pick(0,1));m>y;){for(var x=h[y],b=p.log2(x+1)%o,w=d.index(y,0,0),_=d.index(y,1,0),k=s.index(x,0),A=!0,i=0;o>i;++i){var M=v[k+i];if(M<g[w+i]||g[_+i]<M){A=!1;break}}if(A&&(a=n(u[x]),void 0!==a))break;var z=v[k+b],j=g[_+b],E=g[w+b];if(z>=E){var S=2*x+1;if(r>S){h[m]=S;for(var T=d.index(m,0,0),i=0;o>i;++i)g[T+i]=g[w+i];for(var N=d.index(m,1,0),i=0;o>i;++i)g[N+i]=g[_+i];g[N+b]=Math.min(j,z),m+=1}}if(j>=z){var C=2*(x+1);if(r>C){h[m]=C;for(var T=d.index(m,0,0),i=0;o>i;++i)g[T+i]=g[w+i];for(var N=d.index(m,1,0),i=0;o>i;++i)g[N+i]=g[_+i];g[T+b]=Math.max(E,z),m+=1}}y+=1}return c.free(d),f.free(h),a}},g.rnn=function(e,t,n){if(!(0>t)){var r=this.length;if(!(1>r)){var o,i=this.dimension,a=this.points,s=this.ids,l=c.malloc([r,i]),u=f.mallocInt32(r),d=l.data,h=a.data,g=1,v=0,m=t*t;u[0]=0;for(var y=0;i>y;++y)l.set(0,y,0);for(;g>v;){for(var x=u[v],b=a.index(x,0),w=0,y=0;i>y;++y)w+=Math.pow(e[y]-h[b+y],2);if(m>=w&&(o=n(s[x]),void 0!==o))break;for(var _=p.log2(x+1)%i,k=0,A=l.index(v,0),y=0;i>y;++y)y!==_&&(k+=d[A+y]);var M=e[_],z=h[b+_],j=d[A+_],E=j,S=j;z>M?S=Math.max(j,Math.pow(z-M,2)):E=Math.max(j,Math.pow(z-M,2));var T=E+k,N=S+k;if(m>=T){var C=2*x+1;if(r>C){u[g]=C;for(var O=l.index(g,0),y=0;i>y;++y)d[O+y]=d[A+y];d[O+_]=E,g+=1}}if(m>=N){var q=2*(x+1);if(r>q){u[g]=q;for(var O=l.index(g,0),y=0;i>y;++y)d[O+y]=d[A+y];d[O+_]=S,g+=1}}v+=1}return c.free(l),f.free(u),o}}},g.nn=function(e,t){var n=this.length;if(1>n)return-1;if("number"==typeof t){if(0>t)return-1}else t=1/0;var r=this.dimension,o=this.points,i=o.data,a=f.mallocFloat64(r),s=new h(n,r+1),l=s.index,u=s.data;l[0]=0;for(var c=0;r>=c;++c)u[c]=0;s.count+=1;for(var d=-1,g=t;s.count>0&&!(u[0]>=g);){for(var v=l[0],m=o.index(v,0),y=0,c=0;r>c;++c)y+=Math.pow(e[c]-i[m+c],2);g>y&&(g=y,d=v);for(var x=p.log2(v+1)%r,b=0,c=0;r>c;++c){var w=u[c+1];c!==x&&(b+=w),a[c]=w}var _=e[x],k=i[m+x],A=a[x],M=A,z=A;k>_?z=Math.max(A,Math.pow(k-_,2)):M=Math.max(A,Math.pow(k-_,2));var j=M+b,E=z+b;if(s.pop(),g>j){var S=2*v+1;if(n>S){var T=s.count;l[T]=S;var N=T*(r+1);u[N]=j;for(var c=1;r>=c;++c)u[N+c]=a[c-1];u[N+x+1]=M,s.push()}}if(g>E){var C=2*(v+1);if(n>C){var T=s.count;l[T]=C;var N=T*(r+1);u[N]=E;for(var c=1;r>=c;++c)u[N+c]=a[c-1];u[N+x+1]=z,s.push()}}}return f.freeFloat64(a),s.dispose(),0>d?-1:this.ids[d]},g.knn=function(e,t,n){if("number"==typeof n){if(0>n)return[]}else n=1/0;var r=this.length;if(1>r)return[];if("number"==typeof t){if(0>=t)return[];t=0|Math.min(t,r)}else t=r;var o=this.ids,i=this.dimension,a=this.points,s=a.data,l=f.mallocFloat64(i),u=new h(t,1),c=u.index,d=u.data,g=new h(r,i+1),v=g.index,m=g.data;v[0]=0;for(var y=0;i>=y;++y)m[y]=0;g.count+=1;for(var x=n;g.count>0&&!(m[0]>=x);){for(var b=v[0],w=a.index(b,0),_=0,y=0;i>y;++y)_+=Math.pow(e[y]-s[w+y],2);if(x>_){u.count>=t&&u.pop();var k=u.count;c[k]=b,d[k]=-_,u.push(),u.count>=t&&(x=-d[0])}for(var A=p.log2(b+1)%i,M=0,y=0;i>y;++y){var z=m[y+1];y!==A&&(M+=z),l[y]=z}var j=e[A],E=s[w+A],S=l[A],T=S,N=S;E>j?N=Math.max(S,Math.pow(E-j,2)):T=Math.max(S,Math.pow(E-j,2));var C=T+M,O=N+M;if(g.pop(),x>C){var q=2*b+1;if(r>q){var D=g.count;v[D]=q;var F=D*(i+1);m[F]=C;for(var y=1;i>=y;++y)m[F+y]=l[y-1];m[F+A+1]=T,g.push()}}if(x>O){var L=2*(b+1);if(r>L){var D=g.count;v[D]=L;var F=D*(i+1);m[F]=O;for(var y=1;i>=y;++y)m[F+y]=l[y-1];m[F+A+1]=N,g.push()}}}f.freeFloat64(l),g.dispose();for(var P=new Array(u.count),o=this.ids,y=u.count-1;y>=0;--y)P[y]=o[c[0]],u.pop();return u.dispose(),P},g.dispose=function(){f.free(this.points.data),f.freeInt32(this.ids),this.points=null,this.ids=null,this.length=0}},{"./lib/heap.js":11,"bit-twiddle":12,"inorder-tree-layout":13,ndarray:31,"ndarray-ops":15,"ndarray-pack":20,"ndarray-scratch":29,"ndarray-select":30,"typedarray-pool":34}],11:[function(e,t,n){"use strict";function r(e){return 1&e?e-1>>1:(e>>1)-1}function o(e,t){this.count=0,this.dataSize=t,this.index=i.mallocInt32(e),this.data=i.mallocFloat64(e*t)}t.exports=o;var i=e("typedarray-pool"),a=o.prototype;a.heapSwap=function(e,t){var n=this.data,r=this.index,o=this.dataSize,i=r[e];r[e]=r[t],r[t]=i;for(var a=o*e,s=o*t,l=0;o>l;++l){var u=n[a];n[a]=n[s],n[s]=u,a+=1,s+=1}},a.heapUp=function(e){for(var t=this.dataSize,n=(this.index,this.data),o=n[t*e];e>0;){var i=r(e);if(i>=0){var a=n[t*i];if(a>o){this.heapSwap(e,i),e=i;continue}}break}},a.heapDown=function(e){for(var t=this.dataSize,n=(this.index,this.data),r=this.count,o=n[t*e];;){var i=o,a=2*e+1,s=2*(e+1),l=e;if(r>a){var u=n[t*a];i>u&&(l=a,i=u)}if(r>s){var c=n[t*s];i>c&&(l=s)}if(l===e)break;this.heapSwap(e,l),e=l}},a.pop=function(){this.count-=1,this.heapSwap(0,this.count),this.heapDown(0)},a.push=function(){this.heapUp(this.count),this.count+=1},a.dispose=function(){i.freeInt32(this.index),i.freeFloat64(this.data)}},{"typedarray-pool":34}],12:[function(e,t,n){"use strict";"use restrict";function r(e){var t=32;return e&=-e,e&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}var o=32;n.INT_BITS=o,n.INT_MAX=2147483647,n.INT_MIN=-1<<o-1,n.sign=function(e){return(e>0)-(0>e)},n.abs=function(e){var t=e>>o-1;return(e^t)-t},n.min=function(e,t){return t^(e^t)&-(t>e)},n.max=function(e,t){return e^(e^t)&-(t>e)},n.isPow2=function(e){return!(e&e-1||!e)},n.log2=function(e){var t,n;return t=(e>65535)<<4,e>>>=t,n=(e>255)<<3,e>>>=n,t|=n,n=(e>15)<<2,e>>>=n,t|=n,n=(e>3)<<1,e>>>=n,t|=n,t|e>>1},n.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},n.popCount=function(e){return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24},n.countTrailingZeros=r,n.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1},n.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e-(e>>>1)},n.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,e&=15,27030>>>e&1};var i=new Array(256);!function(e){for(var t=0;256>t;++t){var n=t,r=t,o=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--o;e[t]=r<<o&255}}(i),n.reverse=function(e){return i[255&e]<<24|i[e>>>8&255]<<16|i[e>>>16&255]<<8|i[e>>>24&255]},n.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},n.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),e=65535&(e|e>>>16),e<<16>>16},n.interleave3=function(e,t,n){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),e|n<<2},n.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),e=1023&(e|e>>>16),e<<22>>22},n.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>r(e)+1}},{}],13:[function(e,t,n){"use strict";function r(e){var t=(g.nextPow2(e+1)>>>1)-1,n=e-t;return g.nextPow2(n)-1>=t?t:(t>>>1)+n}function o(e){return 0}function i(e){return e-1}function a(e,t){if(0>=e)return 0;var n=r(e);return t>n?a(e-n-1,t-n-1):t===n?g.log2(e):a(n,t)}function s(e,t){return Math.max(t-1,0)}function l(e,t){return Math.min(t+1,e-1)}function u(e,t){if(0>=e)return-1;var n=r(e);if(t>n){var o=u(e-n-1,t-n-1);return 0>o?n:o+n+1}if(t===n)return-1;var o=u(n,t);return 0>o?n:o}function c(e,t){if(0>=e)return 0;var n=r(e);return t>n?c(e-n-1,t-n-1)+n+1:t===n?r(t):c(n,t)}function f(e,t){if(0>=e)return 0;var n=r(e);return t>n?f(e-n-1,t-n-1)+n+1:t===n?r(e-n-1)+n+1:f(n,t)}function d(e,t){return 0===a(e,t)}function p(e,t){e|=0,t|=0;for(var n=0;e>1;){var o=r(e);if(t>o)n+=o+1,e-=o+1,t-=o+1;else{if(t===o)break;e=o}}return n}function h(e,t){e|=0,t|=0;for(var n=0;e>1;){var o=r(e);if(t>o)n+=o+1,e-=o+1,t-=o+1;else{if(t===o){n+=e-1;break}e=o}}return n}var g=e("bit-twiddle");n.root=r,n.begin=o,n.end=i,n.height=a,n.prev=s,n.next=l,n.parent=u,n.left=c,n.right=f,n.leaf=d,n.lo=p,n.hi=h},{"bit-twiddle":14}],14:[function(e,t,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],15:[function(e,t,n){"use strict";function r(e){if(!e)return s;for(var t=0;t<e.args.length;++t){var n=e.args[t];e.args[t]=0===t?{name:n,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:{name:n,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function o(e){return a({args:e.args,pre:r(e.pre),body:r(e.body),post:r(e.proc),funcName:e.funcName})}function i(e){for(var t=[],n=0;n<e.args.length;++n)t.push("a"+n);var r=new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""));return r(o(e))}var a=e("cwise-compiler"),s={body:"",args:[],thisVars:[],localVars:[]},l={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in l){var t=l[e];n[e]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),n[e+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:!0,funcName:e+"eq"}),n[e+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),n[e+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:!0,funcName:e+"seq"})}}();var u={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in u){var t=u[e];n[e]=i({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e}),n[e+"eq"]=i({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var c={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in c){var t=c[e];n[e]=i({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),n[e+"s"]=i({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),n[e+"eq"]=i({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:!0,count:2,funcName:e+"eq"}),n[e+"seq"]=i({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var f=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<f.length;++e){var t=f[e];n[t]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t}),n[t+"eq"]=i({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"})}}();var d=["max","min","atan2","pow"];!function(){for(var e=0;e<d.length;++e){var t=d[e];n[t]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t}),n[t+"s"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"}),n[t+"eq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"}),n[t+"seq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"seq"})}}();var p=["atan2","pow"];!function(){for(var e=0;e<p.length;++e){var t=p[e];n[t+"op"]=i({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"}),n[t+"ops"]=i({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"}),n[t+"opeq"]=i({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opeq"}),n[t+"opseq"]=i({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opseq"})}}(),n.any=a({args:["array"],pre:s,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),n.all=a({args:["array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),n.sum=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),n.prod=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),n.norm2squared=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),n.norm2=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),n.norminf=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),n.norm1=a({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),n.sup=a({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.inf=a({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),n.argmin=a({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.argmax=a({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),n.random=i({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),n.assign=i({args:["array","array"],body:{args:["a","b"],
body:"a=b"},funcName:"assign"}),n.assigns=i({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),n.equals=a({args:["array","array"],pre:s,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},{"cwise-compiler":16}],16:[function(e,t,n){"use strict";function r(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function o(e){var t=new r;t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n;for(var o=0;o<n.length;++o){var a=n[o];if("array"===a){if(t.arrayArgs.push(o),t.shimArgs.push("array"+o),o<t.pre.args.length&&t.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array args");if(o<t.post.args.length&&t.post.args[o].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)t.scalarArgs.push(o),t.shimArgs.push("scalar"+o);else if("index"===a){if(t.indexArgs.push(o),o<t.pre.args.length&&t.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array index");if(o<t.body.args.length&&t.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array index");if(o<t.post.args.length&&t.post.args[o].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(t.shapeArgs.push(o),o<t.pre.args.length&&t.pre.args[o].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(o<t.body.args.length&&t.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array shape");if(o<t.post.args.length&&t.post.args[o].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+n[o]);t.argTypes[o]="offset",t.offsetArgs.push({array:a.array,offset:a.offset}),t.offsetArgIndex.push(o)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,i(t)}var i=e("./lib/thunk.js");t.exports=o},{"./lib/thunk.js":18}],17:[function(e,t,n){"use strict";function r(e,t,n){var r,o,i=e.length,a=t.arrayArgs.length,s=t.indexArgs.length>0,l=[],u=[],c=0,f=0;for(r=0;i>r;++r)u.push(["i",r,"=0"].join(""));for(o=0;a>o;++o)for(r=0;i>r;++r)f=c,c=e[r],u.push(0===r?["d",o,"s",r,"=t",o,"p",c].join(""):["d",o,"s",r,"=(t",o,"p",c,"-s",f,"*t",o,"p",f,")"].join(""));for(l.push("var "+u.join(",")),r=i-1;r>=0;--r)c=e[r],l.push(["for(i",r,"=0;i",r,"<s",c,";++i",r,"){"].join(""));for(l.push(n),r=0;i>r;++r){for(f=c,c=e[r],o=0;a>o;++o)l.push(["p",o,"+=d",o,"s",r].join(""));s&&(r>0&&l.push(["index[",f,"]-=s",f].join("")),l.push(["++index[",c,"]"].join(""))),l.push("}")}return l.join("\n")}function o(e,t,n,o){for(var i=t.length,a=n.arrayArgs.length,s=n.blockSize,l=n.indexArgs.length>0,u=[],c=0;a>c;++c)u.push(["var offset",c,"=p",c].join(""));for(var c=e;i>c;++c)u.push(["for(var j"+c+"=SS[",t[c],"]|0;j",c,">0;){"].join("")),u.push(["if(j",c,"<",s,"){"].join("")),u.push(["s",t[c],"=j",c].join("")),u.push(["j",c,"=0"].join("")),u.push(["}else{s",t[c],"=",s].join("")),u.push(["j",c,"-=",s,"}"].join("")),l&&u.push(["index[",t[c],"]=j",c].join(""));for(var c=0;a>c;++c){for(var f=["offset"+c],d=e;i>d;++d)f.push(["j",d,"*t",c,"p",t[d]].join(""));u.push(["p",c,"=(",f.join("+"),")"].join(""))}u.push(r(t,n,o));for(var c=e;i>c;++c)u.push("}");return u.join("\n")}function i(e){for(var t=0,n=e[0].length;n>t;){for(var r=1;r<e.length;++r)if(e[r][t]!==e[0][t])return t;++t}return t}function a(e,t,n){for(var r=e.body,o=[],i=[],a=0;a<e.args.length;++a){var s=e.args[a];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),u="",c=t.arrayArgs.indexOf(a);switch(t.argTypes[a]){case"offset":var f=t.offsetArgIndex.indexOf(a),d=t.offsetArgs[f];c=d.array,u="+q"+f;case"array":u="p"+c+u;var p="l"+a,h="a"+c;1===s.count?"generic"===n[c]?s.lvalue?(o.push(["var ",p,"=",h,".get(",u,")"].join("")),r=r.replace(l,p),i.push([h,".set(",u,",",p,")"].join(""))):r=r.replace(l,[h,".get(",u,")"].join("")):r=r.replace(l,[h,"[",u,"]"].join("")):"generic"===n[c]?(o.push(["var ",p,"=",h,".get(",u,")"].join("")),r=r.replace(l,p),s.lvalue&&i.push([h,".set(",u,",",p,")"].join(""))):(o.push(["var ",p,"=",h,"[",u,"]"].join("")),r=r.replace(l,p),s.lvalue&&i.push([h,"[",u,"]=",p].join("")));break;case"scalar":r=r.replace(l,"Y"+t.scalarArgs.indexOf(a));break;case"index":r=r.replace(l,"index");break;case"shape":r=r.replace(l,"shape")}}}return[o.join("\n"),r,i.join("\n")].join("\n").trim()}function s(e){for(var t=new Array(e.length),n=!0,r=0;r<e.length;++r){var o=e[r],i=o.match(/\d+/);i=i?i[0]:"",t[r]=0===o.charAt(0)?"u"+o.charAt(1)+i:o.charAt(0)+i,r>0&&(n=n&&t[r]===t[r-1])}return n?t[0]:t.join("")}function l(e,t){for(var n=0|t[1].length,l=new Array(e.arrayArgs.length),c=new Array(e.arrayArgs.length),f=["SS"],d=["'use strict'"],p=[],h=0;n>h;++h)p.push(["s",h,"=SS[",h,"]"].join(""));for(var g=0;g<e.arrayArgs.length;++g){f.push("a"+g),f.push("t"+g),f.push("p"+g),c[g]=t[2*g],l[g]=t[2*g+1];for(var h=0;n>h;++h)p.push(["t",g,"p",h,"=t",g,"[",h,"]"].join(""))}for(var g=0;g<e.scalarArgs.length;++g)f.push("Y"+g);if(e.shapeArgs.length>0&&p.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var v=new Array(n),g=0;n>g;++g)v[g]="0";p.push(["index=[",v.join(","),"]"].join(""))}for(var g=0;g<e.offsetArgs.length;++g){for(var m=e.offsetArgs[g],y=[],h=0;h<m.offset.length;++h)0!==m.offset[h]&&y.push(1===m.offset[h]?["t",m.array,"p",h].join(""):[m.offset[h],"*t",m.array,"p",h].join(""));p.push(0===y.length?"q"+g+"=0":["q",g,"=",y.join("+")].join(""))}var x=u([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));p=p.concat(x),d.push("var "+p.join(","));for(var g=0;g<e.arrayArgs.length;++g)d.push("p"+g+"|=0");e.pre.body.length>3&&d.push(a(e.pre,e,c));var b=a(e.body,e,c),w=i(l);d.push(n>w?o(w,l[0],e,b):r(l[0],e,b)),e.post.body.length>3&&d.push(a(e.post,e,c)),e.debug&&console.log("Generated cwise routine for ",t,":\n\n",d.join("\n"));var _=[e.funcName||"unnamed","_cwise_loop_",l[0].join("s"),"m",w,s(c)].join(""),k=new Function(["function ",_,"(",f.join(","),"){",d.join("\n"),"} return ",_].join(""));return k()}var u=e("uniq");t.exports=l},{uniq:19}],18:[function(e,t,n){"use strict";function r(e){var t=["'use strict'","var CACHED={}"],n=[],r=e.funcName+"_cwise_thunk";t.push(["return function ",r,"(",e.shimArgs.join(","),"){"].join(""));for(var i=[],a=[],s=[["array",e.arrayArgs[0],".shape"].join("")],l=0;l<e.arrayArgs.length;++l){var u=e.arrayArgs[l];n.push(["t",u,"=array",u,".dtype,","r",u,"=array",u,".order"].join("")),i.push("t"+u),i.push("r"+u),a.push("t"+u),a.push("r"+u+".join()"),s.push("array"+u+".data"),s.push("array"+u+".stride"),s.push("array"+u+".offset|0")}for(var l=0;l<e.scalarArgs.length;++l)s.push("scalar"+e.scalarArgs[l]);n.push(["type=[",a.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),t.push("var "+n.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",s.join(","),")}"].join("")),e.debug&&console.log("Generated thunk:",t.join("\n"));var c=new Function("compile",t.join("\n"));return c(o.bind(void 0,e))}var o=e("./compile.js");t.exports=r},{"./compile.js":17}],19:[function(e,t,n){"use strict";function r(e,t){for(var n=1,r=e.length,o=e[0],i=e[0],a=1;r>a;++a)if(i=o,o=e[a],t(o,i)){if(a===n){n++;continue}e[n++]=o}return e.length=n,e}function o(e){for(var t=1,n=e.length,r=e[0],o=e[0],i=1;n>i;++i,o=r)if(o=r,r=e[i],r!==o){if(i===t){t++;continue}e[t++]=r}return e.length=t,e}function i(e,t,n){return 0===e.length?e:t?(n||e.sort(t),r(e,t)):(n||e.sort(),o(e))}t.exports=i},{}],20:[function(e,t,n){"use strict";var r=e("ndarray"),o=e("./doConvert.js");t.exports=function(e,t){for(var n=[],i=e,a=1;i instanceof Array;)n.push(i.length),a*=i.length,i=i[0];return 0===n.length?r():(t||(t=r(new Float64Array(a),n)),o(t,e),t)}},{"./doConvert.js":21,ndarray:31}],21:[function(e,t,n){t.exports=e("cwise-compiler")({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64})},{"cwise-compiler":22}],22:[function(e,t,n){"use strict";function r(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function o(e){var t=new r;t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n.slice(0);for(var o=0;o<n.length;++o){var a=n[o];if("array"===a){if(t.arrayArgs.push(o),t.shimArgs.push("array"+o),o<t.pre.args.length&&t.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array args");if(o<t.post.args.length&&t.post.args[o].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===a)t.scalarArgs.push(o),t.shimArgs.push("scalar"+o);else if("index"===a){if(t.indexArgs.push(o),o<t.pre.args.length&&t.pre.args[o].count>0)throw new Error("cwise: pre() block may not reference array index");if(o<t.body.args.length&&t.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array index");if(o<t.post.args.length&&t.post.args[o].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===a){if(t.shapeArgs.push(o),o<t.pre.args.length&&t.pre.args[o].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(o<t.body.args.length&&t.body.args[o].lvalue)throw new Error("cwise: body() block may not write to array shape");if(o<t.post.args.length&&t.post.args[o].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof a||!a.offset)throw new Error("cwise: Unknown argument type "+n[o]);t.argTypes[o]="offset",t.offsetArgs.push({array:a.array,offset:a.offset}),t.offsetArgIndex.push(o)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,i(t)}var i=e("./lib/thunk.js");t.exports=o},{"./lib/thunk.js":24}],23:[function(e,t,n){"use strict";function r(e,t,n){var r,o,i=e.length,a=t.arrayArgs.length,s=t.indexArgs.length>0,l=[],u=[],c=0,f=0;for(r=0;i>r;++r)u.push(["i",r,"=0"].join(""));for(o=0;a>o;++o)for(r=0;i>r;++r)f=c,c=e[r],u.push(0===r?["d",o,"s",r,"=t",o,"[",c,"]"].join(""):["d",o,"s",r,"=(t",o,"[",c,"]-s",f,"*t",o,"[",f,"])"].join(""));for(l.push("var "+u.join(",")),r=i-1;r>=0;--r)c=e[r],l.push(["for(i",r,"=0;i",r,"<s",c,";++i",r,"){"].join(""));for(l.push(n),r=0;i>r;++r){for(f=c,c=e[r],o=0;a>o;++o)l.push(["p",o,"+=d",o,"s",r].join(""));s&&(r>0&&l.push(["index[",f,"]-=s",f].join("")),l.push(["++index[",c,"]"].join(""))),l.push("}")}return l.join("\n")}function o(e,t,n,o){for(var i=t.length,a=n.arrayArgs.length,s=n.blockSize,l=n.indexArgs.length>0,u=[],c=0;a>c;++c)u.push(["var offset",c,"=p",c].join(""));for(var c=e;i>c;++c)u.push(["for(var j"+c+"=SS[",t[c],"]|0;j",c,">0;){"].join("")),u.push(["if(j",c,"<",s,"){"].join("")),u.push(["s",t[c],"=j",c].join("")),u.push(["j",c,"=0"].join("")),u.push(["}else{s",t[c],"=",s].join("")),u.push(["j",c,"-=",s,"}"].join("")),l&&u.push(["index[",t[c],"]=j",c].join(""));for(var c=0;a>c;++c){for(var f=["offset"+c],d=e;i>d;++d)f.push(["j",d,"*t",c,"[",t[d],"]"].join(""));u.push(["p",c,"=(",f.join("+"),")"].join(""))}u.push(r(t,n,o));for(var c=e;i>c;++c)u.push("}");return u.join("\n")}function i(e){for(var t=0,n=e[0].length;n>t;){for(var r=1;r<e.length;++r)if(e[r][t]!==e[0][t])return t;++t}return t}function a(e,t,n){for(var r=e.body,o=[],i=[],a=0;a<e.args.length;++a){var s=e.args[a];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),u="",c=t.arrayArgs.indexOf(a);switch(t.argTypes[a]){case"offset":var f=t.offsetArgIndex.indexOf(a),d=t.offsetArgs[f];c=d.array,u="+q"+f;case"array":u="p"+c+u;var p="l"+a,h="a"+c;1===s.count?"generic"===n[c]?s.lvalue?(o.push(["var ",p,"=",h,".get(",u,")"].join("")),r=r.replace(l,p),i.push([h,".set(",u,",",p,")"].join(""))):r=r.replace(l,[h,".get(",u,")"].join("")):r=r.replace(l,[h,"[",u,"]"].join("")):"generic"===n[c]?(o.push(["var ",p,"=",h,".get(",u,")"].join("")),r=r.replace(l,p),s.lvalue&&i.push([h,".set(",u,",",p,")"].join(""))):(o.push(["var ",p,"=",h,"[",u,"]"].join("")),r=r.replace(l,p),s.lvalue&&i.push([h,"[",u,"]=",p].join("")));break;case"scalar":r=r.replace(l,"Y"+t.scalarArgs.indexOf(a));break;case"index":r=r.replace(l,"index");break;case"shape":r=r.replace(l,"shape")}}}return[o.join("\n"),r,i.join("\n")].join("\n").trim()}function s(e){for(var t=new Array(e.length),n=!0,r=0;r<e.length;++r){var o=e[r],i=o.match(/\d+/);i=i?i[0]:"",t[r]=0===o.charAt(0)?"u"+o.charAt(1)+i:o.charAt(0)+i,r>0&&(n=n&&t[r]===t[r-1])}return n?t[0]:t.join("")}function l(e,t){for(var n=0|t[1].length,l=new Array(e.arrayArgs.length),c=new Array(e.arrayArgs.length),f=["SS"],d=["'use strict'"],p=[],h=0;n>h;++h)p.push(["s",h,"=SS[",h,"]"].join(""));for(var g=0;g<e.arrayArgs.length;++g)f.push("a"+g),f.push("t"+g),f.push("p"+g),c[g]=t[2*g],l[g]=t[2*g+1];for(var g=0;g<e.scalarArgs.length;++g)f.push("Y"+g);if(e.shapeArgs.length>0&&p.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var v=new Array(n),g=0;n>g;++g)v[g]="0";p.push(["index=[",v.join(","),"]"].join(""))}for(var g=0;g<e.offsetArgs.length;++g){for(var m=e.offsetArgs[g],y=[],h=0;h<m.offset.length;++h)0!==m.offset[h]&&y.push(1===m.offset[h]?["t",m.array,"[",h,"]"].join(""):[m.offset[h],"*t",m.array,"[",h,"]"].join(""));p.push(0===y.length?"q"+g+"=0":["q",g,"=(",y.join("+"),")|0"].join(""))}var x=u([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));p=p.concat(x),d.push("var "+p.join(","));for(var g=0;g<e.arrayArgs.length;++g)d.push("p"+g+"|=0");e.pre.body.length>3&&d.push(a(e.pre,e,c));var b=a(e.body,e,c),w=i(l);d.push(n>w?o(w,l[0],e,b):r(l[0],e,b)),e.post.body.length>3&&d.push(a(e.post,e,c)),e.debug&&console.log("Generated cwise routine for ",t,":\n\n",d.join("\n"));var _=[e.funcName||"unnamed","_cwise_loop_",l[0].join("s"),"m",w,s(c)].join(""),k=new Function(["function ",_,"(",f.join(","),"){",d.join("\n"),"} return ",_].join(""));return k()}var u=e("uniq");t.exports=l},{uniq:25}],24:[function(e,t,n){arguments[4][18][0].apply(n,arguments)},{"./compile.js":23,dup:18}],25:[function(e,t,n){"use strict";function r(e,t){for(var n=1,r=e.length,o=e[0],i=e[0],a=1;r>a;++a)if(i=o,o=e[a],t(o,i)){if(a===n){n++;continue}e[n++]=o}return e.length=n,e}function o(e){for(var t=1,n=e.length,r=e[0],o=e[0],i=1;n>i;++i,o=r)if(o=r,r=e[i],r!==o){if(i===t){t++;continue}e[t++]=r}return e.length=t,e}function i(e,t,n){return 0===e.length?[]:t?(n||e.sort(t),r(e,t)):(n||e.sort(),o(e))}t.exports=i},{}],26:[function(e,t,n){arguments[4][12][0].apply(n,arguments)},{dup:12}],27:[function(e,t,n){"use strict";function r(e,t,n){var o=0|e[n];if(0>=o)return[];var i,a=new Array(o);if(n===e.length-1)for(i=0;o>i;++i)a[i]=t;else for(i=0;o>i;++i)a[i]=r(e,t,n+1);return a}function o(e,t){var n,r;for(n=new Array(e),r=0;e>r;++r)n[r]=t;return n}function i(e,t){switch("undefined"==typeof t&&(t=0),typeof e){case"number":if(e>0)return o(0|e,t);break;case"object":if("number"==typeof e.length)return r(e,t,0)}return[]}t.exports=i},{}],28:[function(e,t,n){(function(t,r){"use strict";function o(e){if(e){var t=e.length||e.byteLength,n=y.log2(t);_[n].push(e)}}function i(e){o(e.buffer)}function a(e){var e=y.nextPow2(e),t=y.log2(e),n=_[t];return n.length>0?n.pop():new ArrayBuffer(e)}function s(e){return new Uint8Array(a(e),0,e)}function l(e){return new Uint16Array(a(2*e),0,e)}function u(e){return new Uint32Array(a(4*e),0,e)}function c(e){return new Int8Array(a(e),0,e)}function f(e){return new Int16Array(a(2*e),0,e)}function d(e){return new Int32Array(a(4*e),0,e)}function p(e){return new Float32Array(a(4*e),0,e)}function h(e){return new Float64Array(a(8*e),0,e)}function g(e){return b?new Uint8ClampedArray(a(e),0,e):s(e)}function v(e){return new DataView(a(e),0,e)}function m(e){e=y.nextPow2(e);var t=y.log2(e),n=k[t];return n.length>0?n.pop():new r(e)}var y=e("bit-twiddle"),x=e("dup");t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:x([32,0]),UINT16:x([32,0]),UINT32:x([32,0]),INT8:x([32,0]),INT16:x([32,0]),INT32:x([32,0]),FLOAT:x([32,0]),DOUBLE:x([32,0]),DATA:x([32,0]),UINT8C:x([32,0]),BUFFER:x([32,0])});var b="undefined"!=typeof Uint8ClampedArray,w=t.__TYPEDARRAY_POOL;w.UINT8C||(w.UINT8C=x([32,0])),w.BUFFER||(w.BUFFER=x([32,0]));var _=w.DATA,k=w.BUFFER;n.free=function(e){if(r.isBuffer(e))k[y.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var t=e.length||e.byteLength,n=0|y.log2(t);_[n].push(e)}},n.freeUint8=n.freeUint16=n.freeUint32=n.freeInt8=n.freeInt16=n.freeInt32=n.freeFloat32=n.freeFloat=n.freeFloat64=n.freeDouble=n.freeUint8Clamped=n.freeDataView=i,n.freeArrayBuffer=o,n.freeBuffer=function(e){k[y.log2(e.length)].push(e)},n.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return a(e);switch(t){case"uint8":return s(e);case"uint16":return l(e);case"uint32":return u(e);case"int8":return c(e);case"int16":return f(e);case"int32":return d(e);case"float":case"float32":return p(e);case"double":case"float64":return h(e);case"uint8_clamped":return g(e);case"buffer":return m(e);case"data":case"dataview":return v(e);default:return null}return null},n.mallocArrayBuffer=a,n.mallocUint8=s,n.mallocUint16=l,n.mallocUint32=u,n.mallocInt8=c,n.mallocInt16=f,n.mallocInt32=d,n.mallocFloat32=n.mallocFloat=p,n.mallocFloat64=n.mallocDouble=h,n.mallocUint8Clamped=g,n.mallocDataView=v,n.mallocBuffer=m,n.clearCache=function(){for(var e=0;32>e;++e)w.UINT8[e].length=0,w.UINT16[e].length=0,w.UINT32[e].length=0,w.INT8[e].length=0,w.INT16[e].length=0,w.INT32[e].length=0,w.FLOAT[e].length=0,w.DOUBLE[e].length=0,w.UINT8C[e].length=0,_[e].length=0,k[e].length=0}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{"bit-twiddle":26,buffer:2,dup:27}],29:[function(e,t,n){"use strict";function r(e){var t=e.dtype;("generic"===t||"array"===t)&&(t="double");var n=u.malloc(e.size,t),r=s(n,e.shape);return l.assign(r,e),r}function o(e,t){t||(t="double");for(var n=1,r=new Array(e.length),o=e.length-1;o>=0;--o)r[o]=n,n*=e[o];return s(u.malloc(n,t),e,r,0)}function i(e){"generic"!==e.dtype&&"array"!==e.dtype&&u.free(e.data)}function a(e,t){t||(t="double");for(var n=1,r=new Array(e.length),o=e.length-1;o>=0;--o)r[o]=n,n*=e[o];for(var i=u.malloc(n,t),o=0;n>o;++o)i[o]=0;return s(i,e,r,0)}var s=e("ndarray"),l=e("ndarray-ops"),u=e("typedarray-pool");n.clone=r,n.malloc=o,n.free=i,n.zeros=a},{ndarray:31,"ndarray-ops":15,"typedarray-pool":28}],30:[function(e,t,n){"use strict";function r(e){return"s"+e}function o(e){return"t"+e}function i(e){return"u"+e}function a(e){return"v"+e}function s(e){return"i"+e}function l(e){return"p"+e}function u(e){return"x"+e}function c(e){var t=e.slice();return t.splice(e.indexOf(0),1),t.unshift(0),t}function f(e,t,n){function f(n,i,c){if(t)z.push(l(0),".offset=",y,"+",o(e[0]),"*(",i,");",l(1),".offset=",y,"+",o(e[0]),"*(",c,");",n,"=",v,"(",l(0),",",l(1),");");else{z.push(u(0),"=",y,"+",o(0),"*(",i,");",u(1),"=",y,"+",o(0),"*(",c,");"),p>1&&z.push("_cmp:");for(var f=p-1;f>0;--f)z.push("for(",s(f),"=0;",s(f),"<",r(f),";",s(f),"++){");A?z.push(n,"=",m,".get(",u(0),")-",m,".get(",u(1),");"):z.push(n,"=",m,"[",u(0),"]-",m,"[",u(1),"];"),p>1&&z.push("if(",n,")break _cmp;");for(var f=1;p>f;++f)z.push(u(0),"+=",a(f),";",u(1),"+=",a(f),"}")}}function d(t,n){z.push(u(0),"=",y,"+",o(e[0]),"*(",t,");",u(1),"=",y,"+",o(e[0]),"*(",n,");");for(var a=p-1;a>0;--a)z.push("for(",s(e[a]),"=0;",s(e[a]),"<",r(e[a]),";",s(e[a]),"++){");A?z.push(b,"=",m,".get(",u(0),");",m,".set(",u(0),",",m,".get(",u(1),"));",m,".set(",u(1),",",b,");"):z.push(b,"=",m,"[",u(0),"];",m,"[",u(0),"]=",m,"[",u(1),"];",m,"[",u(1),"]=",b,";");for(var a=1;p>a;++a)z.push(u(0),"+=",i(e[a]),";",u(1),"+=",i(e[a]),"}")}e=c(e);var p=e.length,A="generic"===n,M="ndSelect"+n+e.join("_")+"_"+(t?"cmp":"lex"),z=[],j=[h,g];t&&j.push(v);for(var E=[m+"="+h+".data",y+"="+h+".offset|0",x+"=Math.random",b],S=0;2>S;++S)E.push(u(S)+"=0");for(var S=0;p>S;++S)E.push(r(S)+"="+h+".shape["+S+"]|0",o(S)+"="+h+".stride["+S+"]|0",s(S)+"=0");for(var S=1;p>S;++S)p-1>S?E.push(a(S)+"=("+o(S)+"-"+r(S+1)+"*"+o(S+1)+")|0",i(e[S])+"=("+o(e[S])+"-"+r(e[S+1])+"*"+o(e[S+1])+")|0"):E.push(a(S)+"="+o(S),i(e[S])+"="+o(e[S]));if(t)for(var S=0;2>S;++S)E.push(l(S)+"="+h+".pick(0)");E.push(k+"=0",w+"=0",_+"="+r(e[0])+"-1"),z.push("while(",w,"<",_,"){",k,"=(",x,"()*(",_,"-",w,"+1)+",w,")|0;"),d(k,_),z.push(k,"=",w,";","for(",s(0),"=",w,";",s(0),"<",_,";",s(0),"++){"),f(b,s(0),_),z.push("if(",b,"<0){"),d(k,s(0)),z.push(k,"++;"),z.push("}}"),d(k,_),z.push("if(",k,"===",g,"){",w,"=",k,";","break;","}else if(",g,"<",k,"){",_,"=",k,"-1;","}else{",w,"=",k,"+1;","}","}"),t?z.push(l(0),".offset=",y,"+",w,"*",o(0),";","return ",l(0),";"):z.push("return ",h,".pick(",w,");");var T=["'use strict';function ",M,"(",j,"){","var ",E.join(),";",z.join(""),"};return ",M].join(""),N=new Function(T);return N()}function d(e,t,n){var r=e.join()+t+n,o=A[r];return o?o:A[r]=f(e,t,n)}function p(e,t,n){if(t|=0,0===e.dimension||e.shape[0]<=t||0>t)return null;var r=!!n,o=d(e.order,r,e.dtype);return r?o(e,t,n):o(e,t)}t.exports=p,t.exports.compile=d;var h="a",g="K",v="C",m="d",y="o",x="R",b="T",w="L",_="H",k="X",A={}},{}],31:[function(e,t,n){(function(n){function r(e,t){return e[0]-t[0]}function o(){var e,t=this.stride,n=new Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(r);var o=new Array(n.length);for(e=0;e<o.length;++e)o[e]=n[e][1];return o}function i(e,t){var n=["View",t,"d",e].join("");0>t&&(n="View_Nil"+e);var r="generic"===e;if(-1===t){var i="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}",a=new Function(i);return a()}if(0===t){var i="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(r?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(r?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",a=new Function("TrivialArray",i);return a(d[e][0])}var i=["'use strict'"],s=l(t),c=s.map(function(e){return"i"+e}),f="this.offset+"+s.map(function(e){return"this._stride"+e+"*i"+e}).join("+");i.push("function "+n+"(a,"+s.map(function(e){return"b"+e}).join(",")+","+s.map(function(e){return"c"+e}).join(",")+",d){this.data=a");for(var p=0;t>p;++p)i.push("this._shape"+p+"=b"+p+"|0");for(var p=0;t>p;++p)i.push("this._stride"+p+"=c"+p+"|0");i.push("this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t);var h="VStride"+t+"d"+e,g="VShape"+t+"d"+e,v={stride:h,shape:g};for(var m in v){var y=v[m];i.push("function "+y+"(v) {this._v=v} var aproto="+y+".prototype","aproto.length="+t);for(var x=[],p=0;t>p;++p)x.push(["this._v._",m,p].join(""));i.push("aproto.toJSON=function "+y+"_toJSON(){return ["+x.join(",")+"]}","aproto.valueOf=aproto.toString=function "+y+"_toString(){return ["+x.join(",")+"].join()}");for(var p=0;t>p;++p)i.push("Object.defineProperty(aproto,"+p+",{get:function(){return this._v._"+m+p+"},set:function(v){return this._v._"+m+p+"=v|0},enumerable:true})");for(var p=0;p<u.length;++p)u[p]in Array.prototype&&i.push("aproto."+u[p]+"=Array.prototype."+u[p]);i.push(["Object.defineProperty(proto,'",m,"',{get:function ",y,"_get(){return new ",y,"(this)},set: function ",y,"_set(v){"].join(""));for(var p=0;t>p;++p)i.push("this._"+m+p+"=v["+p+"]|0");i.push("return v}})")}i.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+s.map(function(e){return"this._shape"+e}).join("*"),"}})"),1===t?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),4>t?(i.push("function "+n+"_order(){"),2===t?i.push("return (Math.abs(this._stride0)>Math.abs(this._stride1))?[1,0]:[0,1]}})"):3===t&&i.push("var s0=Math.abs(this._stride0),s1=Math.abs(this._stride1),s2=Math.abs(this._stride2);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+n+"_set("+c.join(",")+",v){"),i.push(r?"return this.data.set("+f+",v)}":"return this.data["+f+"]=v}"),i.push("proto.get=function "+n+"_get("+c.join(",")+"){"),i.push(r?"return this.data.get("+f+")}":"return this.data["+f+"]}"),i.push("proto.index=function "+n+"_index(",c.join(),"){return "+f+"}"),i.push("proto.hi=function "+n+"_hi("+c.join(",")+"){return new "+n+"(this.data,"+s.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this._shape",e,":i",e,"|0"].join("")}).join(",")+","+s.map(function(e){return"this._stride"+e}).join(",")+",this.offset)}");var b=s.map(function(e){return"a"+e+"=this._shape"+e}),w=s.map(function(e){return"c"+e+"=this._stride"+e});i.push("proto.lo=function "+n+"_lo("+c.join(",")+"){var b=this.offset,d=0,"+b.join(",")+","+w.join(","));for(var p=0;t>p;++p)i.push("if(typeof i"+p+"==='number'&&i"+p+">=0){d=i"+p+"|0;b+=c"+p+"*d;a"+p+"-=d}");i.push("return new "+n+"(this.data,"+s.map(function(e){return"a"+e}).join(",")+","+s.map(function(e){return"c"+e}).join(",")+",b)}"),i.push("proto.step=function "+n+"_step("+c.join(",")+"){var "+s.map(function(e){return"a"+e+"=this._shape"+e}).join(",")+","+s.map(function(e){return"b"+e+"=this._stride"+e}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var p=0;t>p;++p)i.push("if(typeof i"+p+"==='number'){d=i"+p+"|0;if(d<0){c+=b"+p+"*(a"+p+"-1);a"+p+"=ceil(-a"+p+"/d)}else{a"+p+"=ceil(a"+p+"/d)}b"+p+"*=d}");i.push("return new "+n+"(this.data,"+s.map(function(e){return"a"+e}).join(",")+","+s.map(function(e){return"b"+e}).join(",")+",c)}");for(var _=new Array(t),k=new Array(t),p=0;t>p;++p)_[p]="a[i"+p+"]",k[p]="b[i"+p+"]";i.push("proto.transpose=function "+n+"_transpose("+c+"){"+c.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+_.join(",")+","+k.join(",")+",this.offset)}"),i.push("proto.pick=function "+n+"_pick("+c+"){var a=[],b=[],c=this.offset");for(var p=0;t>p;++p)i.push("if(typeof i"+p+"==='number'&&i"+p+">=0){c=(c+this._stride"+p+"*i"+p+")|0}else{a.push(this._shape"+p+");b.push(this._stride"+p+")}");i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+s.map(function(e){return"shape["+e+"]"}).join(",")+","+s.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var a=new Function("CTOR_LIST","ORDER",i.join("\n"));return a(d[e],o)}function a(e){if(f&&n.isBuffer(e))return"buffer";if(c)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}function s(e,t,n,r){if(void 0===e){var o=d.array[0];return o([])}"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var s=t.length;if(void 0===n){n=new Array(s);for(var l=s-1,u=1;l>=0;--l)n[l]=u,u*=t[l]}if(void 0===r){r=0;for(var l=0;s>l;++l)n[l]<0&&(r-=(t[l]-1)*n[l])}for(var c=a(e),f=d[c];f.length<=s+1;)f.push(i(c,f.length-1));var o=f[s+1];return o(e,t,n,r)}var l=e("iota-array"),u=["concat","join","slice","toString","indexOf","lastIndexOf","forEach","every","some","filter","map","reduce","reduceRight"],c="undefined"!=typeof Float64Array,f="undefined"!=typeof n,d={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]};t.exports=s}).call(this,e("buffer").Buffer)},{buffer:2,"iota-array":32}],32:[function(e,t,n){"use strict";function r(e){for(var t=new Array(e),n=0;e>n;++n)t[n]=n;return t}t.exports=r},{}],33:[function(e,t,n){arguments[4][27][0].apply(n,arguments)},{dup:27}],34:[function(e,t,n){arguments[4][28][0].apply(n,arguments)},{"bit-twiddle":12,buffer:2,dup:28}],35:[function(e,t,n){var r;r=e("../color/sort.coffee"),t.exports=function(e,t,n,o,i,a,s){var l,u,c;for(o||(o="asc"),i instanceof Array||(i=[i]),n instanceof Array||(n=[n]),a&&void 0!==s&&"number"!=typeof s&&(s=a.id.nesting.indexOf(s)),c=0,l=0;l<n.length&&(u=n[l],e=a&&e.d3plus&&e.d3plus.sortKeys?e.d3plus.sortKeys[u]:e[u],t=a&&t.d3plus&&t.d3plus.sortKeys?t.d3plus.sortKeys[u]:t[u],c=a&&i.indexOf(u)>=0?r(e,t):t>e?-1:1,0===c&&l!==n.length-1);)l++;return"asc"===o?c:-c}},{"../color/sort.coffee":51}],36:[function(e,t,n){t.exports=function(e,t){var n;return e instanceof Array?(n=void 0===t||null===t?t:t.constructor,e.indexOf(t)>=0||e.indexOf(n)>=0):!1}},{}],37:[function(e,t,n){var r,o;r=e("./comparator.coffee"),o=e("../core/fetch/sort.coffee"),t.exports=function(e,t,n,i,a,s){var l,u,c,f;if(!e||e.length<=1)return e||[];if(a)for(t||(t=a.order.value||a.size.value||a.id.value),n||(n=a.order.sort.value),i||(i=a.color.value||[]),c=0,f=e.length;f>c;c++)l=e[c],l.d3plus||(l.d3plus={}),u="d3plus"in l&&"d3plus"in l.d3plus?l.d3plus:l,l.d3plus.sortKeys=o(a,u,t,i,s);return e.sort(function(e,o){return r(e,o,t,n,i,a,s)})}},{"../core/fetch/sort.coffee":67,"./comparator.coffee":35}],38:[function(e,t,n){t.exports=function(e,t){return void 0===t?e:t===!1?[]:t instanceof Array?t:(e instanceof Array||(e=[]),e.indexOf(t)>=0?e.splice(e.indexOf(t),1):e.push(t),e)}},{}],39:[function(e,t,n){var r;r=function(e){var t,n,o,i;if(i=r.tested,e in i)return i[e];for(n=0,o=!1;n<document.styleSheets.length;){if(t=document.styleSheets[n],t.href&&t.href.indexOf(e)>=0){o=!0;break}n++}return o},r.tested={},t.exports=r},{}],40:[function(e,t,n){t.exports=!1},{}],41:[function(e,t,n){
var r,o;r=e("./ie.js"),o=e("./touch.coffee"),t.exports=o?{click:"click",down:"touchstart",up:"touchend",over:"touchstart",out:"touchend",move:"touchmove"}:{click:"click",down:"mousedown",up:"mouseup",over:r?"mouseenter":"mouseover",out:r?"mouseleave":"mouseout",move:"mousemove"}},{"./ie.js":40,"./touch.coffee":45}],42:[function(e,t,n){var r;r=function(){var e;return e="-webkit-transform"in document.body.style?"-webkit-":"-moz-transform"in document.body.style?"-moz-":"-ms-transform"in document.body.style?"-ms-":"-o-transform"in document.body.style?"-o-":"",r=function(){return e},e},t.exports=r},{}],43:[function(e,t,n){t.exports="rtl"===d3.select("html").attr("dir")},{}],44:[function(e,t,n){var r;r=function(){var e,t,n,o,i;return e=document.createElement("p"),e.style.width="100%",e.style.height="200px",t=document.createElement("div"),t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.visibility="hidden",t.style.width="200px",t.style.height="150px",t.style.overflow="hidden",t.appendChild(e),document.body.appendChild(t),o=e.offsetWidth,t.style.overflow="scroll",i=e.offsetWidth,o===i&&(i=t.clientWidth),document.body.removeChild(t),n=o-i,r=function(){return n},n},t.exports=r},{}],45:[function(e,t,n){t.exports="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch?!0:!1},{}],46:[function(e,t,n){t.exports=function(e){var t;return t=d3.hsl(e),t.l>.45&&(t.s>.8&&(t.s=.8),t.l=.45),t.toString()}},{}],47:[function(e,t,n){t.exports=function(e,t){var n;return void 0===t&&(t=.5),n=d3.hsl(e),t=(1-n.l)*t,n.l+=t,n.s-=t,n.toString()}},{}],48:[function(e,t,n){t.exports=function(e,t,n,r){var o,i,a;return n||(n=1),r||(r=1),e=d3.rgb(e),t=d3.rgb(t),a=(n*e.r+r*t.r-n*r*t.r)/(n+r-n*r),i=(n*e.g+r*t.g-n*r*t.g)/(n+r-n*r),o=(n*e.b+r*t.b-n*r*t.b)/(n+r-n*r),d3.rgb(a,i,o).toString()}},{}],49:[function(e,t,n){var r;r=e("./scale.coffee"),t.exports=function(e,t){var n;return n=e||Math.floor(20*Math.random()),(t=t||r)(n)}},{"./scale.coffee":50}],50:[function(e,t,n){t.exports=d3.scale.ordinal().range(["#b22200","#EACE3F","#282F6B","#B35C1E","#224F20","#5F487C","#759143","#419391","#993F88","#e89c89","#ffee8d","#afd5e8","#f7ba77","#a5c697","#c5b5e5","#d1d392","#bbefd0","#e099cf"])},{}],51:[function(e,t,n){t.exports=function(e,t){var n,r;return n=d3.hsl(e),r=d3.hsl(t),e=0===n.s?361:n.h,t=0===r.s?361:r.h,e===t?n.l-r.l:e-t}},{}],52:[function(e,t,n){t.exports=function(e){var t,n,r,o,i;return o=d3.rgb(e),r=o.r,n=o.g,t=o.b,i=(299*r+587*n+114*t)/1e3,i>=128?"#444444":"#f7f7f7"}},{}],53:[function(e,t,n){t.exports=function(e){var t,n,r;return e+="",e=e.replace(RegExp(" ","g"),""),0===e.indexOf("rgb")&&(e=e.split("(")[1].split(")")[0].split(",").slice(0,3).join(",")),0===e.indexOf("hsl")&&(e=e.split(",")[2].split(")")[0]),n=d3.rgb(e).toString(),t=["black","#000","#000000","0%","0,0,0"],r=t.indexOf(e)>=0,"#000000"!==n||r}},{}],54:[function(e,t,n){var r,o,i,a;o=e("../../client/ie.js"),a=e("./wiki.coffee"),r="http://d3plus.org/assets/img/favicon.ico",i=function(e,t,n){n=n||"",o||"undefined"!=typeof InstallTrigger?console.log("[ D3plus ] "+t):0===e.indexOf("group")?window.chrome&&navigator.onLine?console[e]("%c%c "+t,"padding: 3px 10px;line-height: 25px;background-size: 20px;background-position: top left;background-image: url('"+r+"');","font-weight:200;"+n):console[e]("%cD3plus%c "+t,"line-height: 25px;font-weight: 800;color: #b35c1e;margin-left: 0px;","font-weight:200;"+n):console[e]("%c"+t,n+"font-weight:200;")},i.comment=function(e){this("log",e,"color:#aaa;")},i.error=function(e,t){this("groupCollapsed","ERROR: "+e,"font-weight:800;color:#D74B03;"),this.stack(),this.wiki(t),this.groupEnd()},i.group=function(e){this("group",e,"color:#888;")},i.groupCollapsed=function(e){this("groupCollapsed",e,"color:#888;")},i.groupEnd=function(){o||console.groupEnd()},i.log=function(e){this("log",e,"color:#444444;")},i.stack=function(){var e,t,n,r,i,a,s;o||(e=new Error,e.stack&&(a=e.stack.split("\n"),a=a.filter(function(e){return 0!==e.indexOf("Error")&&e.indexOf("d3plus.js:")<0&&e.indexOf("d3plus.min.js:")<0}),a.length&&a[0].length&&(i=window.chrome?"at ":"@",s=a[0].split(i)[1],a=s.split(":"),3===a.length&&a.pop(),t=a.pop(),r=a.join(":").split("/"),r=r[r.length-1],n="line "+t+" of "+r+": "+s,this("log",n,"color:#D74B03;"))))},i.time=function(e){o||console.time(e)},i.timeEnd=function(e){o||console.timeEnd(e)},i.warning=function(e,t){this("groupCollapsed",e,"color:#888;"),this.stack(),this.wiki(t),this.groupEnd()},i.wiki=function(e){e&&(e in a&&(e=d3plus.repo+"wiki/"+a[e]),this("log","documentation: "+e,"color:#aaa;"))},t.exports=i},{"../../client/ie.js":40,"./wiki.coffee":55}],55:[function(e,t,n){t.exports={active:"Segmenting-Data#active",aggs:"Custom-Aggregations",alt:"Alt-Text-Parameters",attrs:"Attribute-Data#axes",axes:"Axis-Parameters",background:"Background",color:"Color-Parameters",container:"Container-Element",coords:"Geography-Data",csv:"CSV-Export",data:"Data-Points",depth:"Visible-Depth",descs:"Value-Definitions",dev:"Verbose-Mode",draw:"Draw",edges:"Edges-List",error:"Custom-Error-Message",focus:"Focus-Element",font:"Font-Styles",footer:"Custom-Footer",format:"Value-Formatting",height:"Height",history:"User-History",hover:"Hover-Element",icon:"Icon-Parameters",id:"Unique-ID",keywords:"Keyword-Parameters",labels:"Data-Labels",legend:"Legend",links:"Link-Styles",margin:"Outer-Margins",messages:"Status-Messages",method:"Methods",nodes:"Node-Positions",open:"Open",order:"Data-Ordering",remove:"Remove",search:"Search-Box",select:"Selecting-Elements#select",selectAll:"Selecting-Elements#selectall",shape:"Data-Shapes",size:"Size-Parameters",temp:"Segmenting-Data#temp",text:"Text-Parameters",time:"Time-Parameters",timeline:"Timeline",timing:"Animation-Timing",title:"Custom-Titles",tooltip:"Tooltip-Parameters",total:"Segmenting-Data#total",type:"Output-Type",ui:"Custom-Interface",width:"Width",x:"Axis-Parameters",y:"Axis-Parameters",zoom:"Zooming"}},{}],56:[function(e,t,n){var r=e("../../util/buckets.coffee"),o=e("../fetch/value.coffee"),i=e("../console/print.coffee");t.exports=function(e){e.dev.value&&i.time("getting color data range");var t=[];if(e.data.pool.forEach(function(n){var r=parseFloat(o(e,n,e.color.value));"number"==typeof r&&!isNaN(r)&&t.indexOf(r)<0&&t.push(r)}),e.dev.value&&i.timeEnd("getting color data range"),t.length>1){if(e.dev.value&&i.time("calculating color scale"),t=d3.extent(t),t[0]<0&&t[1]>0){var n=e.color.range;3==n.length&&(t.push(t[1]),t[1]=0)}else if(t[1]>0&&t[0]>=0){var n=e.color.heatmap;t=r(t,n.length)}else{var n=e.color.range.slice(0);t[0]<0?n.pop():n.shift()}e.color.valueScale=d3.scale.sqrt().domain(t).range(n).interpolate(d3.interpolateRgb),e.dev.value&&i.timeEnd("calculating color scale")}else e.color.valueScale=null}},{"../../util/buckets.coffee":198,"../console/print.coffee":54,"../fetch/value.coffee":69}],57:[function(e,t,n){var r=e("../fetch/value.coffee"),o=e("../console/print.coffee"),i=e("../../object/validate.coffee");t.exports=function(e,t){e.dev.value&&o.time("filtering data");var n=d3.keys(e.data.keys||{});"attrs"in e&&(n=n.concat(d3.keys(e.attrs.keys||{}))),t=t.filter(function(t){var n=r(e,t,e.id.value);return null!==n});var a=e.types[e.type.value].requirements||[];e.data.filters.forEach(function(o){n.indexOf(e[o].value)>=0&&a.indexOf(o)>=0&&(t=t.filter(function(t){var n=r(e,t,e[o].value);return"size"===o?"number"==typeof n:null!==n}))});var s=e.data.solo.length?"solo":"mute";return e.data[s].forEach(function(n){function a(t){var r=e[n][s].value,o=!1;return r.forEach(function(e){"function"==typeof e?o=e(t):e===t&&(o=!0)}),o}function l(t){var o=!1;if(e[n].nesting){var l=e[n].nesting;i(l)&&(l=d3.values(l)),l.forEach(function(n){o||(o=a(r(e,t,n)))})}else o=a(r(e,t,e[n].value));return"solo"===s?o:!o}t=t.filter(l),"id"===n&&("nodes"in e&&e.nodes.value&&(e.dev.value&&o.time("filtering nodes"),e.nodes.restricted=e.nodes.value.filter(l),e.dev.value&&o.timeEnd("filtering nodes")),"edges"in e&&e.edges.value&&(e.dev.value&&o.time("filtering edges"),e.edges.restricted=e.edges.value.filter(function(t){var n=l(t[e.edges.source]),r=l(t[e.edges.target]);return n&&r}),e.dev.value&&o.timeEnd("filtering edges")))}),e.dev.value&&o.timeEnd("filtering data"),t}},{"../../object/validate.coffee":166,"../console/print.coffee":54,"../fetch/value.coffee":69}],58:[function(e,t,n){var r=e("./nest.js"),o=e("../fetch/value.coffee"),i=e("../console/print.coffee"),a=e("../../util/uniques.coffee");t.exports=function(e){var t;if(e.data.time={values:[]},e.time&&e.time.value){e.dev.value&&(t="analyzing time periods",i.time(t)),e.data.time.values=a(e.data.value,e.time.value,o,e),e.data.time.values.sort(function(e,t){return e-t});var n=[];e.data.time.values.forEach(function(t,r){if(0!==r){var o=e.data.time.values[r-1];n.push(t-o),r===e.data.time.values.length-1&&(e.data.time.total=t-e.data.time.values[0])}}),n=d3.min(n),e.data.time.step=n;var s=["Milliseconds","Seconds","Minutes","Hours","Date","Month","FullYear"],l=[1e3,60,60,24,30,12,1];e.data.time.periods=s;var u=function(t,n,r){return e.data.time.stepDivider||(arr=l.slice(0,r),e.data.time.stepDivider=arr.length?arr.reduce(function(e,t){return e*t}):1),Math.round(Math.floor(n-t)/e.data.time.stepDivider)},c=e.data.time.total;s.forEach(function(t,r){var o="Date"===t?28:l[r];if(!e.data.time.stepType&&(r===s.length-1||Math.round(n)<o)){e.data.time.stepType=t;var i=e.data.time.values[0],a=e.data.time.values[e.data.time.values.length-1];e.data.time.stepIntervals=u(i,a,r)}!e.data.time.totalType&&(r===s.length-1||Math.round(c)<o)&&(e.data.time.totalType=t),n/=o,c/=o}),e.data.time.values.forEach(function(t,n){if(0!==n){var r=e.data.time.values[0];e.data.time.dataSteps.push(u(r,t,s.indexOf(e.data.time.stepType)))}else e.data.time.dataSteps=[0]});var f=e.time.format.value,d=e.format.locale.value;if(f)"string"==typeof f?e.data.time.format=d3.locale(d.format).timeFormat(f):"function"==typeof f?e.data.time.format=f:f instanceof Array&&(e.data.time.format=d3.locale(d.format).timeFormat.multi(v)),e.data.time.multiFormat=e.data.time.format;else{var p=e.data.time.stepType,h=e.data.time.totalType,g=function(e,t,n){if(e===t)return n&&d.timeFormat[e+"Small"]?d.timeFormat[e+"Small"]:d.timeFormat[e];if(s.indexOf(e)>=4||s.indexOf(t)<=3)return d.timeFormat[t+"-"+e];var r;return r="Date"===t?d.timeFormat[t]:d.timeFormat[t+"-Date"],"Hours"===e?r+" "+d.timeFormat[e]:r+" "+d.timeFormat["Hours-"+e]};e.data.time.getFormat=g;var v=[],m=[function(e){return e.getMilliseconds()},function(e){return e.getSeconds()},function(e){return e.getMinutes()},function(e){return e.getHours()},function(e){return 1!=e.getDate()},function(e){return e.getMonth()},function(e){return!0}];e.data.time.functions=m;for(var y=s.indexOf(p);y<=s.indexOf(h);y++){var x=y-1<s.indexOf(p)?s[y]:s[y-1],b=s[y]===x&&p!==h,w=g(x,s[y],b);v.push([w,m[y]])}e.data.time.format=d3.locale(d.format).timeFormat(g(p,h)),e.data.time.multiFormat=v.length>1?d3.locale(d.format).timeFormat.multi(v):e.data.time.format,e.data.time.ticks=[];for(var _=d3.min(e.data.time.values),k=d3.max(e.data.time.values),A=0;A<=e.data.time.stepIntervals;A++){var M=new Date(_);M["set"+e.data.time.stepType](M["get"+e.data.time.stepType]()+A),k>=M&&e.data.time.ticks.push(M)}}e.dev.value&&i.timeEnd(t)}if(e.dev.value&&(t="nesting data by time and depths",i.time(t)),e.data.nested={},0===e.data.time.values.length)e.data.nested.all={},e.id.nesting.forEach(function(t,n){var o=e.id.nesting.slice(0,n+1);e.data.nested.all[t]=r(e,e.data.value,o)});else{var z=e.data.value.reduce(function(t,n){var r=o(e,n,e.time.value).getTime();return r in t||(t[r]=[]),t[r].push(n),t},{});e.data.time.values.forEach(function(t){var n=t.getTime();e.data.nested[n]={},e.id.nesting.forEach(function(t,o){var i=e.id.nesting.slice(0,o+1);e.data.nested[n][t]=r(e,z[n],i)})})}e.dev.value&&i.timeEnd(t)}},{"../../util/uniques.coffee":204,"../console/print.coffee":54,"../fetch/value.coffee":69,"./nest.js":62}],59:[function(e,t,n){var r;r=e("../fetch/value.coffee"),t.exports=function(e,t,n){var o,i,a,s,l,u,c,f,d,p;if(i=d3.nest(),e.id.grouping.value)for(void 0===n&&(n=e.id.nesting),a=s=0,u=n.length;u>s;a=++s)f=n[a],a<e.depth.value&&!function(t){return i.key(function(n){return r(e,n.d3plus,t)})}(f);for(d=[],l=0,c=t.length;c>l;l++)o=t[l],p=e.size.value?r(e,o,e.size.value):1,p&&"number"==typeof p&&p>0&&(delete o.d3plus.r,delete o.d3plus.x,delete o.d3plus.y,d.push({d3plus:o,id:o[e.id.value],value:p}));return i.entries(d)}},{"../fetch/value.coffee":69}],60:[function(e,t,n){var r,o,i=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};r=e("../console/print.coffee"),o=e("../../object/validate.coffee"),t.exports=function(e,t){var n,a,s,l,u,c,f,d,p;if(f=t+" key analysis",e.dev.value&&r.time(f),e[t].keys={},n=function(r){var a,s,l,u,c,f,d;if(r instanceof Array){for(c=[],s=0,u=r.length;u>s;s++)a=r[s],c.push(n(a));return c}if(o(r)){f=[];for(l in r)d=r[l],f.push(0===l.indexOf("d3plus")||i.call(e[t].keys,l)>=0||null===d?void 0:e[t].keys[l]=typeof d);return f}},o(e[t].value)){l=d3.keys(e[t].value).length===e.id.nesting.length,u=e[t].value;for(a in u)if(d=u[a],l&&e.id.nesting.indexOf(a)>=0&&o(d))for(s in d)p=d[s],n(p);else n(d)}else{c=e[t].value;for(a in c)d=c[a],n(d)}return e.dev.value?r.time(f):void 0}},{"../../object/validate.coffee":166,"../console/print.coffee":54}],61:[function(e,t,n){var r,o;r=e("../console/print.coffee"),o=e("../../object/validate.coffee"),t.exports=function(e,t,n){var i,a,s,l;return i=e.dev.value,i&&r.time("loading "+t),l=e[t].url,e[t].filetype.value?a=e[t].filetype.value:(a=l.slice(l.length-5).split("."),a=a.length>1?a[1]:!1,a?("txt"===a&&(a="text"),e[t].filetype.accepted.indexOf(a)<0&&(a="json")):a="json"),(s="dsv"===a?d3.dsv(e[t].delimiter.value,"text/plain"):d3[a])(l,function(s,u){var c,f;if(!s&&u){if("function"==typeof e[t].callback){if(f=e[t].callback(u))if(o(f)&&t in f)for(c in f)c in e&&(e[c].value=f[c]);else e[t].value=f}else e[t].value=u;["json"].indexOf(a)<0&&e[t].value.forEach(function(e){var t;t=[];for(c in e)t.push(isNaN(e[c])?"false"===e[c].toLowerCase()?e[c]=!1:"true"===e[c].toLowerCase()?e[c]=!0:"null"===e[c].toLowerCase()?e[c]=null:"undefined"===e[c].toLowerCase()?e[c]=void 0:void 0:e[c]=parseFloat(e[c]));return t}),e[t].changed=!0,e[t].loaded=!0}else e.error.internal='Could not load data from: "'+l+'"';return i&&r.timeEnd("loading "+t),n()})}},{"../../object/validate.coffee":166,"../console/print.coffee":54}],62:[function(e,t,n){var r=e("../fetch/value.coffee"),o=e("../../object/validate.coffee"),i=e("../../util/uniques.coffee"),a=function(e,t,n){var o=d3.nest(),a=[],c="temp"in e?["active","temp","total"]:[];n.length?n.forEach(function(t,n){o.key(function(n){return r(e,n,t)})}):o.key(function(e){return!0}),!e.axes||!e.axes.discrete||e.time&&e[e.axes.discrete].value===e.time.value||o.key(function(t){return r(e,t,e[e.axes.discrete].value)});{var f=n.length&&e.id.nesting.indexOf(n[n.length-1])>=0,d=n.length&&f?n.length-1:0;f?e.id.nesting[d]:e.depth.value}o.rollup(function(t){if(1===t.length&&"d3plus"in t[0])return a.push(t[0]),t[0];t=t.reduce(function(e,t){return t.values instanceof Array?e.concat(t.values):(e.push(t),e)},[]);var o={d3plus:{data:{},depth:d}},u=d3.sum(t,function(e){return"d3plus"in e&&e.d3plus.merged?1:0});if(u===t.length)for(var f=0;f<t.length;f++){var p=t[f];o.d3plus.merged||(o.d3plus.merged=[]),o.d3plus.merged=o.d3plus.merged.concat(p.d3plus.merged),p.d3plus.text&&(o.d3plus.text=p.d3plus.text)}for(var h=0;h<c.length;h++){var g=c[h],v=e.aggs&&e.aggs.value[m]?e.aggs.value[m]:"sum";o.d3plus[g]="d3plus"in t[0]&&g in t[0].d3plus?d3.sum(t,function(e){return e.d3plus[g]}):"function"==typeof v?v(t):d3[v](t,function(t){var n="total"===g?1:0;return e[g].value&&(n=r(e,t,e[g].value),"number"!=typeof n&&(n=n?1:0)),n})}for(var m in e.data.keys){if(m in o.d3plus.data)o[m]=o.d3plus[m];else{var y=e.aggs&&e.aggs.value[m]?e.aggs.value[m]:"sum",x=typeof y,b=e.data.keys[m],w=e.id.nesting.indexOf(m)>=0,_="time"in e&&m===e.time.value;if(m in o.d3plus.data&&(o[m]=o.d3plus[m]),"function"===x)o[m]=e.aggs.value[m](t);else if(_)o[m]=l(i(t,m));else if("number"!==b||"string"!==x||w){var k=s(t,m),A=1===k.length?k[0][m]:i(k,m);if(1===k.length)o[m]=A;else if(A&&A.length)A instanceof Array||(A=[A]),o[m]=w&&e.id.nesting.indexOf(m)>d?k:A;else if(w){var M=e.id.nesting.indexOf(m)-1;M>=d&&(!("endPoint"in o.d3plus)||o.d3plus.endPoint>d)&&(o.d3plus.endPoint=d)}}else{var z=t.map(function(e){return e[m]});z=z.filter(function(e){return typeof e===b}),z.length&&(o[m]=d3[y](z))}}m in o&&o[m]instanceof Array&&1===o[m].length&&(o[m]=o[m][0])}for(var j=0;j<n.length;j++){var E=n[j];E in o||(o[E]=r(e,t[0],E))}return a.push(o),o});var p=function(t,r,o){if(t.children){"number"==e.data.keys[n[r]]&&(t.key=parseFloat(t.key)),o[n[r]]=t.key,delete t.key;for(var i in o)t[i]=o[i];r++,t.children.forEach(function(e){p(e,r,o)})}};return o=o.entries(t).map(u).map(function(e){return p(e,0,{}),e}),a},s=function(e,t){function n(e){e instanceof Array?e.forEach(n):o(e)&&t in e&&(e[t]instanceof Array?e[t].forEach(n):r.push(e))}var r=[];return n(e),r},l=function(e){function t(e){for(var r=0;r<e.length;r++){var o=e[r];o&&(o.constructor===Array?t(o):n.push(o))}}var n=[];return t(e),i(n)},u=function(e){return e.values&&e.values.length?(e.children=e.values.map(function(e){return u(e)}),delete e.values,e):e.values?e.values:e};t.exports=a},{"../../object/validate.coffee":166,"../../util/uniques.coffee":204,"../fetch/value.coffee":69}],63:[function(e,t,n){var r=e("../../array/sort.coffee"),o=e("./nest.js"),i=e("../fetch/value.coffee"),a=(e("../fetch/color.coffee"),e("../fetch/text.js"));t.exports=function(e,t,n){var s;if(s=e.size.threshold.value===!1?0:"number"==typeof e.size.threshold.value?e.size.threshold.value:"function"==typeof e.size.threshold.value?e.size.threshold.value(e):"number"==typeof e.types[e.type.value].threshold?e.types[e.type.value].threshold:"function"==typeof e.types[e.type.value].threshold?e.types[e.type.value].threshold(e):.02,"number"==typeof s&&s>0){var l=[],u=0===e.depth.value?0:{},c=[],f=[],d=[],p={},h=d3.nest();n&&h.key(function(t){return i(e,t,n)}),h.rollup(function(t){var r=t.length;e.aggs.value[e.size.value]?"function"==typeof e.aggs.value[e.size.value]?r=e.aggs.value[e.size.value](t):"string"==typeof e.aggs.value[e.size.value]&&(r=d3[e.aggs.value[e.size.value]](t,function(t){return i(e,t,e.size.value)})):r=d3.sum(t,function(t){return i(e,t,e.size.value)});var o=n?i(e,t[0],n):"all";return p[o]=r,r}).entries(t),t.forEach(function(t){var r=i(e,t,e.id.value),o=i(e,t,e.size.value),a=n?i(e,t,n):"all",u=o/p[a]>=s;if(u&&l.indexOf(r)<0&&(l.push(r),e.depth.value)){var c=i(e,t,e.id.nesting[e.depth.value-1]);f.indexOf(c)<0&&f.push(c)}});var g=t.filter(function(t){var n=i(e,t,e.id.value),r=l.indexOf(n)>=0,o=e.depth.value?i(e,t,e.id.nesting[e.depth.value-1]):null;if(null!==o&&f.indexOf(o)<0&&d.indexOf(o)<0&&d.push(o),!r){var a=i(e,t,e.size.value);a>0&&(0===e.depth.value?a>u&&(u=a):(o in u||(u[o]=0),a>u[o]&&(u[o]=a)),c.push(t))}return r});if(c.length>1){c=r(c,e.size.value,"desc",[],e);var v=e.id.nesting.slice(0,e.depth.value);e.types[e.type.value].requirements.indexOf(e.axes.discrete)>=0&&v.push(e[e.axes.discrete].value);var m=o(e,c,v);m.forEach(function(t){var n=e.id.nesting[e.depth.value-1],r=i(e,t,n);if(children=n?c.filter(function(t){return i(e,t,n)===r}):c,children.length>1){e.id.nesting.forEach(function(n,r){if(e.depth.value==r){var o=t[n];t[n]="string"==typeof o?"d3plus_other_"+o:"d3plus_other"}else r>e.depth.value&&delete t[n]}),e.color.value&&"string"===e.color.type&&(t[e.color.value]=0===e.depth.value?e.color.missing:i(e,r,e.color.value,n)),e.icon.value&&(t[e.icon.value]=i(e,r,e.icon.value,n)),r&&(t.d3plus.depth=e.depth.value);var o;0===e.depth.value?(o=e.format.value(e.format.locale.value.ui.values,{key:"threshold",vars:e}),o+=" < "+e.format.value(u,{key:e.size.value,vars:e})):(o=a(e,t,e.depth.value-1),o=o.length?o[0].split(" < ")[0]:e.format.value(e.format.locale.value.ui.values,{key:"threshold",vars:e}),d.indexOf(r)<0&&(o+=" < "+e.format.value(u[r],{key:e.size.value,vars:e}))),d.indexOf(r)<0&&(o+=" ("+e.format.value(100*s,{key:"share",vars:e})+"%)"),t.d3plus.threshold=u,t.d3plus.merged=children,e.text.value&&(t[e.text.value]=o),t.d3plus.text=o}})}else m=c;return g.concat(m)}return t}},{"../../array/sort.coffee":37,"../fetch/color.coffee":65,"../fetch/text.js":68,"../fetch/value.coffee":69,"./nest.js":62}],64:[function(e,t,n){var r;r=e("../../font/sizes.coffee"),t.exports=function(e,t){var n,o,i,a,s,l,u,c,f,d,p,h,g,v,m,y,x,b;for(b=t.values||e.data.time.ticks,v=t.style||{},s=t.limit||e.width.value,m={},c=e.data.time.periods,g=e.data.time.stepType,y=e.data.time.totalType,i=e.data.time.functions,a=e.data.time.getFormat,l=e.format.locale.value.format,u=c.indexOf(g);u<=c.indexOf(y);){if(x=b.filter(function(e){var t,n;if(u===c.indexOf(g))return!0;if(t=!0,n=u-1,0>u)return!0;for(;n>=c.indexOf(g)&&t;)t=!i[n](e),n--;return t}),c[u]===y)o=d3.locale(l).timeFormat(a(c[u],y));else{for(f=u,o=[];f<=c.indexOf(y);)d=f-1<c.indexOf(g)?f:f-1,d=c[d],h=c[f]===d&&g!==y,n=a(d,c[f],h),o.push([n,i[f]]),f++;o=d3.locale(l).timeFormat.multi(o)}if(p=r(x.map(function(e){return o(e)}),v),d3.sum(p,function(e){return e.width})<s){m.format=o,m.values=x,m.sizes=p;break}u++}return m}},{"../../font/sizes.coffee":97}],65:[function(e,t,n){var r,o,i,a,s,l,u;r=e("./value.coffee"),a=e("../../color/random.coffee"),l=e("../../color/validate.coffee"),u=e("../../object/validate.coffee"),s=e("../../util/uniques.coffee"),t.exports=function(e,t,n){var a,l,c,f,d,p;if(d=u(t),d&&"d3plus"in t&&"color"in t.d3plus)return t.d3plus.color;if(void 0===n&&(n=e.id.value),"number"==typeof n&&(n=e.id.nesting[n]),e.color.value){for(c=[],f=e.id.nesting.indexOf(n);f>=0;){if(l=e.id.nesting[f],p=s(t,e.color.value,r,e,l),1===p.length&&(p=p[0]),!(p instanceof Array)&&void 0!==p&&null!==p){a=o(e,t,p,n),c.indexOf(a)<0&&c.push(a);break}f--}return 1===c.length?c[0]:e.color.missing}return i(e,t,n)},o=function(e,t,n,r){return n?e.color.valueScale?e.color.valueScale(n):l(n)?n:i(e,n,r):e.color.value&&"function"==typeof e.color.valueScale?e.color.valueScale(0):i(e,t,r)},i=function(e,t,n){return u(t)&&(t=r(e,t,n)),t instanceof Array&&(t=t[0]),a(t,e.color.scale.value)}},{"../../color/random.coffee":49,"../../color/validate.coffee":53,"../../object/validate.coffee":166,"../../util/uniques.coffee":204,"./value.coffee":69}],66:[function(e,t,n){var r=e("../data/filter.js"),o=e("../data/nest.js"),i=e("../console/print.coffee"),a=e("../../string/format.js"),s=e("../../string/list.coffee");t.exports=function(e,t,n){if(!e.data.value)return[];void 0===n&&(n=e.depth.value);var l=e.id.nesting[n];if(!t||t instanceof Array||(t=[t]),!t&&"time"in e){t=[];var u=e.time.solo.value.length?"solo":"mute",c=e.time[u].value;if(c.length){t=[];for(var f=0;f<c.length;f++){var d=c[f];if("function"==typeof d)for(var p=0;p<e.data.time.values.length;p++){var h=e.data.time.values[p].getTime();d(h)&&t.push(h)}else if(d.constructor===Date)t.push(new Date(d).getTime());else{var g=new Date(d.toString());"Invalid Date"!==g&&(g.setTime(g.getTime()+60*g.getTimezoneOffset()*1e3),t.push(g.getTime()))}}"mute"===u&&(t=e.data.time.values.filter(function(e){return t.indexOf(e.getTime())<0}))}else t.push("all")}else t=["all"];if(t.indexOf("all")>=0&&e.data.time.values.length){t=e.data.time.values.slice(0);for(var v=0;v<t.length;v++)t[v]=t[v].getTime()}var m=[e.type.value,l,n].concat(e.data.filters).concat(t),y=e.data.solo.length?"solo":"mute",x=d3.keys(e.data.cache),b=e.types[e.type.value].filter||void 0;if(e.data[y].length)for(var w=0;w<e.data[y].length;w++){var _=e.data[y][w],k=e[_][y].value.slice(0);k.unshift(_),m=m.concat(k)}m=m.join("_"),e.data.cacheID=m;for(var A=0;A<x.length;A++){var M=x[A].split("_").slice(1).join("_");if(M===m){m=(new Date).getTime()+"_"+m,e.data.cache[m]=e.data.cache[x[A]],delete e.data.cache[x[A]];break}}var z;if(e.data.cache[m])return e.dev.value&&i.comment("data already cached"),z=e.data.cache[m],"function"==typeof b&&(z=b(e,z)),z;var j=[];if(z=[],e.data.value&&e.data.value.length)for(var E=0;E<t.length;E++){var S=t[E];e.data.nested[S]?z=z.concat(e.data.nested[S][l]):j.push(S)}if(0===z.length&&j.length&&!e.error.internal){j.length>1&&(j=d3.extent(j)),j=j.map(function(t){return e.data.time.format(new Date(t))}),j=j.join(" - ");var T=e.format.locale.value.error.dataYear,N=e.format.locale.value.ui.and;j=s(j,N),e.error.internal=a(T,j),e.time.missing=!0}else{if(e.time&&(e.time.missing=!1),t.length>1){var C=!1;if(["x","y"].forEach(function(t){e[t].value===e.time.value&&"discrete"===e[t].scale.value&&(C=!0)}),!C){var O=e.id.nesting.slice(0,n+1);z=o(e,z,O)}}z=z?r(e,z):[],20===x.length&&(x.sort(),delete e.data.cache[x[0]]),m=(new Date).getTime()+"_"+m,e.data.cache[m]=z,"function"==typeof b&&(z=b(e,z)),e.dev.value&&i.comment("storing data in cache")}return z}},{"../../string/format.js":167,"../../string/list.coffee":168,"../console/print.coffee":54,"../data/filter.js":57,"../data/nest.js":62}],67:[function(e,t,n){var r,o,i;i=e("./value.coffee"),r=e("./color.coffee"),o=e("./text.js"),t.exports=function(e,t,n,a,s){var l,u,c,f,d;for(n instanceof Array||(n=[n]),a instanceof Array||(a=[a]),e&&void 0!==s&&"number"!=typeof s&&(s=e.id.nesting.indexOf(s)),f={},l=0,c=n.length;c>l;l++)u=n[l],d=e?a.indexOf(u)>=0?r(e,t,s):u===e.text.value?o(e,t,s):i(e,t,u,s):t[u],d instanceof Array&&(d=d[0]),d="string"==typeof d?d.toLowerCase():d,f[u]=d;return f}},{"./color.coffee":65,"./text.js":68,"./value.coffee":69}],68:[function(e,t,n){var r=e("./value.coffee"),o=e("../../object/validate.coffee"),i=e("../../util/uniques.coffee");t.exports=function(e,t,n){"number"!=typeof n&&(n=e.depth.value);var a,s=e.id.nesting[n];e.text.nesting&&o(e.text.nesting)?a=e.text.nesting[s]?e.text.nesting[s]:e.text.value:(a=[],e.text.value&&n===e.depth.value&&a.push(e.text.value),a.push(s)),a instanceof Array||(a=[a]);var l=[];if(o(t)&&"d3plus"in t&&t.d3plus.text)l.push(t.d3plus.text.toString()),l.push(e.format.value(t.d3plus.text.toString(),{vars:e,data:t}));else{var u=o(t)?t:void 0;u&&t[e.id.value]instanceof Array?t=t[e.id.value]:t instanceof Array||(t=[t]),a.forEach(function(n){var o=i(t,n,r,e,s);o.length&&(o.length>1&&(o=o.filter(function(e){return e instanceof Array||"string"==typeof e&&e.indexOf(" < ")<0})),o=o.map(function(t){return t instanceof Array?(t=t.filter(function(e){return e}),t.map(function(t){return e.format.value(t.toString(),{vars:e,data:u,key:n})})):t?e.format.value(t.toString(),{vars:e,data:u,key:n}):void 0}),1===o.length&&(o=o[0]),l.push(o))})}return l}},{"../../object/validate.coffee":166,"../../util/uniques.coffee":204,"./value.coffee":69}],69:[function(e,t,n){var r,o,i,a,s,l,u,c,f,d;f=e("../../object/validate.coffee"),c=e("../../util/uniques.coffee"),u=function(e,t,n,a){var s,l,u,d;if(l=f(t),"function"==typeof n&&l)return n(t,e);if(l){if(n in t)return t[n];if(s=e.data.cacheID+"_"+a,r(t,s,e),n in t.d3plus.data[s])return t.d3plus.data[s][n];if(a in t)t=t[a];else{if(!(e.id.value in t))return null;if(t=t[e.id.value],a!==n&&(u=i(e,t,a,e.id.value)),null===u&&(u=o(e,t,a,e.id.value)),null===u)return null;t=u}}return t instanceof Array&&!f(t[0])&&(t=c(t)),t instanceof Array&&f(t[0])&&(d=c(t,n),d.length)?d:(d=i(e,t,n,a))?d:d=o(e,t,n,a)},i=function(e,t,n,r){var o;return e.data.viz instanceof Array&&n in e.data.keys&&(o=c(l(e.data.viz,t,r),n)),o&&o.length?o:null},o=function(e,t,n,r){var o,i,a,s;if("attrs"in e&&e.attrs.value&&n in e.attrs.keys)if(o=f(e.attrs.value)&&r in e.attrs.value?e.attrs.value[r]:e.attrs.value,o instanceof Array){if(a=c(l(o,t,r),n),a.length)return a}else if(t instanceof Array){if(o=[function(){var e,n,r;if(i in o){for(r=[],e=0,n=t.length;n>e;e++)i=t[e],r.push(o[i]);return r}}()],o.length&&(s=c(o,n),s.length))return s}else if(t in o)return o[t][n];return null},l=function(e,t,n){return e.filter(t instanceof Array?function(e){return t.indexOf(e[n])>=0}:function(e){return e[n]===t})},r=function(e,t,n){return"d3plus"in e||(e.d3plus={}),"data"in e.d3plus||(e.d3plus.data={}),!n.data.changed&&!n.attrs.changed&&t in e.d3plus.data||(e.d3plus.data[t]={}),e},d=function(e,t,n,r,o){var i,a,s,l,u,c,d;if(null===o)return o;c="time"in e&&e.time.value===r,o instanceof Array||(o=[o]);for(s=l=0,u=o.length;u>l;s=++l)d=o[s],c&&null!==d&&d.constructor!==Date&&(a=new Date(d.toString()),"Invalid Date"!==a&&(a.setTime(a.getTime()+60*a.getTimezoneOffset()*1e3),o[s]=a));return 1===o.length&&(o=o[0]),null===o||!f(t)||"string"!=typeof r||r in t||(i=e.data.cacheID+"_"+n,t.d3plus.data[i][r]=o),o},s=function(e,t,n,r){var o,i,a,s,l;for(l=[],i=0,a=t.length;a>i;i++)o=t[i],f(o)?(s=u(e,o,n,r),l.push(d(e,o,r,n,s))):l.push(o);return"number"!=typeof l[0]&&(l=c(l)),1===l.length?l[0]:l},a=function(e,t,n,r){var o,i;return n?"number"==typeof n?n:(o=f(t),r||(r=e.id.value),o&&t.values instanceof Array?i=s(e,t.values,n,r):o&&t[n]instanceof Array?i=s(e,t[n],n,r):t instanceof Array?i=s(e,t,n,r):(i=u(e,t,n,r),i=d(e,t,r,n,i)),i):null},t.exports=a},{"../../object/validate.coffee":166,"../../util/uniques.coffee":204}],70:[function(e,t,n){t.exports=function(e){var t,n,r;return["div","svg"].indexOf(e)<0&&(e="div"),n={position:"absolute",left:"-9999px",top:"-9999px",visibility:"hidden",display:"block"},t="div"===e?{}:{position:"absolute"},r=d3.select("body").selectAll(e+".d3plus_tester").data([0]),r.enter().append(e).attr("class","d3plus_tester").style(n).attr(t),r}},{}],71:[function(e,t,n){t.exports={dev:{accepted:"{0} is not an accepted value for {1}, please use one of the following: {2}.",deprecated:"the {0} method has been removed, please update your code to use {1}.",noChange:"{0} was not updated because it did not change.",noContainer:"cannot find a container on the page matching {0}.",of:"of",oldStyle:"style properties for {0} have now been embedded directly into .{1}().",sameEdge:"edges cannot link to themselves. automatically removing self-referencing edge {0}.",set:"{0} has been set.",setLong:"{0} has been set to {1}.",setContainer:"please define a container div using .container()"},error:{accepted:"{0} is not an accepted {1} for {2} visualizations, please use one of the following: {3}.",connections:"no connections available for {0}.",data:"no data available",dataYear:"no data available for {0}.",lib:"{0} visualizations require loading the {1} library.",libs:"{0} visualizations require loading the following libraries: {1}.",method:"{0} visualizations require setting the {1} method.",methods:"{0} visualizations require setting the following methods: {1}."},format:{decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%A, %B %-d, %Y %X",date:"%-m/%-d/%Y",time:"%I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},lowercase:["a","and","at","but","in","of","or","the","to","with"],message:{data:"analyzing data",draw:"drawing visualization",initializing:"initializing {0}",loading:"loading data",tooltipReset:"resetting tooltips",ui:"updating ui"},method:{active:"active segments",color:"color",depth:"depth",dev:"verbose",focus:"focus",icon:"icon",id:"id",height:"height",labels:"labels",legend:"legend",margin:"margin",messages:"status messages",mode:"mode",order:"order",search:"search",shape:"shape",size:"size",style:"style",temp:"temporary segments",text:"text",time:"time",timeline:"timeline",total:"total segments",type:"type",width:"width",x:"x axis",y:"y axis",zoom:"zoom"},time:["date","day","month","time","year"],timeFormat:{FullYear:"%Y",Month:"%B",MonthSmall:"%b",Date:"%A %-d",DateSmall:"%-d",Hours:"%I %p",Minutes:"%I:%M",Seconds:"%Ss",Milliseconds:"%Lms","FullYear-Month":"%b %Y","FullYear-Date":"%-m/%-d/%Y","Month-Date":"%b %-d","Hours-Minutes":"%I:%M %p","Hours-Seconds":"%I:%M:%S %p",
"Hours-Milliseconds":"%H:%M:%S.%L","Minutes-Seconds":"%I:%M:%S %p","Minutes-Milliseconds":"%H:%M:%S.%L","Seconds-Milliseconds":"%H:%M:%S.%L"},ui:{and:"and",back:"back",collapse:"click to collapse",error:"error",expand:"click to expand",including:"including",loading:"loading...",more:"{0} more",moreInfo:"click for more info",or:"or",noResults:"no results matching {0}.",primary:"primary connections",share:"share",total:"total",values:"values"},uppercase:["CEO","CFO","CNC","COO","CPU","HVAC","R&D","TV","UI"],visualization:{bar:"Bar Chart",box:"Box Plot",bubbles:"Bubbles",chart:"Chart",geo_map:"Geo Map",line:"Line Plot",network:"Network",paths:"Paths",pie:"Pie Chart",rings:"Rings",scatter:"Scatter Plot",stacked:"Stacked Area",table:"Table",tree_map:"Tree Map"}}},{}],72:[function(e,t,n){t.exports={dev:{accepted:"{0} не е прифатенa вредноста за {1}, ве молиме користете еднa од следниве вредности: {2}.",deprecated:"{0} метод е отстранета, ве молиме обновете го вашиот код за да се користи {1}.",noChange:"{0} не е ажурирана, бидејќи немаше промени.",noContainer:"не можe да се најде контејнер на страницата кој се совпаѓа со {0}.",of:"на",oldStyle:"својствата за стилот за {0} сега се вградени директно во. {1} ().",sameEdge:"рабовите не може да имаат алка самите кон себе. автоматски ги отстранувам рабовите кои се само-референцираат {0}.",set:"{0} е наместен.",setLong:"{0} е поставен на {1}.",setContainer:"Ве молиме дефинирајте контејнер div користејќи .container()"},error:{accepted:"{0} не е прифатлива за {1} {2} визуелизација, ве молиме користете една од следниве: {3}.",connections:"нема конекции на располагање за {0}.",data:"нема податоци",dataYear:"Нема достапни податоци за {0}.",lib:"{0} визуализации бараат вчитување на библиотеката {1} .",libs:"{0} визуализации бараат вчитување на следниве библиотеки: {1}.",method:"{0} визуализации бара поставување на {1} методот.",methods:"{0} визуализации бараат поставување на следниве методи: {1}."},format:{decimal:",",thousands:".",grouping:[3],currency:[""," ден."],dateTime:"%A, %e %B %Y г. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["недела","понеделник","вторник","среда","четврток","петок","сабота"],shortDays:["нед","пон","вто","сре","чет","пет","саб"],months:["јануари","февруари","март","април","мај","јуни","јули","август","септември","октомври","ноември","декември"],shortMonths:["јан","фев","мар","апр","мај","јун","јул","авг","сеп","окт","ное","дек"]},lowercase:["a","и","во","но","на","или","да","се","со"],method:{active:"активни сегменти",color:"боја",depth:"длабочина",dev:"опширно",focus:"фокус",icon:"икона",id:"ID",height:"висина",labels:"етикети",legend:"легенда",margin:"маргина",messages:"пораки за статусот",order:"цел",search:"барај",shape:"форма",size:"големина",style:"стил",temp:"привремени сегменти",text:"текст",time:"време",timeline:"времеплов",total:"Вкупно сегменти",type:"тип",width:"ширина",x:"x оската",y:"y оската",zoom:"зум",mode:"режим"},time:["датум","ден","месец","време","година"],visualization:{bar:"Бар табела",box:"Кутија Парцел",bubbles:"Меурчиња",chart:"Табела",geo_map:"Гео мапа",line:"Линиски график",network:"Мрежа",path:"Патеки",pie:"Пита графикон",rings:"Прстени",scatter:"Распрскан график",stacked:"Наредена површина",table:"Табела",tree_map:"Мапа во вид на дрво"},ui:{and:"и",back:"назад",collapse:"кликни за да се собере",error:"грешка",expand:"кликни за да се прошири",loading:"Се вчитува ...",more:"{0} повеќе",moreInfo:"кликнете за повеќе информации",noResults:"Нема резултати за појавување на {0}.",or:"или",primary:"основно врски",share:"удел",total:"Вкупно",values:"вредности",including:"вклучувајќи"},message:{data:"анализирање на податоците",draw:"цртање на визуелизација",initializing:"иницијализација {0}",loading:"вчитување на податоци",tooltipReset:"ресетирање на објаснувањата",ui:"ажурирање на кориничкиот интерфејс"},uppercase:["CEOs","CFOs","CNC","COOs","HVAC","TV","UI"]}},{}],73:[function(e,t,n){t.exports={dev:{accepted:"{0} não é um valor aceito para {1}, por favor, use um dos seguintes procedimentos: {2}.",deprecated:"{0} método foi removido, por favor atualize seu código para utilizar {1}.",noChange:"{0} não foi atualizado porque ele não mudou.",noContainer:"Não foi possível encontrar um local na página correspondente a {0}.",of:"de",oldStyle:"propriedades de estilo para {0} já foram incorporados diretamente no. {1} ().",sameEdge:"bordas não podem vincular a si mesmos. removendo automaticamente borda de auto-referência {0}.",set:"{0} foi definida.",setLong:"{0} foi definida para {1}.",setContainer:"por favor, defina um div utilizando .container()"},error:{accepted:"{0} não é um reconhecido {1} para {2} visualizações, por favor, use um dos seguintes procedimentos: {3}.",connections:"Não há conexões disponíveis para {0}.",data:"Não há dados disponíveis",dataYear:"Não há dados disponíveis para {0}.",lib:"A visualização {0} necessita que seja carregado a biblioteca {1}.",libs:"A visualização {0} necessita que seja carregado as bibliotecas {1}.",method:"A visualização {0} exige a definição do método {1}.",methods:"A visualização {0} exige a definição dos métodos {1}."},format:{decimal:",",thousands:".",grouping:[3],currency:["R$",""],dateTime:"%A, %e de %B de %Y. %X",date:"%d/%m/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Domingo","Segunda","Terça","Quarta","Quinta","Sexta","Sábado"],shortDays:["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],months:["Janeiro","Fevereiro","Março","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],shortMonths:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"]},lowercase:["a","com","de","e","em","mas","ou","para","um"],method:{active:"segmentos ativos",color:"cor",depth:"profundidade",dev:"verboso",focus:"foco",icon:"ícone",id:"id",height:"altura",labels:"rótulos",legend:"legenda",margin:"margem",messages:"mensagens de status",order:"ordenar",search:"pesquisar",shape:"forma",size:"tamanho",style:"estilo",temp:"segmentos temporários",text:"texto",time:"tempo",timeline:"cronograma",total:"segmentos totais",type:"tipo",width:"largura",x:"eixo x",y:"eixo y",zoom:"zoom",mode:"modo"},time:["ano","data","dia","hora","mês"],visualization:{bar:"Gráfico de Barras",box:"Eaixa de Enredo",bubbles:"Bolhas",chart:"Gráfico",geo_map:"Mapa",line:"Enredo",network:"Rede",path:"Caminhos",pie:"Pie Chart",rings:"Anéis",scatter:"Dispersão",stacked:"Evolução",table:"Tabela",tree_map:"Tree Map"},ui:{and:"e",back:"de volta",collapse:"Clique para fechar",error:"erro",expand:"clique para expandir",loading:"carregando ...",more:"mais {0}",moreInfo:"clique para mais informações",noResults:"nenhum resultado para {0}.",or:"ou",primary:"conexões primárias",share:"participação",total:"total",values:"valores",including:"incluindo"},message:{data:"analisando dados",draw:"desenhando visualização",initializing:"inicializando {0}",loading:"carregando dados",tooltipReset:"redefinindo as dicas",ui:"atualizando interface"},uppercase:["CEOs","CFOs","CNC","COOs","HVAC","P&D","TV","UI"]}},{}],74:[function(e,t,n){t.exports={dev:{accepted:"{0}不是{1}的可接受值, 请用下列之一的值:{2}",deprecated:"{0}的方法已被移除, 请更新您的代码去使用{1}",noChange:"{0}没有更新, 因为它并没有改变。",noContainer:"无法在该页找到容器去匹配{0}",of:"的",oldStyle:"样式属性{0}现在已经直接嵌入到。{1}（）。",sameEdge:"边缘不能链接到自己。自动去除自我参照边缘{0}。",set:"{0}已经被设置。",setLong:"{0}被设置为{1}。",setContainer:"请使用()容器来定义div容器"},error:{accepted:"{0}对于{2}的可视化效果并不是一个可接受的{1}, 请使用如下的一个：{3}.",connections:"没有对{0}可用的连接。",data:"无可用数据",dataYear:"没有数据对{0}可用。",lib:"{0}的可视化要求装载{1}库。",libs:"{0}的可视化需要加载以下库：{1}。",method:"{0}的可视化要求设置{1}方法。",methods:"{0}的可视化要求设置以下方法：{1}。"},format:{decimal:".",thousands:",",grouping:[3],currency:["¥",""],dateTime:"%A %B %e %Y %X",date:"%Y/%-m/%-d",time:"%H:%M:%S",periods:["上午","下午"],days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],shortDays:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortMonths:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},lowercase:["一个","和","在","但是","在...里","的","或者","这","向","与...一起"],method:{active:"活跃段",color:"颜色",depth:"深度",dev:"详细",focus:"焦点",icon:"图标",id:"身份认证",height:"高度",labels:"标签",legend:"图例注释",margin:"外边距",messages:"状态消息",order:"规则",search:"搜索",shape:"形状",size:"大小",style:"样式",temp:"暂时性区段",text:"文本",time:"时间",timeline:"时间轴",total:"总段",type:"类型",width:"宽度",x:"X轴",y:"Y轴",zoom:"缩放",mode:"模式"},time:["日","星期","月","时间","年"],visualization:{bar:"条形图",box:"箱线图",bubbles:"气泡",chart:"图表",geo_map:"地理地图",line:"线图",network:"网络",path:"路径",pie:"饼图",rings:"特性",scatter:"散点图",stacked:"堆积面积图",table:"表",tree_map:"树图"},ui:{and:"和",back:"后面",collapse:"点击合并",error:"错误",expand:"单击以展开",loading:"载入中...",more:"{0}更多",moreInfo:"点击了解更多信息",noResults:"没有结果匹配{0}。",or:"或",primary:"主要连接",share:"共享",total:"总",values:"值",including:"包括"},message:{data:"分析数据",draw:"绘制可视化",initializing:"初始化{0}",loading:"加载数据",tooltipReset:"重置工具提示",ui:"更新UI"},uppercase:["电视","用户界面","研发"]}},{}],75:[function(e,t,n){t.exports={en_US:e("./languages/en_US.coffee"),mk_MK:e("./languages/mk_MK.js"),pt_BR:e("./languages/pt_BR.js"),zh_CN:e("./languages/zh_CN.js")}},{"./languages/en_US.coffee":71,"./languages/mk_MK.js":72,"./languages/pt_BR.js":73,"./languages/zh_CN.js":74}],76:[function(e,t,n){var r,o,i,a,s,l,u,c,f;o=e("../../util/copy.coffee"),s=e("../console/print.coffee"),l=e("./process/detect.coffee"),u=e("./set.coffee"),c=e("../../string/format.js"),f=e("../../object/validate.coffee"),t.exports=function(e,t){var n,r,s;s=[];for(n in t)r=t[n],e[n]=o(r),e[n].initialized=a(e,e[n],n),s.push(e.self[n]=i(e,n));return s},a=function(e,t,n){var r,o,i,u,d;t.previous=!1,t.changed=!1,t.initialized=!1,"init"in t&&!("value"in t)&&(t.value=t.init(e),delete t.init),"process"in t&&(t.value=l(e,t,t.value));for(d in t)if("deprecates"===d)for(o=t[d]instanceof Array?t[d]:[t[d]],i=0,u=o.length;u>i;i++)r=o[i],e.self[r]=function(t,n){return function(r){var o;return o=e.format.locale.value.dev.deprecated,t="."+t+"()",s.error(c(o,t,"."+n+"()"),n),e.self}}(r,n);else"global"===d?n in e||(e[n]=[]):"value"!==d&&f(t[d])&&a(e,t[d],d);return!0},i=function(e,t){return function(n,o){var i,a,l,u,d,p,h,g;if(i="accepted"in e[t]?e[t].accepted:null,"function"==typeof i&&(i=i(e)),i instanceof Array||(i=[i]),n===Object)return e[t];if(!arguments.length&&i.indexOf(void 0)<0)return"value"in e[t]?e[t].value:e[t];if("style"===t&&"object"==typeof n){g=e.format.locale.value.dev.oldStyle;for(p in n)s.warning(c(g,'"'+p+'"',p),p),e.self[p](n[p])}if("font"===t){"string"==typeof n&&(n={family:n}),h=!0,l=function(e,t,n,r){f(e[n])&&t in e[n]&&(f(e[n][t])?e[n][t].value=e[n][t].process?e[n][t].process(r):r:e[n][t]=r)},a=function(e,t,n){var r;if(f(e)){if(h)for(r in e)l(e,t,r,n);else"font"in e&&l(e,t,"font",n);h=!1;for(r in e)a(e[r],t,n)}};for(u in n)d=n[u],"secondary"!==u&&(f(d)&&(d=d.value),d&&a(e,u,d))}return r(e,t,e,t,n),"function"==typeof o&&(e[t].callback=o),e[t].chainable===!1?e[t].value:e.self}},r=function(e,t,n,o,i){var a,s,l,c;if(["accepted","changed","initialized","previous","process"].indexOf(o)<0)if(c=f(i),l=f(n[o])&&"objectAccess"in n[o]&&n[o].objectAccess===!1,a=!(!c||!l&&("value"in i||d3.keys(i)[0]in n[o])),null===i||!c||a)u(e,t,n,o,i);else if(c)for(s in i)r(e,t,n[o],s,i[s])}},{"../../object/validate.coffee":166,"../../string/format.js":167,"../../util/copy.coffee":201,"../console/print.coffee":54,"./process/detect.coffee":84,"./set.coffee":90}],77:[function(e,t,n){t.exports=function(e){return e||(e=!1),{accepted:[!1,Array,Function,Number,Object,String],callback:{accepted:[!1,Function],value:!1},global:e,process:Array,value:[]}}},{}],78:[function(e,t,n){var r;r=e("../../../client/rtl.coffee"),t.exports=function(e){var t;return t=["left","center","right"],e===!1&&t.unshift(!1),t.indexOf(e)<0&&(e="left"),{accepted:t,process:function(e){return r?"left"===e?"right":"right"===e?"left":e:e},value:e}}},{"../../../client/rtl.coffee":43}],79:[function(e,t,n){t.exports=function(e){var t;return t=["line-through","none","overline","underline"],e===!1&&t.unshift(!1),t.indexOf(e)<0&&(e="none"),{accepted:t,value:e}}},{}],80:[function(e,t,n){var r,o;o=e("../../../font/validate.coffee"),r=["Helvetica Neue","HelveticaNeue","Helvetica","Arial","sans-serif"],t.exports=function(e){return void 0===e&&(e=r),{process:o,value:e}}},{"../../../font/validate.coffee":98}],81:[function(e,t,n){t.exports=function(e){var t;return t=["top","middle","bottom"],e===!1&&t.unshift(!1),t.indexOf(e)<0&&(e="bottom"),{accepted:t,mapping:{top:"0ex",middle:"0.5ex",bottom:"1ex"},process:function(e){return this.text=e,this.mapping[e]},value:e}}},{}],82:[function(e,t,n){t.exports=function(e){var t;return t=["capitalize","lowercase","none","uppercase"],e===!1&&t.unshift(!1),t.indexOf(e)<0&&(e="none"),{accepted:t,value:e}}},{}],83:[function(e,t,n){t.exports=function(e,t,n){return t.history&&t.history.reset(),"string"==typeof e?e.indexOf("/")>=0?(n.url=e,[]):d3.selectAll(e).size()?d3.selectAll(e):[]:e}},{}],84:[function(e,t,n){var r,o;r=e("../../../util/copy.coffee"),o=e("../../../array/update.coffee"),t.exports=function(e,t,n){return t.process===Array?o(r(t.value),n):"object"==typeof t.process&&"string"==typeof n?t.process[n]:"function"==typeof t.process?t.process(n,e,t):n}},{"../../../array/update.coffee":38,"../../../util/copy.coffee":201}],85:[function(e,t,n){var r;r=e("../../../client/css.coffee"),t.exports=function(e,t,n){return e===!1||e.indexOf("fa-")<0||0===e.indexOf("fa-")&&r("font-awesome")?e:n.fallback}},{"../../../client/css.coffee":39}],86:[function(e,t,n){t.exports=function(e,t){var n,r,o,i,a,s,l,u,c,f,d,p,h;if("string"==typeof e){for(e=e.split(" "),n=r=0,a=e.length;a>r;n=++r)h=e[n],e[n]=parseFloat(h,10);e=1===e.length?e[0]:2===e.length?{top:e[0],right:e[1],bottom:e[0],left:e[1]}:3===e.length?{top:e[0],right:e[1],bottom:e[2],left:e[1]}:4===e.length?{top:e[0],right:e[1],bottom:e[2],left:e[3]}:0}if(p=["top","right","bottom","left"],"number"==typeof e)for(o=0,s=p.length;s>o;o++)d=p[o],t[d]=e;else for(i=0,l=p.length;l>i;i++)d=p[i],t[d]=e[d];for(t.css="",f=[],n=c=0,u=p.length;u>c;n=++c)d=p[n],n&&(t.css+=" "),f.push(t.css+=t[d]+"px");return f}},{}],87:[function(e,t,n){var r,o,i,a;r=e("../../array/contains.coffee"),o=e("../../string/format.js"),i=e("../../string/list.coffee"),a=e("../console/print.coffee"),t.exports=function(e,t,n,s,l){var u,c,f,d,p,h,g,v;if("function"==typeof t&&(t=t(e)),t instanceof Array||(t=[t]),c=r(t,n),c===!1&&void 0!==n){for(h=[],v=JSON.stringify(n),"string"!=typeof n&&(v='"'+v+'"'),d=0,p=t.length;p>d;d++)u=t[d],h.push("string"==typeof u?'"'+u+'"':"function"==typeof u?u.toString().split("()")[0].substring(9):void 0===u?"undefined":JSON.stringify(u));h=i(h,e.format.locale.value.ui.or),e.type&&["mode","shape"].indexOf(s)>=0?(g=e.format.locale.value.error.accepted,f=e.format.locale.value.visualization[e.type.value]||e.type.value,a.warning(o(g,v,s,f,h),s)):(g=e.format.locale.value.dev.accepted,a.warning(o(g,v,l,h),s))}return!c}},{"../../array/contains.coffee":36,"../../string/format.js":167,"../../string/list.coffee":168,"../console/print.coffee":54}],88:[function(e,t,n){t.exports=function(e){var t;return t=["auto","optimizeSpeed","crispEdges","geometricPrecision"],t.indexOf(e)>=0||(e="crispEdges"),{accepted:t,value:e}}},{}],89:[function(e,t,n){var r,o;o=e("../../object/validate.coffee"),r=function(e,t){var n;e.changed&&(e.changed=!1),"draw"===t&&(e.frozen=!1,e.update=!0,e.first=!1);for(n in e)n.indexOf("d3plus")<0&&o(e[n])&&r(e[n],n)},t.exports=r},{"../../object/validate.coffee":166}],90:[function(e,t,n){var r,o,i,a,s,l,u,c,f;r=e("../../util/copy.coffee"),o=e("../../util/d3selection.coffee"),f=e("../../object/validate.coffee"),i=e("../../object/merge.coffee"),a=e("../console/print.coffee"),s=e("./process/detect.coffee"),l=e("./rejected.coffee"),u=e("../../string/format.js"),c=e("../../array/update.coffee"),t.exports=function(e,t,n,d,p){var h,g,v,m,y,x,b,w,_,k,A,M,z,j;if(M="value"!==d&&d&&d!==t?'"'+d+'" '+e.format.locale.value.dev.of+" ."+t+"()":"."+t+"()",h="value"===d&&"accepted"in n?n.accepted:f(n[d])&&"accepted"in n[d]?n[d].accepted:[p],!l(e,h,p,t,M)){if(f(n[d])&&"value"in n[d]&&(k=d,n=n[d],d="value"),"value"===d&&"process"in n&&(p=s(e,n,p)),n[d]instanceof Array||n[d]!==p||void 0===p){if(n.changed=!0,n.loaded&&(n.loaded=!1),"history"in e&&"draw"!==t&&(g=r(n),g.method=t,e.history.chain.push(g)),n.previous=n[d],"id"in e&&"value"===d&&"nesting"in n)if("id"!==t){if("object"!=typeof n.nesting&&(n.nesting={}),f(p)){for(x in p)"string"==typeof p[x]&&(p[x]=[p[x]]);n.nesting=i(n.nesting,p),e.id.value in n.nesting||(n.nesting[e.id.value]=p[d3.keys(p)[0]])}else n.nesting[e.id.value]=p instanceof Array?p:[p];n[d]=n.nesting[e.id.value][0]}else p instanceof Array?(n.nesting=p,"depth"in e&&e.depth.value<p.length?n[d]=p[e.depth.value]:(n[d]=p[0],"depth"in e&&(e.depth.value=0))):(n[d]=p,n.nesting=[p],"depth"in e&&(e.depth.value=0));else"depth"===t?(e.depth.value=p>=e.id.nesting.length?e.id.nesting.length-1:0>p?0:p,e.id.value=e.id.nesting[e.depth.value],"object"==typeof e.text.nesting&&(_=e.text.nesting[e.id.value],_&&(e.text.nesting[e.id.value]="string"==typeof _?[_]:_,e.text.value=_ instanceof Array?_[0]:_))):n[d]=f(n[d])&&f(p)?i(n[d],p):p;"value"===d&&n.global&&(y=n[d].length>0,b=k||d,b in e&&(y&&e.data[b].indexOf(t)<0||!y&&e.data[b].indexOf(t)>=0)&&(e.data[b]=c(e.data[b],t))),"value"===d&&n.dataFilter&&e.data&&e.data.filters.indexOf(t)<0&&e.data.filters.push(t),e.dev.value&&n.changed&&void 0!==n[d]&&(w=n[d]instanceof Array&&n[d].length>10,m=o(n[d]),z="function"==typeof n[d],j=w||m||z?null:"string"==typeof n[d]?n[d]:JSON.stringify(n[d]),null!==j&&j.length<260?(A=e.format.locale.value.dev.setLong,a.log(u(A,M,'"'+j+'"'))):(A=e.format.locale.value.dev.set,a.log(u(A,M))))}else A=e.format.locale.value.dev.noChange,e.dev.value&&a.comment(u(A,M));"value"===d&&n.callback&&!n.url&&(v="function"==typeof n.callback?n.callback:n.callback.value,v&&v(p,e.self))}}},{"../../array/update.coffee":38,"../../object/merge.coffee":165,"../../object/validate.coffee":166,"../../string/format.js":167,"../../util/copy.coffee":201,"../../util/d3selection.coffee":202,"../console/print.coffee":54,"./process/detect.coffee":84,"./rejected.coffee":87}],91:[function(e,t,n){var r=e("../console/print.coffee"),o=e("../../string/format.js");t.exports=function(e){if(e.dev.value){var t="analyzing edges list";r.time(t)}var n=e.types[e.type.value].requirements;n instanceof Array||(n=[n]);var i=n.indexOf("nodes")>=0&&!e.nodes.value;if(i){e.nodes.value=[];var a=[];e.nodes.changed=!0}e.edges.value.forEach(function(t){["source","target"].forEach(function(n){var r=typeof t[e.edges[n]];if("object"!==r)if("number"!==r||i)if(i&&a.indexOf(t[e.edges[n]])>=0)t[e.edges[n]]=e.nodes.value.filter(function(r){return r[e.id.value]===t[e.edges[n]]})[0];else{var o={};o[e.id.value]=t[e.edges[n]],t[e.edges[n]]=o}else t[e.edges[n]]=e.nodes.value[t[e.edges[n]]];var s=t[e.edges[n]];i&&a.indexOf(s[e.id.value])<0&&(a.push(s[e.id.value]),e.nodes.value.push(s))}),"keys"in e.data||(e.data.keys={}),e.id.value in e.data.keys||(e.data.keys[e.id.value]=typeof t[e.edges.source][e.id.value])}),e.edges.value=e.edges.value.filter(function(t){var n=t[e.edges.source][e.id.value],i=t[e.edges.target][e.id.value];if(n===i){var a=e.format.locale.value.dev.sameEdge;return r.warning(o(a,'"'+n+'"'),"edges"),!1}return!0}),e.edges.linked=!0,e.dev.value&&r.timeEnd(t)}},{"../../string/format.js":167,"../console/print.coffee":54}],92:[function(e,t,n){function r(e){e.style("position","absolute","important").style("clip","rect(1px 1px 1px 1px)","important").style("clip","rect(1px, 1px, 1px, 1px)","important").style("width","1px","important").style("height","1px","important").style("margin","-1px","important").style("padding","0","important").style("border","0","important").style("overflow","hidden","important")}t.exports=function(e){function t(e,t){[].forEach.call(t.attributes,function(t){if(/^data-/.test(t.name)){var n=t.name.substr(5).replace(/-(.)/g,function(e,t){return t.toUpperCase()});e[n]=t.value}}),n.forEach(function(n){null!==t.getAttribute(n)&&(e[n]=t.getAttribute(n))})}var n=[e.color.value,e.icon.value,e.keywords.value,e.alt.value,"style"];e.text.value||e.self.text("text"),n=n.concat(e.id.nesting),e.self.data({element:e.data.value});var o=e.data.element.value.node().tagName.toLowerCase(),i=e.data.element.value.attr("type"),a=[];if("select"===o){var s=e.data.element.value.node().id;s&&e.self.container({id:s}),e.data.element.value.selectAll("option").each(function(n,r){var o={};if(o.text=this.innerHTML,t(o,this),a.push(o),this.selected)for(var r=e.id.nesting.length-1;r>=0;r--){var i=e.id.nesting[r];if(i in o){e.self.focus(o[i]);break}}})}else if("input"===o&&"radio"===i){var l=e.data.element.value.node().getAttribute("name");l&&e.self.container({id:l}),e.data.element.value.each(function(n,o){var i={};t(i,this);var s=i[e.id.value]||this.id||!1;if(s&&isNaN(parseFloat(s))){var l=d3.select("label[for="+s+"]");l.empty()||(i.text=l.html(),l.call(r))}a.push(i),this.checked&&e.self.focus(i[e.id.value])})}!e.focus.value.length&&a.length&&(e.data.element.value.node().selectedIndex=0,e.self.focus(a[0][e.id.value]));var u=d3.select("legend[for="+e.container.id+"]");u.empty()||(e.self.title(u.html()),u.call(r));var c=e.container.value?e.container.value.node().tagName.toLowerCase():!1;return(e.container.value===!1||"body"===c)&&(e.container.value=d3.select(e.data.element.value.node().parentNode)),e.data.element.value.call(r),a}},{}],93:[function(e,t,n){var r=e("../console/print.coffee");t.exports=function(e){if(e.dev.value){var t="analyzing node positions";r.time(t)}var n=e.nodes.value.filter(function(e){return"number"==typeof e.x&&"number"==typeof e.y}).length;if(n===e.nodes.value.length)e.nodes.positions=!0;else{var o=d3.layout.force().size([e.width.viz,e.height.viz]).nodes(e.nodes.value).links(e.edges.value),i=e.edges.strength.value;i&&o.linkStrength("string"==typeof i?function(e){return e[i]}:i);var a=50,s=.01;o.start();for(var l=a;l>0&&(o.tick(),!(o.alpha()<s));--l);o.stop(),e.nodes.positions=!0}e.dev.value&&r.timeEnd(t)}},{"../console/print.coffee":54}],94:[function(e,t,n){var r;r=e("numeric"),t.exports=function(e,t){var n,o,i,a,s,l,u,c,f,d,p,h,g,v,m,y,x,b,w,_,k,A,M,z,j;for(null==t&&(t={}),null==t.maxDegree&&(t.maxDegree=5),n=e.length,x=Number.MAX_VALUE,s=null,i=function(){var n,r,o;for(o=[],c=n=1,r=t.maxDegree+1;r>=1?r>n:n>r;c=r>=1?++n:--n)o.push(function(){var t,n,r;for(r=[],n=0,t=e.length;t>n;n++)y=e[n],r.push(Math.pow(y[0],c));return r}());return o}(),z=function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)y=e[t],r.push(y[1]);return r}(),d=g=0,w=1<<t.maxDegree;w>=0?w>g:g>w;d=w>=0?++g:--g){for(a=[function(){var e,t,r;for(r=[],b=e=0,t=n;t>=0?t>e:e>t;b=t>=0?++e:--e)r.push(1);return r}()],f=[0],p=m=0,_=t.maxDegree;_>=0?_>m:m>_;p=_>=0?++m:--m)(d&1<<p)>0&&(a.push(i[p]),f.push(p+1));o=r.transpose(a),h=f.length,l=r.dot(r.dot(r.inv(r.dot(a,o)),a),z),j=r.dot(o,l),k=r.sub(z,j),M=r.dot(k,k),A=M/(n-h),v=-.5*n*Math.log(2*Math.PI)-.5*n*Math.log(A)-M/(2*A),u=-2*v+h*(Math.log(n)-Math.log(2*Math.PI)),x>u&&(x=u,s=[f,l,j])}return s}},{numeric:8}],95:[function(e,t,n){var r;r=e("static-kdtree"),t.exports=function(e,t){var n,o,i,a,s,l,u,c,f,d,p,h;return null==t&&(t=10),h=r(e),u=function(){var n,r,o;for(o=[],n=0,r=e.length;r>n;n++)c=e[n],o.push(h.knn(c,t+1).slice(1));return o}(),p=function(t,n){var r,o,i,a,s,l;for(r=e[t],o=e[n],a=0,t=s=0,l=r.length;l>=0?l>s:s>l;t=l>=0?++s:--s)i=r[t]-o[t],a+=i*i;return a},a=function(){var n,r,i;for(i=[],o=n=0,r=e.length;r>=0?r>n:n>r;o=r>=0?++n:--n)i.push(p(o,u[o][t-1]));return i}(),f=function(e,t){return Math.max(p(e,t),a[t])},s=function(e){var n,r,o,i,a;for(i=0,a=u[e],r=0,o=a.length;o>r;r++)n=a[r],i+=f(e,n);return t/i},l=function(){var t,n,r;for(r=[],o=t=0,n=e.length;n>=0?n>t:t>n;o=n>=0?++t:--t)r.push(s(o));return r}(),d=function(){var r,a,s,c,f,d;for(d=[],o=r=0,c=e.length;c>=0?c>r:r>c;o=c>=0?++r:--r){for(n=0,f=u[o],a=0,s=f.length;s>a;a++)i=f[a],n+=l[i];n/=t,d.push([o,n/l[o]])}return d}(),d.sort(function(e,t){return t[1]-e[1]})}},{"static-kdtree":10}],96:[function(e,t,n){t.exports=function(e){var t,n,r;return n=d3.median(e),t=d3.median(e.map(function(e){return Math.abs(e-n)})),r=e.map(function(e,r){return[r,Math.abs(e-n)/t]}),r.sort(function(e,t){return t[1]-e[1]})}},{}],97:[function(e,t,n){var r,o,i;r=e("../core/font/tester.coffee"),t.exports=function(e,t,n){var a,s,l,u;return n||(n={}),l=n.parent||r("svg").append("text"),t=t||{},s=[],e instanceof Array||(e=[e]),u=l.selectAll("tspan").data(e),a={left:"0px",position:"absolute",top:"0px",x:0,y:0},u.enter().append("tspan").text(String).style(t).attr(a).each(function(e){return"function"==typeof n.mod?n.mod(this):void 0}).each(function(e){var t,n,r;return t=d3.select(this).selectAll("tspan"),t.size()?(r=[],t.each(function(){return r.push(i(this))}),r=d3.max(r)):r=i(this),n=o(this),s.push({height:n,text:e,width:r})}),u.remove(),n.parent||l.remove(),s},i=function(e){return e.getComputedTextLength()},o=function(e){return e.offsetHeight||e.getBoundingClientRect().height||e.parentNode.getBBox().height}},{"../core/font/tester.coffee":70}],98:[function(e,t,n){var r,o;r=e("../core/font/tester.coffee"),o=function(e){var t,n,i,a,s,l,u,c,f,d,p,h,g,v;for(e instanceof Array||(e=e.split(",")),s=0,u=e.length;u>s;s++)i=e[s],i.trim();if(a=e.join(", "),t=o.complete,a in t)return t[a];for(p=function(e){return g.append("span").style("font-family",e).style("font-size","32px").style("padding","0px").style("margin","0px").text("abcdefghiABCDEFGHI_!@#$%^&*()_+1234567890")},h=function(e,t){var n,r,o;return n=p(e),r=n.node().offsetWidth,o=t.node().offsetWidth,n.remove(),r!==o},g=r("div"),f=p("monospace"),d=p("sans-serif"),l=0,c=e.length;c>l;l++)if(n=e[l],v=h(n+",monospace",f),v||(v=h(n+",sans-serif",d)),v){v=n;break}return v||(v="sans-serif"),f.remove(),d.remove(),t[a]=v,v},o.complete={},t.exports=o},{"../core/font/tester.coffee":70}],99:[function(e,t,n){var r=e("../array/sort.coffee"),o=e("../core/methods/attach.coffee"),i=e("../core/data/format.js"),a=e("../core/data/keys.coffee"),s=e("../core/data/load.coffee"),l=e("../core/fetch/data.js"),u=e("../client/ie.js"),c=e("../core/methods/reset.coffee"),f=e("../core/console/print.coffee");t.exports=function(){var t={types:{auto:e("./types/auto.js"),button:e("./types/button/button.coffee"),drop:e("./types/drop/drop.coffee"),toggle:e("./types/toggle.js")}};return t.self=function(e){var n=t.data.value instanceof Array&&t.data.value.length>t.data.large;if(t.draw.timing=t.draw.first||n||u?0:t.timing.ui,t.data.value instanceof Array){if(t.dev.value&&f.group('drawing "'+t.type.value+'"'),t.data.changed&&(t.data.cache={},a(t,"data"),i(t)),t.data.viz=l(t),t.data.sort.value&&(t.data.changed||t.order.changed||t.order.sort.changed)&&r(t.data.viz,t.order.value||t.text.value,t.order.sort.value,t.color.value,t),t.focus.value===!1){var o=t.data.element.value;if(o&&"select"===o.node().tagName.toLowerCase()){var d=o.property("selectedIndex");d=0>d?0:d;var p=o.selectAll("option")[0][d],h=p.getAttribute("data-"+t.id.value)||p.getAttribute(t.id.value);h&&(t.focus.value=h)}t.focus.value===!1&&t.data.viz.length&&(t.focus.value=t.data.viz[0][t.id.value]),t.dev.value&&t.focus.value&&f.log('"value" set to "'+t.focus.value+'"')}var g=function(e,n){n="number"!=typeof n?1===t.id.nesting.length?0:t.id.nesting.length-1:n;var r=t.id.nesting[n];return n>0&&(!(r in e)||e[r]instanceof Array)?g(e,n-1):r};if(t.data.changed){"auto"===t.search.value?t.data.viz.length>10?(t.search.enabled=!0,t.dev.value&&f.log("Search enabled.")):(t.search.enabled=!1,t.dev.value&&f.log("Search disabled.")):t.search.enabled=t.search.value;var v=t.data.element.value?t.data.element.value.node().tagName.toLowerCase():"";if(t.data.element.value&&"select"===v){var m=[];for(var y in t.data.nested.all)m=m.concat(t.data.nested.all[y]);options=t.data.element.value.selectAll("option").data(m,function(e){var t=e?g(e):!1;return e&&t in e?e[t]:!1}),options.exit().remove(),options.enter().append("option"),options.each(function(e){var n=g(e),r=n===t.id.value?t.text.value||t.id.value:t.text.nesting!==!0&&n in t.text.nesting?t.text.nesting[n]:n;for(var o in e)"object"!=typeof e[o]&&(o===r&&d3.select(this).html(e[o]),["alt","value"].indexOf(o)>=0?d3.select(this).attr(o,e[o]):d3.select(this).attr("data-"+o,e[o]));this.selected=e[n]===t.focus.value?!0:!1})}}else if(t.focus.changed&&t.data.element.value){var x=t.data.element.value.node().tagName.toLowerCase();if("select"===x)t.data.element.value.selectAll("option").each(function(e){this.selected=e[g(e)]===t.focus.value?!0:!1});else{var x=t.data.element.value.attr("type").toLowerCase();"radio"===x&&t.data.element.value.each(function(e){this.checked=this.value===t.focus.value?!0:!1})}}if("auto"!==t.type.value){if(!t.container.ui){t.container.ui=t.container.value.selectAll("div#d3plus_"+t.type.value+"_"+t.container.id).data(["container"]);var b=t.data.element.value?t.data.element.value[0][0]:null;if(b)if(b.id)b="#"+b.id;else{var w=b.getAttribute(t.id.value)?t.id.value:"data-"+t.id.value;b=b.getAttribute(w)?"["+w+"="+b.getAttribute(w)+"]":null}t.container.ui.enter().insert("div",b).attr("id","d3plus_"+t.type.value+"_"+t.container.id).style("position","relative").style("overflow","visible").style("vertical-align","top")}t.container.ui.style("display",t.ui.display.value),t.container.ui.transition().duration(t.draw.timing).style("margin",t.ui.margin.css);var _=t.container.ui.selectAll("div.d3plus_title").data(t.title.value?[t.title.value]:[]);_.enter().insert("div","#d3plus_"+t.type.value+"_"+t.container.id).attr("class","d3plus_title").style("display","inline-block"),_.style("color",t.font.color).style("font-family",t.font.family.value).style("font-size",t.font.size+"px").style("font-weight",t.font.weight).style("padding",t.ui.padding.css).style("border-color","transparent").style("border-style","solid").style("border-width",t.ui.border+"px").text(String).each(function(e){t.margin.left=this.offsetWidth})}if(t.data.value.length){var k=t.format.locale.value.visualization[t.type.value];t.dev.value&&f.time("drawing "+k),t.types[t.type.value](t),t.dev.value&&f.timeEnd("drawing "+k)}else!t.data.url||t.data.loaded&&!t.data.stream||s(t,"data",t.self.draw);t.dev.value&&f.timeEnd("total draw time"),c(t)}},o(t,{active:e("./methods/active.coffee"),alt:e("./methods/alt.coffee"),color:e("./methods/color.coffee"),config:e("./methods/config.coffee"),container:e("./methods/container.coffee"),data:e("./methods/data.js"),depth:e("./methods/depth.coffee"),dev:e("./methods/dev.coffee"),draw:e("./methods/draw.js"),focus:e("./methods/focus.coffee"),font:e("./methods/font.coffee"),format:e("./methods/format.coffee"),height:e("./methods/height.coffee"),history:e("./methods/history.coffee"),hover:e("./methods/hover.coffee"),icon:e("./methods/icon.coffee"),id:e("./methods/id.coffee"),keywords:e("./methods/keywords.coffee"),margin:e("./methods/margin.coffee"),open:e("./methods/open.coffee"),order:e("./methods/order.coffee"),remove:e("./methods/remove.coffee"),search:e("./methods/search.coffee"),select:e("./methods/select.coffee"),selectAll:e("./methods/selectAll.coffee"),text:e("./methods/text.coffee"),timing:e("./methods/timing.coffee"),title:e("./methods/title.coffee"),type:e("./methods/type.coffee"),ui:e("./methods/ui.coffee"),width:e("./methods/width.coffee")}),t.self}},{"../array/sort.coffee":37,"../client/ie.js":40,"../core/console/print.coffee":54,"../core/data/format.js":58,"../core/data/keys.coffee":60,"../core/data/load.coffee":61,"../core/fetch/data.js":66,"../core/methods/attach.coffee":76,"../core/methods/reset.coffee":89,"./methods/active.coffee":100,"./methods/alt.coffee":101,"./methods/color.coffee":102,"./methods/config.coffee":103,"./methods/container.coffee":104,"./methods/data.js":105,"./methods/depth.coffee":106,"./methods/dev.coffee":107,"./methods/draw.js":108,"./methods/focus.coffee":109,"./methods/font.coffee":110,"./methods/format.coffee":111,"./methods/height.coffee":112,"./methods/history.coffee":113,"./methods/hover.coffee":114,"./methods/icon.coffee":115,
"./methods/id.coffee":116,"./methods/keywords.coffee":117,"./methods/margin.coffee":118,"./methods/open.coffee":119,"./methods/order.coffee":120,"./methods/remove.coffee":121,"./methods/search.coffee":122,"./methods/select.coffee":123,"./methods/selectAll.coffee":124,"./methods/text.coffee":125,"./methods/timing.coffee":126,"./methods/title.coffee":127,"./methods/type.coffee":128,"./methods/ui.coffee":129,"./methods/width.coffee":130,"./types/auto.js":131,"./types/button/button.coffee":132,"./types/drop/drop.coffee":137,"./types/toggle.js":154}],100:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Array,Function,Number,String],value:!1}},{"../../core/methods/filter.coffee":77}],101:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],mute:r(!0),solo:r(!0),value:"alt"}},{"../../core/methods/filter.coffee":77}],102:[function(e,t,n){t.exports={accepted:[String],value:"color"}},{}],103:[function(e,t,n){t.exports={accepted:[Object],objectAccess:!1,process:function(e,t){var n,r;for(n in e)r=e[n],n in t.self&&t.self[n](r);return e},value:{}}},{}],104:[function(e,t,n){var r;r=e("../../util/d3selection.coffee"),t.exports={accepted:[!1,Array,Object,String],element:!1,id:"default",process:function(e){return e===!1?d3.select("body"):r(e)?e:d3.select(e instanceof Array?e[0][0]:e)},value:d3.select("body")}},{"../../util/d3selection.coffee":202}],105:[function(e,t,n){var r=e("../../util/d3selection.coffee"),o=e("../../core/methods/process/data.coffee");t.exports={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},element:{process:function(e,t){var n=!1;return r(e)?n=e:"string"!=typeof e||d3.select(e).empty()||(n=d3.select(e)),n&&t.self.container(d3.select(n.node().parentNode)),n},value:!1},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],large:400,mute:[],process:function(e,t){return"default"===t.container.id&&e.length&&t.self.container({id:"default"+e.length}),o(e,t,this)},solo:[],sort:{accepted:[Boolean],value:!1},value:!1}},{"../../core/methods/process/data.coffee":83,"../../util/d3selection.coffee":202}],106:[function(e,t,n){t.exports={accepted:[Number],value:0}},{}],107:[function(e,t,n){t.exports={accepted:[Boolean],value:!1}},{}],108:[function(e,t,n){var r=e("../../util/d3selection.coffee"),o=e("../../core/parse/element.js"),i=e("../../core/console/print.coffee"),a=e("../../string/format.js");t.exports={accepted:[void 0,Function],first:!0,frozen:!1,process:function(e,t){if(this.initialized===!1)return this.initialized=!0,e;if(!t.data.value||t.data.value instanceof Array&&!r(t.data.value)||(t.data.value=o(t)),void 0===e&&"function"==typeof this.value&&(e=this.value),t.container.value===!1){var n=t.format.locale.value.dev.setContainer;i.warning(n,"container")}else if(t.container.value.empty()){var n=t.format.locale.value.dev.noContainer;i.warning(a(n,'"'+t.container.value+'"'),"container")}else t.dev.value&&i.time("total draw time"),t.container.value.call(t.self);if("function"==typeof e&&t.history.chain.length){var s={};changes.forEach(function(e){var t=e.method;delete e.method,s[t]=e}),e(s),t.history.chain=[]}return e},update:!0,value:void 0}},{"../../core/console/print.coffee":54,"../../core/parse/element.js":92,"../../string/format.js":167,"../../util/d3selection.coffee":202}],109:[function(e,t,n){t.exports={accepted:[!1,Number,String],deprecates:"highlight",process:function(e,t){var n,r,o,i,a,s,l,u,c,f;if(r=t.data.element.value,r&&["string","number"].indexOf(typeof e)>=0)if(o=r.node().tagName.toLowerCase(),i=r.attr("type"),"select"===o)for(f=r.selectAll("option"),a=s=0,u=f.length;u>s;a=++s)n=f[a],n&&n[t.id.value]===e&&(r.node().selectedIndex=a);else if("input"===o&&"radio"===i)for(l=0,c=r.length;c>l;l++)n=r[l],this.checked=n&&n[t.id.value]===e;return e},value:!1}},{}],110:[function(e,t,n){var r,o,i,a;i=e("../../core/methods/font/family.coffee"),r=e("../../core/methods/font/align.coffee"),o=e("../../core/methods/font/decoration.coffee"),a=e("../../core/methods/font/transform.coffee"),t.exports={align:r(),color:"#444444",decoration:o(),family:i(),secondary:{align:r(),color:"#444444",decoration:o(),family:i(),size:12,spacing:0,transform:a(),weight:200},size:12,spacing:0,transform:a(),weight:200}},{"../../core/methods/font/align.coffee":78,"../../core/methods/font/decoration.coffee":79,"../../core/methods/font/family.coffee":80,"../../core/methods/font/transform.coffee":82}],111:[function(e,t,n){var r,o,i,a;r=e("../../number/format.coffee"),o=e("../../core/locale/locale.coffee"),i=e("../../object/merge.coffee"),a=e("../../string/title.coffee"),t.exports={accepted:[Function,String],affixes:{accepted:[Object],objectAccess:!1,value:{}},deprecates:["number_format","text_format"],locale:{accepted:function(){return d3.keys(o)},process:function(e){var t,n;return t="en_US",n=o[t],e!==t&&(n=i(n,o[e])),this.language=e,n},value:"en_US"},number:{accepted:[!1,Function],value:!1},process:function(e,t){if("string"==typeof e)t.self.format({locale:e});else if("function"==typeof e)return e;return this.value},text:{accepted:[!1,Function],value:!1},value:function(e,t){var n,o,i;return t||(t={}),i=t.vars||{},i.time&&i.time.value&&t.key===i.time.value?(o=e.constructor===Date?e:new Date(e),i.data.time.format(o)):"number"==typeof e?(n=this.number.value||r)(e,t):"string"==typeof e?(n=this.text.value||a)(e,t):JSON.stringify(e)}}},{"../../core/locale/locale.coffee":75,"../../number/format.coffee":164,"../../object/merge.coffee":165,"../../string/title.coffee":170}],112:[function(e,t,n){t.exports={accepted:[!1,Number],max:600,secondary:!1,value:!1}},{}],113:[function(e,t,n){t.exports={back:function(){return this.states.length?this.states.pop()():void 0},chain:[],reset:function(){var e;for(e=[];this.states.length;)e.push(this.states.pop()());return e},states:[]}},{}],114:[function(e,t,n){t.exports={accepted:[Boolean,Number,String],value:!1}},{}],115:[function(e,t,n){var r;r=e("../../core/methods/process/icon.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:r,rotate:0,value:"fa-angle-left"},button:{accepted:[!1,String],fallback:!1,opacity:1,process:r,rotate:0,value:!1},drop:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:r,rotate:0,value:"fa-angle-down"},next:{accepted:[!1,String],fallback:"&#x276f;",opacity:1,process:r,rotate:0,value:"fa-angle-right"},select:{accepted:[!1,String],fallback:"&#x2713;",opacity:1,process:r,rotate:0,value:"fa-check"},style:{accepted:[Object,String],value:"default"},value:"icon"}},{"../../core/methods/process/icon.coffee":85}],116:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[Array,String],dataFilter:!0,mute:r(!0),nesting:["value"],solo:r(!0),value:"value"}},{"../../core/methods/filter.coffee":77}],117:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],mute:r(!0),solo:r(!0),value:"keywords"}},{"../../core/methods/filter.coffee":77}],118:[function(e,t,n){var r;r=e("../../core/methods/process/margin.coffee"),t.exports={accepted:[Number,Object,String],process:function(e){var t;return void 0===e&&(e=this.value),t=e,r(e,this),t},value:0}},{"../../core/methods/process/margin.coffee":86}],119:[function(e,t,n){t.exports={accepted:[Boolean],flipped:{accepted:[Boolean],value:!1},value:!1}},{}],120:[function(e,t,n){t.exports={accepted:[!1,Function,String],sort:{accepted:["asc","desc"],deprecates:["sort"],value:"asc"},value:!1}},{}],121:[function(e,t,n){t.exports={accepted:void 0,process:function(e,t){this.initialized&&t.container.value.remove()},value:void 0}},{}],122:[function(e,t,n){t.exports={accepted:["auto",Boolean],process:function(e){return"Boolean"==typeof e&&(this.enabled=e),e},term:"",value:"auto"}},{}],123:[function(e,t,n){t.exports={accepted:[String],chainable:!1,process:function(e,t){var n;return n=t.container.value,n&&e?n.select(e):e},value:void 0}},{}],124:[function(e,t,n){t.exports={accepted:[String],chainable:!1,process:function(e,t){var n;return n=t.container.value,n&&e?n.selectAll(e):e},value:void 0}},{}],125:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,String],nesting:!0,mute:r(!0),solo:r(!0),secondary:{accepted:[!1,String],nesting:!0,value:!1},value:!1}},{"../../core/methods/filter.coffee":77}],126:[function(e,t,n){t.exports={mouseevents:60,ui:200}},{}],127:[function(e,t,n){var r,o,i,a;r=e("../../core/methods/font/decoration.coffee"),o=e("../../core/methods/font/family.coffee"),a=e("../../core/methods/font/transform.coffee"),i=e("../../string/strip.js"),t.exports={accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:r(),family:o(),size:16,transform:a(),weight:400},link:!1,process:function(e,t){var n;return 0===t.container.id.indexOf("default")&&e&&(n=i(e).toLowerCase(),t.self.container({id:n})),e},value:!1}},{"../../core/methods/font/decoration.coffee":79,"../../core/methods/font/family.coffee":80,"../../core/methods/font/transform.coffee":82,"../../string/strip.js":169}],128:[function(e,t,n){t.exports={accepted:function(e){return d3.keys(e.types)},value:"auto"}},{}],129:[function(e,t,n){var r,o,i,a,s;i=e("../../core/methods/font/family.coffee"),r=e("../../core/methods/font/align.coffee"),o=e("../../core/methods/font/decoration.coffee"),a=e("../../core/methods/process/margin.coffee"),s=e("../../core/methods/font/transform.coffee"),t.exports={align:r("center"),border:1,color:{primary:{process:function(e,t){var n;return n=this.value,t.ui.color.secondary.value||(t.ui.color.secondary.value=d3.rgb(n).darker(.75).toString()),e},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:r("center"),color:"#444",decoration:o(),family:i(),size:11,transform:s(),weight:200},margin:{process:function(e){var t;return void 0===e&&(e=this.value),t=e,a(e,this),t},value:5},padding:{process:function(e){var t;return void 0===e&&(e=this.value),t=e,a(e,this),t},value:5}}},{"../../core/methods/font/align.coffee":78,"../../core/methods/font/decoration.coffee":79,"../../core/methods/font/family.coffee":80,"../../core/methods/font/transform.coffee":82,"../../core/methods/process/margin.coffee":86}],130:[function(e,t,n){t.exports={accepted:[!1,Number],secondary:!1,value:!1}},{}],131:[function(e,t,n){t.exports=function(e){var t=e.data.value.length;1===t?e.self.type("button").draw():5>t?e.self.type("toggle").draw():e.self.type("drop").draw()}},{}],132:[function(e,t,n){t.exports=function(t){var n,r,o,i,a,s,l,u;return s=e("../../../core/console/print.coffee"),o=e("./functions/color.coffee"),i=e("./functions/icons.js"),a=e("./functions/mouseevents.coffee"),l=e("./functions/style.js"),n=t.container.ui.selectAll("div.d3plus_node").data(t.data.viz,function(e){return e[t.id.value]}),t.dev.value&&s.time("enter"),n.enter().append("div").attr("class","d3plus_node").call(o,t).call(l,t).call(i,t).call(a,t),t.dev.value&&s.timeEnd("enter"),t.draw.update||t.draw.timing?(t.dev.value&&s.time("ordering"),n.order(),t.dev.value&&s.timeEnd("ordering"),u=n):(r=[t.focus.previous,t.focus.value,t.hover.previous,t.hover.value].filter(function(e){return e}),u=n.filter(function(e){return r.indexOf(e[t.id.value])>=0})),t.dev.value&&s.time("update"),t.draw.timing?u.transition().duration(t.draw.timing).call(o,t).call(l,t):u.call(o,t).call(l,t),u.call(i,t).call(a,t),t.dev.value&&s.timeEnd("update"),n.exit().remove()}},{"../../../core/console/print.coffee":54,"./functions/color.coffee":133,"./functions/icons.js":134,"./functions/mouseevents.coffee":135,"./functions/style.js":136}],133:[function(e,t,n){t.exports=function(t,n){var r,o,i;return r=e("../../../../color/legible.coffee"),o=e("../../../../color/lighter.coffee"),i=e("../../../../color/text.coffee"),t.style("background-color",function(e){var t;return t=n.focus.value===e[n.id.value]?n.ui.color.secondary.value:n.ui.color.primary.value,n.hover.value===e[n.id.value]&&(t=d3.rgb(t).darker(.15).toString()),t}).style("color",function(e){var t,o,a;return a=n.focus.value===e[n.id.value]?.75:1,o=e[n.icon.value]&&n.data.viz.length<n.data.large,t=!o&&e[n.color.value]?r(e[n.color.value]):i(d3.select(this).style("background-color")),t=d3.rgb(t),"rgba("+t.r+","+t.g+","+t.b+","+a+")"}).style("border-color",n.ui.color.secondary.value)}},{"../../../../color/legible.coffee":46,"../../../../color/lighter.coffee":47,"../../../../color/text.coffee":52}],134:[function(e,t,n){var r=e("../../../../client/prefix.coffee"),o=e("../../../../client/rtl.coffee");t.exports=function(e,t){var n="right"===t.font.align.value&&!o||o&&"right"===t.font.align.value;e.each(function(e,i){var a=["label"];e[t.icon.value]&&t.data.viz.length<=t.data.large&&a.push("icon");var s=t.icon.button.value;e[t.id.value]===t.focus.value&&t.icon.select.value?(s=t.icon.select.value,a.push("selected")):s&&e.d3plus.icon!==!1&&a.push("selected");var l=0,u=d3.select(this).selectAll("div.d3plus_button_element").data(a,function(e){return e});u.enter().append("div").style("display",function(e){return"label"===e?"block":"absolute"}),u.order().attr("class",function(e){var t="";return"selected"===e&&0===s.indexOf("fa-")&&(t=" fa "+s),"d3plus_button_element d3plus_button_"+e+t}).html(function(n){if("label"===n){var r=t.text.value&&t.text.value in e&&!(e[t.text.value]instanceof Array)?t.text.value:t.id.value;return t.format.value(e[r])}return"selected"===n&&s.indexOf("fa-")<0?s:""}).style("background-image",function(n){return"icon"===n?"url('"+e[t.icon.value]+"')":"none"}).style("background-color",function(n){return"icon"===n&&"knockout"===e.style?e[t.color.value]||t.ui.color.primary.value:"transparent"}).style("background-size","100%").style("text-align",function(e){return"label"===e?t.font.align.value:"center"}).style("position",function(e){return"label"==e?"static":"absolute"}).style("width",function(e){return"label"===e?"auto":(l=t.height.value?t.height.value-(t.ui.padding.top+t.ui.padding.bottom)-2*t.ui.border:t.font.size+t.ui.border,l+"px")}).style("height",function(e){return"icon"===e?l+"px":"auto"}).style("margin-top",function(e){if("label"===e)return"0px";if(this.offsetHeight||this.getBoundingClientRect().height)var n=this.offsetHeight||this.getBoundingClientRect().height;else if("selected"===e)var n=t.font.size;else var n=l;return-n/2+"px"}).style("top",function(e){return"label"===e?"auto":"50%"}).style("left",function(e){return"icon"===e&&!n||"selected"===e&&n?t.ui.padding.left+"px":"auto"}).style("right",function(e){return"icon"===e&&n||"selected"===e&&!n?t.ui.padding.right+"px":"auto"}).style(r()+"transition",function(e){return"selected"===e?t.draw.timing/1e3+"s":"none"}).style(r()+"transform",function(e){var n="selected"===e?t.icon.select.rotate:"none";return"string"==typeof n?n:"rotate("+n+"deg)"}).style("opacity",function(e){return"selected"===e?t.icon.select.opacity:1}),u.exit().remove();var c=d3.select(this).selectAll(".d3plus_button_label");if(l>0){var f=t.ui.padding;f=3===a.length?f.top+"px "+(2*f.right+l)+"px "+f.bottom+"px "+(2*f.left+l)+"px":a.indexOf("icon")>=0&&!o||a.indexOf("selected")>=0&&o?f.top+"px "+f.right+"px "+f.bottom+"px "+(2*f.left+l)+"px":f.top+"px "+(2*f.right+l)+"px "+f.bottom+"px "+f.left+"px",c.style("padding",f)}else c.style("padding",t.ui.padding.css);if("number"==typeof t.width.value){var d=t.width.value;d-=parseFloat(c.style("padding-left"),10),d-=parseFloat(c.style("padding-right"),10),d-=2*t.ui.border,d+="px"}else var d="auto";c.style("width",d)})}},{"../../../../client/prefix.coffee":42,"../../../../client/rtl.coffee":43}],135:[function(e,t,n){t.exports=function(t,n,r){var o,i;return r=e("./color.coffee"),o=e("../../../../client/pointer.coffee"),i=e("../../../../client/ie.js"),t.on(o.over,function(e,t){return n.self.hover(e[n.id.value]),i||!n.draw.timing?d3.select(this).style("cursor","pointer").call(r,n):d3.select(this).style("cursor","pointer").transition().duration(n.timing.mouseevents).call(r,n)}).on(o.out,function(e){return n.self.hover(!1),i||!n.draw.timing?d3.select(this).style("cursor","auto").call(r,n):d3.select(this).style("cursor","auto").transition().duration(n.timing.mouseevents).call(r,n)}).on(o.click,function(e){return n.self.focus(e[n.id.value]).draw()})}},{"../../../../client/ie.js":40,"../../../../client/pointer.coffee":41,"./color.coffee":133}],136:[function(e,t,n){t.exports=function(e,t){e.style("position","relative").style("margin",t.ui.margin.css).style("display",t.ui.display.value).style("border-style","solid").style("border-width",t.ui.border+"px").style("font-family",t.font.family.value).style("font-size",t.font.size+"px").style("font-weight",t.font.weight).style("letter-spacing",t.font.spacing+"px")}},{}],137:[function(e,t,n){t.exports=function(t){var n,r,o,i,a,s,l,u,c,f,d;return o=e("./functions/element.coffee"),i=e("./functions/keyboard.coffee"),d=e("./functions/window.js"),f=e("./functions/width.js"),n=e("./functions/button.js"),l=e("./functions/selector.js"),u=e("./functions/title.js"),s=e("./functions/search.js"),a=e("./functions/list.js"),r=e("./functions/data.js"),c=e("./functions/update.js"),t.margin.top=0,t.margin.title=0,o(t),i(t),d(t),f(t),n(t),l(t),u(t),s(t),a(t),r(t),c(t)}},{"./functions/button.js":140,"./functions/data.js":141,"./functions/element.coffee":142,"./functions/keyboard.coffee":145,"./functions/list.js":146,"./functions/search.js":148,"./functions/selector.js":149,"./functions/title.js":150,"./functions/update.js":151,"./functions/width.js":152,"./functions/window.js":153}],138:[function(e,t,n){t.exports=function(e,t,n){var r=[],n=n||e.active.value;if(n instanceof Array)for(var o=0;o<n.length;o++)r.push(this(e,t,n[o]));else{var i=typeof n;r.push("number"===i?e.depth.value===n:"function"===i?n(t):t===n)}return r.indexOf(!0)>=0}},{}],139:[function(e,t,n){var r=e("../../../../core/console/print.coffee");t.exports=function(e){e.dev.value&&r.time("rotating arrow");var t="&#x276f;"===e.icon.drop.value?90:0;if(e.open.value!=e.open.flipped.value)var n=180+t;else var n=t;e.container.button.icon({select:{opacity:e.open.value?.5:1,rotate:n}}).draw(),e.dev.value&&r.timeEnd("rotating arrow")}},{"../../../../core/console/print.coffee":54}],140:[function(e,t,n){var r=e("../../../../util/copy.coffee"),o=e("../../../../client/pointer.coffee"),i=e("../../../form.js"),a=e("../../../../core/console/print.coffee");t.exports=function(e){if("button"in e.container||(e.dev.value&&a.time("creating main button"),e.container.button=i().container(e.container.ui).type("button").ui({margin:0}),e.dev.value&&a.timeEnd("creating main button")),e.focus.changed||e.data.changed||e.depth.changed){var t=e.depth.value,n=r(e.data.value.filter(function(n){for(var r=!1,o=0;o<e.id.nesting.length;o++){var i=e.id.nesting[o];if(r=i in n&&n[i]===e.focus.value){t=o;break}}return r})[0]);n||(n=e.container.button.data()[0]||e.data.viz[0]),e.container.button.data([n]).id(e.id.nesting).depth(t)}var s=e.hover.value===!0?e.focus.value:!1;e.container.button.draw({update:e.draw.update}).focus("").font(e.font).hover(s).icon({button:e.icon.drop.value,select:e.icon.drop.value,value:e.icon.value}).text(e.text.value).timing({ui:e.draw.timing}).ui({color:e.ui.color,padding:e.ui.padding.css}).width(e.width.value).draw();var l=e.container.button.container(Object).ui;e.margin.top+=l.node().offsetHeight||l.node().getBoundingClientRect().height,l.on(o.click,function(){e.self.open(!e.open.value).draw()})}},{"../../../../client/pointer.coffee":41,"../../../../core/console/print.coffee":54,"../../../../util/copy.coffee":201,"../../../form.js":99}],141:[function(e,t,n){var r=e("../../../../string/format.js"),o=e("../../../../string/strip.js");t.exports=function(e){if(e.data.url&&!e.data.loaded){var t={};t[e.text.value||e.id.value]=e.format.value(e.format.locale.value.ui.loading),e.data.filtered=[t],e.data.changed="loading"!==e.data.lastFilter,e.data.lastFilter="loading"}else if(e.open.value)if(e.search.term){var n=o(e.search.term).split("_"),i=[e.id.value,e.text.value,e.alt.value,e.keywords.value];i=i.filter(function(e){return e}),n=n.filter(function(e){return""!==e});var a=[],s=[],l=[],u=[];if(e.id.nesting.forEach(function(t){u=u.concat(e.data.nested.all[t])}),u.forEach(function(t){var r=!1;i.forEach(function(i){if(!r&&i in t&&"string"==typeof t[i]){var u=t[i].toLowerCase();if([e.text.value,e.id.value].indexOf(i)>=0&&0===u.indexOf(e.search.term))a.push(t),r=!0;else if(u.indexOf(e.search.term)>=0)s.push(t),r=!0;else{var c=o(u).split("_");for(var f in c){if(r)break;for(var d in n)if(0===c[f].indexOf(n[d])){l.push(t),r=!0;break}}}}})}),e.data.filtered=d3.merge([a,s,l]),e.data.filtered.forEach(function(e,t){e.d3plus_order=t}),e.data.changed=!0,e.data.lastFilter="search",0===e.data.filtered.length){var c={},f=e.format.value(e.format.locale.value.ui.noResults);c[e.text.value||e.id.value]=r(f,'"'+e.search.term+'"'),e.data.filtered=[c]}}else e.data.filtered=e.data.viz,e.data.changed="viz"!==e.data.lastFilter,e.data.lastFilter="viz",e.id.nesting.length>1&&e.depth.value<e.id.nesting.length-1&&(e.data.filtered=e.data.filtered.filter(function(t){return"endPoint"in t.d3plus&&t.d3plus.endPoint===e.depth.value&&(t.d3plus.icon=!1),!0}),e.data.changed="depth"!==e.data.lastFilter,e.data.lastFilter="depth");else e.data.filtered=[]}},{"../../../../string/format.js":167,"../../../../string/strip.js":169}],142:[function(e,t,n){t.exports=function(e){return e.data.element.value?(e.data.element.value.on("focus."+e.container.id,function(){return e.self.hover(!0).draw()}),e.data.element.value.on("blur."+e.container.id,function(){var t;return t=e.search.enabled?d3.event.relatedTarget!==e.container.value.select("input").node():!0,t?e.self.open(!1).hover(!1).draw():void 0}),e.data.element.value.on("change."+e.container.id,function(){return e.self.focus(this.value).draw()}),e.data.element.value.on("keydown.cancel_"+e.container.id,function(){return 9!==d3.event.keyCode?d3.event.preventDefault():void 0})):void 0}},{}],143:[function(e,t,n){t.exports=function(e){var t=e.height.secondary,n=e.container.button.container().node().getBoundingClientRect(),r=window.innerHeight-n.bottom-2*e.ui.border-e.ui.margin.top-e.ui.margin.bottom-e.ui.padding.top-e.ui.padding.bottom;r<3*n.height&&(r=n.top-10,e.self.open({flipped:!0})),"number"!=typeof t&&(t=r),t>e.height.max&&(t=e.height.max),e.self.height({secondary:t})}},{}],144:[function(e,t,n){var r,o,i,a;r=e("./active.js"),o=e("../../../../util/copy.coffee"),i=e("../../../form.js"),a=e("../../../../core/console/print.coffee"),t.exports=function(e){var t,n,s;e.open.value&&(e.dev.value&&a.time("updating list items"),"items"in e.container||(e.container.items=i().container(e.container.list).type("button").ui({border:0,display:"block",margin:0}).width(!1)),n=e.draw.timing?e.data.large:1,s=o(e.order),s.value=e.search.term.length?"d3plus_order":e.order.value,t=e.depth.value===e.id.nesting.length-1,(e.focus.changed||e.container.items.focus()===!1)&&e.container.items.focus(e.focus.value,function(t){var n,o,i,a;o=e.data.filtered.filter(function(n){return n[e.id.value]===t})[0],e.depth.value<e.id.nesting.length-1&&e.id.nesting[e.depth.value+1]in o?(i=e.depth.value,a=e.id.solo.value,e.history.states.push(function(){return e.self.depth(i).id({solo:a}).draw()}),e.self.depth(e.depth.value+1).id({solo:[t]}).draw()):(e.depth.changed||e.self.open(!1),n=t!==e.focus.value,n&&e.active.value&&(n=r(e,t)),n&&e.self.focus(t).draw())}),e.data.changed&&e.container.items.data({large:n,value:e.data.filtered}),e.container.items.active(e.active.value).data({sort:e.data.sort.value}).draw({update:e.draw.update}).font(e.font.secondary).hover(e.hover.value).id(e.id.value).icon({button:t?!1:e.icon.next,select:t?e.icon.select:!1,value:e.icon.value}).order(s).text(e.text.secondary.value||e.text.value).timing({ui:e.draw.timing}).ui({color:{primary:1===e.id.nesting.length?e.ui.color.primary.value:e.ui.color.secondary.value,secondary:e.ui.color.secondary.value},padding:e.ui.padding.css}).draw(),e.dev.value&&a.timeEnd("updating list items"))}},{"../../../../core/console/print.coffee":54,"../../../../util/copy.coffee":201,"../../../form.js":99,"./active.js":138}],145:[function(e,t,n){t.exports=function(e){return d3.select(window).on("keydown."+e.container.id,function(){var t,n,r,o,i,a,s,l,u,c,f,d,p;if(u=d3.event.keyCode,e.open.value||e.hover.value===!0){for(f=e.hover.value===!0?"focus":"hover",s=!1,d=e.data.filtered,a=l=0,c=d.length;c>l;a=++l)if(t=d[a],t[e.id.value]===e[f].value){s=a;break}if(9===u&&e.open.value&&(!e.search.enabled||e.search.enabled&&!d3.event.shiftKey))return e.self.open(!1).hover(!1).draw();if([38,40].indexOf(u)>=0)return s===!1?s=0:38===u?e.open.value&&(0>=s?s=e.data.filtered.length-1:s-=1):40===u&&e.open.value&&(s>=e.data.filtered.length-1?s=0:s+=1),i="boolean"!=typeof e.hover.value?e.data.filtered[s][e.id.value]:e.focus.value,e.self.hover(i).open(!0).draw();if(13===u)return"boolean"!=typeof e.hover.value?(n=e.data.filtered.filter(function(t){return t[e.id.value]===e.hover.value})[0],r=e.depth.value,r<e.id.nesting.length-1&&e.id.nesting[r+1]in n?(p=e.id.solo.value,o=function(){return e.self.depth(r).id({solo:p}).draw()},e.history.states.push(o),e.self.depth(e.depth.value+1).id({solo:[e.hover.value]}).draw()):e.self.focus(e.hover.value).hover(!0).draw()):e.self.hover(e.focus.value).open(!0).draw();if(27===u){if(e.open.value)return e.self.open(!1).hover(!0).draw();if(e.hover.value===!0)return e.self.hover(!1).draw()}}})}},{}],146:[function(e,t,n){var r=e("../../../../core/console/print.coffee");t.exports=function(e){e.dev.value&&r.time("populating list"),e.container.list=e.container.selector.selectAll("div.d3plus_drop_list").data(["list"]),e.container.list.enter().append("div").attr("class","d3plus_drop_list").attr("id","d3plus_drop_list_"+e.container.id).style("overflow-y","auto").style("overflow-x","hidden"),e.dev.value&&r.timeEnd("populating list")}},{"../../../../core/console/print.coffee":54}],147:[function(e,t,n){var r=e("../../../../core/console/print.coffee");t.exports=function(e){if(e.open.value){e.dev.value&&r.time("calculating height");var t=!1;if("none"==e.container.selector.style("display"))var t=!0;t&&e.container.selector.style("display","block");var n=e.container.selector.style("height"),o=e.container.selector.property("scrollTop"),i=e.container.list.style("max-height"),a=e.container.list.property("scrollTop");e.container.selector.style("height","auto"),e.container.list.style("max-height","200000px"),e.container.listHeight=parseFloat(e.container.selector.style("height"),10),e.container.list.style("max-height",i).property("scrollTop",a),e.container.selector.style("height",n).property("scrollTop",o);var s=!1;if(e.container.listHeight>e.height.secondary&&(e.container.listHeight=e.height.secondary,s=!0),t&&e.container.selector.style("display","none"),e.dev.value&&r.timeEnd("calculating height"),s){e.dev.value&&r.time("calculating scroll position");var l=e.container.list.select("div").selectAll("div.d3plus_node"),u=l[0][0],c="boolean"!=typeof e.hover.value?e.hover.value:e.focus.value;l.each(function(t,n){t[e.id.value]===c&&(u=this)});var t=!1;"none"===e.container.selector.style("display")&&(t=!0,e.container.selector.style("display","block"));var f=u.offsetTop,d=u.offsetHeight||u.getBoundingClientRect().height,p=e.container.list.property("scrollTop");t&&e.container.selector.style("display","none"),t||e.data.changed||e.depth.changed?e.container.listScroll=f:(e.container.listScroll=p,p>f?e.container.listScroll=f:f+d>p+e.height.secondary-e.search.height&&(e.container.listScroll=f-(e.height.secondary-d-e.search.height))),e.dev.value&&r.timeEnd("calculating scroll position")}else e.container.listScroll=0}else e.container.listScroll=e.container.list.property("scrollTop"),e.container.listHeight=0}},{"../../../../core/console/print.coffee":54}],148:[function(e,t,n){var r=e("../../../../client/prefix.coffee"),o=e("../../../../core/console/print.coffee");t.exports=function(t){function n(e){e.style("padding",t.ui.padding.css).style("display","block").style("background-color",d3.rgb(t.ui.color.primary.value).darker(.15).toString())}function i(e){var n=t.width.secondary-2*t.ui.padding.left-2*t.ui.padding.right+2*t.ui.border;e.style("padding",t.ui.padding.left/2+t.ui.padding.right/2+"px").style("width",n+"px").style("border-width","0px").style("font-family",t.font.secondary.family.value).style("font-size",t.font.secondary.size+"px").style("font-weight",t.font.secondary.weight).style("text-align",t.font.secondary.align).style("outline","none").style(r()+"border-radius","0").attr("placeholder",t.format.value(t.format.locale.value.method.search))}t.dev.value&&o.time("creating search");var a=e("./data.js"),s=e("./items.coffee"),l=e("./update.js");t.container.search=t.container.selector.selectAll("div.d3plus_drop_search").data(t.search.enabled?["search"]:[]),t.draw.timing?(t.container.search.transition().duration(t.draw.timing).call(n),t.container.search.select("input").transition().duration(t.draw.timing).call(i)):(t.container.search.call(n),t.container.search.select("input").call(i)),t.container.search.enter().insert("div","#d3plus_drop_list_"+t.container.id).attr("class","d3plus_drop_search").attr("id","d3plus_drop_search_"+t.container.id).call(n).append("input").attr("id","d3plus_drop_input_"+t.container.id).style("-webkit-appearance","none").call(i),t.container.search.select("input").on("keyup."+t.container.id,function(e){var n=this.value;t.search.term!==n&&(t.search.term=n,a(t),s(t),l(t))}),t.container.search.exit().remove();var u=t.container.selector.style("display");t.container.selector.style("display","block"),t.search.height=t.search.enabled?t.container.search.node().offsetHeight||t.container.search.node().getBoundingClientRect().height:0,t.container.selector.style("display",u),t.search.enabled&&(t.margin.title+=t.search.height),t.dev.value&&o.timeEnd("creating search")}},{"../../../../client/prefix.coffee":42,"../../../../core/console/print.coffee":54,"./data.js":141,"./items.coffee":144,"./update.js":151}],149:[function(e,t,n){t.exports=function(e){e.container.selector=e.container.ui.selectAll("div.d3plus_drop_selector").data(["selector"]),e.container.selector.enter().append("div").attr("class","d3plus_drop_selector").style("position","absolute").style("top","0px").style("z-index","-1").style("overflow","hidden"),e.container.selector.style("padding",e.ui.border+"px")}},{}],150:[function(e,t,n){var r=e("../../../../client/pointer.coffee"),o=e("../../../../color/lighter.coffee"),i=e("../../../../core/console/print.coffee"),a=e("../../../../color/text.coffee");t.exports=function(e){function t(t){t.style("padding",e.ui.padding.css).style("display","block").style("background-color",e.ui.color.secondary.value).style("font-family",e.font.secondary.family.value).style("font-size",e.font.secondary.size+"px").style("font-weight",e.font.secondary.weight).style("text-align",e.font.secondary.align).style("color",a(e.ui.color.secondary.value))}function n(t){if(!t.empty()){var n=0===e.icon.back.value.indexOf("fa-")?" fa "+e.icon.back.value:"";n="d3plus_drop_back"+n;var r=0===e.icon.back.value.indexOf("fa-")?"":e.icon.back.value;t.style("position","absolute").attr("class",n).style("top",e.ui.padding.top+e.font.secondary.size/2/2.5+"px").html(r)}}function s(t){var n=u?e.focus.value:e.format.locale.value.ui.back;t.text(e.format.value(n)).style("padding","0px "+(e.ui.padding.left+e.ui.padding.right)+"px")}if(e.open.value){e.dev.value&&i.time("creating title and back button");var l=1===e.id.solo.value.length&&e.depth.value>0,u=l,c=e.container.button.data(Object).viz[0];u=!0;for(var f=0;f<e.id.nesting.length;f++){var d=e.id.nesting[f];if(d in c&&c[d]===e.focus.value){u=!1;break}}e.container.title=e.container.selector.selectAll("div.d3plus_drop_title").data(l?["title"]:[]),e.draw.timing?(e.container.title.transition().duration(e.draw.timing).call(t),e.container.title.select("div.d3plus_drop_title_text").transition().duration(e.draw.timing).call(s)):(e.container.title.call(t),
e.container.title.select("div.d3plus_drop_title_text").call(s)),e.container.title.select("span.d3plus_drop_back").call(n);var p=e.container.title.enter().insert("div","#d3plus_drop_list_"+e.container.id).attr("class","d3plus_drop_title").attr("id","d3plus_drop_title_"+e.container.id).call(t);p.append("span").attr("id","d3plus_drop_back_"+e.container.id).attr("class","d3plus_drop_back").call(n),p.append("div").attr("id","d3plus_drop_title_text_"+e.container.id).attr("class","d3plus_drop_title_text").call(s),e.container.title.on(r.over,function(t,n){var r=o(e.ui.color.secondary.value);d3.select(this).style("cursor","pointer").transition().duration(e.timing.mouseevents).style("background-color",r).style("color",a(r))}).on(r.out,function(t){var n=e.ui.color.secondary.value;d3.select(this).style("cursor","auto").transition().duration(e.timing.mouseevents).style("background-color",n).style("color",a(n))}).on(r.click,function(t){e.history.back()}),e.container.title.exit().remove(),l&&(e.margin.title+=e.container.title.node().offsetHeight||e.container.title.node().getBoundingClientRect().height),e.dev.value&&i.timeEnd("creating title and back button")}}},{"../../../../client/pointer.coffee":41,"../../../../color/lighter.coffee":47,"../../../../color/text.coffee":52,"../../../../core/console/print.coffee":54}],151:[function(e,t,n){var r=e("./items.coffee"),o=e("./height.js"),i=e("../../../../core/console/print.coffee"),a=e("./scroll.js"),s=e("./arrow.js");t.exports=function(e){function t(t){var n=e.open.flipped.value;t.style("top",function(){return n?"auto":e.margin.top-e.ui.border+"px"}).style("bottom",function(){return n?e.margin.top+e.ui.border+"px":"auto"})}function n(n){n.style("left",function(){return"left"===e.font.align.value?e.margin.left+"px":"center"===e.font.align.value?e.margin.left-(e.width.secondary-e.width.value)/2+"px":"auto"}).style("right",function(){return"right"===e.font.align.value?"0px":"auto"}).style("height",e.container.listHeight+"px").style("padding",e.ui.border+"px").style("background-color",e.ui.color.secondary.value).style("z-index",function(){return e.open.value?"9999":"-1"}).style("width",e.width.secondary-2*e.ui.border+"px").style("opacity",e.open.value?1:0).call(t)}function l(n){n.style("display",e.open.value?null:"none").call(t),e.search.enabled&&e.open.value&&e.container.selector.select("div.d3plus_drop_search input").node().focus()}function u(e){return function(){var t=d3.interpolateNumber(this.scrollTop,e);return function(e){this.scrollTop=t(e)}}}e.draw.timing?e.container.ui.transition().duration(e.draw.timing).each("start",function(){e.open.value&&d3.select(this).style("z-index",9999)}).style("margin",e.ui.margin.css).each("end",function(){e.open.value||d3.select(this).style("z-index","auto")}):e.container.ui.style("margin",e.ui.margin.css).style("z-index",function(){return e.open.value?9999:"auto"}),r(e),o(e),a(e),s(e),e.dev.value&&i.time("drawing list");var c=e.open.value?e.height.secondary-e.margin.title:0;e.draw.timing?(e.container.selector.transition().duration(e.draw.timing).each("start",function(){d3.select(this).style("display",e.open.value?"block":null)}).call(n).each("end",function(){d3.select(this).transition().duration(e.draw.timing).call(l)}),e.container.list.transition().duration(e.draw.timing).style("width",e.width.secondary-2*e.ui.border+"px").style("max-height",c+"px").tween("scroll",u(e.container.listScroll))):(e.container.selector.call(n).call(l),e.container.list.style("width",e.width.secondary-2*e.ui.border+"px").style("max-height",c+"px").property("scrollTop",e.container.listScroll)),e.dev.value&&i.timeEnd("drawing list")}},{"../../../../core/console/print.coffee":54,"./arrow.js":139,"./height.js":143,"./items.coffee":144,"./scroll.js":147}],152:[function(e,t,n){var r=e("../../../../util/copy.coffee"),o=e("../../../../core/font/tester.coffee"),i=e("../../../form.js"),a=e("../../../../core/console/print.coffee"),s=e("../../../../object/validate.coffee");t.exports=function(e){function t(t){var r="primary"===t?"value":t,s="value"===r?e.icon.drop.value:e.icon.select.value||e.icon.drop.value,l="value"===r?e.text.value:e.text.secondary.value||e.text.value,u="value"===r?e.font:e.font.secondary;e.dev.value&&a.time("calculating "+t+" width");var c=i().container(o()).data({large:9999,value:n}).draw({update:!1}).font(u).icon({button:s,value:e.icon.value}).id(e.id.value).timing({ui:0}).text(l||e.id.value).type("button").ui({border:"primary"===t?e.ui.border:0,display:"inline-block",margin:0,padding:e.ui.padding.css}).width(!1).draw(),f=[];c.selectAll("div.d3plus_node").each(function(e){f.push(this.offsetWidth+1)}).remove();var d={};d[r]=d3.max(f),e.self.width(d),e.dev.value&&a.timeEnd("calculating "+t+" width")}var n=[];for(var l in e.data.nested.all){var u=e.data.nested.all[l],c=s(e.text.nesting)&&l in e.text.nesting?e.text.nesting[l][0]:l;[e.id.value,e.text.value].indexOf(c)<0&&(u=r(u),u.forEach(function(t){t[e.text.value||e.id.value]=t[c]})),n=n.concat(u)}"number"!=typeof e.width.value&&t("primary"),"number"!=typeof e.width.secondary&&(e.text.secondary.value&&e.text.value!==e.text.secondary.value?t("secondary"):e.self.width({secondary:e.width.value}))}},{"../../../../core/console/print.coffee":54,"../../../../core/font/tester.coffee":70,"../../../../object/validate.coffee":166,"../../../../util/copy.coffee":201,"../../../form.js":99}],153:[function(e,t,n){var r=e("../../../../util/child.coffee"),o=function(e,t){if(void 0===t)var t=window;d3.select(t).on("click."+e.container.id,function(){var t=d3.event.target||d3.event.toElement,n=t.parentNode;n&&["d3plus_node","d3plus_drop_title"].indexOf(n.className)>=0&&(t=n.parentNode),t&&n&&!r(e.container.ui,t)&&(e.open.value||e.hover.value)&&e.self.open(!1).hover(!1).draw()});try{var n=window.parent.location.host===window.location.host}catch(i){var n=!1}n&&t.self!==window.top&&o(e,t.parent)};t.exports=o},{"../../../../util/child.coffee":199}],154:[function(e,t,n){var r=e("../form.js");t.exports=function(e){"buttons"in e.container||(e.container.buttons=r().container(e.container.ui).type("button"));var t=e.data.viz.length,n=e.width.value?e.width.value/t:!1,o=e.container.ui.selectAll("div.d3plus_toggle").data(e.data.viz,function(t){return t[e.id.value]});o.enter().append("div").attr("class","d3plus_toggle").style("display","inline-block").style("vertical-align","top"),o.order().each(function(t){"form"in t.d3plus||(t.d3plus.form=r().container(d3.select(this)));var o=e.id.nesting.length>e.depth.value?e.id.nesting[e.depth.value+1]:e.id.value;t[o]instanceof Array?t.d3plus.form.container({id:e.container.id+"_"+t[e.id.value]}).data(t[o]).id(e.id.nesting.slice(1)).type("drop"):t.d3plus.form.data([t]).id(e.id.value).type("button"),t.d3plus.form.color(e.color).focus(e.focus.value,function(t){t!==e.focus.value&&e.self.focus(t).draw()}).hover(e.hover.value).icon({select:!1,value:e.icon.value}).font(e.font).format(e.format).order(e.order).text(e.text.value).ui({border:e.ui.border,color:e.ui.color,display:"inline-block",margin:0,padding:e.ui.padding.css}).width(n).draw()}),e.data.element.value&&e.data.element.value.on("focus."+e.container.id,function(){e.self.focus(this.value).hover(this.value).draw()}).on("blur."+e.container.id,function(){e.self.hover(!1).draw()})}},{"../form.js":99}],155:[function(e,t,n){var r,o,i,a,s,l,u,c,f,d,p,h;l=e("../core/console/print.coffee"),p=e("simplify-js"),t.exports=function(e,t){var n,o,a,u,c,d,g,v,m,y,x,b,w,_,k,A,M,z,j,E,S,T,N,C,O,q,D,F,L,P,R,I,B,U,V,H,Y,$,W,X,Z,G,J,Q,K,ee,te,ne,re,oe,ie,ae,se,le,ue,ce,fe,de,pe,he,ge,ve,me,ye,xe,be,we;if(e.length<3)return l.error("polygon has to have at least 3 points"),null;if(_=[],v=.5,c=5,null==t&&(t={}),null==t.maxAspectRatio&&(t.maxAspectRatio=15),null==t.minWidth&&(t.minWidth=0),null==t.minHeight&&(t.minHeight=0),null==t.tolerance&&(t.tolerance=.02),null==t.nTries&&(t.nTries=20),null!=t.angle&&(t.angle instanceof Array?d=t.angle:"number"==typeof t.angle?d=[t.angle]:"string"!=typeof t.angle||isNaN(t.angle)||(d=[Number(t.angle)])),null==d&&(d=d3.range(-90,90+c,c)),null!=t.aspectRatio&&(t.aspectRatio instanceof Array?m=t.aspectRatio:"number"==typeof t.aspectRatio?m=[t.aspectRatio]:"string"!=typeof t.aspectRatio||isNaN(t.aspectRatio)||(m=[Number(t.aspectRatio)])),null!=t.origin&&t.origin instanceof Array&&(G=t.origin[0]instanceof Array?t.origin:[t.origin]),g=Math.abs(d3.geom.polygon(e).area()),0===g)return l.error("polygon has 0 area"),null;if(re=d3.extent(e,function(e){return e[0]}),Y=re[0],I=re[1],oe=d3.extent(e,function(e){return e[1]}),$=oe[0],B=oe[1],me=Math.min(I-Y,B-$)*t.tolerance,ve=function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)J=e[t],r.push({x:J[0],y:J[1]});return r}(),me>0&&(ve=p(ve,me),e=function(){var e,t,n;for(n=[],e=0,t=ve.length;t>e;e++)J=ve[e],n.push([J.x,J.y]);return n}()),t.vdebug&&_.push({type:"simplify",poly:e}),ie=d3.extent(e,function(e){return e[0]}),Y=ie[0],I=ie[1],ae=d3.extent(e,function(e){return e[1]}),$=ae[0],B=ae[1],y=[[Y,$],[I,$],[I,B],[Y,B]],se=[I-Y,B-$],b=se[0],x=se[1],xe=Math.min(b,x)/50,null==G)for(G=[],w=d3.geom.polygon(e).centroid(),i(w,e)&&G.push(w);G.length<t.nTries;)he=Math.random()*b+Y,ge=Math.random()*x+$,pe=[he,ge],i(pe,e)&&G.push(pe);for(t.vdebug&&_.push({type:"origins",points:G}),D=0,P=null,z=0,T=d.length;T>z;z++)for(a=d[z],u=-a*Math.PI/180,t.vdebug&&_.push({type:"angle",angle:a}),A=j=0,N=G.length;N>j;A=++j)for(X=G[A],le=r(e,X,u),K=le[0],te=le[1],ue=r(e,X,u+Math.PI/2),Q=ue[0],ee=ue[1],W=[],null!=K&&null!=te&&W.push([(K[0]+te[0])/2,(K[1]+te[1])/2]),null!=Q&&null!=ee&&W.push([(Q[0]+ee[0])/2,(Q[1]+ee[1])/2]),t.vdebug&&_.push({type:"modifOrigin",idx:A,p1W:K,p2W:te,p1H:Q,p2H:ee,modifOrigins:W}),E=0,C=W.length;C>E;E++)if(Z=W[E],t.vdebug&&_.push({type:"origin",cx:Z[0],cy:Z[1]}),ce=r(e,Z,u),K=ce[0],te=ce[1],null!==K&&null!==te&&(H=Math.min(h(Z,K),h(Z,te)),R=2*Math.sqrt(H),fe=r(e,Z,u+Math.PI/2),Q=fe[0],ee=fe[1],null!==Q&&null!==ee&&(V=Math.min(h(Z,Q),h(Z,ee)),L=2*Math.sqrt(V),!(D>R*L))))for(null!=m?o=m:(U=Math.max(1,t.minWidth/L,D/(L*L)),F=Math.min(t.maxAspectRatio,R/t.minHeight,R*R/D),o=d3.range(U,F+v,v)),q=0,O=o.length;O>q;q++)if(n=o[q],S=Math.max(t.minWidth,Math.sqrt(D*n)),de=Math.min(R,L*n),!(D>de*L))for(de-S>=xe&&t.vdebug&&_.push({type:"aRatio",aRatio:n});de-S>=xe;)ye=(S+de)/2,k=ye/n,be=Z[0],we=Z[1],ne=[[be-ye/2,we-k/2],[be+ye/2,we-k/2],[be+ye/2,we+k/2],[be-ye/2,we+k/2]],ne=f(ne,u,Z),s(ne,e)?(M=!0,D=ye*k,P={cx:be,cy:we,width:ye,height:k,angle:a},S=ye):(M=!1,de=ye),t.vdebug&&_.push({type:"rectangle",cx:be,cy:we,width:ye,height:k,areaFraction:ye*k/g,angle:a,insidePoly:M});return[P,D,_]},h=function(e,t){var n,r;return n=t[0]-e[0],r=t[1]-e[1],n*n+r*r},u=function(e,t,n){var r,o,i,a,s;return s=t[1]<n[1]?[t,n]:[n,t],r=s[0],o=s[1],(e[1]===o[1]||e[1]===r[1])&&(e[1]+=Number.MIN_VALUE),e[1]>o[1]||e[1]<r[1]?!1:e[0]>r[0]&&e[0]>o[0]?!1:e[0]<r[0]&&e[0]<o[0]?!0:(i=(o[1]-r[1])/(o[0]-r[0]),a=(e[1]-r[1])/(e[0]-r[0]),a>i)},i=function(e,t){var n,r,o,i,a;for(i=-1,a=t.length,r=t[a-1],o=0;++i<a;)n=r,r=t[i],u(e,n,r)&&o++;return o%2!==0},a=function(e,t,n){var r,o,i;return r=1e-9,o=e[0],i=e[1],o<Math.min(t[0],n[0])-r||o>Math.max(t[0],n[0])+r||i<Math.min(t[1],n[1])-r||i>Math.max(t[1],n[1])+r?!1:!0},o=function(e,t,n,r){var o,i,a,s,l,u,c,f,d,p;return f=1e-9,s=e[0]-t[0],u=e[1]-t[1],l=n[0]-r[0],c=n[1]-r[1],a=s*c-u*l,Math.abs(a)<f?null:(o=e[0]*t[1]-e[1]*t[0],i=n[0]*r[1]-n[1]*r[0],d=(o*l-i*s)/a,p=(o*c-i*u)/a,[d,p])},d=function(e,t,n,r){var i;return i=o(e,t,n,r),null==i?!1:a(i,e,t)&&a(i,n,r)},s=function(e,t){var n,r,o,a,s,l,u,c;for(s=-1,u=e.length,c=t.length,o=e[u-1];++s<u;)for(n=o,o=e[s],l=-1,a=t[c-1];++l<c;)if(r=a,a=t[l],d(n,o,r,a))return!1;return i(e[0],t)},c=function(e,t,n){var r,o,i,a;return null==n&&(n=[0,0]),i=e[0]-n[0],a=e[1]-n[1],r=Math.cos(t),o=Math.sin(t),[r*i-o*a+n[0],o*i+r*a+n[1]]},f=function(e,t,n){var r,o,i,a;for(a=[],r=0,o=e.length;o>r;r++)i=e[r],a.push(c(i,t,n));return a},r=function(e,t,n){var r,i,s,l,u,c,f,d,p,g,v,m,y,x,b;for(u=1e-9,t=[t[0]+u*Math.cos(n),t[1]+u*Math.sin(n)],x=t[0],b=t[1],m=[x+Math.cos(n),b+Math.sin(n)],f=0,Math.abs(m[0]-x)<u&&(f=1),c=-1,g=e.length,i=e[g-1],d=Number.MAX_VALUE,p=Number.MAX_VALUE,s=null,l=null;++c<g;)r=i,i=e[c],v=o(t,m,r,i),null!=v&&a(v,r,i)&&(y=h(t,v),v[f]<t[f]?d>y&&(d=y,s=v):v[f]>t[f]&&p>y&&(p=y,l=v));return[s,l]}},{"../core/console/print.coffee":54,"simplify-js":9}],156:[function(e,t,n){t.exports=function(e,t,n){var r,o,i,a;return o={x:0,y:0},0>e&&(e=2*Math.PI+e),"square"===n?(i=45*(Math.PI/180),e<=Math.PI?e<Math.PI/2?i>e?(o.x+=t,a=Math.tan(e)*t,o.y+=a):(o.y+=t,r=t/Math.tan(e),o.x+=r):e<Math.PI-i?(o.y+=t,r=t/Math.tan(Math.PI-e),o.x-=r):(o.x-=t,a=Math.tan(Math.PI-e)*t,o.y+=a):e<3*Math.PI/2?e<i+Math.PI?(o.x-=t,a=Math.tan(e-Math.PI)*t,o.y-=a):(o.y-=t,r=t/Math.tan(e-Math.PI),o.x-=r):e<2*Math.PI-i?(o.y-=t,r=t/Math.tan(2*Math.PI-e),o.x+=r):(o.x+=t,a=Math.tan(2*Math.PI-e)*t,o.y-=a)):(o.x+=t*Math.cos(e),o.y+=t*Math.sin(e)),o}},{}],157:[function(e,t,n){var r;r=e("../geom/offset.coffee"),t.exports=function(e){var t,n,o,i,a,s,l,u,c,f,d,p,h,g,v,m;for(e=e.slice(1).slice(0,-1).split(/L|A/),f=[],o=0,a=e.length;a>o;o++)if(c=e[o],c=c.split(" "),1===c.length)f.push(c[0].split(",").map(function(e){return parseFloat(e)}));else{for(d=f[f.length-1],i=c.pop().split(",").map(function(e){return parseFloat(e)}),p=parseFloat(c.shift().split(",")[0]),m=Math.sqrt(Math.pow(i[0]-d[0],2)+Math.pow(i[1]-d[1],2)),t=Math.acos((p*p+p*p-m*m)/(2*p*p)),u="1"===c[1].split(",")[0],u&&(t=2*Math.PI-t),s=t/(2*Math.PI)*p*Math.PI*2,h=s/5,g=Math.atan2(-d[1],-d[0])-Math.PI,v=t/h,n=v;t>n;)l=r(g+n,p),f.push([l.x,l.y]),n+=v;f.push(i)}return f}},{"../geom/offset.coffee":156}],158:[function(e,t,n){var r;r=e("./normalize.coffee"),t.exports=function(e,t){var n,o,i,a,s,l,u,c,f,d,p,h,g,v,m,y,x,b,w,_,k,A,M,z,j,E,S,T,N,C,O,q;if(g=[],null==t&&(t={}),(null==t.nodes||"object"!=typeof t.nodes)&&(N=r(e,t),e=N[0],t=N[1],null===t))return null;d=t.distance,E=t.nodeid,q=t.startpoint,h=t.endpoint,S=t.nodes,T={};for(m in S)T[m]={node:S[m].node,degree:0};for(A=0,k={},v=0,w=e.length;w>v;v++)p=e[v],o=E(q(p)),i=E(h(p)),o in k||(k[o]={}),i in k||(k[i]={}),i in k[o]||(k[o][i]=0,k[i][o]=0,A++,T[o].degree+=1,T[i].degree+=1);u={},n=0;for(m in T)j=T[m],u[m]={score:j.degree/(2*A),nodes:[m]};for(o in k)for(i in k[o])k[o][i]=1/(2*A)-T[o].degree*T[i].degree/(4*A*A);for(y=0;1e3>y;){f=-1,M=void 0,z=void 0;for(o in k)for(i in k[o])k[o][i]>f&&(f=k[o][i],M=o,z=i);if(0>f)break;for(b in k[M])b!==z&&(b in k[z]?k[z][b]+=k[M][b]:k[z][b]=k[M][b]-2*u[z].score*u[b].score,k[b][z]=k[z][b]),delete k[b][M];for(b in k[z])b in k[M]||b===z||(k[z][b]-=2*u[M].score*u[b].score,k[b][z]=k[z][b]);for(C=u[M].nodes,x=0,_=C.length;_>x;x++)j=C[x],u[z].nodes.push(j);u[z].score+=u[M].score,t.vdebug&&g.push({type:"merge",father:z,child:M,nodes:u[z].nodes}),delete u[M],delete k[M],n+=f,y++}return l=function(){var e;e=[];for(a in u)c=u[a],e.push([a,c.nodes.length]);return e}(),l.sort(function(e,t){return t[1]-e[1]}),O=function(){var e,t,n;for(n=[],e=0,t=l.length;t>e;e++)s=l[e],n.push(u[s[0]].nodes);return n}(),[O,g]}},{"./normalize.coffee":160}],159:[function(e,t,n){t.exports=function(e,t){var n,r;return e instanceof Array||(e=[e.x,e.y]),t instanceof Array||(t=[t.x,t.y]),n=Math.abs(e[0]-t[0]),r=Math.abs(e[1]-t[1]),Math.sqrt(n*n+r*r)}},{}],160:[function(e,t,n){var r;r=e("../core/console/print.coffee"),t.exports=function(e,t){var n,o,i,a,s,l,u,c,f,d,p,h,g,v,m,y,x,b,w,_,k,A,M,z,j,E,S,T,N,C,O;if(T=t.source,C=t.target,a=t.directed,s=t.distance,z=t.nodeid,N=t.startpoint,c=t.endpoint,n=t.K,O=t.vdebug,a||(a=!1),null==n&&(n=1),null==z?z=function(e){return e}:"string"==typeof z&&(z=function(e){return function(t){return t[e]}}(z)),null!=T&&"object"==typeof T&&(T=z(T)),null!=C&&"object"==typeof C&&(C=z(C)),null==N?N=function(e){return e.source}:"string"==typeof N&&(N=function(e){return function(t){return t[e]}}(N)),null==c?c=function(e){return e.target}:"string"==typeof c&&(c=function(e){return function(t){return t[e]}}(c)),null==s)s=function(e){return 1};else if("number"==typeof s)s=function(e){return function(t){return e}}(s);else if("string"==typeof s)s=function(e){return function(t){return t[e]}}(s);else if(s instanceof Array){for(u={},d=m=0,b=e.length;b>m;d=++m)l=e[d],o=z(N(l)),i=z(c(l)),u[o+"_"+i]=s[d];s=function(e){return o=z(N(e)),i=z(c(e)),u[o+"_"+i]}}for(j={},y=0,w=e.length;w>y;y++){for(l=e[y],A=N(l),M=c(l),g=z(A),v=z(M),E=[A,M],x=0,_=E.length;_>x;x++)k=E[x],p=z(k),p in j||(j[p]={node:k,outedges:[]});j[g].outedges.push(l),a||j[v].outedges.push(l)}return f=null,0===e.length?f="The length of edges is 0":0>n?f="K can not have negative value":null==s(e[0])?f="Check the distance function/attribute":null==N(e[0])?f="Check the startpoint function/attribute":null==c(e[0])?f="Check the endpoint function/attribute":(h=z(N(e[0])),null==h||"string"!=(S=typeof h)&&"number"!==S?f="Check the nodeid function/attribute":null==T||T in j?null==C||C in j||(f="The target is not in the graph"):f="The source is not in the graph"),null!=f?(r.error(f),null):[e,{source:T,target:C,directed:a,distance:s,nodeid:z,startpoint:N,endpoint:c,K:n,nodes:j,vdebug:O}]}},{"../core/console/print.coffee":54}],161:[function(e,t,n){var r,o;r=e("heap"),o=e("./normalize.coffee"),t.exports=function(e,t,n){var i,a,s,l,u,c,f,d,p,h,g,v,m,y,x,b,w,_,k,A,M,z,j,E,S,T,N,C,O;if(null==n&&(n={}),n.source=t,(null==n.nodes||"object"!=typeof n.nodes)&&(M=o(e,n),e=M[0],n=M[1],null===n))return null;t=n.source,N=n.target,u=n.directed,c=n.distance,_=n.nodeid,T=n.startpoint,d=n.endpoint,i=n.K,k=n.nodes;for(v in k)w=k[v],w.count=0;for(h=new r(function(e,t){return e.distance-t.distance}),O={},null==N&&(O[t]=!0),h.push({edge:null,target:t,distance:0}),b=0,S=[];!h.empty()&&(b=Math.max(b,h.size()),A=h.pop(),C=A.target,k[C].count++,null==N?S.push(A):C===N&&S.push(A),S.length!==i);)if(k[C].count<=i)for(z=k[C].outedges,g=0,y=z.length;y>g;g++){if(f=z[g],a=_(T(f)),l=_(d(f)),u||l!==C||(j=[l,a],a=j[0],l=j[1]),null==N){if(O[l])continue;O[l]=!0}s=A.distance+c(f),h.push({edge:f,previous:A,target:l,distance:s})}for(p=function(t){for(e=[];null!=t.edge;)e.push(t.edge),t=t.previous;return e.reverse()},m=0,x=S.length;x>m;m++)E=S[m],null!=N&&(delete E.target,E.edges=p(E)),delete E.edge,delete E.previous;return S}},{"./normalize.coffee":160,heap:6}],162:[function(e,t,n){var r;r=e("./distance.coffee"),t.exports=function(e,t){var n,o;return t||(t={}),n=[],o=d3.geom.quadtree().x(function(e){return t.accessor?t.accessor(e)[0]:e[0]}).y(function(e){return t.accessor?t.accessor(e)[1]:e[1]}),o(e).visit(function(e){var o,i,a,s,l,u,c,f;if(!e.leaf)for(c=e.nodes,o=0,a=c.length;a>o;o++)if(l=c[o],l&&l.point)if(t.origin)n.push(r(l,t));else for(f=e.nodes,i=0,s=f.length;s>i;i++)u=f[i],u&&u.point&&u.point!==l.point&&n.push(r(l,u));return!1}),t.all?n.sort(function(e,t){return e-t}):d3.min(n)}},{"./distance.coffee":159}],163:[function(e,t,n){var r;r=e("./normalize.coffee"),t.exports=function(e,t,n){var o,i,a,s,l,u,c,f,d,p,h,g;return null==n&&(n={}),n.source=t,null!=n.nodes&&"object"==typeof n.nodes||(p=r(e,n),e=p[0],n=p[1],null!==n)?(t=n.source,a=n.directed,s=n.distance,f=n.nodeid,h=n.startpoint,u=n.endpoint,o=n.K,d=n.nodes,g={},g[t]=!0,i=function(e,t){var n,r,l,c,p,v,m,y,x;for(m=d[e].outedges,x=[],c=0,p=m.length;p>c;c++)l=m[c],n=f(h(l)),r=f(u(l)),a||r!==e||(y=[r,n],n=y[0],r=y[1]),r in g?x.push(void 0):(v=t+s(l),o>=v?(g[r]=!0,x.push(i(r,v))):x.push(void 0));return x},i(t,0),{nodes:function(){var e;e=[];for(c in g)e.push(d[c].node);return e}(),edges:function(){var t,n,r;for(r=[],t=0,n=e.length;n>t;t++)l=e[t],f(h(l))in g&&f(u(l))in g&&r.push(l);return r}()}):null}},{"./normalize.coffee":160}],164:[function(e,t,n){var r;r=e("../core/locale/languages/en_US.coffee"),t.exports=function(e,t){var n,o,i,a,s,l,u,c;return u="locale"in this?this.locale.value.time:r.time,t||(t={}),c=t.vars||{},o=t.key,i="labels"in t?t.labels:!0,a=e.toString().split(".")[0].length,c.time&&c.time.value&&u.push(c.time.value),"string"==typeof o&&u.indexOf(o.toLowerCase())>=0?s=e:"share"===o?(s=e>=100?d3.format(",f")(e):e>99?d3.format(".3g")(e):d3.format(".2g")(e),s+="%"):10>e&&e>-10?s=d3.round(e,2):a>3?(l=d3.formatPrefix(e).symbol,l=l.replace("G","B"),e=d3.formatPrefix(e).scale(e),e=parseFloat(d3.format(".3g")(e)),s=e+l):s=3===a?d3.format(",f")(e):d3.format(".3g")(e),i&&o&&"format"in c&&o in c.format.affixes.value?(n=c.format.affixes.value[o],n[0]+s+n[1]):s}},{"../core/locale/languages/en_US.coffee":71}],165:[function(e,t,n){var r,o;r=e("../util/d3selection.coffee"),o=e("./validate.coffee"),t.exports=function(e,t){var n,i;return n=function(e,t,i){var a,s,l;s=[];for(a in e)l=e[a],"undefined"!=typeof l?!i&&o(l)?("object"!=typeof t[a]&&(t[a]={}),s.push(n(l,t[a],0===a.indexOf("d3plus")))):s.push(!r(l)&&l instanceof Array?t[a]=l.slice(0):t[a]=l):s.push(void 0);return s},i={},e&&n(e,i),t&&n(t,i),i}},{"../util/d3selection.coffee":202,"./validate.coffee":166}],166:[function(e,t,n){t.exports=function(e){return e&&e.constructor===Object}},{}],167:[function(e,t,n){t.exports=function(){var e=Array.prototype.slice.call(arguments),t=e.shift();return t.unkeyed_index=0,t.replace(/\{(\w*)\}/g,function(n,r){if(""===r&&(r=t.unkeyed_index,t.unkeyed_index++),r==+r)return"undefined"!==e[r]?e[r]:n;for(var o=0;o<e.length;o++)if("object"==typeof e[o]&&"undefined"!=typeof e[o][r])return e[o][r];return n}.bind(t))}},{}],168:[function(e,t,n){var r,o;r=e("./format.js"),o=e("../core/locale/languages/en_US.coffee").ui,t.exports=function(e,t,n,i){var a;return e instanceof Array?(e=e.slice(0),t||(t=o.and),i||(i=o.moreText),2===e.length?e.join(" "+t+" "):(n&&e.length>n&&(a=e.length-n+1,e=e.slice(0,n-1),e[n-1]=r(i,a)),e.length>1&&(e[e.length-1]=t+" "+e[e.length-1]),e.join(", "))):e}},{"../core/locale/languages/en_US.coffee":71,"./format.js":167}],169:[function(e,t,n){t.exports=function(e){var t=["!","@","#","$","%","^","&","*","(",")","[","]","{","}",".",",","/","\\","|","'",'"',";",":","<",">","?","=","+"],n=[[/[\300-\306]/g,"A"],[/[\340-\346]/g,"a"],[/[\310-\313]/g,"E"],[/[\350-\353]/g,"e"],[/[\314-\317]/g,"I"],[/[\354-\357]/g,"i"],[/[\322-\330]/g,"O"],[/[\362-\370]/g,"o"],[/[\331-\334]/g,"U"],[/[\371-\374]/g,"u"],[/[\321]/g,"N"],[/[\361]/g,"n"],[/[\307]/g,"C"],[/[\347]/g,"c"]];return e+="",""+e.replace(/[^A-Za-z0-9\-_]/g,function(e){if(" "===e)return"_";if(t.indexOf(e)>=0)return"";for(var r=e,o=0;o<n.length;o++)if(new RegExp(n[o][0]).test(e)){r=n[o][1];break}return r})}},{}],170:[function(e,t,n){var r;r=e("../core/locale/languages/en_US.coffee"),t.exports=function(e,t){var n,o,i,a,s;return e?(t||(t={}),i=t.key,"."===e.charAt(e.length-1)?e.charAt(0).toUpperCase()+e.substr(1):(a="locale"in this?this.locale.value:r,s=a.lowercase.map(function(e){return e.toLowerCase()}),o=a.uppercase,o=o.concat(o.map(function(e){return e+"s"})),n=o.map(function(e){return e.toLowerCase()}),e.replace(/\S*/g,function(t,r){var i,a,l;return t?(/^[^\W\s]/.test(t)?l="":(l=t.charAt(0),t=t.slice(1)),i=n.indexOf(t.toLowerCase()),a=i>=0?o[i]:s.indexOf(t.toLowerCase())>=0&&0!==r&&r!==e.length-1?t.toLowerCase():t.charAt(0).toUpperCase()+t.substr(1).toLowerCase(),l+a):""}))):""}},{"../core/locale/languages/en_US.coffee":71}],171:[function(e,t,n){var r,o;r=e("./foreign.coffee"),o=e("./tspan.coffee"),t.exports=function(e){e.text.html.value?r(e):o(e)}},{"./foreign.coffee":172,"./tspan.coffee":175}],172:[function(e,t,n){t.exports=function(e){var t,n,r,o,i;i=e.container.value,r=i.attr("font-family")||i.style("font-family"),t=e.align.value||i.attr("text-anchor")||i.style("text-anchor"),n=i.attr("fill")||i.style("fill"),o=i.attr("opacity")||i.style("opacity"),t="end"===t?"right":"middle"===t?"center":"left",d3.select(i.node().parentNode).append("foreignObject").attr("width",e.width.value+"px").attr("height",e.height.value+"px").attr("x","0px").attr("y","0px").append("xhtml:div").style("font-family",r).style("font-size",e.size.value[1]+"px").style("color",n).style("text-align",t).style("opacity",o).text(e.text.current)}},{}],173:[function(e,t,n){t.exports=function(e){var t,n,r,o,i,a,s,l,u,c;return n=e.container.value,o=n.node().previousElementSibling,a=o?o.tagName.toLowerCase():"",o&&(o=d3.select(o)),e.container.x=e.x.value||parseFloat(n.attr("x"),10),e.container.y=e.y.value||parseFloat(n.attr("y"),10),o&&(e.shape.accepted.indexOf(a)>=0&&e.self.shape(a),"rect"===a?(u=parseFloat(o.attr("x"),10)||0,c=parseFloat(o.attr("y"),10)||0,e.padding.value||(t=Math.abs(u-e.container.x),t&&e.self.padding(t)),e.container.x||(e.container.x=u+e.padding.value),e.container.y||(e.container.y=c+e.padding.value),e.width.value||(l=parseFloat(o.attr("width")),e.self.width(l)),e.height.value||(r=parseFloat(o.attr("height")),e.self.height(r))):"circle"===a?(i=parseFloat(o.attr("r"),10),u=parseFloat(o.attr("cx"),10)||0,u-=i,c=parseFloat(o.attr("cy"),10)||0,c-=i,e.padding.value||(t=Math.abs(u-e.container.x),t&&e.self.padding(t)),e.container.x||(e.container.x=u+e.padding.value),e.container.y||(e.container.y=c+e.padding.value),e.width.value||e.self.width(2*i,10),e.height.value||e.self.height(2*i,10)):(e.width.value||e.self.width(500),e.height.value||e.self.height(500))),e.container.x||(e.container.x=0),e.container.y||(e.container.y=0),e.width.inner=e.width.value-2*e.padding.value,e.height.inner=e.height.value-2*e.padding.value,s=n.attr("font-size")||n.style("font-size"),s=parseFloat(s,10),e.container.fontSize=s,e.container.dy=parseFloat(n.attr("dy"),10),e.size.value?void 0:e.self.size(e.resize.value?[s,2*s]:[s/2,s])}},{}],174:[function(e,t,n){t.exports=function(e){var t;return e.text.value||(t=e.container.value.text(),t&&(t.indexOf("tspan")>=0&&(t.replace(/\<\/tspan\>\<tspan\>/g," "),t.replace(/\<\/tspan\>/g,""),t.replace(/\<tspan\>/g,"")),t=t.replace(/(\r\n|\n|\r)/gm,""),t=t.replace(/^\s+|\s+$/g,""),e.self.text(t))),e.text.phrases=e.text.value instanceof Array?e.text.value.filter(function(e){return["string","number"].indexOf(typeof e)>=0}):[e.text.value+""],e.align.value?void 0:e.container.align=e.container.value.style("text-anchor")||e.container.value.attr("text-anchor")}},{}],175:[function(e,t,n){t.exports=function(e){var t,n,r,o,i,a,s,l,u,c,f,d,p,h,g,v,m,y,x,b,w,_,k,A,M,z,j,E,S,T,N;return d=function(t,o){var i;return t||(t=""),i=!g||o?e.container.value.append("tspan"):e.container.value.insert("tspan","tspan"),i.attr("x",S+"px").attr("dx",n+"px").attr("dy",r+"px").style("baseline-shift","0%").attr("dominant-baseline","alphabetic").text(t)},f=-90===e.rotate.value||90===e.rotate.value,z=f?e.height.inner:e.width.inner,s=f?e.width.inner:e.height.inner,t="circle"===e.shape.value?"middle":e.align.value||e.container.align||"start",n="end"===t?z:"middle"===t?z/2:0,M=e.valign.value||"top",S=e.container.x,i=e.resize.value?e.size.value[1]:e.container.fontSize||e.size.value[0],r=e.container.dy||1.1*i,_=null,h=null,j=null,g=!1,N=0,"circle"===e.shape.value&&("middle"===M?N=s/r%1*r/2:"end"===M&&(N=s/r%1*r)),e.container.value.attr("text-anchor",t).attr("font-size",i+"px").style("font-size",i+"px").attr("x",e.container.x).attr("y",e.container.y),A=function(){return _.remove(),l--,1!==l&&(_=g?e.container.value.select("tspan"):d3.select(e.container.value.node().lastChild)),_.empty()?void 0:(j=_.text().match(/[^\s-]+-?/g),o())},u=function(){var t;return"circle"===e.shape.value?(t=(l-1)*r+N,t>s/2&&(t+=r),2*Math.sqrt(t*(2*(z/2)-t))):z},o=function(){var t,n;return j&&j.length?(n=j.pop(),t=n.charAt(n.length-1),1===n.length&&e.text.split.value.indexOf(n)>=0?o():(e.text.split.value.indexOf(t)>=0&&(n=n.substr(0,n.length-1)),_.text(j.join(" ")+" "+n+" ..."),_.node().getComputedTextLength()>u()?o():void 0)):A()},p=function(t){var n,r,o;return n=_.text(),g?(o=e.text.current.charAt(e.text.current.length-h.length-1),r=" "===o?" ":"",h=t+r+h,_.text(t+r+n)):(o=e.text.current.charAt(h.length),r=" "===o?" ":"",h+=r+t,_.text(n+r+t)),_.node().getComputedTextLength()>u()?(_.text(n),_=d(t),g?l--:l++):void 0},w=1,l=null,c=null,E=function(){var t,n,o,i,a;for(e.container.value.selectAll("tspan").remove(),e.container.value.html(""),j=e.text.words.slice(0),g&&j.reverse(),h=j[0],_=d(j.shift(),!0),l=w,t=0,n=j.length;n>t;t++){if(a=j[t],l*r>s){A();break}for(p(a),i=!0;i;)o=e.text.current.charAt(h.length+1),i=e.text.split.value.indexOf(o)>=0,i&&p(o)}return c=Math.abs(l-w)+1},E(),c=l,"circle"===e.shape.value&&(b=s-c*r,b>r&&("middle"===M?(w=(b/r/2>>0)+1,E()):"bottom"===M&&(g=!0,w=s/r>>0,E()))),"top"===M?T=0:(a=c*r,T="middle"===M?s/2-a/2:s-a),T-=.2*r,k="translate(0,"+T+")",180===e.rotate.value||-180===e.rotate.value?(y=e.container.x+z/2,x=e.container.y+s/2):(v=e.rotate.value<0?z:s,y=e.container.x+v/2,x=e.container.y+v/2),m="rotate("+e.rotate.value+", "+y+", "+x+")",e.container.value.attr("transform",m+k)}},{}],176:[function(e,t,n){var r,o,i,a;r=e("./flow.coffee"),o=e("../../font/sizes.coffee"),a=function(e){var t;e.text.phrases.length&&(e.text.current=e.text.phrases.shift()+"",e.text.words=e.text.current.match(e.text["break"]),t=e.text.current.charAt(0),t!==e.text.words[0].charAt(0)&&(e.text.words[0]=t+e.text.words[0]),e.container.value.text(""),e.resize.value?i(e):r(e))},t.exports=a,i=function(e){var t,n,i,s,l,u,c,f,d,p,h,g,v,m,y,x,b;for(b=[],c=0;c<e.text.words.length;)t=c===e.text.words.length-1?"":" ",b.push(e.text.words[c]+t),c++;p=-90===e.rotate.value||90===e.rotate.value,y=p?e.height.inner:e.width.inner,l=p?e.width.inner:e.height.inner,h=Math.floor(e.size.value[1]),f="circle"===e.shape.value?.75*y:y,v=o(b,{"font-size":h+"px",parent:e.container.value}),d=d3.max(v,function(e){return e.width}),n=1.165+y/l*.11,m=d3.sum(v,function(t){var n;return n=e.container.dy||1.1*h,t.width*n})*n,s="circle"===e.shape.value?Math.PI*Math.pow(y/2,2):f*l,(d>f||m>s)&&(i=Math.sqrt(s/m),x=f/d,g=d3.min([i,x]),h=d3.max([e.size.value[0],Math.floor(h*g)])),u=Math.floor(.8*l),h>u&&(h=u),d*(h/e.size.value[1])<=f?(h!==e.size.value[1]&&e.self.size([e.size.value[0],h]),r(e)):a(e)}},{"../../font/sizes.coffee":97,"./flow.coffee":171}],177:[function(e,t,n){t.exports={accepted:[!1,"start","middle","end","left","center","right"],process:function(e){var t;return t=["left","center","right"].indexOf(e),t>=0&&(e=this.accepted[t+1]),e},value:!1}},{}],178:[function(e,t,n){t.exports={accepted:[Object],objectAccess:!1,process:function(e,t){var n,r;for(n in e)r=e[n],n in t.self&&t.self[n](r);return e},value:{}}},{}],179:[function(e,t,n){var r;r=e("../../util/d3selection.coffee"),t.exports={accepted:[!1,Array,Object,String],element:!1,id:"default",process:function(e){return e===!1?!1:r(e)?e:d3.select(e instanceof Array?e[0][0]:e)},value:!1}},{"../../util/d3selection.coffee":202}],180:[function(e,t,n){t.exports={accepted:[Boolean],value:!1}},{}],181:[function(e,t,n){var r,o;r=e("../../core/console/print.coffee"),o=e("../../string/format.js"),t.exports={accepted:[void 0],process:function(e,t){var n;return this.initialized===!1?e:(t.container.value===!1?(n=t.format.locale.value.dev.setContainer,r.warning(n,"container")):t.container.value.empty()?(n=t.format.locale.value.dev.noContainer,r.warning(o(n,'"'+t.container.value+'"'),"container")):(t.dev.value&&r.time("total draw time"),t.container.value.call(t.self)),e)},value:void 0}},{"../../core/console/print.coffee":54,"../../string/format.js":167}],182:[function(e,t,n){var r,o;r=e("../../core/locale/locale.coffee"),o=e("../../object/merge.coffee"),t.exports={accepted:[Function,String],locale:{accepted:function(){return d3.keys(r)},process:function(e){var t,n;return t="en_US",n=r[t],e!==t&&(n=o(n,r[e])),this.language=e,n},value:"en_US"},process:function(e,t){if(this.initialized&&"string"==typeof e)t.self.format({locale:e});else if("function"==typeof e)return e;return this.value},value:"en_US"}},{"../../core/locale/locale.coffee":75,"../../object/merge.coffee":165}],183:[function(e,t,n){t.exports={accepted:[!1,Number],value:!1}},{}],184:[function(e,t,n){t.exports={accepted:[Number],value:0}},{}],185:[function(e,t,n){t.exports={accepted:[Boolean],value:!1}},{}],186:[function(e,t,n){t.exports={accepted:[-180,-90,0,90,180],value:0}},{}],187:[function(e,t,n){t.exports={accepted:["circle","square"],value:!1}},{}],188:[function(e,t,n){t.exports={accepted:[Array,!1],value:!1}},{}],189:[function(e,t,n){
t.exports={accepted:[!1,Array,Number,String],html:{accepted:[Boolean],value:!1},init:function(e){var t;return t=this.split.value,this["break"]=new RegExp("[^\\s\\"+t.join("\\")+"]+\\"+t.join("?\\")+"?","g"),!1},split:{accepted:[Array],value:["-","/",";",":","&"]}}},{}],190:[function(e,t,n){t.exports={accepted:[!1,"top","middle","bottom"],value:!1}},{}],191:[function(e,t,n){t.exports={accepted:[!1,Number],value:!1}},{}],192:[function(e,t,n){t.exports={accepted:[!1,Number],value:!1}},{}],193:[function(e,t,n){t.exports={accepted:[!1,Number],value:!1}},{}],194:[function(e,t,n){var r,o,i,a,s;r=e("../core/methods/attach.coffee"),i=e("./helpers/parseSize.coffee"),o=e("../core/console/print.coffee"),a=e("./helpers/parseText.coffee"),s=e("./helpers/wrap.coffee"),t.exports=function(){var t;return t={self:function(e){return e.each(function(){i(t),t.size.value[0]<=t.height.inner?(a(t),s(t)):t.container.value.html(""),t.dev.value&&o.timeEnd("total draw time")}),t.self}},r(t,{align:e("./methods/align.coffee"),config:e("./methods/config.coffee"),container:e("./methods/container.coffee"),dev:e("./methods/dev.coffee"),draw:e("./methods/draw.coffee"),format:e("./methods/format.coffee"),height:e("./methods/height.coffee"),padding:e("./methods/padding.coffee"),resize:e("./methods/resize.coffee"),rotate:e("./methods/rotate.coffee"),text:e("./methods/text.coffee"),shape:e("./methods/shape.coffee"),size:e("./methods/size.coffee"),valign:e("./methods/valign.coffee"),width:e("./methods/width.coffee"),x:e("./methods/x.coffee"),y:e("./methods/y.coffee")}),t.self}},{"../core/console/print.coffee":54,"../core/methods/attach.coffee":76,"./helpers/parseSize.coffee":173,"./helpers/parseText.coffee":174,"./helpers/wrap.coffee":176,"./methods/align.coffee":177,"./methods/config.coffee":178,"./methods/container.coffee":179,"./methods/dev.coffee":180,"./methods/draw.coffee":181,"./methods/format.coffee":182,"./methods/height.coffee":183,"./methods/padding.coffee":184,"./methods/resize.coffee":185,"./methods/rotate.coffee":186,"./methods/shape.coffee":187,"./methods/size.coffee":188,"./methods/text.coffee":189,"./methods/valign.coffee":190,"./methods/width.coffee":191,"./methods/x.coffee":192,"./methods/y.coffee":193}],195:[function(e,t,n){function r(){d3.selectAll("div.d3plus_tooltip_data_desc").style("height","0px"),d3.selectAll("div.d3plus_tooltip_data_help").style("background-color","#ccc")}var o=e("../core/locale/languages/en_US.coffee"),i=e("../client/pointer.coffee"),a=e("../color/legible.coffee"),s=e("./move.coffee"),l=e("../client/prefix.coffee"),u=e("../client/rtl.coffee"),c=e("./remove.coffee"),f=e("../string/list.coffee"),d=e("../color/text.coffee");t.exports=function(e){var t=e.fullscreen?250:200,n=l();e.width=e.width||t,e.max_width=e.max_width||386,e.id=e.id||"default",e.size=e.fullscreen||e.html?"large":"small",e.offset=e.offset||0,e.arrow_offset=e.arrow?8:0,e.x=e.x||0,e.y=e.y||0,e.parent=e.parent||d3.select("body"),e.curtain=e.curtain||"#fff",e.curtainopacity=e.curtainopacity||.8,e.background=e.background||"#fff",e.fontcolor=e.fontcolor||"#444",e.fontfamily=e.fontfamily||"sans-serif",e.fontweight=e.fontweight||"normal",e.fontsize=e.fontsize||"12px",e.style=e.style||"default",e.zindex="small"==e.size?2e3:500,e.locale=e.locale||o;var p=e.parent?e.parent.node().offsetHeight||e.parent.node().getBoundingClientRect().height:0;if(e.iconsize||(e.iconsize="small"==e.size?22:50),e.limit=e.parent.node()===document.body?[window.innerWidth+window.scrollX,window.innerHeight+window.scrollY]:[parseFloat(e.parent.style("width"),10),parseFloat(e.parent.style("height"),10)],e.title instanceof Array){var h=e.locale.ui.and,g=e.locale.ui.more;e.title=f(e.title,h,3,g)}if(c(e.id),e.anchor={},e.fullscreen)e.anchor.x="center",e.anchor.y="center",e.x=e.parent?e.parent.node().offsetWidth/2:window.innerWidth/2,e.y=e.parent?p/2:window.innerHeight/2;else if(e.align){var v=e.align.split(" ");e.anchor.y=v[0],e.anchor.x=v[1]?v[1]:"center"}else e.anchor.x="center",e.anchor.y="top";var m=e.width-30;if(e.fullscreen){e.parent.append("div").attr("id","d3plus_tooltip_curtain_"+e.id).attr("class","d3plus_tooltip_curtain").style("background-color",e.curtain).style("opacity",e.curtainopacity).style("position","absolute").style("z-index",499).style("top","0px").style("right","0px").style("bottom","0px").style("left","0px").on(i.click,function(){c(e.id)})}var y=e.parent.append("div").datum(e).attr("id","d3plus_tooltip_id_"+e.id).attr("class","d3plus_tooltip d3plus_tooltip_"+e.size).style("color",e.fontcolor).style("font-family",e.fontfamily).style("font-weight",e.fontweight).style("font-size",e.fontsize+"px").style(n+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").on(i.out,r);e.max_height&&y.style("max-height",e.max_height+"px"),e.fixed?(y.style("z-index",500),e.mouseevents=!0):y.style("z-index",2e3);var x=y.append("div").datum(e).attr("class","d3plus_tooltip_container").style("background-color",e.background).style("padding","6px");if(e.fullscreen&&e.html){w=e.parent?.75*e.parent.node().offsetWidth:.75*window.innerWidth,q=e.parent?.75*p:.75*window.innerHeight,x.style("width",w+"px").style("height",q+"px");var b=x.append("div").attr("class","d3plus_tooltip_body").style("padding-right","6px").style("display","inline-block").style("z-index",1).style("width",e.width+"px")}else{if("auto"==e.width){var w="auto";x.style("max-width",e.max_width+"px")}else var w=e.width-14+"px";var b=x.style("width",w)}if(e.title||e.icon)var _=b.append("div").attr("class","d3plus_tooltip_header").style("position","relative").style("z-index",1);if(e.fullscreen){y.append("div").attr("class","d3plus_tooltip_close").style("background-color",e.color).style("color",d(e.color)).style("position","absolute").style(n+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)").style("font-size","20px").style("height","18px").style("line-height","14px").style("text-align","center").style("right","16px").style("top","-10px").style("width","18px").style("z-index",10).html("&times;").on(i.over,function(){d3.select(this).style("cursor","pointer").style(n+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.5)")}).on(i.out,function(){d3.select(this).style("cursor","auto").style(n+"box-shadow","0 1px 3px rgba(0, 0, 0, 0.25)")}).on(i.click,function(){c(e.id)})}if(e.mouseevents){if(e.mouseevents!==!0){var k=d3.select(e.mouseevents).on(i.out),A=function(){var t=d3.event.toElement||d3.event.relatedTarget;if(t)var n="string"==typeof t.className?t.className:t.className.baseVal,o=0==n.indexOf("d3plus_tooltip");else var o=!1;t&&(M(y.node(),t)||M(e.mouseevents,t)||o)||(k(d3.select(e.mouseevents).datum()),r(),d3.select(e.mouseevents).on(i.out,k))},M=function(e,t){for(var n=t.parentNode;null!==n;){if(n==e)return!0;n=n.parentNode}return!1};d3.select(e.mouseevents).on(i.out,A),y.on(i.out,A);var z=d3.select(e.mouseevents).on(i.move);z&&y.on(i.move,z)}}else y.style("pointer-events","none");if(e.arrow){y.append("div").attr("class","d3plus_tooltip_arrow").style("background-color",e.background).style(n+"box-shadow","0px 1px 3px rgba(0, 0, 0, 0.25)").style("position","absolute").style("bottom","-5px").style("height","10px").style("left","50%").style("margin-left","-5px").style("width","10px").style(n+"transform","rotate(45deg)").style("z-index",-1)}if(e.icon){var j=_.append("div").attr("class","d3plus_tooltip_icon").style("width",e.iconsize+"px").style("height",e.iconsize+"px").style("z-index",1).style("background-position","50%").style("background-size","100%").style("background-image","url("+e.icon+")").style("display","inline-block").style("margin","0px 3px 3px 0px");"knockout"==e.style&&j.style("background-color",e.color),m-=j.node().offsetWidth}if(e.title){var E=e.max_width-6;e.icon&&(E-=e.iconsize+6),E+="px";{_.append("div").attr("class","d3plus_tooltip_title").style("max-width",E).style("color",e.icon?e.fontcolor:a(e.color)).style("vertical-align","top").style("width",m+"px").style("display","inline-block").style("overflow","hidden").style("text-overflow","ellipsis").style("word-wrap","break-word").style("z-index",1).style("font-size","large"===e.size?"18px":"16px").style("line-height","large"===e.size?"20px":"17px").style("padding","large"===e.size?"3px 6px":"3px").text(e.title)}}if(e.description){b.append("div").attr("class","d3plus_tooltip_description").style("font-size","12px").style("padding","6px").text(e.description)}if(e.data||e.html&&!e.fullscreen)var S=b.append("div").attr("class","d3plus_tooltip_data_container").style("overflow-y","auto").style("z-index",-1);if(e.data){var T=0,N={},C=null;e.data.forEach(function(t,o){t.group&&C!=t.group&&(C=t.group,S.append("div").attr("class","d3plus_tooltip_data_title").style("font-size","12px").style("font-weight","bold").style("padding","6px 3px 0px 3px").text(t.group));var s=S.append("div").attr("class","d3plus_tooltip_data_block").style("font-size","12px").style("padding","3px 6px").style("position","relative").datum(t);t.highlight===!0?s.style("color",a(e.color)):(t.allColors||t.highlight!==e.color)&&s.style("color",a(t.highlight));var c=s.append("div").attr("class","d3plus_tooltip_data_name").style("display","inline-block").html(t.name).on(i.out,function(){d3.event.stopPropagation()});if(t.link&&c.style("cursor","pointer").on(i.click,t.link),t.value instanceof Array){var f=e.locale.ui.and,d=e.locale.ui.more;t.value=list(t.value,f,3,d)}var p=s.append("div").attr("class","d3plus_tooltip_data_value").style("display","block").style("position","absolute").style("text-align","right").style("top","3px").html(t.value).on(i.out,function(){d3.event.stopPropagation()});if(u?p.style("left","6px"):p.style("right","6px"),e.mouseevents&&t.desc){var h=s.append("div").attr("class","d3plus_tooltip_data_desc").style("color","#888").style("overflow","hidden").style(n+"transition","height 0.5s").style("width","85%").text(t.desc).on(i.out,function(){d3.event.stopPropagation()}),g=h.node().offsetHeight||h.node().getBoundingClientRect().height;h.style("height","0px");var v=c.append("div").attr("class","d3plus_tooltip_data_help").style("background-color","#ccc").style(n+"border-radius","5px").style("color","#fff").style("cursor","pointer").style("display","inline-block").style("font-size","8px").style("font-weight","bold").style("height","10px").style("margin","3px 0px 0px 3px").style("padding-right","1px").style("text-align","center").style("width","10px").style("vertical-align","top").style(l+"transition","background-color 0.5s").text("?").on(i.over,function(){var e=d3.select(this.parentNode.parentNode).style("color");d3.select(this).style("background-color",e),h.style("height",g+"px")}).on(i.out,function(){d3.event.stopPropagation()});c.style("cursor","pointer").on(i.over,function(){r();var e=d3.select(this.parentNode).style("color");v.style("background-color",e),h.style("height",g+"px")}),s.on(i.out,function(){d3.event.stopPropagation(),r()})}var m=parseFloat(p.style("width"),10);m>e.width/2&&(m=e.width/2),m>T&&(T=m),o!=e.data.length-1&&(t.group&&t.group==e.data[o+1].group||!t.group&&!e.data[o+1].group)&&S.append("div").attr("class","d3plus_tooltip_data_seperator").style("background-color","#ddd").style("display","block").style("height","1px").style("margin","0px 3px")}),S.selectAll(".d3plus_tooltip_data_name").style("width",function(){var e=parseFloat(d3.select(this.parentNode).style("width"),10);return e-T-30+"px"}),S.selectAll(".d3plus_tooltip_data_value").style("width",T+"px").each(function(e){var t=parseFloat(d3.select(this).style("height"),10);N[e.name]=t}),S.selectAll(".d3plus_tooltip_data_name").style("min-height",function(e){return N[e.name]+"px"})}e.html&&!e.fullscreen&&S.append("div").html(e.html);var O=b.append("div").attr("class","d3plus_tooltip_footer").style("font-size","10px").style("position","relative").style("text-align","center");if(e.footer&&O.html(e.footer),e.height=y.node().offsetHeight||y.node().getBoundingClientRect().height,e.html&&e.fullscreen){var q=e.height-12,w=y.node().offsetWidth-e.width-44;x.append("div").attr("class","d3plus_tooltip_html").style("width",w+"px").style("height",q+"px").style("display","inline-block").style("vertical-align","top").style("overflow-y","auto").style("padding","0px 12px").style("position","absolute").html(e.html)}if(e.width=y.node().offsetWidth,"center"!=e.anchor.y?e.height+=e.arrow_offset:e.width+=e.arrow_offset,e.data||!e.fullscreen&&e.html){if(e.fullscreen)var q=e.height;else var D=e.fixed?p-e.y-10:p-10,q=e.height<D?e.height:D;q-=parseFloat(x.style("padding-top"),10),q-=parseFloat(x.style("padding-bottom"),10),_&&(q-=_.node().offsetHeight||_.node().getBoundingClientRect().height,q-=parseFloat(_.style("padding-top"),10),q-=parseFloat(_.style("padding-bottom"),10)),O&&(q-=O.node().offsetHeight||O.node().getBoundingClientRect().height,q-=parseFloat(O.style("padding-top"),10),q-=parseFloat(O.style("padding-bottom"),10)),S.style("max-height",q+"px")}e.height=y.node().offsetHeight||y.node().getBoundingClientRect().height,s(e.x,e.y,e.id)}},{"../client/pointer.coffee":41,"../client/prefix.coffee":42,"../client/rtl.coffee":43,"../color/legible.coffee":46,"../color/text.coffee":52,"../core/locale/languages/en_US.coffee":71,"../string/list.coffee":168,"./move.coffee":196,"./remove.coffee":197}],196:[function(e,t,n){var r;t.exports=function(e,t,n){var o,i,a;return n||(n="default"),a=d3.select("div#d3plus_tooltip_id_"+n),a.node()&&(o=a.datum(),o.cx=e,o.cy=t,o.fixed||(i="body"===o.parent.node().tagName.toLowerCase()?[window.scrollX,window.scrollY]:[0,0],"center"!==o.anchor.y?("right"===o.anchor.x?o.x=o.cx-o.arrow_offset-4:"center"===o.anchor.x?o.x=o.cx-o.width/2:"left"===o.anchor.x&&(o.x=o.cx-o.width+o.arrow_offset+2),"bottom"===o.anchor.y?o.flip=o.cy+o.height+o.offset<=o.limit[1]:"top"===o.anchor.y&&(o.flip=o.cy-o.height-o.offset<i[1]),o.y=o.flip?o.cy+o.offset+o.arrow_offset:o.cy-o.height-o.offset-o.arrow_offset):(o.y=o.cy-o.height/2,"right"===o.anchor.x?o.flip=o.cx+o.width+o.offset<=o.limit[0]:"left"===o.anchor.x&&(o.flip=o.cx-o.width-o.offset<i[0]),"center"===o.anchor.x?(o.flip=!1,o.x=o.cx-o.width/2):o.x=o.flip?o.cx+o.offset+o.arrow_offset:o.cx-o.width-o.offset),o.x<i[0]?o.x=i[0]:o.x+o.width>o.limit[0]&&(o.x=o.limit[0]-o.width),o.y<i[1]?o.y=i[1]:o.y+o.height>o.limit[1]&&(o.y=o.limit[1]-o.height)),a.style("top",o.y+"px").style("left",o.x+"px"),o.arrow&&a.selectAll(".d3plus_tooltip_arrow").call(r)),a},r=function(e){return e.style("bottom",function(e){return"center"===e.anchor.y||e.flip?"auto":"-5px"}).style("right",function(e){return"center"!==e.anchor.y||e.flip?"auto":"-5px"}).style("top",function(e){return"center"!==e.anchor.y&&e.flip?"-5px":"center"===e.anchor.y?"50%":"auto"}).style("left",function(e){return"center"===e.anchor.y&&e.flip?"-5px":"center"!==e.anchor.y?"50%":"auto"}).style("margin-left",function(e){var t;return"center"===e.anchor.y?"auto":(t="right"===e.anchor.x?-e.width/2+e.arrow_offset/2:"left"===e.anchor.x?e.width/2-2*e.arrow_offset-5:-5,e.cx-e.width/2-5<t?(t=e.cx-e.width/2-5,t<2-e.width/2&&(t=2-e.width/2)):-(e.limit[0]-e.cx-e.width/2+5)>t&&(t=-(e.limit[0]-e.cx-e.width/2+5),t>e.width/2-11&&(t=e.width/2-11)),t+"px")}).style("margin-top",function(e){var t;return"center"!==e.anchor.y?"auto":(t="bottom"===e.anchor.y?-e.height/2+e.arrow_offset/2-1:"top"===e.anchor.y?e.height/2-2*e.arrow_offset-2:-9,e.cy-e.height/2-e.arrow_offset<t?(t=e.cy-e.height/2-e.arrow_offset,t<4-e.height/2&&(t=4-e.height/2)):-(e.limit[1]-e.cy-e.height/2+e.arrow_offset)>t&&(t=-(e.limit[1]-e.cy-e.height/2+e.arrow_offset),t>e.height/2-22&&(t=e.height/2-22)),t+"px")})}},{}],197:[function(e,t,n){t.exports=function(e){return e?(d3.selectAll("div#d3plus_tooltip_curtain_"+e).remove(),d3.selectAll("div#d3plus_tooltip_id_"+e).remove()):(d3.selectAll("div.d3plus_tooltip_curtain").remove(),d3.selectAll("div.d3plus_tooltip").remove())}},{}],198:[function(e,t,n){t.exports=function(e,t){var n,r;return n=[],r=1/(t-1)*(e[1]-e[0]),d3.range(e[0],e[1]+r,r)}},{}],199:[function(e,t,n){var r;r=e("./d3selection.coffee"),t.exports=function(e,t){var n;if(!e||!t)return!1;for(r(e)&&(e=e.node()),r(e)&&(t=t.node()),n=t.parentNode;null!==n;){if(n===e)return!0;n=n.parentNode}return!1}},{"./d3selection.coffee":202}],200:[function(e,t,n){t.exports=function(e,t){var n;return n=e[0],e.forEach(function(e){return Math.abs(t-e)<Math.abs(t-n)?n=e:void 0}),n}},{}],201:[function(e,t,n){var r,o,i;o=e("../object/merge.coffee"),i=e("../object/validate.coffee"),r=function(e){var t;return i(e)?o(e):e instanceof Array?(t=[],e.forEach(function(e){return t.push(r(e))}),t):e},t.exports=r},{"../object/merge.coffee":165,"../object/validate.coffee":166}],202:[function(e,t,n){var r;r=e("../client/ie.js"),t.exports=function(e){return r?"object"==typeof e&&e instanceof Array&&"size"in e&&"select"in e:e instanceof d3.selection}},{"../client/ie.js":40}],203:[function(e,t,n){t.exports=function(e,t){var n;n=new Image,n.src=e,n.crossOrigin="Anonymous",n.onload=function(){var e,n;e=document.createElement("canvas"),e.width=this.width,e.height=this.height,n=e.getContext("2d"),n.drawImage(this,0,0),t.call(this,e.toDataURL("image/png")),e=null}}},{}],204:[function(e,t,n){var r,o;r=e("../object/validate.coffee"),o=function(e,t,n,i,a){var s,l,u,c,f,d,p,h,g,v,m,y,x,b;if(void 0===e)return[];if(i&&void 0===a&&(a=i.id.value),e instanceof Array||(e=[e]),v=[],void 0===t)return e.reduce(function(e,t){var n;return n=JSON.stringify(t),v.indexOf(n)<0&&(e.indexOf(t)<0&&e.push(t),v.push(n)),e},[]);if(b=[],s=function(e){var t;return void 0!==e&&null!==e&&(t=JSON.stringify(e),v.indexOf(t)<0)?(b.push(e),v.push(t)):void 0},"function"==typeof n&&i)for(u=0,d=e.length;d>u;u++)for(l=e[u],x=o(n(i,l,t,a)),c=0,p=x.length;p>c;c++)y=x[c],s(y);else if("function"==typeof t)for(f=0,h=e.length;h>f;f++)l=e[f],x=t(l),s(x);else for(m=0,g=e.length;g>m;m++)l=e[m],r(l)&&(x=l[t],s(x));return b.sort(function(e,t){return e-t})},t.exports=o},{"../object/validate.coffee":166}],205:[function(e,t,n){t.exports=function(e){var t,n,r,o,i;for(e.container.value.style("position",function(){var e,t;return e=d3.select(this).style("position"),t=["absolute","fixed"].indexOf(e)>=0,t?e:"relative"}).html(""),o=["width","height"],n=0,r=o.length;r>n;n++)i=o[n],e[i].value||(t=function(n){var r,o;return void 0===n.tagName||["BODY","HTML"].indexOf(n.tagName)>=0?(o=window["inner"+i.charAt(0).toUpperCase()+i.slice(1)],r=document!==n?d3.select(n):!1,r&&("width"===i?(o-=parseFloat(r.style("margin-left"),10),o-=parseFloat(r.style("margin-right"),10),o-=parseFloat(r.style("padding-left"),10),o-=parseFloat(r.style("padding-right"),10)):(o-=parseFloat(r.style("margin-top"),10),o-=parseFloat(r.style("margin-bottom"),10),o-=parseFloat(r.style("padding-top"),10),o-=parseFloat(r.style("padding-bottom"),10))),e[i].value=20>=o?e[i].small:o):(o=parseFloat(d3.select(n).style(i),10),"number"==typeof o&&o>0?e[i].value=o:"BODY"!==n.tagName?t(n.parentNode):void 0)},t(e.container.value.node()),1===d3.selectAll("body > *:not(script)").size()&&d3.select("body").style("overflow","hidden"));e.container.value.style("width",e.width.value+"px").style("height",e.height.value+"px")}},{}],206:[function(e,t,n){var r=e("../../core/data/format.js"),o=e("../../core/data/color.js"),i=e("../../core/data/keys.coffee"),a=e("../../core/data/load.coffee"),s=e("./ui/drawer.js"),l=e("./ui/legend.js"),u=e("./ui/timeline.coffee"),c=e("./errorCheck.js"),f=e("../../core/fetch/data.js"),d=e("./finish.js"),p=e("./focus/tooltip.coffee"),h=e("./focus/viz.js"),g=e("./ui/history.coffee"),v=e("../../core/parse/edges.js"),m=e("../../core/parse/nodes.js"),y=e("../../core/console/print.coffee"),x=e("../../tooltip/remove.coffee"),b=e("./types/run.coffee"),w=e("./shapes/draw.js"),_=e("../../string/format.js"),k=e("./svg/enter.js"),A=e("./svg/update.js"),M=e("./ui/titles.js"),z=e("../../object/validate.coffee");t.exports=function(e){var t=[],n=e.type.value,j=e.format.locale.value,E=j.message.ui,S=j.message.draw,T=["data","attrs","coords","nodes","edges"];if(T.forEach(function(n){e.error.value||e[n].loaded||!e[n].url||t.push({"function":function(e,t){a(e,n,t)},message:j.message.loading,wait:!0})}),e.draw.update){var N=j.visualization[n]||n,C=e.types[n].setup||!1,O=e.types[n].requirements||[],q=_(j.message.initializing,N),D=j.message.data;O instanceof Array||(O=[O]),N=N.toLowerCase(),e.error.value||"function"!=typeof C||t.push({"function":function(e){if(e.dev.value){var t="running "+N+" setup";y.time(t)}C(e),e.dev.value&&y.timeEnd(t)},message:q}),e.container.changed&&t.push({"function":k,message:q}),n in e.g.apps||t.push({"function":function(e){if(e.dev.value){var t="creating "+N+" group";y.time(t)}e.g.apps[n]=e.g.app.selectAll("g#"+n).data([n]),e.g.apps[n].enter().append("g").attr("id",n).attr("opacity",0),e.dev.value&&y.timeEnd(t)},message:q}),e.data.changed&&t.push({"function":function(e){e.data.cache={},delete e.nodes.restricted,delete e.edges.restricted,i(e,"data")},message:D}),e.attrs.changed&&t.push({"function":function(e){i(e,"attrs")},message:D}),t.push({"function":function(e){if(!e.color.type||e.color.changed||e.data.changed||e.attrs.changed||e.id.changed||e.depth.changed||e.time.fixed.value&&(e.time.solo.changed||e.time.mute.changed)){if(e.color.valueScale=!1,e.dev.value){var t="checking color type";y.time(t)}if(e.color.type=!1,e.color.value){var n=e.color.value;z(n)&&(n=n[e.id.value]?n[e.id.value]:n[d3.keys(n)[0]]),e.data.keys&&n in e.data.keys?e.color.type=e.data.keys[n]:e.attrs.keys&&n in e.attrs.keys&&(e.color.type=e.attrs.keys[n])}else e.data.keys&&(e.color.type=e.data.keys[e.id.value]);e.dev.value&&y.timeEnd(t)}},message:D}),O.indexOf("edges")>=0&&e.edges.value&&(!e.edges.linked||e.edges.changed)&&t.push({"function":v,message:D}),O.indexOf("nodes")>=0&&e.edges.value&&(!e.nodes.positions||e.nodes.changed)&&t.push({"function":m,message:D}),(e.data.changed||e.time.changed||e.time.format.changed||e.id.changed||e.x.scale.changed&&[e.x.scale.value,e.x.scale.previous].indexOf("discrete")>=0||e.y.scale.changed&&[e.y.scale.value,e.y.scale.previous].indexOf("discrete")>=0)&&t.push({"function":r,message:D}),e.error.value||t.push({"function":function(e){var t=e.time.fixed.value?null:["all"];if(e.dev.value){var n=t?"fetching pool data":"fetching data";y.time(n)}e.data.pool=f(e,t),e.dev.value&&y.timeEnd(n),t?(e.dev.value&&y.time("fetching data for current year"),e.data.viz=f(e),e.dev.value&&y.timeEnd("fetching data for current year")):e.data.viz=e.data.pool,e.draw.timing=e.data.viz.length<e.data.large?e.timing.transitions:0},message:D}),e.error.value||t.push({check:function(e){return e.color.value&&"number"===e.color.type&&e.color.valueScale===!1},"function":o,message:D})}return t.push({"function":function(e){if(e.dev.value){var t=e.format.locale.value.message.tooltipReset;y.time(t)}e.type.previous&&n!==e.type.previous&&x(e.type.previous),x(n),e.dev.value&&y.timeEnd(t)},message:E}),e.error.value||t.push({"function":c,message:E}),t.push({"function":function(e){if(e.margin.process(),M(e),!e.error.value)if(e.draw.update)s(e),u(e),l(e);else{e.dev.value&&y.time("calculating margins");var t=e.container.value.select("div#d3plus_drawer").node().offsetHeight||e.container.value.select("div#d3plus_drawer").node().getBoundingClientRect().height,n=e.g.timeline.node().getBBox();n=e.timeline.value?n.height+e.ui.padding:0;var r=e.g.legend.node().getBBox();r=e.legend.value?r.height+e.ui.padding:0,e.margin.bottom+=t+n+r,e.dev.value&&y.timeEnd("calculating margins")}g(e),e.height.viz-=e.margin.top+e.margin.bottom,e.width.viz-=e.margin.left+e.margin.right},message:E}),e.error.value||t.push({"function":p,message:E}),t.push({"function":A,message:S}),!e.error.value&&e.draw.update&&t.push({"function":[b,w],message:S}),t.push({"function":[h,d],message:S}),t}},{"../../core/console/print.coffee":54,"../../core/data/color.js":56,"../../core/data/format.js":58,"../../core/data/keys.coffee":60,"../../core/data/load.coffee":61,"../../core/fetch/data.js":66,"../../core/parse/edges.js":91,"../../core/parse/nodes.js":93,"../../object/validate.coffee":166,"../../string/format.js":167,"../../tooltip/remove.coffee":197,"./errorCheck.js":207,"./finish.js":208,"./focus/tooltip.coffee":209,"./focus/viz.js":210,"./shapes/draw.js":219,"./svg/enter.js":230,"./svg/update.js":231,"./types/run.coffee":234,"./ui/drawer.js":235,"./ui/history.coffee":236,"./ui/legend.js":237,"./ui/timeline.coffee":239,"./ui/titles.js":240}],207:[function(e,t,n){var r=e("../../core/fetch/text.js"),o=e("../../core/console/print.coffee"),i=e("../../core/methods/rejected.coffee"),a=e("../../string/format.js"),s=e("../../string/list.coffee");t.exports=function(e){e.dev.value&&o.time("checking for errors");var t=["id"],n=e.types[e.type.value].requirements;n&&(n instanceof Array?t=t.concat(e.types[e.type.value].requirements):t.push(n));var l=[];if(t.forEach(function(t){if("string"==typeof t)e[t].value||l.push('"'+t+'"');else if("function"==typeof t){var n=t(e);!n.status&&n.text&&l.push('"'+n.text+'"')}}),l.length>1){var u=e.format.locale.value.error.methods,c=e.format.locale.value.visualization[e.type.value]||e.type.value,f=e.format.locale.value.ui.and;l=s(l,f),e.error.internal=a(u,c,l)}else if(1===l.length){var u=e.format.locale.value.error.method,c=e.format.locale.value.visualization[e.type.value]||e.type.value;e.error.internal=a(u,c,l[0])}if(!e.error.internal&&t.indexOf("edges")>=0&&t.indexOf("focus")>=0){var d=e.edges.connections(e.focus.value[0],e.id.value);if(0==d.length){var p=r(e,e.focus.value[0],e.depth.value),u=e.format.locale.value.error.connections;e.error.internal=a(u,'"'+p+'"')}}var t=["d3"];e.types[e.type.value].libs&&(t=t.concat(e.types[e.type.value].libs));var l=[];if(t.forEach(function(e){window[e]||l.push('"'+e+'"')}),l.length>1){var u=e.format.locale.value.error.libs,c=e.format.locale.value.visualization[e.type.value],f=e.format.locale.value.ui.and;l=s(l,f),e.error.internal=a(u,c,l)}else if(1===l.length){var u=e.format.locale.value.error.lib,c=e.format.locale.value.visualization[e.type.value];e.error.internal=a(u,c,l[0])}var h=e.shape.accepted(e);h instanceof Array||(h=[h]);var g=e.shape.value;if((!g||i(e,h,g,"shape"))&&e.self.shape(h[0]),"modes"in e.types[e.type.value]){var v=e.types[e.type.value].modes;v instanceof Array||(v=[v]);var m=e.type.mode.value;(!m||i(e,v,m,"mode"))&&e.self.type({mode:v[0]})}e.dev.value&&o.timeEnd("checking for errors")}},{"../../core/console/print.coffee":54,"../../core/fetch/text.js":68,"../../core/methods/rejected.coffee":87,"../../string/format.js":167,"../../string/list.coffee":168}],208:[function(e,t,n){var r=e("./shapes/edges.js"),o=e("./ui/message.js"),i=e("../../core/methods/reset.coffee"),a=e("../../core/console/print.coffee"),s=e("./shapes/labels.js"),l=e("../../string/title.coffee"),u=e("./zoom/bounds.coffee"),c=e("./zoom/labels.coffee"),f=e("./zoom/mouse.coffee");t.exports=function(e){if(!e.error.value){var t=e.zoom.viewport||e.zoom.bounds;e.types[e.type.value].zoom&&e.zoom.value&&t?(e.dev.value&&a.time("calculating zoom"),e.draw.first||e.zoom.reset?u(e,t,0):(e.type.changed||e.focus.changed||e.height.changed||e.width.changed||e.nodes.changed||e.legend.changed||e.timeline.changed||e.ui.changed)&&u(e,t),e.dev.value&&a.timeEnd("calculating zoom")):(e.zoom.bounds=[[0,0],[e.width.viz,e.height.viz]],e.zoom.scale=1,u(e))}var n=e.zoom.size?e.zoom.size.width:e.width.viz,d=e.zoom.size?e.zoom.size.height:e.height.viz,p=e.zoom.bounds?e.zoom.bounds[0][0]:0,h=e.zoom.bounds?e.zoom.bounds[0][1]:0;if(e.g.overlay.attr("width",n).attr("height",d).attr("x",p).attr("y",h),e.error.value||(e.draw.update?(r(e),s(e,"data"),e.edges.label&&setTimeout(function(){s(e,"edges")},e.draw.timing+200)):e.types[e.type.value].zoom&&e.zoom.value&&e.draw.timing&&setTimeout(function(){c(e)},e.draw.timing)),!e.error.value){var g=e.types[e.type.value].requirements||[];g instanceof Array||(g=[g]);var v=g.indexOf("data")>=0;e.error.internal||e.data.viz&&e.returned.nodes.length||!v||(e.error.internal=e.format.locale.value.error.data)}var m=e.type.previous;if(m&&e.type.value!=m&&e.g.apps[m]&&(e.dev.value&&a.time('hiding "'+m+'"'),e.draw.timing?e.g.apps[m].transition().duration(e.draw.timing).attr("opacity",0):e.g.apps[m].attr("opacity",0),e.dev.value&&a.timeEnd()),!e.error.value){var y=v&&0===e.data.viz.length||e.error.internal||e.error.value?0:e.focus.value.length&&e.types[e.type.value].zoom&&e.zoom.value?1-e.tooltip.curtain.opacity:1,x=e.draw.timing;e.group.transition().duration(x).attr("opacity",y),e.g.data.transition().duration(x).attr("opacity",y),e.g.edges.transition().duration(x).attr("opacity",y)}e.error.value?o(e,e.error.value):e.error.internal?(e.error.internal=l(e.error.internal),a.warning(e.error.internal),o(e,e.error.internal),e.error.internal=null):o(e),setTimeout(function(){i(e),e.types[e.type.value].zoom&&e.zoom.value?(e.g.zoom.datum(e).call(e.zoom.behavior.on("zoom",f)),e.zoom.scroll.value||e.g.zoom.on("mousewheel.zoom",null).on("MozMousePixelScroll.zoom",null).on("wheel.zoom",null),e.zoom.click.value||e.g.zoom.on("dblclick.zoom",null),e.zoom.pan.value||e.g.zoom.on("mousedown.zoom",null).on("mousemove.zoom",null)):e.g.zoom.call(e.zoom.behavior.on("zoom",null)).on("dblclick.zoom",null).on("mousedown.zoom",null).on("mousemove.zoom",null).on("mousewheel.zoom",null).on("MozMousePixelScroll.zoom",null).on("touchstart.zoom",null).on("wheel.zoom",null)},e.draw.timing)}},{"../../core/console/print.coffee":54,"../../core/methods/reset.coffee":89,"../../string/title.coffee":170,"./shapes/edges.js":220,"./shapes/labels.js":222,"./ui/message.js":238,"./zoom/bounds.coffee":241,"./zoom/labels.coffee":243,"./zoom/mouse.coffee":244}],209:[function(e,t,n){var r,o,i,a;r=e("../tooltip/create.js"),o=e("../../../core/fetch/value.coffee"),i=e("../../../core/console/print.coffee"),a=e("../../../tooltip/remove.coffee"),t.exports=function(e){var t,n,s;n=e.focus,!e.error.internal&&1===n.value.length&&n.value.length&&!e.small&&n.tooltip.value?(e.dev.value&&i.time("drawing focus tooltip"),t=e.data.pool.filter(function(t){return o(e,t,e.id.value)===n.value[0]}),t.length>=1?t=t[0]:(t={},t[e.id.value]=n.value[0]),s=e.labels.padding,r({anchor:"top left",arrow:!1,data:t,fullscreen:!1,id:"visualization_focus",length:"long",maxheight:e.height.viz-2*s,mouseevents:!0,offset:0,vars:e,width:e.tooltip.large,x:e.width.value-e.margin.right-s,y:e.margin.top+s}),e.width.viz-=e.tooltip.large+2*s,e.dev.value&&i.timeEnd("drawing focus tooltip")):a("visualization_focus")}},{"../../../core/console/print.coffee":54,"../../../core/fetch/value.coffee":69,"../../../tooltip/remove.coffee":197,"../tooltip/create.js":232}],210:[function(t,n,r){var o=t("../../../client/pointer.coffee"),i=t("../../../core/fetch/value.coffee"),a=t("../../../core/console/print.coffee"),s=t("../../../util/uniques.coffee");n.exports=function(t){if(t.g.edge_focus.selectAll("g").remove(),t.g.data_focus.selectAll("g").remove(),t.focus.value.length&&t.types[t.type.value].zoom&&t.zoom.value){t.dev.value&&a.time("drawing focus elements");var n=t.g.edges.selectAll("g");if(n.size()>0){n.each(function(e){var n=e[t.edges.source][t.id.value],r=e[t.edges.target][t.id.value];if(n==t.focus.value[0]||r==t.focus.value[0]){var o=t.g.edge_focus.node().appendChild(this.cloneNode(!0));d3.select(o).datum(e).attr("opacity",1).selectAll("line, path").datum(e)}});var r=t.edges.arrows.value;t.g.edge_focus.selectAll("line, path").attr("vector-effect","non-scaling-stroke").style("stroke",t.color.focus).style("stroke-width",function(){return t.edges.size.value?d3.select(this).style("stroke-width"):2*t.data.stroke.width}).attr("marker-start",function(e){var n=t.edges.arrows.direction.value;if("bucket"in e.d3plus)var o="_"+e.d3plus.bucket;else var o="";return"source"==n&&r?"url(#d3plus_edge_marker_focus"+o+")":"none"}).attr("marker-end",function(e){var n=t.edges.arrows.direction.value;if("bucket"in e.d3plus)var o="_"+e.d3plus.bucket;else var o="";return"target"==n&&r?"url(#d3plus_edge_marker_focus"+o+")":"none"}),t.g.edge_focus.selectAll("text").style("fill",t.color.focus)}var l=s(t.edges.connections(t.focus.value[0],t.id.value,!0),t.id.value,i,t);l.push(t.focus.value[0]);

{var u=[],c=[],f=[0],d=[0];t.g.data.selectAll("g").each(function(n){if(l.indexOf(n[t.id.value])>=0){var r=t.g.data_focus.node().appendChild(this.cloneNode(!0)),r=d3.select(r).datum(n).attr("opacity",1);"coordinates"==t.shape.value?t.zoom.viewport=t.path.bounds(t.zoom.coords[n.d3plus.id]):"d3plus"in n&&("x"in n.d3plus&&u.push(n.d3plus.x),"y"in n.d3plus&&c.push(n.d3plus.y),"r"in n.d3plus?(f.push(n.d3plus.r),d.push(n.d3plus.r)):("width"in n.d3plus&&f.push(n.d3plus.width/2),"height"in n.d3plus&&d.push(n.d3plus.height/2)));for(e in o){var i=d3.select(this).on(o[e]);i&&r.on(o[e],i)}}})}if(u.length&&c.length){var p=d3.extent(u),h=d3.extent(c),g=d3.max(f),v=d3.max(d);t.zoom.viewport=[[p[0]-g,h[0]-v],[p[1]+g,h[1]+v]]}t.g.data_focus.selectAll("path").style("stroke-width",2*t.data.stroke.width),t.dev.value&&a.timeEnd("drawing focus elements")}else t.zoom.viewport=!1}},{"../../../client/pointer.coffee":41,"../../../core/console/print.coffee":54,"../../../core/fetch/value.coffee":69,"../../../util/uniques.coffee":204}],211:[function(e,t,n){var r,o,i,a;a=e("./style.coffee"),o=e("../../../geom/largestRect.coffee"),i=e("../../../geom/path2poly.coffee"),r={start:{},end:{}},t.exports=function(e,t,n,s){var l,u,c,f;l=d3.svg.arc().innerRadius(0).outerRadius(function(e){return e.d3plus.r}).startAngle(function(e){return e.d3plus.startAngle}).endAngle(function(e){return e.d3plus.endAngle}),c=function(t){var n,r;return e.labels.value&&(t.d3plus.label?t.d3plus_label=t.d3plus.label:(n=i(l(t)),r=o(n,{angle:0}),r[0]?t.d3plus_label={w:r[0].width,h:r[0].height,x:r[0].cx,y:r[0].cy}:delete t.d3plus_label)),[t]},e.draw.timing?(f=d3.svg.arc().innerRadius(0).outerRadius(function(e){return e.d3plus.r}).startAngle(function(e){return void 0===r.start[e.d3plus.id]&&(r.start[e.d3plus.id]=0),isNaN(r.start[e.d3plus.id])&&(r.start[e.d3plus.id]=e.d3plus.startAngle),r.start[e.d3plus.id]}).endAngle(function(e){return void 0===r.end[e.d3plus.id]&&(r.end[e.d3plus.id]=0),isNaN(r.end[e.d3plus.id])&&(r.end[e.d3plus.id]=e.d3plus.endAngle),r.end[e.d3plus.id]}),u=function(e,t){return e.attrTween("d",function(e){var n,o,i,a;return void 0===t?(a=e.d3plus.startAngle,n=e.d3plus.endAngle):0===t&&(a=0,n=0),i=d3.interpolate(r.start[e.d3plus.id],a),o=d3.interpolate(r.end[e.d3plus.id],n),function(t){return r.start[e.d3plus.id]=i(t),r.end[e.d3plus.id]=o(t),f(e)}})},n.append("path").attr("class","d3plus_data").call(a,e).attr("d",f),t.selectAll("path.d3plus_data").data(c).transition().duration(e.draw.timing).call(a,e).call(u),s.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(u,0)):(n.append("path").attr("class","d3plus_data"),t.selectAll("path.d3plus_data").data(c).call(a,e).attr("d",l))}},{"../../../geom/largestRect.coffee":155,"../../../geom/path2poly.coffee":157,"./style.coffee":226}],212:[function(e,t,n){var r=e("../../../core/fetch/text.js"),o=e("../../../font/sizes.coffee"),i=e("../../../geom/largestRect.coffee"),a=e("./style.coffee");t.exports=function(e,t,n,s){var l=d3.svg.area().x(function(e){return e.d3plus.x}).y0(function(e){return e.d3plus.y0}).y1(function(e){return e.d3plus.y}).interpolate(e.shape.interpolate.value),u=d3.svg.area().x(function(e){return e.d3plus.x}).y0(function(e){return e.d3plus.y0}).y1(function(e){return e.d3plus.y0}).interpolate(e.shape.interpolate.value);n.append("path").attr("class","d3plus_data").attr("d",function(e){return u(e.values)}).call(a,e),t.selectAll("path.d3plus_data").data(function(t){if(e.labels.value&&t.values.length>1){var n=[],a=[],s=r(e,t);t.values.forEach(function(e){n.push([e.d3plus.x,e.d3plus.y]),a.push([e.d3plus.x,e.d3plus.y0])}),n=n.concat(a.reverse());var l={"font-weight":e.labels.font.weight,"font-family":e.labels.font.family.value};if(s.length)var u=o(s[0],l),c=u[0].width/u[0].height;else var c=null;var f=i(n,{angle:d3.range(-70,71,1),aspectRatio:c,tolerance:0});if(f&&f[0]){var d={w:~~f[0].width,h:~~f[0].height,x:~~f[0].cx,y:~~f[0].cy,angle:-1*f[0].angle,padding:2,names:s};d.translate=0!==f[0].angle?{x:d.x,y:d.y}:!1,d.w>=10&&d.h>=10&&(t.d3plus_label=d)}}return[t]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).attr("d",function(e){return l(e.values)}).call(a,e):t.selectAll("path.d3plus_data").attr("d",function(e){return l(e.values)}).call(a,e)}},{"../../../core/fetch/text.js":68,"../../../font/sizes.coffee":97,"../../../geom/largestRect.coffee":155,"./style.coffee":226}],213:[function(e,t,n){var r=(e("../../../core/fetch/text.js"),e("../../../geom/largestRect.coffee"),e("./style.coffee"));t.exports=function(e,t,n,o){function i(e){e.attr("transform","scale(1)")}function a(e){e.attr("transform",function(e){var t=Math.min(e.d3plus.width,e.d3plus.height),n=Math.floor(t/16);return"scale("+n+")"})}n.append("path").attr("class","d3plus_data").attr("d","M5-6.844L3.594-5.407L-2,0.188l-1.594-1.594L-5-2.844L-7.844,0l1.438,1.406l3,3L-2,5.843l1.406-1.438l7-7L7.844-4L5-6.844z").call(i).call(r,e),t.selectAll("path.d3plus_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(a).call(r,e):t.selectAll("path.d3plus_data").call(a).call(r,e)}},{"../../../core/fetch/text.js":68,"../../../geom/largestRect.coffee":155,"./style.coffee":226}],214:[function(e,t,n){var r,o,i,a;o=e("../../../core/fetch/value.coffee"),r=e("../../../core/fetch/color.coffee"),i=e("../../../color/lighter.coffee"),a=e("./segments.coffee"),t.exports=function(e,t,n){var o,s,l,u;return s=e.d3plus.shape||t.shape.value,"line"===t.shape.value&&"circle"!==s?"none":"area"===t.shape.value||"active"===s||"line"===t.shape.value?r(t,e):"temp"===s?n?r(t,e):"url(#d3plus_hatch_"+e.d3plus.id+")":e.d3plus["static"]?i(r(t,e),.75):(o=a(t,e,"active"),l=a(t,e,"temp"),u=a(t,e,"total"),!t.active.value&&!t.temp.value||o===!0||o&&u&&o>=u&&!l||o&&!u?r(t,e):t.active.spotlight.value?"#eee":i(r(t,e),.75))}},{"../../../color/lighter.coffee":47,"../../../core/fetch/color.coffee":65,"../../../core/fetch/value.coffee":69,"./segments.coffee":225}],215:[function(e,t,n){var r,o,i,a,s,l,u,c;r=e("../../../util/copy.coffee"),o=e("../../../network/distance.coffee"),i=e("../../../core/fetch/text.js"),a=e("../../../font/sizes.coffee"),l=e("../../../geom/largestRect.coffee"),u=e("../../../geom/path2poly.coffee"),c=e("./style.coffee"),s={},t.exports=function(e,t,n,f){var d,p;return d=d3.geo[e.coords.projection.value]().center(e.coords.center),e.zoom.scale||(e.zoom.scale=1),e.zoom.area=1/e.zoom.scale/e.zoom.scale,e.path=d3.geo.path().projection(d),n.append("path").attr("id",function(e){return e.id}).attr("class","d3plus_data").attr("d",e.path).call(c,e),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(c,e):t.selectAll("path.d3plus_data").call(c,e),p=e.old_height!==e.height.viz||e.height.changed||e.old_width!==e.width.viz||e.width.changed,e.old_height=e.height.viz,e.old_width=e.width.viz,e.coords.changed||p||e.coords.mute.changed||e.coords.solo.changed||e.type.changed?(e.zoom.bounds=null,e.zoom.reset=!0,e.zoom.coords={},t.each(function(t){var n,c,f,d,p,h,g,v,m,y,x,b,w,_,k,A,M,z,j,E,S,T;if(t.geometry.coordinates.length>1){for(m=[],c=[],n=0,T=r(t),b=r(t),t.geometry.coordinates=t.geometry.coordinates.filter(function(t,r){var o;return T.geometry.coordinates=[t],o=e.path.area(T),o>0?(c.push(o),o>n&&(b.geometry.coordinates=[t],n=o),!0):!1}),p=e.path.centroid(b),z=r(t),j=t.geometry.coordinates,y=x=0,w=j.length;w>x;y=++x)d=j[y],T.geometry.coordinates=[d],m.push(o(e.path.centroid(T),p));v=m.reduce(function(e,t,n){return t&&e.push(c[n]/t),e},[]),g=d3.quantile(v,e.coords.threshold.value),z.geometry.coordinates=z.geometry.coordinates.filter(function(e,t){var n,r;return r=m[t],n=c[t],0===r||n/r>g}),h=b.geometry.coordinates[0],h&&"MultiPolygon"===b.geometry.type&&(h=h[0],b.geometry.coordinates[0]=h,b.geometry.type="Polygon")}else z=t,b=t,h=t.geometry.coordinates[0];return e.zoom.coords[t.d3plus.id]=z,f=e.path.bounds(z),_=i(e,t),delete t.d3plus_label,h&&_.length&&(k=u(e.path(b)),S={"font-weight":e.labels.font.weight,"font-family":e.labels.font.family.value},A=null,1===_[0].split(" ").length&&(E=a(_[0],S)[0],A=E.width/E.height),M=l(k,{angle:0,aspectRatio:A}),M&&(M=M[0],t.d3plus_label={anchor:"middle",valign:"center",h:M.height,w:M.width,x:M.cx,y:M.cy,names:_})),s[t.id]=t.d3plus_label,e.zoom.bounds?(e.zoom.bounds[0][0]>f[0][0]&&(e.zoom.bounds[0][0]=f[0][0]),e.zoom.bounds[0][1]>f[0][1]&&(e.zoom.bounds[0][1]=f[0][1]),e.zoom.bounds[1][0]<f[1][0]&&(e.zoom.bounds[1][0]=f[1][0]),e.zoom.bounds[1][1]<f[1][1]?e.zoom.bounds[1][1]=f[1][1]:void 0):e.zoom.bounds=f})):e.focus.value.length?void 0:(e.zoom.viewport=!1,t.each(function(e){return e.d3plus_label=s[e.id]}))}},{"../../../core/fetch/text.js":68,"../../../font/sizes.coffee":97,"../../../geom/largestRect.coffee":155,"../../../geom/path2poly.coffee":157,"../../../network/distance.coffee":159,"../../../util/copy.coffee":201,"./style.coffee":226}],216:[function(e,t,n){var r=e("./style.coffee");t.exports=function(e,t,n,o){function i(e){e.attr("d",d3.svg.symbol().type("cross").size(10))}function a(e){e.attr("d",d3.svg.symbol().type("cross").size(function(e){var t=Math.min(e.d3plus.width,e.d3plus.height);return d3.scale.pow().exponent(2)(t/2)}))}n.append("path").attr("class","d3plus_data").call(i).call(r,e),t.selectAll("path.d3plus_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(a).call(r,e):t.selectAll("path.d3plus_data").call(a).call(r,e)}},{"./style.coffee":226}],217:[function(e,t,n){var r=e("./style.coffee");t.exports=function(e,t,n,o){function i(e){e.attr("d",d3.svg.symbol().type("diamond").size(10))}function a(e){e.attr("d",d3.svg.symbol().type("diamond").size(function(e){var t=Math.min(e.d3plus.width,e.d3plus.height);return d3.scale.pow().exponent(2)(t/2)}))}n.append("path").attr("class","d3plus_data").call(i).call(r,e),t.selectAll("path.d3plus_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(a).call(r,e):t.selectAll("path.d3plus_data").call(a).call(r,e)}},{"./style.coffee":226}],218:[function(e,t,n){var r=e("./style.coffee");t.exports=function(e,t,n,o){function i(t,n,r,o){if(!n)var n=0;if("number"!=typeof r)var r=void 0;if("number"!=typeof o)var o=void 0;t.attrTween("d",function(t){if(void 0==r)var i=t.d3plus.r?t.d3plus.r:d3.max([t.d3plus.width,t.d3plus.height]);else var i=r;if(void 0==o)var a=t.d3plus.segments[t.d3plus.shape];else var a=o;e.arcs[t.d3plus.shape][t.d3plus.id]||(e.arcs[t.d3plus.shape][t.d3plus.id]={r:0},e.arcs[t.d3plus.shape][t.d3plus.id].a=2*Math.PI);var l=d3.interpolate(e.arcs[t.d3plus.shape][t.d3plus.id].r,i+n),u=d3.interpolate(e.arcs[t.d3plus.shape][t.d3plus.id].a,a);return function(n){return e.arcs[t.d3plus.shape][t.d3plus.id].r=l(n),e.arcs[t.d3plus.shape][t.d3plus.id].a=u(n),s(t)}})}function a(e){return e.d3plus.label?e.d3plus_label=e.d3plus.label:delete e.d3plus_label,[e]}e.arcs||(e.arcs={donut:{},active:{},temp:{}});var s=d3.svg.arc().startAngle(0).endAngle(function(t){var n=e.arcs[t.d3plus.shape][t.d3plus.id].a;return n>2*Math.PI?2*Math.PI:n}).innerRadius(function(t){if(t.d3plus["static"])return 0;var n=e.arcs[t.d3plus.shape][t.d3plus.id].r;return n*e.data.donut.size}).outerRadius(function(t){return e.arcs[t.d3plus.shape][t.d3plus.id].r});e.draw.timing?(o.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(i,0,0).each("end",function(t){delete e.arcs[t.d3plus.shape][t.d3plus.id]}),t.selectAll("path.d3plus_data").data(a).transition().duration(e.draw.timing).call(i).call(r,e),n.append("path").attr("class","d3plus_data").transition().duration(0).call(i,0,0).call(r,e).transition().duration(e.draw.timing).call(i).call(r,e)):(o.selectAll("path.d3plus_data").each(function(t){delete e.arcs[t.d3plus.shape][t.d3plus.id]}),n.append("path").attr("class","d3plus_data"),t.selectAll("path.d3plus_data").data(a).call(i).call(r,e))}},{"./style.coffee":226}],219:[function(e,t,n){var r=e("../../../util/child.coffee"),o=e("../../../util/closest.coffee"),i=e("../tooltip/create.js"),a=e("../../../client/pointer.coffee"),s=e("../../../core/fetch/value.coffee"),l=e("../../../core/fetch/color.coffee"),u=e("../../../core/fetch/text.js"),c=e("../../../color/legible.coffee"),f=e("../../../core/console/print.coffee"),d=e("../../../tooltip/remove.coffee"),p=e("./segments.coffee"),h=e("./fill.js"),g=e("../../../string/strip.js"),v=e("../../../client/touch.coffee"),m=e("../zoom/propagation.coffee"),y=e("../../../util/uniques.coffee"),x=e("../../../object/validate.coffee"),b=e("../zoom/direction.coffee"),w={arc:e("./arc.coffee"),area:e("./area.js"),check:e("./check.js"),coordinates:e("./coordinates.coffee"),cross:e("./cross.js"),diamond:e("./diamond.js"),donut:e("./donut.js"),line:e("./line.js"),rect:e("./rect.coffee"),triangle_down:e("./triangle_down.js"),triangle_up:e("./triangle_up.js"),whisker:e("./whisker.coffee")};t.exports=function(e){function t(t){if(!t.d3plus.id){t.d3plus.id="";for(var n=0;n<=e.depth.value;n++)t.d3plus.id+=s(e,t,e.id.nesting[n])+"_";t.d3plus.id+=S,["x","y"].forEach(function(n){if("discrete"==e[n].scale.value){var r=s(e,t,e[n].value);r.constructor===Date&&(r=r.getTime()),t.d3plus.id+="_"+r}}),t.d3plus.id=g(t.d3plus.id)}return t}function n(t,n){var r=e.types[e.type.value].scale,o=1;r&&(x[r]&&e.shape.value in r?o=r[e.shape.value]:"function"==typeof r?o=r(e,e.shape.value):"number"==typeof r&&(o=r)),o=n?o:1,t.attr("transform",function(e){if(["line","area","coordinates"].indexOf(S)<0){var t=e.d3plus.x||0,n=e.d3plus.y||0;return"translate("+t+","+n+")scale("+o+")"}return"scale("+o+")"})}function _(t){if(t&&e.g.edges.selectAll("g").size()>0){e.g.edge_hover.selectAll("*").remove(),e.g.edges.selectAll("g").each(function(n){var r=t[e.id.value],o=n[e.edges.source][e.id.value],i=n[e.edges.target][e.id.value];if(o==r||i==r){var a=e.g.edge_hover.node().appendChild(this.cloneNode(!0));d3.select(a).datum(n).attr("opacity",1).selectAll("line, path").datum(n)}});var n=e.edges.arrows.value;e.g.edge_hover.attr("opacity",0).selectAll("line, path").style("stroke",e.color.primary).style("stroke-width",function(){return e.edges.size.value?d3.select(this).style("stroke-width"):2*e.data.stroke.width}).attr("marker-start",function(t){var r=e.edges.arrows.direction.value;if("bucket"in t.d3plus)var o="_"+t.d3plus.bucket;else var o="";return"source"==r&&n?"url(#d3plus_edge_marker_highlight"+o+")":"none"}).attr("marker-end",function(t){var r=e.edges.arrows.direction.value;if("bucket"in t.d3plus)var o="_"+t.d3plus.bucket;else var o="";return"target"==r&&n?"url(#d3plus_edge_marker_highlight"+o+")":"none"}),e.g.edge_hover.selectAll("text").style("fill",e.color.primary),e.draw.timing?(e.g.edge_hover.transition().duration(e.timing.mouseevents).attr("opacity",1),e.g.edges.transition().duration(e.timing.mouseevents).attr("opacity",.5)):e.g.edge_hover.attr("opacity",1)}else e.draw.timing?(e.g.edge_hover.transition().duration(e.timing.mouseevents).attr("opacity",0).transition().selectAll("*").remove(),e.g.edges.transition().duration(e.timing.mouseevents).attr("opacity",1)):e.g.edge_hover.selectAll("*").remove()}var k=e.returned.nodes||[],A=e.returned.edges||[];e.draw.timing=k.length<e.data.large&&A.length<e.edges.large?e.timing.transitions:0;var M={arc:"arc",area:"area",check:"check",circle:"rect",coordinates:"coordinates",cross:"cross",donut:"donut",diamond:"diamond",line:"line",plus:"cross",rect:"rect",square:"rect",triangle_down:"triangle_down",triangle:"triangle_up",triangle_up:"triangle_up",whisker:"whisker"},z={};k.forEach(function(t){var n=t.d3plus&&t.d3plus.shape?t.d3plus.shape:e.shape.value;n in M&&(t.d3plus&&(t.d3plus.shape=n),n=M[n],z[n]||(z[n]=[]),z[n].push(t))});for(var j in M)if(!(M[j]in z)||0===d3.keys(z).length){var E=e.g.data.selectAll("g.d3plus_"+M[j]);e.draw.timing?E.transition().duration(e.draw.timing).attr("opacity",0).remove():E.remove()}for(var S in z){var T=e.g.data.selectAll("g.d3plus_"+S).data(z[S],function(n){if(n.d3plus||(n.d3plus={}),"coordinates"===S)return n.d3plus.id=n.id,n.id;if(!n.d3plus.id)if(n.values)n.values.forEach(function(e){e=t(e),e.d3plus.shape="circle"}),n.d3plus.id=n.key;else if(n=t(n),!n.d3plus.segments){n.d3plus.segments={donut:2*Math.PI};var r=p(e,n,"active"),o=p(e,n,"temp"),i=p(e,n,"total");i&&(n.d3plus.segments.active=r?r/i*2*Math.PI:0,n.d3plus.segments.temp=o?o/i*2*Math.PI+n.d3plus.segments.active:0)}return n.d3plus?n.d3plus.id:!1});if(e.draw.timing)var N=T.exit().transition().duration(e.draw.timing).attr("opacity",0).remove();else var N=T.exit().remove();e.draw.timing?T.transition().duration(e.draw.timing).call(n):T.call(n);var C=e.draw.timing?0:1,O=T.enter().append("g").attr("class","d3plus_"+S).attr("opacity",C).call(n);e.draw.timing&&O.transition().duration(e.draw.timing).attr("opacity",1),T.order(),e.dev.value&&f.time('drawing "'+S+'" shapes'),w[S](e,T,O,N,n),e.dev.value&&f.timeEnd('drawing "'+S+'" shapes'),["rect","donut"].indexOf(S)>=0&&e.types[e.type.value].fill&&(e.dev.value&&f.time('filling "'+S+'" shapes'),h(e,T,O,N,n),e.dev.value&&f.timeEnd('filling "'+S+'" shapes'))}if(_(),!v&&e.tooltip.value)e.g.data.selectAll("g").on(a.over,function(t){if(!(e.draw.frozen||t.d3plus&&t.d3plus["static"])){if(d3.select(this).style("cursor","pointer").transition().duration(e.timing.mouseevents).call(n,!0),d3.select(this).selectAll(".d3plus_data").transition().duration(e.timing.mouseevents).attr("opacity",1),e.covered=!1,t.values&&e.axes.discrete){var r="x"===e.axes.discrete?0:1,s=d3.mouse(e.container.value.node())[r],l=y(t.values,function(t){return t.d3plus[e.axes.discrete]}),u=o(l,s);t.d3plus_data=t.values[l.indexOf(u)],t.d3plus=t.values[l.indexOf(u)].d3plus}var c=t.d3plus_data?t.d3plus_data:t;i({vars:e,data:c}),"function"==typeof e.mouse?e.mouse(t.d3plus_data||t,e):e.mouse[a.over]&&e.mouse[a.over](t.d3plus_data||t,e),_(t)}}).on(a.move,function(t){if(!(e.draw.frozen||t.d3plus&&t.d3plus["static"])){{e.types[e.type.value].tooltip||"follow"}if(t.values&&e.axes.discrete){var n="x"===e.axes.discrete?0:1,r=d3.mouse(e.container.value.node())[n],s=y(t.values,function(t){return t.d3plus[e.axes.discrete]}),l=o(s,r);t.d3plus_data=t.values[s.indexOf(l)],t.d3plus=t.values[s.indexOf(l)].d3plus}var u=t.d3plus_data?t.d3plus_data:t;i({vars:e,data:u}),"function"==typeof e.mouse?e.mouse(t.d3plus_data||t,e):e.mouse[a.move]&&e.mouse[a.move](t.d3plus_data||t,e)}}).on(a.out,function(t){var o=r(this,d3.event.toElement);o||e.draw.frozen||t.d3plus&&t.d3plus["static"]||(d3.select(this).transition().duration(e.timing.mouseevents).call(n),d3.select(this).selectAll(".d3plus_data").transition().duration(e.timing.mouseevents).attr("opacity",e.data.opacity),e.covered||d(e.type.value),"function"==typeof e.mouse?e.mouse(t.d3plus_data||t,e):e.mouse[a.out]&&e.mouse[a.out](t.d3plus_data||t,e),_())});else{var q=function(){m(e,d3.event)};e.g.data.selectAll("g").on(a.over,q).on(a.move,q).on(a.out,q)}e.g.data.selectAll("g").on(a.click,function(t){if(!(d3.event.defaultPrevented||e.draw.frozen||t.d3plus&&t.d3plus["static"])){"function"==typeof e.mouse?e.mouse(t.d3plus_data||t,e):e.mouse[a.out]?e.mouse[a.out](t.d3plus_data||t,e):e.mouse[a.click]&&e.mouse[a.click](t.d3plus_data||t,e);var r=b(t.d3plus_data||t,e),o=e.id.solo.value,f=u(e,t)[0],p=c(l(e,t)),h=e.title.sub.value||!1,g=e.title.sub.font.color,v=e.title.total.font.color;if(t.d3plus.threshold&&t.d3plus.merged&&e.zoom.value)e.history.states.push(function(){e.self.id({solo:o}).title({sub:{font:{color:g},value:h},total:{font:{color:v}}}).draw()}),e.self.id({solo:y(t.d3plus.merged,e.id.value,s,e)}).title({sub:{font:{color:p},value:f},total:{font:{color:p}}}).draw();else if(1===r&&e.zoom.value){var m=s(e,t.d3plus_data||t,e.id.value);e.history.states.push(function(){e.self.depth(e.depth.value-1).id({solo:o}).title({sub:{font:{color:g},value:h},total:{font:{color:v}}}).draw()}),e.self.depth(e.depth.value+1).id({solo:[m]}).title({sub:{font:{color:p},value:f},total:{font:{color:p}}}).draw()}else if(-1===r&&e.zoom.value&&e.history.states.length&&!e.tooltip.value["long"])e.history.back();else if(e.types[e.type.value].zoom&&e.zoom.value)_(),d3.select(this).transition().duration(e.timing.mouseevents).call(n),d3.select(this).selectAll(".d3plus_data").transition().duration(e.timing.mouseevents).attr("opacity",e.data.opacity),d(e.type.value),e.draw.update=!1,t&&t[e.id.value]!=e.focus.value[0]?e.self.focus(t[e.id.value]).draw():e.self.focus(!1).draw();else if(e.types[e.type.value].requirements.indexOf("focus")<0){_();var x=t.d3plus_data?t.d3plus_data:t;i({vars:e,data:x})}}})}},{"../../../client/pointer.coffee":41,"../../../client/touch.coffee":45,"../../../color/legible.coffee":46,"../../../core/console/print.coffee":54,"../../../core/fetch/color.coffee":65,"../../../core/fetch/text.js":68,"../../../core/fetch/value.coffee":69,"../../../object/validate.coffee":166,"../../../string/strip.js":169,"../../../tooltip/remove.coffee":197,"../../../util/child.coffee":199,"../../../util/closest.coffee":200,"../../../util/uniques.coffee":204,"../tooltip/create.js":232,"../zoom/direction.coffee":242,"../zoom/propagation.coffee":245,"./arc.coffee":211,"./area.js":212,"./check.js":213,"./coordinates.coffee":215,"./cross.js":216,"./diamond.js":217,"./donut.js":218,"./fill.js":221,"./line.js":223,"./rect.coffee":224,"./segments.coffee":225,"./triangle_down.js":227,"./triangle_up.js":228,"./whisker.coffee":229}],220:[function(e,t,n){var r=e("../../../util/buckets.coffee"),o=e("../../../geom/offset.coffee");t.exports=function(e){function t(t){t.attr("opacity",0).style("stroke-width",0).style("stroke",e.background.value).style("fill","none")}function n(t){var n=e.edges.arrows.value;t.attr("opacity",function(t){return"number"===h?p:"function"===h?p(t,e):g(t[p])}).style("stroke-width",function(t){return e.edges.scale(t[e.edges.size.value])}).style("stroke",e.edges.color).attr("marker-start",function(t){var r=e.edges.arrows.direction.value;if("bucket"in t.d3plus)var o="_"+t.d3plus.bucket;else var o="";return"source"==r&&n?"url(#d3plus_edge_marker_default"+o+")":"none"}).attr("marker-end",function(t){var r=e.edges.arrows.direction.value;if("bucket"in t.d3plus)var o="_"+t.d3plus.bucket;else var o="";return"target"==r&&n?"url(#d3plus_edge_marker_default"+o+")":"none"}).attr("vector-effect","non-scaling-stroke").attr("pointer-events","none")}function i(t){t.attr("x1",function(t){return t[e.edges.source].d3plus.edges[t[e.edges.target][e.id.value]].x}).attr("y1",function(t){return t[e.edges.source].d3plus.edges[t[e.edges.target][e.id.value]].y}).attr("x2",function(t){return t[e.edges.target].d3plus.edges[t[e.edges.source][e.id.value]].x}).attr("y2",function(t){return t[e.edges.target].d3plus.edges[t[e.edges.source][e.id.value]].y})}function a(e){e.attr("d",function(e){return v(e.d3plus.spline)})}function s(t){if(delete t.d3plus_label,e.g.edges.selectAll("line, path").size()<e.edges.large&&e.edges.label&&t[e.edges.label]){if("spline"in t.d3plus)var n=this.getTotalLength(),r=this.getPointAtLength(n/2),o=this.getPointAtLength(n/2-.1*n),i=this.getPointAtLength(n/2+.1*n),a=Math.atan2(i.y-o.y,i.x-o.x),s=a*(180/Math.PI),l=(this.parentNode.getBBox(),.8*n),u=r.x,c=r.y;else var f=(this.getBBox(),t[e.edges.source]),d=t[e.edges.target],p={x:f.d3plus.edges[d[e.id.value]].x,y:f.d3plus.edges[d[e.id.value]].y},h={x:d.d3plus.edges[f[e.id.value]].x,y:d.d3plus.edges[f[e.id.value]].y},g=h.x-p.x,v=h.y-p.y,r={x:h.x-g/2,y:h.y-v/2},a=Math.atan2(v,g),s=a*(180/Math.PI),n=Math.sqrt(g*g+v*v),l=n,u=r.x,c=r.y;l+=2*e.labels.padding;var m=0;e.edges.arrows.value&&(m="number"==typeof e.edges.arrows.value?e.edges.arrows.value:8,m/=e.zoom.behavior.scaleExtent()[1],l-=2*m),(-90>s||s>90)&&(s-=180),l*e.zoom.behavior.scaleExtent()[0]>20&&(t.d3plus_label={x:u,y:c,translate:{x:u,y:c},w:l,h:15+2*e.labels.padding,angle:s,anchor:"middle",valign:"center",color:e.edges.color,resize:!1,names:[e.format.value(t[e.edges.label])],background:1})}}var l=e.returned.edges||[],u=e.zoom.behavior.scaleExtent()[0];if("string"==typeof e.edges.size.value){var c=d3.extent(l,function(t){return t[e.edges.size.value]}),f=2*d3.min(e.returned.nodes||[],function(e){return e.d3plus.r})*e.edges.size.scale;e.edges.scale=d3.scale.sqrt().domain(c).range([e.edges.size.min,f*u])}else{var d="number"==typeof e.edges.size.value?e.edges.size.value:e.edges.size.min;e.edges.scale=function(){return d}}var p=e.edges.opacity.value,h=typeof p;if(e.edges.opacity.changed&&"string"===h)var g=e.edges.opacity.scale.value.domain(d3.extent(l,function(e){return e[p]})).range([e.edges.opacity.min.value,1]);var v=d3.svg.line().interpolate(e.edges.interpolate.value),m=e.edges.arrows.value?"string"==typeof e.edges.size.value?["default_0","default_1","default_2","highlight_0","highlight_1","highlight_2","focus_0","focus_1","focus_2"]:["default","highlight","focus"]:[];if("string"==typeof e.edges.size.value)for(var y=r(e.edges.scale.range(),4),x=[],b=0;3>b;b++)x.push(y[b+1]+(y[1]-y[0])*(b+2)*2);else var w="number"==typeof e.edges.arrows.value?e.edges.arrows.value:8,x="number"==typeof e.edges.size.value?e.edges.size.value/w:w;var _=e.defs.selectAll(".d3plus_edge_marker").data(m,String),k=function(t){t.attr("d",function(t){var n=t.split("_");if(2==n.length&&e.edges.scale){n=parseInt(n[1]);var r=x[n]}else var r=x;return"target"==e.edges.arrows.direction.value?"M 0,-"+r/2+" L "+.85*r+",0 L 0,"+r/2+" L 0,-"+r/2:"M 0,-"+r/2+" L -"+.85*r+",0 L 0,"+r/2+" L 0,-"+r/2}).attr("fill",function(t){var n=t.split("_")[0];return"default"==n?e.edges.color:"focus"==n?e.color.focus:e.color.primary}).attr("transform","scale("+1/u+")")};e.draw.timing?(_.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),_.select("path").transition().duration(e.draw.timing).attr("opacity",1).call(k)):(_.exit().remove(),_.select("path").attr("opacity",1).call(k));var A=e.draw.timing?0:1,M=_.enter().append("marker").attr("id",function(e){return"d3plus_edge_marker_"+e}).attr("class","d3plus_edge_marker").attr("orient","auto").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("path").attr("opacity",A).attr("vector-effect","non-scaling-stroke").call(k);e.draw.timing&&M.transition().duration(e.draw.timing).attr("opacity",1);var z="string"==typeof e.edges.size.value?r(e.edges.scale.domain(),4):null,j=e.edges.arrows.direction.value,E=l.filter(function(t){if(t.d3plus||(t.d3plus={}),t.d3plus.id="edge_"+t[e.edges.source][e.id.value]+"_"+t[e.edges.target][e.id.value],t.d3plus.spline!==!0){if(z){var n=t[e.edges.size.value];t.d3plus.bucket=n<z[1]?0:n<z[2]?1:2;var r=.85*x[t.d3plus.bucket]/u}else{delete t.d3plus.bucket;var r=.85*x/u}var i=t[e.edges.source],a=t[e.edges.target];if(!i.d3plus||!a.d3plus)return!1;var s=Math.atan2(i.d3plus.y-a.d3plus.y,i.d3plus.x-a.d3plus.x),l=Math.atan2(a.d3plus.y-i.d3plus.y,a.d3plus.x-i.d3plus.x),c="source"==j&&e.edges.arrows.value?i.d3plus.r+r:i.d3plus.r,f="target"==j&&e.edges.arrows.value?a.d3plus.r+r:a.d3plus.r,d=o(s,c,e.shape.value),p=o(l,f,e.shape.value);return"edges"in i.d3plus||(i.d3plus.edges={}),i.d3plus.edges[a[e.id.value]]={x:i.d3plus.x-d.x,y:i.d3plus.y-d.y},"edges"in a.d3plus||(a.d3plus.edges={}),a.d3plus.edges[i[e.id.value]]={x:a.d3plus.x-p.x,y:a.d3plus.y-p.y},!0}return!1}),S=e.g.edges.selectAll("g.d3plus_edge_line").data(E,function(e){return e.d3plus.id}),T=l.filter(function(t){if(t.d3plus.spline){if(z){var n=t[e.edges.size.value];t.d3plus.bucket=n<z[1]?0:n<z[2]?1:2;var r=.85*x[t.d3plus.bucket]/u}else{delete t.d3plus.bucket;var r=.85*x/u}var i=t[e.edges.source],a=t[e.edges.target],s=i.d3plus.edges?i.d3plus.edges[a[e.id.value]]||{}:{},l=a.d3plus.edges?a.d3plus.edges[i[e.id.value]]||{}:{},c=e.edges.arrows.value&&"source"==j?r:0,f=e.edges.arrows.value&&"target"==j?r:0,d=.1,p=i.d3plus.x>a.d3plus.x?1-d:1+d,h=i.d3plus.x>a.d3plus.x?1+d:1-d,g="number"==typeof s.angle?s.angle:Math.atan2(i.d3plus.y-a.d3plus.y,i.d3plus.x-a.d3plus.x)*p,v=o(g,i.d3plus.r+c,e.shape.value),m="number"==typeof l.angle?l.angle:Math.atan2(a.d3plus.y-i.d3plus.y,a.d3plus.x-i.d3plus.x)*h,y=o(m,a.d3plus.r+f,e.shape.value),b=[i.d3plus.x-v.x,i.d3plus.y-v.y],w=s.offset?o(g,s.offset):!1,_=w?[b[0]-w.x,b[1]-w.y]:b,k=[a.d3plus.x-y.x,a.d3plus.y-y.y],A=l.offset?o(m,l.offset):!1,M=A?[k[0]-A.x,k[1]-A.y]:k,E=M[0]-_[0],S=M[1]-_[1],T="number"==typeof s.radius?s.radius:Math.sqrt(E*E+S*S)/4,N="number"==typeof l.radius?l.radius:Math.sqrt(E*E+S*S)/4,C=o(g,T-i.d3plus.r-2*c),O=o(m,N-a.d3plus.r-2*f);t.d3plus.spline=[b,k];var q=Math.abs(Math.atan2(i.d3plus.y-a.d3plus.y,i.d3plus.x-a.d3plus.x)).toFixed(5),D=Math.abs(g).toFixed(5),F=Math.abs(m-Math.PI).toFixed(5);return(D!==F||[D,F].indexOf(q)<0)&&(t.d3plus.spline.splice(1,0,[_[0]-C.x,_[1]-C.y],[M[0]-O.x,M[1]-O.y]),w&&t.d3plus.spline.splice(1,0,_),A&&t.d3plus.spline.splice(t.d3plus.spline.length-1,0,M)),!0}return!1}),N=e.g.edges.selectAll("g.d3plus_edge_path").data(T,function(e){return e.d3plus.id});e.draw.timing?(S.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),N.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),S.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(e.draw.timing/2).attr("opacity",0).remove(),N.selectAll("text.d3plus_label, rect.d3plus_label_bg").transition().duration(e.draw.timing/2).attr("opacity",0).remove(),S.selectAll("line").data(function(e){return[e]}).transition().duration(e.draw.timing).call(i).call(n).each("end",s),N.selectAll("path").data(function(e){return[e]}).transition().duration(e.draw.timing).call(a).call(n).each("end",s),S.enter().append("g").attr("class","d3plus_edge_line").append("line").call(i).call(t).transition().duration(e.draw.timing).call(n).each("end",s),N.enter().append("g").attr("class","d3plus_edge_path").append("path").call(a).call(t).transition().duration(e.draw.timing).call(n).each("end",s)):(S.exit().remove(),N.exit().remove(),S.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),N.selectAll("text.d3plus_label, rect.d3plus_label_bg").remove(),S.selectAll("line").data(function(e){return[e]}).call(i).call(n).call(s),N.selectAll("path").data(function(e){return[e]}).call(a).call(n).call(s),S.enter().append("g").attr("class","d3plus_edge_line").append("line").call(i).call(t).call(n).call(s),N.enter().append("g").attr("class","d3plus_edge_path").append("path").call(a).call(t).call(n).call(s))}},{"../../../geom/offset.coffee":156,"../../../util/buckets.coffee":198}],221:[function(e,t,n){var r=e("../../../util/copy.coffee"),o=e("../../../core/fetch/color.coffee"),i=(e("../../../core/fetch/value.coffee"),e("./segments.coffee")),a=e("./style.coffee");t.exports=function(e,t,n,s){function l(e){e.attr("x",0).attr("y",0).attr("width",0).attr("height",0)}function u(t,n){n||(n=0),t.attr("x",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return-t/2-n/2}).attr("y",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return-t/2-n/2}).attr("width",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return t+n}).attr("height",function(e){var t=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return t+n}).attr("rx",function(t){var r=t.d3plus.r?2*t.d3plus.r:t.d3plus.width,o=["circle","donut"].indexOf(e.shape.value)>=0;return o?(r+n)/2:0}).attr("ry",function(t){var r=t.d3plus.r?2*t.d3plus.r:t.d3plus.height,o=["circle","donut"].indexOf(e.shape.value)>=0;return o?(r+n)/2:0}).attr("shape-rendering",function(t){return["square"].indexOf(e.shape.value)>=0?e.shape.rendering.value:"auto"})}function c(t,n,r,o){n||(n=0),"number"!=typeof r&&(r=void 0),"number"!=typeof o&&(o=void 0),t.attrTween("d",function(t){if(void 0===r)var i=t.d3plus.r?t.d3plus.r:d3.max([t.d3plus.width,t.d3plus.height]);else var i=r;if(void 0===o)var a=t.d3plus.segments[t.d3plus.shape];else var a=o;e.arcs[t.d3plus.shape][t.d3plus.id]||(e.arcs[t.d3plus.shape][t.d3plus.id]={r:0},e.arcs[t.d3plus.shape][t.d3plus.id].a="donut"===t.d3plus.shape?2*Math.PI:0);var s=d3.interpolate(e.arcs[t.d3plus.shape][t.d3plus.id].r,i+n),l=d3.interpolate(e.arcs[t.d3plus.shape][t.d3plus.id].a,a);return function(n){return e.arcs[t.d3plus.shape][t.d3plus.id].r=s(n),e.arcs[t.d3plus.shape][t.d3plus.id].a=l(n),
f(t)}})}e.arcs||(e.arcs={donut:{},active:{},temp:{}});var f=d3.svg.arc().startAngle(0).endAngle(function(t){var n=e.arcs[t.d3plus.shape][t.d3plus.id].a;return n>2*Math.PI?2*Math.PI:n}).innerRadius(function(t){if(t.d3plus["static"]||"donut"!==e.shape.value)return 0;var n=e.arcs[t.d3plus.shape][t.d3plus.id].r;return n*e.data.donut.size}).outerRadius(function(t){var n=e.arcs[t.d3plus.shape][t.d3plus.id].r;return"donut"===e.shape.value?n:2*n});t.each(function(t){function n(t){t.attr("stroke",h).attr("stroke-width",1).attr("shape-rendering",e.shape.rendering.value)}var s=i(e,t,"active"),f=i(e,t,"temp"),d=i(e,t,"total"),p=d3.select(this),h=o(e,t),g=[],v=[];if(d&&e.types[e.type.value].fill){if(f){var m=r(t);m.d3plus.shape="temp",g.push(m),v=["temp"]}if(s&&(d>s||f)){var m=r(t);m.d3plus.shape="active",g.push(m)}}var y=e.defs.selectAll("pattern#d3plus_hatch_"+t.d3plus.id).data(v);e.draw.timing?(y.selectAll("rect").transition().duration(e.draw.timing).style("fill",h),y.selectAll("line").transition().duration(e.draw.timing).style("stroke",h)):(y.selectAll("rect").style("fill",h),y.selectAll("line").style("stroke",h));var x=y.enter().append("pattern").attr("id","d3plus_hatch_"+t.d3plus.id).attr("patternUnits","userSpaceOnUse").attr("x","0").attr("y","0").attr("width","10").attr("height","10").append("g");x.append("rect").attr("x","0").attr("y","0").attr("width","10").attr("height","10").attr("fill",h).attr("fill-opacity",.25),x.append("line").attr("x1","0").attr("x2","10").attr("y1","0").attr("y2","10").call(n),x.append("line").attr("x1","-1").attr("x2","1").attr("y1","9").attr("y2","11").call(n),x.append("line").attr("x1","9").attr("x2","11").attr("y1","-1").attr("y2","1").call(n);var b=g.length?[t]:[],w=p.selectAll("#d3plus_clip_"+t.d3plus.id).data(b);w.enter().insert("clipPath",".d3plus_mouse").attr("id","d3plus_clip_"+t.d3plus.id).append("rect").attr("class","d3plus_clipping").call(l),e.draw.timing?(w.selectAll("rect").transition().duration(e.draw.timing).call(u),w.exit().transition().delay(e.draw.timing).remove()):(w.selectAll("rect").call(u),w.exit().remove());var _=p.selectAll("path.d3plus_fill").data(g);_.transition().duration(e.draw.timing).call(a,e).call(c),_.enter().insert("path","rect.d3plus_mouse").attr("class","d3plus_fill").attr("clip-path","url(#d3plus_clip_"+t.d3plus.id+")").transition().duration(0).call(a,e).call(c,0,void 0,0).transition().duration(e.draw.timing).call(c).call(a,e),_.exit().transition().duration(e.draw.timing).call(c,0,void 0,0).remove()})}},{"../../../core/fetch/color.coffee":65,"../../../core/fetch/value.coffee":69,"../../../util/copy.coffee":201,"./segments.coffee":225,"./style.coffee":226}],222:[function(e,t,n){var r=e("../../../util/copy.coffee"),o=e("../../../core/fetch/text.js"),i=e("../../../core/fetch/value.coffee"),a=e("../../../color/mix.coffee"),s=e("../../../core/console/print.coffee"),l=(e("../../../client/rtl.coffee"),e("./segments.coffee")),u=e("./color.coffee"),c=e("../../../string/list.coffee"),f=e("../../../color/text.coffee"),d=e("../../../textwrap/textwrap.coffee");t.exports=function(e,t){var n=e.types[e.type.value].zoom?e.zoom.behavior.scaleExtent():[1,1],p=e.g[t].selectAll("g"),h=function(t){t.attr("opacity",function(t){var r=parseFloat(d3.select(this).attr("font-size"),10);return t.visible=r*(e.zoom.scale/n[1])>=2,t.visible?1:0})};if(remove=function(t){e.draw.timing?t.transition().duration(e.draw.timing).attr("opacity",0).remove():t.remove()},style=function(t){var r="bottom"===e.labels.valign.value?"top":"bottom";t.attr("font-weight",e.labels.font.weight).attr("font-family",e.labels.font.family.value).attr("pointer-events",function(e){return e.mouse?"auto":"none"}).attr("fill",function(t){if(t.color)return t.color;var n=u(t.parent,e),r=f(n),o=t.text?.15:1;return a(n,r,.2,o)}).each(function(t){if(t.resize instanceof Array){t.resize[0],t.resize[1]}var o=t.resize,i=!0;if(t.text){o instanceof Array||(o=[9,50],i=t.resize);var a=t.y-t.h*n[1]/2+t.padding/2;"bottom"===r&&(a+=t.h*n[1]/2),d().align("center").container(d3.select(this)).height(t.h*n[1]/2).padding(t.padding/2).resize(i).size(o).text(e.format.value(100*t.text,{key:"share",vars:e})).width(t.w*n[1]).valign(r).x(t.x-t.w*n[1]/2+t.padding/2).y(a).draw()}else{t.resize instanceof Array||(o=[7,40*(n[1]/n[0])],i=t.resize);var s="bottom"===e.labels.valign.value?t.share:0;d().align(t.anchor||e.labels.align.value).container(d3.select(this)).height(t.h*n[1]-t.share).padding(t.padding/2).resize(i).size(o).shape(t.shape||"square").text(t.names).valign(e.labels.valign.value).width(t.w*n[1]).x(t.x-t.w*n[1]/2+t.padding/2).y(t.y-t.h*n[1]/2+t.padding/2+s).draw()}}).attr("transform",function(e){var t=d3.select(this).attr("transform")||"",r=e.angle||0,o=e.translate&&e.translate.x?e.translate.x:0,i=e.translate&&e.translate.y?e.translate.y:0;return t.length&&(t=t.split(")").slice(-3).join(")")),"rotate("+r+","+o+","+i+")scale("+1/n[1]+")translate("+(e.x*n[1]-e.x)+","+(e.y*n[1]-e.y)+")"+t})},"edges"===t||e.labels.value){if(e.dev.value){var g="drawing "+t+" labels";s.time(g)}p.each(function(t){function a(t){var r="string"==typeof u.background?u.background:"none"===e.background.value?"#ffffff":e.background.value,o="string"==typeof u.background?u.background:r,i=u.angle||0,a=u.translate?j.x+j.width/2:0,s=u.translate?j.y+j.height/2:0,l="scale("+1/n[1]+")rotate("+i+","+a+","+s+")";t.attr("fill",o).attr(j).attr("transform",l)}var s=t.d3plus&&"label"in t.d3plus&&!t.d3plus.label,u=t.d3plus_label||null,f=t.d3plus_share,d=t.d3plus.text?t.d3plus.text:u&&u.names?u.names:e.labels.text.value?i(e,t,e.labels.text.value):o(e,t),p=u&&"group"in u?u.group:d3.select(this),g=0,v=e.types[e.type.value].fill;if(d instanceof Array||(d=[d]),u)if(["line","area"].indexOf(e.shape.value)>=0)var m=!0;else if(t&&"d3plus"in t)var y=l(e,t,"active"),x=l(e,t,"temp"),b=l(e,t,"total"),m=!x&&!y||y>=b||!y&&x>=b;if(s||!(u&&u.force||m)&&v)delete t.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(remove),e.g.labels.selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(remove);else{if(f&&t.d3plus.share&&f.w-2*e.labels.padding>=10&&f.h-2*e.labels.padding>=10&&"middle"!=e.labels.valign.value){f.resize=e.labels.resize.value===!1?!1:f&&"resize"in f?f.resize:!0,f.padding=e.labels.padding,f.text=t.d3plus.share,f.parent=t;var w=p.selectAll("text#d3plus_share_"+t.d3plus.id).data([f],function(e){return e.w+""+e.h+e.text});e.draw.timing&&1===e.zoom.scale?(w.transition().duration(e.draw.timing/2).call(style),w.enter().append("text").attr("id","d3plus_share_"+t.d3plus.id).attr("class","d3plus_share").attr("opacity",0).call(style).transition().duration(e.draw.timing/2).delay(e.draw.timing/2).attr("opacity",1)):(w.attr("opacity",1).call(style),w.enter().append("text").attr("id","d3plus_share_"+t.d3plus.id).attr("class","d3plus_share").attr("opacity",1).call(style)),g=w.node().getBBox().height+e.labels.padding,w.exit().call(remove)}else p.selectAll("text.d3plus_share").call(remove);if(u&&(u.resize=e.labels.resize.value===!1?!1:u&&"resize"in u?u.resize:!0,u.padding="number"==typeof u.padding?u.padding:e.labels.padding),u&&u.w*n[1]-u.padding>=20&&u.h*n[1]-u.padding>=10&&d.length){for(var _=e.format.locale.value.ui.and,k=e.format.locale.value.ui.more,A=0;A<d.length;A++)d[A]instanceof Array&&(d[A]=c(d[A],_,3,k));u.names=d,u.share=g,u.parent=t;var w=p.selectAll("text#d3plus_label_"+t.d3plus.id).data([u],function(e){return e?e.w+"_"+e.h+"_"+e.x+"_"+e.y+"_"+e.names.join("_"):!1}),M=u.resize?void 0:e.labels.font.size*n[0]+"px";if(e.draw.timing&&1===e.zoom.scale?(w.transition().duration(e.draw.timing/2).call(style).call(h),w.enter().append("text").attr("font-size",M).attr("id","d3plus_label_"+t.d3plus.id).attr("class","d3plus_label").attr("opacity",0).call(style).transition().duration(e.draw.timing/2).delay(e.draw.timing/2).call(h)):(w.attr("opacity",1).call(style).call(h),w.enter().append("text").attr("font-size",M).attr("id","d3plus_label_"+t.d3plus.id).attr("class","d3plus_label").call(style).call(h)),w.exit().call(remove),0===w.size()||0===w.selectAll("tspan").size())delete t.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(remove),e.g.labels.selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(remove);else{if(u.background){var z=["background"],j=r(w.node().getBBox());j.width+=e.labels.padding*n[0],j.height+=e.labels.padding*n[0],j.x-=e.labels.padding*n[0]/2,j.y-=e.labels.padding*n[0]/2;var E=w.attr("transform").split(")");j.y+=parseFloat(E[E.length-2].split(",")[1])}else var z=[],j={};var S=p.selectAll("rect#d3plus_label_bg_"+t.d3plus.id).data(z),T="number"==typeof u.background?u.background:"string"==typeof u.background?1:.6;e.draw.timing?(S.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),S.transition().duration(e.draw.timing).attr("opacity",T).call(a),S.enter().insert("rect",".d3plus_label").attr("id","d3plus_label_bg_"+t.d3plus.id).attr("class","d3plus_label_bg").attr("opacity",0).call(a).transition().duration(e.draw.timing).attr("opacity",T)):(S.exit().remove(),S.enter().insert("rect",".d3plus_label").attr("id","d3plus_label_bg_"+t.d3plus.id).attr("class","d3plus_label_bg"),S.attr("opacity",T).call(a))}}else delete t.d3plus_label,d3.select(this).selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(remove),e.g.labels.selectAll("text#d3plus_label_"+t.d3plus.id+", rect#d3plus_label_bg_"+t.d3plus.id).call(remove)}}),e.dev.value&&s.timeEnd(g)}else{if(e.dev.value){var g="removing "+t+" labels";s.time(g)}p.selectAll("text.d3plus_label, rect.d3plus_label_bg").call(remove),e.g.labels.selectAll("text.d3plus_label, rect.d3plus_label_bg").call(remove),e.dev.value&&s.timeEnd(g)}}},{"../../../client/rtl.coffee":43,"../../../color/mix.coffee":48,"../../../color/text.coffee":52,"../../../core/console/print.coffee":54,"../../../core/fetch/text.js":68,"../../../core/fetch/value.coffee":69,"../../../string/list.coffee":168,"../../../textwrap/textwrap.coffee":194,"../../../util/copy.coffee":201,"./color.coffee":214,"./segments.coffee":225}],223:[function(e,t,n){function r(e){e.attr("x",function(e){return e.d3plus.x}).attr("y",function(e){return e.d3plus.y}).attr("width",0).attr("height",0)}function o(e,t){void 0===t&&(t=0),e.attr("x",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return e.d3plus.x-(n/2+t/2)}).attr("y",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return e.d3plus.y-(n/2+t/2)}).attr("width",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return n+t}).attr("height",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return n+t}).attr("rx",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.width;return(n+t)/2}).attr("ry",function(e){var n=e.d3plus.r?2*e.d3plus.r:e.d3plus.height;return(n+t)/2})}function i(e,t,n,r){var i=e.draw.timing?e.timing.mouseevents:0,a=r?n*r:n;i?(d3.select(t.parentNode).selectAll("path.d3plus_line").transition().duration(i).style("stroke-width",a),d3.select(t.parentNode).selectAll("rect").transition().duration(i).style("stroke-width",n).call(o,r)):(d3.select(t.parentNode).selectAll("path.d3plus_line").style("stroke-width",a),d3.select(t.parentNode).selectAll("rect").style("stroke-width",n).call(o,r))}var a=e("../../../util/copy.coffee"),s=e("../../../util/closest.coffee"),l=e("../../../client/pointer.coffee"),u=e("./style.coffee"),c=e("../../../core/fetch/value.coffee");t.exports=function(e,t,n,f){var d=d3.svg.line().x(function(e){return e.d3plus.x}).y(function(e){return e.d3plus.y}).interpolate(e.shape.interpolate.value),p=2*e.data.stroke.width,h=15>p?15:p,g=e[e.axes.discrete],v=g.ticks.values.map(function(e){return e.constructor===Date?e.getTime():e});t.each(function(t){var n=!1,f=[],m=[],y=a(t),x=d3.select(this);y.values=[],y.segment_key=y.key,t.values.forEach(function(r,o,i){var l=c(e,r,g.value);l.constructor===Date&&(l=l.getTime());var u=v.indexOf(s(v,l));n===!1||n===u-1?(y.values.push(r),y.segment_key+="_"+u):(y.values.length>1?f.push(y):m.push(y.values[0]),y=a(t),y.values=[r]),o===i.length-1&&(y.values.length>1?f.push(y):m.push(y.values[0])),n=u});var b=x.selectAll("path.d3plus_line").data(f,function(e){return e.d3plus||(e.d3plus={}),e.d3plus.shape="line",e.segment_key}),w=x.selectAll("rect.d3plus_anchor").data(m,function(t){return t.d3plus||(t.d3plus={}),t.d3plus.r=2*e.data.stroke.width,t.d3plus.id});e.draw.timing?(b.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),b.transition().duration(e.draw.timing).attr("d",function(e){return d(e.values)}).call(u,e),b.enter().append("path").attr("class","d3plus_line").style("stroke-linecap","round").attr("d",function(e){return d(e.values)}).call(u,e).attr("opacity",0).transition().duration(e.draw.timing).attr("opacity",1),w.enter().append("rect").attr("class","d3plus_anchor").attr("id",function(e){return e.d3plus.id}).call(r).call(u,e),w.transition().duration(e.draw.timing).call(o).call(u,e),w.exit().transition().duration(e.draw.timing).call(r).remove()):(b.exit().remove(),b.enter().append("path").attr("class","d3plus_line").style("stroke-linecap","round"),b.attr("d",function(e){return d(e.values)}).call(u,e),w.enter().append("rect").attr("class","d3plus_anchor").attr("id",function(e){return e.d3plus.id}),w.exit().remove(),w.call(o).call(u,e));var _=x.selectAll("path.d3plus_mouse").data(f,function(e){return e.segment_key});_.enter().append("path").attr("class","d3plus_mouse").attr("d",function(e){return d(e.values)}).style("stroke","black").style("stroke-width",h).style("fill","none").style("stroke-linecap","round").attr("opacity",0),_.on(l.over,function(t){e.draw.frozen||i(e,this,p,2)}).on(l.out,function(t){e.draw.frozen||i(e,this,p,0)}),e.draw.timing?_.transition().duration(e.draw.timing).attr("d",function(e){return d(e.values)}).style("stroke-width",h):_.attr("d",function(e){return d(e.values)}).style("stroke-width",h),_.exit().remove()})}},{"../../../client/pointer.coffee":41,"../../../core/fetch/value.coffee":69,"../../../util/closest.coffee":200,"../../../util/copy.coffee":201,"./style.coffee":226}],224:[function(e,t,n){var r;r=e("./style.coffee"),t.exports=function(e,t,n,o){var i,a,s;return i=function(t){var n,r;return e.labels.value&&!t.d3plus.label?(r=t.d3plus.r?2*t.d3plus.r:t.d3plus.width,n=t.d3plus.r?2*t.d3plus.r:t.d3plus.height,t.d3plus_label={w:r,h:n,x:0,y:0},t.d3plus_share={w:r,h:n,x:0,y:0},t.d3plus_label.shape="circle"===t.d3plus.shape?"circle":"square"):t.d3plus.label?t.d3plus_label=t.d3plus.label:delete t.d3plus_label,[t]},a=function(e){return e.attr("x",function(e){return e.d3plus.init&&"x"in e.d3plus.init?e.d3plus.init.x:e.d3plus.init&&"width"in e.d3plus.init?-e.d3plus.width/2:0}).attr("y",function(e){return e.d3plus.init&&"y"in e.d3plus.init?e.d3plus.init.y:e.d3plus.init&&"height"in e.d3plus.init?-e.d3plus.height/2:0}).attr("width",function(e){return e.d3plus.init&&"width"in e.d3plus.init?e.d3plus.init.width:0}).attr("height",function(e){return e.d3plus.init&&"height"in e.d3plus.init?e.d3plus.init.height:0})},s=function(t){return t.attr("x",function(e){var t;return t=e.d3plus.r?2*e.d3plus.r:e.d3plus.width,-t/2}).attr("y",function(e){var t;return t=e.d3plus.r?2*e.d3plus.r:e.d3plus.height,-t/2}).attr("width",function(e){return e.d3plus.r?2*e.d3plus.r:e.d3plus.width}).attr("height",function(e){return e.d3plus.r?2*e.d3plus.r:e.d3plus.height}).attr("rx",function(e){var t,n;return t="circle"===e.d3plus.shape,n=e.d3plus.r?2*e.d3plus.r:e.d3plus.width,t?(n+2)/2:0}).attr("ry",function(e){var t,n;return n="circle"===e.d3plus.shape,t=e.d3plus.r?2*e.d3plus.r:e.d3plus.height,n?(t+2)/2:0}).attr("transform",function(e){return"rotate"in e.d3plus?"rotate("+e.d3plus.rotate+")":""}).attr("shape-rendering",function(t){return"square"!==t.d3plus.shape||"rotate"in t.d3plus?"auto":e.shape.rendering.value})},e.draw.timing?(n.append("rect").attr("class","d3plus_data").call(a).call(r,e),t.selectAll("rect.d3plus_data").data(i).transition().duration(e.draw.timing).call(s).call(r,e),o.selectAll("rect.d3plus_data").transition().duration(e.draw.timing).call(a)):(n.append("rect").attr("class","d3plus_data"),t.selectAll("rect.d3plus_data").data(i).call(s).call(r,e))}},{"./style.coffee":226}],225:[function(e,t,n){var r;r=e("../../../core/fetch/value.coffee"),t.exports=function(e,t,n){var o;return o=e[n].value,o?n in t.d3plus?t.d3plus[n]:r(e,t,o):t.d3plus[n]}},{"../../../core/fetch/value.coffee":69}],226:[function(e,t,n){var r;r=e("./color.coffee"),t.exports=function(e,t){return e.attr("fill",function(e){return e.d3plus&&e.d3plus.spline?"none":r(e,t)}).style("stroke",function(e){var n;return e.d3plus&&e.d3plus.stroke?e.d3plus.stroke:(n=e.values?r(e.values[0],t):r(e,t,!0),d3.rgb(n).darker(.6))}).style("stroke-width",function(e){var n;return n="line"===e.d3plus.shape?2:1,t.data.stroke.width*n}).attr("opacity",t.data.opacity).attr("vector-effect","non-scaling-stroke")}},{"./color.coffee":214}],227:[function(e,t,n){var r=e("./style.coffee");t.exports=function(e,t,n,o){function i(e){e.attr("d",d3.svg.symbol().type("triangle-down").size(10))}function a(e){e.attr("d",d3.svg.symbol().type("triangle-down").size(function(e){var t=Math.min(e.d3plus.width,e.d3plus.height);return d3.scale.pow().exponent(2)(t/2)}))}n.append("path").attr("class","d3plus_data").call(i).call(r,e),t.selectAll("path.d3plus_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(a).call(r,e):t.selectAll("path.d3plus_data").call(a).call(r,e)}},{"./style.coffee":226}],228:[function(e,t,n){var r=e("./style.coffee");t.exports=function(e,t,n,o){function i(e){e.attr("d",d3.svg.symbol().type("triangle-up").size(10))}function a(e){e.attr("d",d3.svg.symbol().type("triangle-up").size(function(e){var t=Math.min(e.d3plus.width,e.d3plus.height);return d3.scale.pow().exponent(2)(t/2)}))}n.append("path").attr("class","d3plus_data").call(i).call(r,e),t.selectAll("path.d3plus_data").data(function(e){return[e]}),e.draw.timing?t.selectAll("path.d3plus_data").transition().duration(e.draw.timing).call(a).call(r,e):t.selectAll("path.d3plus_data").call(a).call(r,e)}},{"./style.coffee":226}],229:[function(e,t,n){t.exports=function(e,t,n,r){var o,i,a,s,l,u,c,f,d;i=function(e){return e.d3plus.text?e.d3plus_label={w:f,h:f,x:0,y:0,background:"#fff",resize:!1,angle:["left","right"].indexOf(e.d3plus.position)>=0?90:0}:e.d3plus.label?e.d3plus_label=e.d3plus.label:delete e.d3plus_label,[e]},d=function(t){return t.style("stroke-width",e.data.stroke.width).style("stroke","#444").attr("fill","none").attr("shape-rendering",e.shape.rendering.value)},a=function(e){return e.attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",0)},c=function(e){return e.attr("x1",function(e){var t,n,r;return["top","bottom"].indexOf(e.d3plus.position)>=0?0:(t=e.d3plus.offset||0,n=e.d3plus.width||0,r=0>t?-n:n,r+t)}).attr("x2",function(e){return["top","bottom"].indexOf(e.d3plus.position)>=0?0:e.d3plus.offset||0}).attr("y1",function(e){var t,n,r;return["left","right"].indexOf(e.d3plus.position)>=0?0:(n=e.d3plus.offset||0,t=e.d3plus.height||0,r=0>n?-t:t,r+n)}).attr("y2",function(e){return["left","right"].indexOf(e.d3plus.position)>=0?0:e.d3plus.offset||0}).attr("marker-start","url(#d3plus_whisker_marker)")},s=e.defs.selectAll("#d3plus_whisker_marker").data([0]),s.enter().append("marker").attr("id","d3plus_whisker_marker").attr("markerUnits","userSpaceOnUse").style("overflow","visible").append("line"),o=t.datum(),o?(u=o.d3plus.position,l=["top","bottom"].indexOf(u)>=0?"horizontal":"vertical",f="horizontal"===l?o.d3plus.width:o.d3plus.height):(l="horizontal",f=0),s.select("line").attr("x1","horizontal"===l?-f/2:0).attr("x2","horizontal"===l?f/2:0).attr("y1","vertical"===l?-f/2:0).attr("y2","vertical"===l?f/2:0).call(d).style("stroke-width",2*e.data.stroke.width),e.draw.timing?(n.append("line").attr("class","d3plus_data").call(d).call(a),t.selectAll("line.d3plus_data").data(i).transition().duration(e.draw.timing).call(d).call(c),r.selectAll("line.d3plus_data").transition().duration(e.draw.timing).call(a)):(n.append("line").attr("class","d3plus_data"),t.selectAll("line.d3plus_data").data(i).call(d).call(c))}},{}],230:[function(e,t,n){var r=e("../../../client/pointer.coffee"),o=e("../../../client/prefix.coffee"),i=e("../../../core/console/print.coffee"),a=e("../../../client/touch.coffee"),s=e("../zoom/propagation.coffee");t.exports=function(e){e.dev.value&&i.time("creating SVG elements"),e.svg=e.container.value.selectAll("svg#d3plus").data([0]),e.svg.enter().insert("svg","#d3plus_message").attr("id","d3plus").attr("width",e.width.value).attr("height",e.height.value).attr("xmlns","http://www.w3.org/2000/svg").attr("xmlns:xmlns:xlink","http://www.w3.org/1999/xlink"),e.g.bg=e.svg.selectAll("rect#bg").data(["bg"]),e.g.bg.enter().append("rect").attr("id","bg").attr("fill",e.background.value).attr("width",e.width.value).attr("height",e.height.value),e.g.timeline=e.svg.selectAll("g#timeline").data(["timeline"]),e.g.timeline.enter().append("g").attr("id","timeline").attr("transform","translate(0,"+e.height.value+")"),e.g.legend=e.svg.selectAll("g#key").data(["key"]),e.g.legend.enter().append("g").attr("id","key").attr("transform","translate(0,"+e.height.value+")"),e.g.footer=e.svg.selectAll("g#footer").data(["footer"]),e.g.footer.enter().append("g").attr("id","footer").attr("transform","translate(0,"+e.height.value+")");var t="clipping_"+e.container.id;if(e.g.clipping=e.svg.selectAll("#clipping").data(["clipping"]),e.g.clipping.enter().append("clipPath").attr("id",t).append("rect").attr("width",e.width.viz).attr("height",e.height.viz),e.g.container=e.svg.selectAll("g#container").data(["container"]),e.g.container.enter().append("g").attr("id","container").attr("clip-path","url(#"+t+")").attr("transform","translate("+e.margin.left+","+e.margin.top+")"),e.g.zoom=e.g.container.selectAll("g#zoom").data(["zoom"]),e.g.zoom.enter().append("g").attr("id","zoom"),e.g.viz=e.g.zoom.selectAll("g#d3plus_viz").data(["d3plus_viz"]),e.g.viz.enter().append("g").attr("id","d3plus_viz"),e.g.overlay=e.g.viz.selectAll("rect#d3plus_overlay").data([{id:"d3plus_overlay"}]),e.g.overlay.enter().append("rect").attr("id","d3plus_overlay").attr("width",e.width.value).attr("height",e.height.value).attr("opacity",0),a){var n=function(){s(e,d3.event)};e.g.overlay.on(r.over,n).on(r.move,n).on(r.out,n)}else e.g.overlay.on(r.move,function(t){e.types[e.type.value].zoom&&e.zoom.pan.value&&e.zoom.behavior.scaleExtent()[0]<e.zoom.scale?d3.select(this).style("cursor",o()+"grab"):d3.select(this).style("cursor","auto")}).on(r.up,function(t){e.types[e.type.value].zoom&&e.zoom.pan.value&&e.zoom.behavior.scaleExtent()[0]<e.zoom.scale?d3.select(this).style("cursor",o()+"grab"):d3.select(this).style("cursor","auto")}).on(r.down,function(t){e.types[e.type.value].zoom&&e.zoom.pan.value&&e.zoom.behavior.scaleExtent()[0]<e.zoom.scale?d3.select(this).style("cursor",o()+"grabbing"):d3.select(this).style("cursor","auto")});e.g.app=e.g.viz.selectAll("g#app").data(["app"]),e.g.app.enter().append("g").attr("id","app"),e.g.edges=e.g.viz.selectAll("g#edges").data(["edges"]),e.g.edges.enter().append("g").attr("id","edges").attr("opacity",0),e.g.edge_focus=e.g.viz.selectAll("g#focus").data(["focus"]),e.g.edge_focus.enter().append("g").attr("id","focus"),e.g.edge_hover=e.g.viz.selectAll("g#edge_hover").data(["edge_hover"]),e.g.edge_hover.enter().append("g").attr("id","edge_hover").attr("opacity",0),e.g.data=e.g.viz.selectAll("g#data").data(["data"]),e.g.data.enter().append("g").attr("id","data").attr("opacity",0),e.g.data_focus=e.g.viz.selectAll("g#data_focus").data(["data_focus"]),e.g.data_focus.enter().append("g").attr("id","data_focus"),e.g.labels=e.g.viz.selectAll("g#d3plus_labels").data(["d3plus_labels"]),e.g.labels.enter().append("g").attr("id","d3plus_labels"),e.defs=e.svg.selectAll("defs").data(["defs"]),e.defs.enter().append("defs"),e.dev.value&&i.timeEnd("creating SVG elements")}},{"../../../client/pointer.coffee":41,"../../../client/prefix.coffee":42,"../../../client/touch.coffee":45,"../../../core/console/print.coffee":54,"../zoom/propagation.coffee":245}],231:[function(e,t,n){var r=e("../../../core/console/print.coffee");t.exports=function(e){e.dev.value&&r.time("updating SVG elements"),e.draw.timing?(e.container.value.transition().duration(e.draw.timing).style("width",e.width.value+"px").style("height",e.height.value+"px"),e.svg.transition().duration(e.draw.timing).attr("width",e.width.value).attr("height",e.height.value),e.g.bg.transition().duration(e.draw.timing).attr("width",e.width.value).attr("height",e.height.value),e.g.clipping.select("rect").transition().duration(e.draw.timing).attr("width",e.width.viz).attr("height",e.height.viz),e.g.container.transition().duration(e.draw.timing).attr("transform","translate("+e.margin.left+","+e.margin.top+")")):(e.container.value.style("width",e.width.value+"px").style("height",e.height.value+"px"),e.svg.attr("width",e.width.value).attr("height",e.height.value),e.g.bg.attr("width",e.width.value).attr("height",e.height.value),e.g.clipping.select("rect").attr("width",e.width.viz).attr("height",e.height.viz),e.g.container.attr("transform","translate("+e.margin.left+","+e.margin.top+")")),e.dev.value&&r.timeEnd("updating SVG elements")}},{"../../../core/console/print.coffee":54}],232:[function(e,t,n){var r=e("../../../array/sort.coffee"),o=e("../../../tooltip/create.js"),i=(e("../../../core/data/nest.js"),e("./data.js")),a=e("../../../core/fetch/color.coffee"),s=e("../../../core/fetch/text.js"),l=e("../../../core/fetch/value.coffee"),u=e("../../../object/merge.coffee"),c=e("../../../tooltip/remove.coffee"),f=e("../shapes/segments.coffee"),d=e("../../../util/uniques.coffee"),p=e("../../../object/validate.coffee"),h=e("../zoom/direction.coffee");t.exports=function(e){function t(t){function h(e){return"string"==typeof n[e].value?n[e].value:n.format.locale.value.method[e]}var x="depth"in e?e.depth:v,A={},M={},z=n.id.nesting[x+1]in g?x+1:x,N=n.id.nesting[z],C="merged"in g.d3plus?g.d3plus.merged:g[N];C instanceof Array||(C=[C]);var O=l(n,g,n.size.value);if(n.tooltip.children.value){if(C=C.slice(0),n.size.value&&p(C[0])){var q=C.filter(function(e){return n.size.value in e&&(!("d3plus"in e)||!e.d3plus.merged)}),D=C.filter(function(e){return!(n.size.value in e)||e.d3plus&&e.d3plus.merged});r(q,n.size.value,"desc",[],n),C=q.concat(D)}for(var F="short"===k?3:n.data.large,L=C.length,P=d3.min([L,F]),R=0;P>R&&C.length;R++){var I=C.shift(),B=s(n,I,z)[0],U=p(I)?l(n,I,N,z):I;if(U!==g[n.id.nesting[x]]&&B&&!M[B]){var V=l(n,I,n.size.value,N),H=a(n,I,N);M[B]=!V||V instanceof Array?"":n.format.value(V,{key:n.size.value,vars:n,data:I}),H&&(M.d3plus_colors||(M.d3plus_colors={}),M.d3plus_colors[B]=H)}else R--}L>P&&(M.d3plusMore=L-P)}g.d3plus.tooltip&&(A=u(A,g.d3plus.tooltip)),n.tooltip.size.value&&(O&&"number"!=typeof n.size.value&&(A[h("size")]=O),n.axes.opposite&&n[n.axes.opposite].value!==n.size.value&&(A[h(n.axes.opposite)]=l(n,g,n[n.axes.opposite].value)),n.color.valueScale&&(A[h("color")]=l(n,g,n.color.value)));var Y=f(n,g,"active"),$=f(n,g,"temp"),W=f(n,g,"total");"number"==typeof Y&&Y>0&&W&&(A[h("active")]=Y+"/"+W+" ("+n.format.value(Y/W*100,{key:"share",vars:n,data:g})+")"),"number"==typeof $&&$>0&&W&&(A[h("temp")]=$+"/"+W+" ("+n.format.value($/W*100,{key:"share",vars:n,data:g})+")"),n.tooltip.share.value&&g.d3plus.share&&(A.share=n.format.value(100*g.d3plus.share,{key:"share",vars:n,data:g}));var z="depth"in e?e.depth:v,X=e.title||s(n,g,z)[0],Z=d(g,n.icon.value,l,n,n.id.nesting[z]),G=i(n,g,k,A,M,z);if(Z=1===Z.length&&"string"==typeof Z[0]?Z[0]:!1,G.length>0||j||!g.d3plus_label&&"short"==k&&X||g.d3plus_label&&(!("visible"in g.d3plus_label)||"visible"in g.d3plus_label&&g.d3plus_label.visible===!1)){X||(X=U);var z="d3plus"in g&&"merged"in g.d3plus?v-1:v;if(0>z&&(z=0),z=n.id.nesting[z],"string"==typeof n.icon.style.value)var J=n.icon.style.value;else if("object"==typeof n.icon.style.value&&n.icon.style.value[z])var J=n.icon.style.value[z];else var J="default";if(e.width)var Q=e.width;else if(w||0!=G.length)var Q=n.tooltip.small;else var Q="auto";var K="long"!==e.length?d3.select("body"):n.container.value;o({align:_,arrow:y,locale:n.format.locale.value,background:n.tooltip.background,curtain:n.tooltip.curtain.color,curtainopacity:n.tooltip.curtain.opacity,fontcolor:n.tooltip.font.color,fontfamily:n.tooltip.font.family.value,fontsize:n.tooltip.font.size,fontweight:n.tooltip.font.weight,data:G,color:a(n,g),allColors:!0,footer:e.footer===!1?e.footer:j,fullscreen:w,html:t,icon:Z,id:b,max_height:e.maxheight,max_width:n.tooltip.small,mouseevents:m,offset:T,parent:K,style:J,title:X,width:Q,x:E,y:S})}else c(b)}"d3plus"in e.data||(e.data.d3plus={});var n=e.vars,g=e.data,v="d3plus"in g&&"depth"in g.d3plus?g.d3plus.depth:n.depth.value,m=(e.ex,e.mouseevents?e.mouseevents:!1),y="arrow"in e?e.arrow:!0,x=l(n,g,n.id.value),b=e.id||n.type.value;if(!d3.event||"click"!=d3.event.type||!n.tooltip.html.value&&!n.tooltip.value["long"]||"fullscreen"in e){var w=!1,_=e.anchor||n.tooltip.anchor,k=e.length||"short",A=h(g,n);if(-1===A){var M=n.id.nesting[v-1];l(n,x,M)}if(1===A&&n.zoom.value)var z=n.format.value(n.format.locale.value.ui.expand);else if(-1===A&&n.zoom.value&&n.history.states.length&&!n.tooltip.value["long"])var z=n.format.value(n.format.locale.value.ui.collapse);else if(n.small||"short"!=k||!n.tooltip.html.value&&!n.tooltip.value["long"]||1===n.focus.value.length&&n.focus.value[0]==x)if("long"==k)var z=n.footer.value||"";else var z="";else var z=n.format.locale.value.ui.moreInfo;var j=z.length?n.format.value(z,{key:"footer",vars:n}):!1}else{var w=!0,y=!1,m=!0,k="long",j=n.footer.value;n.covered=!0}if("x"in e)var E=e.x;else if("static"===n.types[n.type.value].tooltip){var E=g.d3plus.x;n.zoom.translate&&n.zoom.scale&&(E=n.zoom.translate[0]+E*n.zoom.scale),E+=n.margin.left,"long"!==e.length&&(S+=window.scrollX,E+=n.container.value.node().getBoundingClientRect().left,E+=parseFloat(n.container.value.style("padding-left"),10))}else var E=d3.mouse(d3.select("html").node())[0];if("y"in e)var S=e.y;else if("static"==n.types[n.type.value].tooltip){var S=g.d3plus.y;n.zoom.translate&&n.zoom.scale&&(S=n.zoom.translate[1]+S*n.zoom.scale),S+=n.margin.top,"long"!==e.length&&(S+=window.scrollY,S+=n.container.value.node().getBoundingClientRect().top,S+=parseFloat(n.container.value.style("padding-top"),10))}else var S=d3.mouse(d3.select("html").node())[1];if("offset"in e)var T=e.offset;else if("static"==n.types[n.type.value].tooltip){var T=g.d3plus.r?g.d3plus.r:g.d3plus.height/2;n.zoom.scale&&(T*=n.zoom.scale)}else var T=3;if(w||"long"===e.length)if("string"==typeof n.tooltip.html.value)t(n.tooltip.html.value);else if("function"==typeof n.tooltip.html.value)t(n.tooltip.html.value(x));else if(n.tooltip.html.value&&"object"==typeof n.tooltip.html.value&&n.tooltip.html.value.url){var N=n.tooltip.html.value.url;"function"==typeof N&&(N=N(x)),d3.json(N,function(e){var r=n.tooltip.html.value.callback?n.tooltip.html.value.callback(e):e;t(r)})}else t("");else t("")}},{"../../../array/sort.coffee":37,"../../../core/data/nest.js":62,"../../../core/fetch/color.coffee":65,"../../../core/fetch/text.js":68,"../../../core/fetch/value.coffee":69,"../../../object/merge.coffee":165,"../../../object/validate.coffee":166,"../../../tooltip/create.js":195,"../../../tooltip/remove.coffee":197,"../../../util/uniques.coffee":204,"../shapes/segments.coffee":225,"../zoom/direction.coffee":242,"./data.js":233}],233:[function(e,t,n){var r=e("../../../util/copy.coffee"),o=e("../../../core/fetch/value.coffee"),i=e("../../../core/fetch/color.coffee"),a=e("../../../core/fetch/text.js"),s=e("../../../color/legible.coffee"),l=e("../../../object/merge.coffee"),u=e("../../../client/prefix.coffee"),c=e("../../../string/format.js"),f=e("../../../object/validate.coffee");t.exports=function(e,t,n,d,p,h){function g(n,r){if(e.attrs.value[r])var i=r;else var i=null;

r&&(r=e.format.value(r));var a=m[n]||o(e,t,n,i);if(f(a))w.push({name:e.format.value(n),value:e.format.value(a.value,{key:a.key,vars:e}),group:r});else if(null!=a&&"undefined"!=a&&!(a instanceof Array)&&("string"==typeof a&&a.indexOf("d3plus_other")<0||"string"!=typeof a)){var s=e.format.value(e.format.locale.value.ui[n]?e.format.locale.value.ui[n]:n),l=x.indexOf(n)>=0;a instanceof Array?a.forEach(function(r){r=e.format.value(r,{key:n,vars:e,data:t})}):a=e.format.value(a,{key:n,vars:e,data:t});var u={name:s,value:a,highlight:l,group:r};if(e.descs.value)if("function"==typeof e.descs.value){var c=e.descs.value(n);"string"==typeof c&&(u.desc=c)}else n in e.descs.value&&(u.desc=e.descs.value[n]);w.push(u)}}if(e.small)return[];if(!n)var n="long";if("long"==n)var v="short";else var v="long";var m={};if(d&&"string"==typeof d)d=[d];else if(d&&"object"==typeof d){m=l(m,d);var d=[];for(var y in m)d.push(y)}else if(!d)var d=[];var x=[];if(e.tooltip.value instanceof Array)var b=e.tooltip.value;else if("string"==typeof e.tooltip.value)var b=[e.tooltip.value];else{if(e.tooltip.value[e.id.nesting[h]])var b=e.tooltip.value[e.id.nesting[h]];else var b=e.tooltip.value;b instanceof Array||(b=b[n]?b[n]:b[v]?[]:l({"":[]},b)),"string"==typeof b?b=[b]:b instanceof Array||(b=l({"":[]},b))}var w=[];if(b.constructor===Array&&(b={"":b}),e.id.nesting.length&&h<e.id.nesting.length-1){var b=r(b);e.id.nesting.forEach(function(e,t){t>h&&b[e]&&delete b[e]})}for(var _ in b){b[_].constructor!==Array&&(b[_]=[b[_]]);for(var k=d.length;k>0;k--)b[_].indexOf(d[k-1])>=0&&d.splice(k-1,1)}if(e.tooltip.value["long"]&&"object"==typeof e.tooltip.value["long"]){for(var _ in e.tooltip.value["long"])for(var k=d.length;k>0;k--){var A=d[k-1];e.tooltip.value["long"][_].indexOf(A)>=0&&(b[_]||(b[_]=[]),b[_].push(A),d.splice(k-1,1))}}d.length&&(b[""]||(b[""]=[]),b[""]=b[""].concat(d));for(var _ in b)b[_].forEach(function(e){g(e,_)});if(p){var M=e.format.locale.value.ui.including,z=p.d3plus_colors;for(var j in p)if("d3plus_colors"!==j){if("d3plusMore"===j){var E=e.format.locale.value.ui.more,S=c(E,p[j]),T=!0;p[j]=""}else var S=j,T=z&&z[S]?z[S]:!1;w.push({group:e.format.value(M),highlight:T,name:S,value:p[j]})}}if(e.tooltip.connections.value&&"long"===n){var N=e.edges.connections(t[e.id.value],e.id.value,!0);N.length&&N.forEach(function(t){var n=e.data.viz.filter(function(n){return n[e.id.value]===t[e.id.value]}),n=n.length?n[0]:t,r=a(e,n)[0],o=i(e,n),l=e.tooltip.font.size,c="square"==e.shape.value?0:l;styles=["background-color: "+o,"border-color: "+s(o),"border-style: solid","border-width: "+e.data.stroke.width+"px","display: inline-block","height: "+l+"px","left: 0px","position: absolute","width: "+l+"px","top: 0px",u()+"border-radius: "+c+"px"],node="<div style='"+styles.join("; ")+";'></div>";var f=function(){e.self.focus([n[e.id.value]]).draw()};w.push({group:e.format.value(e.format.locale.value.ui.primary),highlight:!1,link:f,name:"<div id='d3plustooltipfocuslink_"+n[e.id.value]+"' class='d3plus_tooltip_focus_link' style='position:relative;padding-left:"+1.5*l+"px;'>"+node+r+"</div>"})})}return w}},{"../../../client/prefix.coffee":42,"../../../color/legible.coffee":46,"../../../core/fetch/color.coffee":65,"../../../core/fetch/text.js":68,"../../../core/fetch/value.coffee":69,"../../../object/merge.coffee":165,"../../../object/validate.coffee":166,"../../../string/format.js":167,"../../../util/copy.coffee":201}],234:[function(e,t,n){var r;r=e("../../../core/console/print.coffee"),t.exports=function(e){var t,n,o,i,a,s,l,u,c,f;if(e.group=e.g.apps[e.type.value],e.mouse={},f=e.types[e.type.value],u=f.requirements||[],o=u.indexOf("data")>=0,i=!o||o&&e.data.viz.length,!e.error.internal&&i){for(t=e.format.locale.value.visualization[e.type.value],e.dev.value&&r.time("running "+t),l=e.data.viz,a=0,s=l.length;s>a;a++)n=l[a],n.d3plus&&(delete n.d3plus.shape,delete n.d3plus.label,delete n.d3plus.rotate);c=f(e),e.dev.value&&r.timeEnd("running "+t)}else c=null;e.returned={nodes:[],edges:null},c instanceof Array?e.returned.nodes=c:c&&(c.nodes&&(e.returned.nodes=c.nodes),c.edges&&(e.returned.edges=c.edges))}},{"../../../core/console/print.coffee":54}],235:[function(e,t,n){var r=e("../../../util/copy.coffee"),o=e("../../../form/form.js"),i=e("../../../core/console/print.coffee"),a=e("../../../object/validate.coffee");t.exports=function(e){var t=e.ui.value&&e.ui.value.length,n=e.ui.position.value;e.dev.value&&t&&i.time("drawing custom UI elements");var s=e.container.value.selectAll("div#d3plus_drawer").data(["d3plus_drawer"]);s.enter().append("div").attr("id","d3plus_drawer");var l={};e.ui.position.accepted.forEach(function(t){l[t]=t==n?e.margin.bottom+"px":"auto"}),s.style("text-align",e.ui.align.value).style("position","absolute").style("width",e.width.value-2*e.ui.padding+"px").style("height","auto").style(l);var u=s.selectAll("div.d3plus_drawer_ui").data(t?e.ui.value:[],function(e){return e.method||!1});u.enter().append("div").attr("class","d3plus_drawer_ui").style("padding",e.ui.padding+"px").style("display","inline-block").each(function(t){var n,r,i=d3.select(this);"string"==typeof t.method&&t.method in e?(n=e[t.method].value,r=function(n){n!==e[t.method].value&&e.self[t.method](n).draw()}):(n=t.value[0],a(n)&&(n=n[d3.keys(n)[0]]),"function"==typeof t.method&&(r=function(n){t.method(n,e.self)})),t.form=o().container(i).data({sort:!1}).focus(n,r).id("id").text("text")}),u.each(function(t){var n,o=[];t.label?n=t.label:"string"==typeof t.method&&t.method in e&&(n=e.format.locale.value.method[t.method]||t.method),t.value.forEach(function(t){var n={};a(t)?(n.id=t[d3.keys(t)[0]],n.text=e.format.value(d3.keys(t)[0])):(n.id=t,n.text=e.format.value(t)),o.push(n)});var i=r(e.ui.font);i.align=r(e.font.align),i.secondary=r(i),t.form.data(o).font(i).format(e.format.locale.language).title(e.format.value(n)).type(t.type||"auto").ui({align:e.ui.align.value,padding:e.ui.padding,margin:0}).width(t.width||!1).draw()}),u.exit().remove();var c=s.node().offsetHeight||s.node().getBoundingClientRect().height;c&&(e.margin[n]+=c),e.dev.value&&t&&i.timeEnd("drawing custom UI elements")}},{"../../../core/console/print.coffee":54,"../../../form/form.js":99,"../../../object/validate.coffee":166,"../../../util/copy.coffee":201}],236:[function(e,t,n){var r,o,i,a;r=e("../../../client/pointer.coffee"),o=e("../../../color/lighter.coffee"),i=e("../../../core/console/print.coffee"),a=e("../../../client/css.coffee"),t.exports=function(e){var t,n,s,l,u,c,f,d,p,h,g,v,m,y,x;return!e.small&&e.history.states.length>0?(e.dev.value&&i.time("drawing back button"),t=e.container.value.selectAll("div#d3plus_back_button").data(["d3plus_back_button"]).style("position","relative").style("z-index",1900),p=e.title.sub.font.size,n=e.title.sub.font.color,u=e.title.sub.font.family.value,x=e.title.sub.font.weight,d=e.title.sub.padding,v=!1,e.title.sub.value&&["start","left"].indexOf(e.title.sub.font.align)<0?v="sub":e.title.total.value&&["start","left"].indexOf(e.title.total.font.align)<0?v="total":e.title.value&&["start","left"].indexOf(e.title.font.align)<0&&(v="title"),v?(h=function(e){var t;return t=e.attr("transform").split(","),t=t[t.length-1],parseFloat(t.substring(0,t.length-1))},m=e.svg.select(".d3plus_title."+v),y=h(m)+h(m.select("text"))):(y=e.margin.top-e.title.padding,f=p+2*d,e.margin.top+=f),s=parseFloat(e.container.value.style("padding-top"),10),y+=s,s=parseFloat(e.container.value.style("padding-left"),10),c=e.margin.left+p/2+s,g=function(e){return e.style("position","absolute").style("left",c+"px").style("top",y+"px").style("color",n).style("font-family",u).style("font-weight",x).style("font-size",p+"px")},l=t.enter().append("div").attr("id","d3plus_back_button").style("opacity",0).call(g).html(function(){var t;return t=a("font-awesome")?"<i class='fa fa-angle-left' style='margin-top:2px;margin-right:4px;'></i>":"&laquo; ",t+e.format.value(e.format.locale.value.ui.back)}),t.on(r.over,function(){return!e.small&&e.history.states.length>0?d3.select(this).style("cursor","pointer").transition().duration(e.timing.mouseevents).style("color",o(n,.25)):void 0}).on(r.out,function(){return!e.small&&e.history.states.length>0?d3.select(this).style("cursor","auto").transition().duration(e.timing.mouseevents).style("color",n):void 0}).on(r.click,function(){return e.history.back()}).transition().duration(e.draw.timing).style("opacity",1).call(g),e.dev.value?i.timeEnd("drawing back button"):void 0):e.container.value.selectAll("div#d3plus_back_button").transition().duration(e.draw.timing).style("opacity",0).remove()}},{"../../../client/css.coffee":39,"../../../client/pointer.coffee":41,"../../../color/lighter.coffee":47,"../../../core/console/print.coffee":54}],237:[function(e,t,n){var r=e("../../../array/sort.coffee"),o=e("../../../util/buckets.coffee"),i=e("../../../util/copy.coffee"),a=e("../tooltip/create.js"),s=e("../../../core/data/nest.js"),l=e("../../../util/dataURL.coffee"),u=e("../../../client/pointer.coffee"),c=e("../../../core/fetch/value.coffee"),f=e("../../../core/fetch/color.coffee"),d=e("../../../core/fetch/text.js"),p=e("../../../core/console/print.coffee"),h=e("../../../tooltip/remove.coffee"),g=e("../../../color/text.coffee"),v=e("../../../util/uniques.coffee"),m=e("../../../string/strip.js"),y=e("../../../textwrap/textwrap.coffee"),x=e("../../../client/touch.coffee"),b=e("../../../object/validate.coffee");t.exports=function(e){function t(t){t.attr("transform",function(t,n){var r=C+n*(e.ui.padding+_);return"translate("+r+","+e.ui.padding+")"})}function n(t){t.attr("width",_).attr("height",_).attr("fill",function(t){d3.select(this.parentNode).select("text").remove();var n=v(t,e.icon.value,c,e,R),r=f(e,t,R);if(e.legend.icons.value&&1===n.length&&"string"==typeof n[0]){n=n[0];var o,i=m(n+"_"+r),a=e.icon.style.value,s=e.defs.selectAll("pattern#"+i).data([i]);o="string"==typeof a?e.icon.style.value:b(a)&&a[R]?a[R]:"default",r="knockout"==o?r:"none",s.select("rect").transition().duration(e.draw.timing).attr("fill",r).attr("width",_).attr("height",_),s.select("image").transition().duration(e.draw.timing).attr("width",_).attr("height",_);var u=s.enter().append("pattern").attr("id",i).attr("width",_).attr("height",_);return u.append("rect").attr("fill",r).attr("width",_).attr("height",_),u.append("image").attr("xlink:href",n).attr("width",_).attr("height",_).each(function(e){0===n.indexOf("/")||n.indexOf(window.location.hostname)>=0?l(n,function(e){s.select("image").attr("xlink:href",e)}):s.select("image").attr("xlink:href",n)}),"url(#"+i+")"}var p;if(p=e.legend.text.value?[c(e,t,e.legend.text.value,P)]:d(e,t,P),1===p.length&&!(p[0]instanceof Array)&&p[0].length){var h=d3.select(this.parentNode).append("text");h.attr("font-size",e.legend.font.size+"px").attr("font-weight",e.legend.font.weight).attr("font-family",e.legend.font.family.value).attr("fill",g(r)).attr("x",0).attr("y",0).each(function(t){y().align("middle").container(d3.select(this)).height(_).padding(e.ui.padding).resize(e.labels.resize.value).text(p[0]).width(_).valign("middle").draw()}),h.select("tspan").empty()&&h.remove()}return r})}var w=!0,_=0;if(!e.error.internal&&e.color.value&&!e.small&&e.legend.value)if(e.color.valueScale)if(e.color.valueScale){e.dev.value&&p.time("drawing color scale"),e.g.legend.selectAll("g.d3plus_color").transition().duration(e.draw.timing).attr("opacity",0).remove();var k=e.color.valueScale.domain(),A=e.color.valueScale.range();k.length<=2&&(k=o(k,6));var M=e.g.legend.selectAll("g.d3plus_scale").data(["scale"]);M.enter().append("g").attr("class","d3plus_scale").attr("opacity",0);var z=M.selectAll("#d3plus_legend_heatmap").data(["heatmap"]);z.enter().append("linearGradient").attr("id","d3plus_legend_heatmap").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("spreadMethod","pad");var j=z.selectAll("stop").data(d3.range(0,A.length));j.enter().append("stop").attr("stop-opacity",1),j.attr("offset",function(e){return Math.round(e/(A.length-1)*100)+"%"}).attr("stop-color",function(e){return A[e]}),j.exit().remove();var E=M.selectAll("rect#gradient").data(["gradient"]);E.enter().append("rect").attr("id","gradient").attr("x",function(t){return"middle"==e.legend.align?e.width.value/2:"end"==e.legend.align?e.width.value:0}).attr("y",e.ui.padding).attr("width",0).attr("height",e.legend.gradient.height).attr("stroke",e.legend.font.color).attr("stroke-width",1).style("fill","url(#d3plus_legend_heatmap)");var S=M.selectAll("text.d3plus_tick").data(d3.range(0,k.length));S.enter().append("text").attr("class","d3plus_tick").attr("x",function(t){return"middle"==e.legend.align?e.width.value/2:"end"==e.legend.align?e.width.value:0}).attr("y",function(t){return this.getBBox().height+e.legend.gradient.height+2*e.ui.padding});var T=0;S.order().attr("font-weight",e.legend.font.weight).attr("font-family",e.legend.font.family.value).attr("font-size",e.legend.font.size+"px").style("text-anchor",e.legend.font.align).attr("fill",e.legend.font.color).text(function(t){return e.format.value(k[t],{key:key,vars:e})}).attr("y",function(t){return this.getBBox().height+e.legend.gradient.height+2*e.ui.padding}).each(function(e){var t=this.offsetWidth;t>T&&(T=t)}),T+=2*e.labels.padding;var N=T*(k.length-1);if(N+T<e.width.value){N+T<e.width.value/2&&(N=e.width.value/2,T=N/k.length,N-=T);var C;C="start"==e.legend.align?e.ui.padding:"end"==e.legend.align?e.width.value-e.ui.padding-N:e.width.value/2-N/2,S.transition().duration(e.draw.timing).attr("x",function(e){return C+T*e}),S.exit().transition().duration(e.draw.timing).attr("opacity",0).remove();var O=M.selectAll("rect.d3plus_tick").data(d3.range(0,k.length));O.enter().append("rect").attr("class","d3plus_tick").attr("x",function(t){return"middle"==e.legend.align?e.width.value/2:"end"==e.legend.align?e.width.value:0}).attr("y",e.ui.padding).attr("width",0).attr("height",e.ui.padding+e.legend.gradient.height).attr("fill",e.legend.font.color),O.transition().duration(e.draw.timing).attr("x",function(e){var t=0===e?1:0;return C+T*e-t}).attr("y",e.ui.padding).attr("width",1).attr("height",e.ui.padding+e.legend.gradient.height).attr("fill",e.legend.font.color),O.exit().transition().duration(e.draw.timing).attr("width",0).remove(),E.transition().duration(e.draw.timing).attr("x",function(t){return"middle"==e.legend.align?e.width.value/2-N/2:"end"==e.legend.align?e.width.value-N-e.ui.padding:e.ui.padding}).attr("y",e.ui.padding).attr("width",N).attr("height",e.legend.gradient.height),M.transition().duration(e.draw.timing).attr("opacity",1),e.dev.value&&p.timeEnd("drawing color scale")}else w=!1}else w=!1;else{e.dev.value&&p.time("grouping data by colors");var q;if(e.nodes.value&&e.types[e.type.value].requirements.indexOf("nodes")>=0){if(q=i(e.nodes.restriced||e.nodes.value),e.data.viz.length)for(var D=0;D<q.length;D++){var F=e.data.viz.filter(function(t){return t[e.id.value]===q[D][e.id.value]});F.length&&(q[D]=F[0])}}else q=e.data.viz;var L=function(t){return f(e,t,P)},P=0,R=e.id.value,I=e.id.nesting.indexOf(e.color.value);if(I>=0)P=I,R=e.id.nesting[I];else for(var B=0;B<=e.depth.value;B++){P=B,R=e.id.nesting[B];var U=v(q,function(t){return c(e,t,R)}),V=v(q,L);if(U.length<=V.length&&V.length>1)break}var H=[e.color.value];e.icon.value&&e.legend.icons.value&&H.push(e.icon.value);var A=s(e,q,H,[]);e.dev.value&&p.timeEnd("grouping data by color");var Y=e.width.value;_=e.legend.size;var N=_*A.length+e.ui.padding*(A.length+1);if(_ instanceof Array){e.dev.value&&p.time("calculating legend size");for(var D=_[1];D>=_[0];D--)if(N=D*A.length+e.ui.padding*(A.length+1),Y>=N){_=D;break}e.dev.value&&p.timeEnd("calculating legend size")}else"number"!=typeof _&&_!==!1&&(_=30);if(N>Y||1==A.length)w=!1;else{N-=2*e.ui.padding,e.dev.value&&p.time("sorting legend");var $=e[e.legend.order.value].value;r(A,$,e.legend.order.sort.value,e.color.value,e,P),e.dev.value&&p.timeEnd("sorting legend"),e.dev.value&&p.time("drawing legend");var C;C="start"==e.legend.align?e.ui.padding:"end"==e.legend.align?Y-e.ui.padding-N:Y/2-N/2,e.g.legend.selectAll("g.d3plus_scale").transition().duration(e.draw.timing).attr("opacity",0).remove();var W={},X=e.g.legend.selectAll("g.d3plus_color").data(A,function(t){var n=f(e,t,R);return n in W||(W[n]=-1),W[n]++,W[n]+"_"+n});X.enter().append("g").attr("class","d3plus_color").attr("opacity",0).call(t).append("rect").attr("class","d3plus_color").call(n),X.order().transition().duration(e.draw.timing).call(t).attr("opacity",1).selectAll("rect.d3plus_color").call(n),X.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),!x&&e.legend.tooltip.value&&X.on(u.over,function(t,n){d3.select(this).style("cursor","pointer");var r=this.getBoundingClientRect(),o=r.left+_/2+window.scrollX,i=r.top+_/2+window.scrollY,s=e.id.nesting.indexOf(R),l=s>=0?d(e,t,s)[0]:e.format.value(c(e,t,e.color.value,R),{key:e.color.value,vars:e,data:t});a({data:t,footer:!1,vars:e,x:o,y:i,title:l,offset:.4*_})}).on(u.out,function(t){h(e.type.value)}),e.dev.value&&p.timeEnd("drawing legend")}}else w=!1;if(e.legend.value&&key&&w){if(e.dev.value&&p.time("positioning legend"),_)var Z=_+e.ui.padding;else var G=e.g.legend.node().getBBox(),Z=G.height+G.y;0===e.margin.bottom&&(e.margin.bottom+=e.ui.padding),e.margin.bottom+=Z,e.g.legend.transition().duration(e.draw.timing).attr("transform","translate(0,"+(e.height.value-e.margin.bottom)+")"),e.dev.value&&p.timeEnd("positioning legend")}else e.dev.value&&p.time("hiding legend"),e.g.legend.transition().duration(e.draw.timing).attr("transform","translate(0,"+e.height.value+")"),e.dev.value&&p.timeEnd("hiding legend")}},{"../../../array/sort.coffee":37,"../../../client/pointer.coffee":41,"../../../client/touch.coffee":45,"../../../color/text.coffee":52,"../../../core/console/print.coffee":54,"../../../core/data/nest.js":62,"../../../core/fetch/color.coffee":65,"../../../core/fetch/text.js":68,"../../../core/fetch/value.coffee":69,"../../../object/validate.coffee":166,"../../../string/strip.js":169,"../../../textwrap/textwrap.coffee":194,"../../../tooltip/remove.coffee":197,"../../../util/buckets.coffee":198,"../../../util/copy.coffee":201,"../../../util/dataURL.coffee":203,"../../../util/uniques.coffee":204,"../tooltip/create.js":232}],238:[function(e,t,n){t.exports=function(e,t){function n(t){t.style(o).style("position","absolute").style("background",a).style("text-align","center").style("left",function(){return"center"==i?"50%":"0px"}).style("width",function(){return"center"==i?"auto":e.width.value+"px"}).style("margin-left",function(){var t=e.width.value-e.width.viz;return"center"==i?-(this.offsetWidth/2+t/2)+"px":"0px"}).style("top",function(){return"center"==i?"50%":"top"==i?"0px":"auto"}).style("bottom",function(){return"bottom"==i?"0px":"auto"}).style("margin-top",function(){if("large"==r){var e=this.offsetHeight||this.getBoundingClientRect().height;return-e/2+"px"}return"0px"})}t=e.messages.value?t:null;var r=e.messages.style.value||(t===e.error.internal?"large":e.messages.style.backup);if("large"===r)var o=e.messages,i="center";else{if(e.footer.value)var o=e.footer;else if(e.title.value)var o=e.title;else if(e.title.sub.value)var o=e.title.sub;else if(e.title.total.value)var o=e.title.total;else var o=e.title.sub;var i=o.position}var o={color:o.font.color,"font-family":o.font.family.value,"font-weight":o.font.weight,"font-size":o.font.size+"px",padding:o.padding+"px"},a="none"!=e.background.value?e.background.value:"white";e.g.message=e.container.value.selectAll("div#d3plus_message").data(["message"]),e.g.message.enter().append("div").attr("id","d3plus_message").attr("opacity",0);var s=t?1:0,l=t?t:e.g.message.text(),u=t?"inline-block":"none";e.g.message.text(l).style("display",u).call(n).transition().duration(e.draw.timing).style("opacity",s)}},{}],239:[function(e,t,n){var r,o,i,a,s,l,u,c,f,d;r=e("../../../util/closest.coffee"),o=e("../../../client/css.coffee"),a=e("../../../font/sizes.coffee"),i=e("../../../client/pointer.coffee"),s=e("../../../color/mix.coffee"),u=e("../../../client/prefix.coffee"),c=e("../../../core/console/print.coffee"),f=e("../../../color/text.coffee"),d=e("../../../core/data/time.coffee"),l=!1,t.exports=function(e){var t,n,a,p,h,g,v,m,y,x,b,w,_,k,A,M,z,j,E,S,T,N,C,O,q,D,F,L,P,R,I,B,U,V,H,Y,$,W,X,Z,G,J,Q,K,ee,te,ne,re,oe,ie;if(!e.timeline.value||e.error.internal&&e.data.missing||e.small||!e.data.time||!(e.data.time.values.length>1))return e.g.timeline.transition().duration(e.draw.timing).attr("transform","translate(0,"+e.height.value+")");if(e.dev.value&&c.time("drawing timeline"),H={"font-weight":e.ui.font.weight,"font-family":e.ui.font.family.value,"font-size":e.ui.font.size+"px","text-anchor":"middle"},ie=e.data.time.ticks.map(function(e){return new Date(e)}),Z=d(e,{values:ie,style:H}),ee=Z.values.map(Number),X=Z.format,e.time.solo.value.length)for(w=d3.extent(e.time.solo.value),b=_=0,M=w.length;M>_;b=++_)m=w[b],m.constructor!==Date&&(m=new Date(m.toString()),m.setTime(m.getTime()+60*m.getTimezoneOffset()*1e3),w[b]=m);else w=d3.extent(ie);if(oe=ie.slice(),ne=d3.max(Z.sizes.map(function(e){return e.height})),k=~~d3.max(Z.sizes.map(function(e){return e.width}))+1,k+=2*e.ui.padding,J=ne+2*e.ui.padding,K=k*ie.length,F=J,t=e.width.value-2*e.ui.padding,e.timeline.play.value&&(t-=F+e.ui.padding),ee.length<ie.length||t<k*ee.length){for(S=k,k=(t-k)/ie.length,K=k*ie.length,Q=1,$=~~(S/(K/ee.length))+1;$<ee.length-1&&(ee.length-1)%$!==0;)$++;ee=ee.filter(function(e,t){return t%$===0})}else Q=0,j=new Date(ie[0]),I=e.data.time.stepType,j["set"+I](j["get"+I]()+ie.length),oe.push(j);return P=new Date(w[0]),P=r(oe,P),y=new Date(w[1]),Q||y["set"+e.data.time.stepType](y["get"+e.data.time.stepType]()+1),y=r(oe,y),re=oe.map(Number),E=re.indexOf(+P),z=re.indexOf(+y),p=[P,y],R="start"===e.timeline.align?e.ui.padding:"end"===e.timeline.align?e.width.value-e.ui.padding-K:e.width.value/2-K/2,e.timeline.play.value&&(R+=(F+e.ui.padding)/2),B=function(){return clearInterval(l),l=!1,N.call(C,"icon")},g=function(){var e,t,n;if(null!==d3.event.sourceEvent){if(l&&B(),p=a.extent(),n=r(oe,p[0]),t=r(oe,p[1]),n===t&&(E=re.indexOf(+n),n<p[0]||0===E?t=oe[E+1]:n=oe[E-1]),E=re.indexOf(+n),z=re.indexOf(+t),z-E>=1)e=[n,t];else if(E+1<=ie.length)e=[n,oe[E+1]];else{for(e=[n],b=1;1>=b;)E+b<=ie.length?e.push(oe[E+b]):e.unshift(oe[E-(E+b-ie.length)]),b++;e=[e[0],e[e.length-1]]}return p=e,U.attr("fill",V),d3.select(this).call(a.extent(e))}},L=function(){var t;return z-E===ie.length-Q?t=[]:(t=re.filter(function(e,t){return t>=E&&z+Q>t}),t=t.map(function(e){return new Date(e)})),D(),e.self.time({solo:t}).draw()},v=function(){var t,n,o,i;return null!==d3.event.sourceEvent&&(e.time.solo.value.length?(i=d3.extent(e.time.solo.value),o=re.indexOf(+r(oe,i[0])),n=re.indexOf(+r(oe,i[1])),t=o!==E||n!==z):t=z-E!==ie.length-Q,t)?L():void 0},T=e.g.timeline.selectAll("rect.d3plus_timeline_play").data(e.timeline.play.value?[0]:[]),q=function(t){return t.attr("width",F+1).attr("height",J+1).attr("fill",e.ui.color.primary.value).attr("stroke",e.ui.color.primary.value).attr("stroke-width",1).attr("x",R-F-1-e.ui.padding).attr("y",e.ui.padding)},T.enter().append("rect").attr("class","d3plus_timeline_play").attr("shape-rendering","crispEdges").attr("opacity",0).call(q),T.transition().duration(e.draw.timing).call(q),T.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),N=e.g.timeline.selectAll("text.d3plus_timeline_playIcon").data(e.timeline.play.value?[0]:[]),C=function(t,n){var r;return n=e.timeline.play[n],o("font-awesome")?(n=n.awesome,r="FontAwesome"):(n=n.fallback,r="inherit"),t.style("font-family",r).text(n)},O=function(t){var n;return n=J/2+e.ui.padding+1,t.attr("fill",f(e.ui.color.primary.value)).attr(H).attr("x",R-(F-1)/2-e.ui.padding).attr("y",n).attr("dy","0.5ex").call(C,l?"pause":"icon")},N.enter().append("text").attr("class","d3plus_timeline_playIcon").call(O).style("pointer-events","none").attr("opacity",0),N.call(O).transition().duration(e.draw.timing).attr("opacity",1),N.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),D=function(){return z-E===ie.length-Q?(T.on(i.hover,null).on(i.click,null).transition().duration(e.draw.timing).attr("opacity",.3),N.transition().duration(e.draw.timing).attr("opacity",.3)):(T.on(i.over,function(){return d3.select(this).style("cursor","pointer")}).on(i.out,function(){return d3.select(this).style("cursor","auto")}).on(i.click,function(){return l?B():(N.call(C,"pause"),z===ie.length?(z-=E,E=0):(E++,z++),L(),l=setInterval(function(){return z===ie.length-Q?B():(E++,z++,L())},e.timeline.play.timing.value))}).transition().duration(e.draw.timing).attr("opacity",1),N.transition().duration(e.draw.timing).attr("opacity",1))},D(),V=function(t){var n,r,o;return r=Q?t<=p[1]:t<p[1],t>=p[0]&&r?(o=1,n=f(e.ui.color.secondary.value)):(o=.5,n=f(e.ui.color.primary.value)),n=d3.rgb(n),"rgba("+n.r+","+n.g+","+n.b+","+o+")"},n=e.g.timeline.selectAll("rect.d3plus_timeline_background").data(["background"]),n.enter().append("rect").attr("class","d3plus_timeline_background").attr("shape-rendering","crispEdges").attr("width",K+2).attr("height",J+2).attr("fill",e.ui.color.primary.value).attr("x",R-1).attr("y",e.ui.padding),n.transition().duration(e.draw.timing).attr("width",K+2).attr("height",J+2).attr("fill",e.ui.color.primary.value).attr("x",R-1).attr("y",e.ui.padding),W=e.g.timeline.selectAll("g#ticks").data(["ticks"]),W.enter().append("g").attr("id","ticks").attr("transform","translate("+e.width.value/2+","+e.ui.padding+")"),h=e.g.timeline.selectAll("g#brush").data(["brush"]),h.enter().append("g").attr("id","brush"),A=e.g.timeline.selectAll("g#labels").data(["labels"]),A.enter().append("g").attr("id","labels"),U=A.selectAll("text").data(ie,function(e,t){return t}),U.enter().append("text").attr("y",0).attr("dy","0.5ex").attr("x",0),te=d3.time.scale().domain(d3.extent(oe)).rangeRound([0,K]),U.order().attr(H).text(function(e,t){return ee.indexOf(+e)>=0?X(e):""}).attr("opacity",function(t,n){return e.data.time.dataSteps.indexOf(n)>=0?1:.4}).attr("fill",V).attr("transform",function(t,n){var r,o;return r=R+te(t),Q||(r+=k/2),o=J/2+e.ui.padding+1,Q&&(o+=J),"translate("+Math.round(r)+","+Math.round(o)+")"}),U.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),a=d3.svg.brush().x(te).extent(p).on("brush",g).on("brushend",v),Y=e.axes.discrete&&e[e.axes.discrete].value===e.time.value?e[e.axes.discrete].ticks.color:e.x.ticks.color,W.attr("transform","translate("+R+","+e.ui.padding+")").transition().duration(e.draw.timing).call(d3.svg.axis().scale(te).orient("top").ticks(function(){return oe}).tickFormat("").tickSize(-J).tickPadding(0)).selectAll("line").attr("stroke-width",1).attr("shape-rendering","crispEdges").attr("stroke",function(t){return ee.indexOf(+t)>=0?Y:s(Y,e.background.value,.4,1)}),W.selectAll("path").attr("fill","none"),h.attr("transform","translate("+R+","+e.ui.padding+")").attr("opacity",1).call(a),U.attr("pointer-events","none"),h.selectAll("rect.background").attr("fill","none").style("visibility","visible").attr("height",J).attr("shape-rendering","crispEdges").on(i.move,function(){var t;return t=e.timeline.hover.value,["grab","grabbing"].indexOf(t)>=0&&(t=u()+t),d3.select(this).style("cursor",t)}),h.selectAll("rect.extent").attr("opacity",.75).attr("height",J).attr("fill",e.ui.color.secondary.value).attr("shape-rendering","crispEdges").on(i.move,function(){var t;return t=e.timeline.hover.value,["grab","grabbing"].indexOf(t)>=0&&(t=u()+t),d3.select(this).style("cursor",t)}),e.timeline.handles.value?(x=h.selectAll("g.resize").selectAll("rect.d3plus_handle").data(["d3plus_handle"]),x.enter().insert("rect","rect").attr("class","d3plus_handle"),x.attr("fill",e.timeline.handles.color).attr("transform",function(t){var n;return n="resize e"===this.parentNode.className.baseVal?-e.timeline.handles.size:0,"translate("+n+",0)"}).attr("width",e.timeline.handles.size).style("visibility","visible").attr("shape-rendering","crispEdges").attr("opacity",e.timeline.handles.opacity),h.selectAll("g.resize").selectAll("rect").attr("height",J)):h.selectAll("g.resize").remove(),G=e.g.timeline.node().getBBox(),0===e.margin.bottom&&(e.margin.bottom+=e.ui.padding),e.margin.bottom+=G.height+G.y,e.g.timeline.transition().duration(e.draw.timing).attr("transform","translate(0,"+Math.round(e.height.value-e.margin.bottom-e.ui.padding/2)+")"),e.margin.bottom+=e.ui.padding,e.dev.value?c.time("drawing timeline"):void 0}},{"../../../client/css.coffee":39,"../../../client/pointer.coffee":41,"../../../client/prefix.coffee":42,"../../../color/mix.coffee":48,"../../../color/text.coffee":52,"../../../core/console/print.coffee":54,"../../../core/data/time.coffee":64,"../../../font/sizes.coffee":97,"../../../util/closest.coffee":200}],240:[function(e,t,n){var r=e("../../../client/pointer.coffee"),o=e("../../../core/fetch/value.coffee"),i=e("../../../core/console/print.coffee"),a=e("../../../client/rtl.coffee"),s=e("../../../textwrap/textwrap.coffee");t.exports=function(e){function t(t){t.attr("font-size",function(e){return e.style.font.size}).attr("fill",function(t){return t.link?e.links.font.color:t.style.font.color}).attr("font-family",function(t){return t.link?e.links.font.family.value:t.style.font.family.value}).attr("font-weight",function(t){return t.link?e.links.font.weight:t.style.font.weight}).style("text-decoration",function(t){return t.link?e.links.font.decoration.value:t.style.font.decoration.value}).style("text-transform",function(t){return t.link?e.links.font.transform.value:t.style.font.transform.value})}function n(e){var t=e.style.font.align;return"center"==t?"middle":"left"==t&&!a||"right"==t&&a?"start":"left"==t&&a||"right"==t&&!a?"end":t}var l=e.size.value?e.size.value:"number"===e.color.type?e.color.value:!1;if(e.data.viz&&e.title.total.value&&!e.small)if(l){if(e.dev.value&&i.time("calculating total value"),e.focus.value.length){var u=e.data.viz.filter(function(t){return t[e.id.value]==e.focus.value[0]});u=d3.sum(u,function(t){return o(e,t,l)})}else var u=d3.sum(e.data.pool,function(t){return o(e,t,l)});if(0===u&&(u=!1),"number"==typeof u){var c="";if(e.data.mute.length||e.data.solo.length||e.focus.value.length){var f=d3.sum(e.data.value,function(t){if(e.time.solo.value.length>0)var n=e.time.solo.value.indexOf(o(e,t,e.time.value))>=0;else if(e.time.mute.value.length>0)var n=e.time.solo.value.indexOf(o(e,t,e.time.value))<0;else var n=!0;return n?o(e,t,l):void 0});if(f>u){var c=u/f*100,d=e.format.value(f,{key:e.size.value,vars:e});c=" ("+e.format.value(c,{key:"share",vars:e})+"% of "+d+")"}}u=e.format.value(u,{key:e.size.value,vars:e});var p=e.title.total.value,h=p.prefix||e.format.value(e.format.locale.value.ui.total)+": ";u=h+u,p.suffix?u+=p.suffix:null,u+=c}e.dev.value&&i.timeEnd("calculating total value")}else var u=!1;else var u=!1;var g=[];if(e.footer.value&&g.push({link:e.footer.link,style:e.footer,type:"footer",value:e.footer.value}),!e.small){if(e.title.value){var v=e.title.value;"function"==typeof v&&(v=v(e.self)),g.push({link:e.title.link,style:e.title,type:"title",value:v})}if(e.title.sub.value){var v=e.title.sub.value;"function"==typeof v&&(v=v(e.self)),g.push({link:e.title.sub.link,style:e.title.sub,type:"sub",value:v})}e.title.total.value&&u&&g.push({link:e.title.total.link,style:e.title.total,type:"total",value:u})}e.dev.value&&i.time("drawing titles");var m=e.svg.selectAll("g.d3plus_title").data(g,function(e){return e.type}),y=e.title.width||e.width.value-e.margin.left-e.margin.right;m.enter().append("g").attr("class",function(e){return"d3plus_title "+e.type}).attr("opacity",0).append("text").call(t),m.each(function(r){var o=d3.select(this).select("text").call(t),i=n(r);s().align(i).container(o).height(e.height.value/8).size(!1).text(r.value).width(y).draw(),r.y=e.margin[r.style.position],e.margin[r.style.position]+=this.getBBox().height+2*r.style.padding}).on(r.over,function(t){t.link&&d3.select(this).transition().duration(e.timing.mouseevents).style("cursor","pointer").select("text").attr("fill",e.links.hover.color).attr("font-family",e.links.hover.family.value).attr("font-weight",e.links.hover.weight).style("text-decoration",e.links.hover.decoration.value).style("text-transform",e.links.hover.transform.value);

}).on(r.out,function(n){n.link&&d3.select(this).transition().duration(e.timing.mouseevents).style("cursor","auto").select("text").call(t)}).on(r.click,function(e){if(e.link){var t="/"!=e.link.charAt(0)?"_blank":"_self";window.open(e.link,t)}}).attr("opacity",1).attr("transform",function(t){var r=t.style.position,o="top"==r?0+t.y:e.height.value-t.y;"bottom"==r?o-=this.getBBox().height+t.style.padding:o+=t.style.padding;var i=n(t);if("start"===i)var a=e.margin.left+e.title.padding;else{{d3.select(this).select("text").node().getBBox().width}a="middle"===i?e.width.value/2-y/2:e.width.value-y-e.margin.right-e.title.padding}return"translate("+a+","+o+")"}),m.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),e.margin.top>0&&(e.margin.top+=e.title.padding),e.margin.bottom>0&&(e.margin.bottom+=e.title.padding);var x=e.title.height;x&&e.margin[e.title.position]<x&&(e.margin[e.title.position]=x),e.dev.value&&i.timeEnd("drawing titles")}},{"../../../client/pointer.coffee":41,"../../../client/rtl.coffee":43,"../../../core/console/print.coffee":54,"../../../core/fetch/value.coffee":69,"../../../textwrap/textwrap.coffee":194}],241:[function(e,t,n){var r,o;r=e("./labels.coffee"),o=e("./transform.coffee"),t.exports=function(e,t,n){var i,a,s,l,u,c,f,d,p;return t||(t=e.zoom.bounds),"number"!=typeof n&&(n=e.timing.transitions),e.zoom.size={height:t[1][1]-t[0][1],width:t[1][0]-t[0][0]},p=e.types[e.type.value],s=e.coords.fit.value,i="auto"===s||p.requirements.indexOf("coords")<0?d3.max([e.zoom.size.width/e.width.viz,e.zoom.size.height/e.height.viz]):e.zoom.size[s]/e["app_"+s],u=d3.min([e.width.viz,e.height.viz]),c=p.zoom?2*e.coords.padding:0,f=(u-c)/u/i,a=e.zoom.behavior.scaleExtent(),(a[0]===a[1]||t===e.zoom.bounds)&&e.zoom.behavior.scaleExtent([f,16*f]),l=e.zoom.behavior.scaleExtent()[1],f>l&&(f=l),e.zoom.scale=f,d=[e.width.viz/2-e.zoom.size.width*f/2-t[0][0]*f,e.height.viz/2-e.zoom.size.height*f/2-t[0][1]*f],e.zoom.translate=d,e.zoom.behavior.translate(d).scale(f),e.zoom.size={height:e.zoom.bounds[1][1]-e.zoom.bounds[0][1],width:e.zoom.bounds[1][0]-e.zoom.bounds[0][0]},e.zoom.reset=!1,r(e),o(e,n)}},{"./labels.coffee":243,"./transform.coffee":246}],242:[function(e,t,n){t.exports=function(e,t){var n,r,o;return r=t.id.nesting.length-1,n=t.depth.value,o=t.id.nesting[t.depth.value+1],t.types[t.type.value].nesting===!1?0:(e.d3plus.merged||e[o]instanceof Array&&r>n)&&(!e||o in e)?1:n!==r&&(!e||o in e)||!t.small&&t.tooltip.html.value?0:-1}},{}],243:[function(e,t,n){var r;r=e("../../../core/console/print.coffee"),t.exports=function(e){var t,n;return e.dev.value&&r.time("determining label visibility"),n=e.zoom.behavior.scaleExtent(),t=function(t){return t.attr("opacity",function(t){var r;return t||(t={}),r=parseFloat(d3.select(this).attr("font-size"),10),t.visible=r*(e.zoom.scale/n[1])>=2,t.visible?1:0})},e.draw.timing?e.g.viz.selectAll("text.d3plus_label").transition().duration(e.draw.timing).call(t):e.g.viz.selectAll("text.d3plus_label").call(t),e.dev.value?r.timeEnd("determining label visibility"):void 0}},{"../../../core/console/print.coffee":54}],244:[function(e,t,n){var r,o;r=e("./labels.coffee"),o=e("./transform.coffee"),t.exports=function(e){var t,n,i,a,s,l,u,c,f,d,p;return n=d3.event.sourceEvent?d3.event.sourceEvent.type:null,s=d3.event.translate,a=d3.event.scale,i=e.zoom.bounds,c=(e.width.viz-e.zoom.size.width*a)/2,u=c>0?c:0,l=c>0?e.width.viz-c:e.width.viz,p=(e.height.viz-e.zoom.size.height*a)/2,d=p>0?p:0,f=p>0?e.height.viz-p:e.height.viz,s[0]+i[0][0]*a>u?s[0]=-i[0][0]*a+u:s[0]+i[1][0]*a<l&&(s[0]=l-i[1][0]*a),s[1]+i[0][1]*a>d?s[1]=-i[0][1]*a+d:s[1]+i[1][1]*a<f&&(s[1]=f-i[1][1]*a),e.zoom.behavior.translate(s).scale(a),e.zoom.translate=s,e.zoom.scale=a,"wheel"===n?(t=e.draw.timing?100:250,clearTimeout(e.zoom.wheel),e.zoom.wheel=setTimeout(function(){return r(e)},t)):r(e),"dblclick"===n?o(e,e.timing.transitions):o(e,0)}},{"./labels.coffee":243,"./transform.coffee":246}],245:[function(e,t,n){t.exports=function(e,t){var n,r,o,i;r=e.zoom,t||(t=d3.event),i=r.scale>r.behavior.scaleExtent()[0],n=e.types[e.type.value].zoom&&r.value&&r.scroll.value,o=t.touches&&t.touches.length>1&&n,o||i||t.stopPropagation()}},{}],246:[function(e,t,n){t.exports=function(e,t){var n;return"number"!=typeof t&&(t=e.timing.transitions),n="translate("+e.zoom.translate+")",n+="scale("+e.zoom.scale+")",t?e.g.viz.transition().duration(t).attr("transform",n):e.g.viz.attr("transform",n)}},{}],247:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Function,Object,String],deprecates:"active_var",mute:r(!0),solo:r(!0),spotlight:{accepted:[Boolean],deprecates:"spotlight",value:!1},value:!1}},{"../../core/methods/filter.coffee":77}],248:[function(e,t,n){t.exports={accepted:[Object],deprecated:"nesting_aggs",objectAccess:!1,value:{}}},{}],249:[function(e,t,n){var r;r=e("../../core/methods/process/data.coffee"),t.exports={accepted:[!1,Array,Object,String],delimiter:{accepted:String,value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},keys:{},process:r,value:!1}},{"../../core/methods/process/data.coffee":83}],250:[function(e,t,n){var r;r=e("../../core/methods/rendering.coffee"),t.exports={background:{color:"#fafafa",rendering:r(),stroke:{color:"#ccc",width:1}},mirror:{accepted:[Boolean],deprecates:["mirror_axis","mirror_axes"],value:!1}}},{"../../core/methods/rendering.coffee":88}],251:[function(e,t,n){t.exports={accepted:[String],value:"#ffffff"}},{}],252:[function(e,t,n){var r,o;r=e("../../core/methods/filter.coffee"),o=e("../../color/scale.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],deprecates:"color_var",focus:"#444444",heatmap:["#282F6B","#419391","#AFD5E8","#EACE3F","#B35C1E","#B22200"],missing:"#eeeeee",mute:r(!0),primary:"#d74b03",range:["#B22200","#FFEE8D","#759143"],scale:{accepted:[Array,Function,"d3plus","category10","category20","category20b","category20c"],process:function(e){return e instanceof Array?d3.scale.ordinal().range(e):"d3plus"===e?o:"string"==typeof e?d3.scale[e]():e},value:"d3plus"},solo:r(!0),secondary:"#e5b3bb",value:!1}},{"../../color/scale.coffee":50,"../../core/methods/filter.coffee":77}],253:[function(e,t,n){t.exports={accepted:[Array,Function,String],index:{accepted:[Boolean],value:!0},process:function(e,t){return"string"==typeof e&&(e=[e]),e},value:!1}},{}],254:[function(e,t,n){t.exports={accepted:[Object],objectAccess:!1,process:function(e,t){var n,r;for(n in e)r=e[n],n in t.self&&t.self[n](r);return e},value:{}}},{}],255:[function(e,t,n){var r;r=e("../../util/d3selection.coffee"),t.exports={accepted:[!1,Array,Object,String],id:"default",process:function(e){return e===!1?!1:r(e)?e:d3.select(e instanceof Array?e[0][0]:e)},value:!1}},{"../../util/d3selection.coffee":202}],256:[function(e,t,n){var r,o;r=e("../../core/methods/filter.coffee"),o=e("../../core/methods/process/data.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],center:[0,0],filetype:{accepted:["json"],value:"json"},fit:{accepted:["auto","height","width"],value:"auto"},mute:r(!1),padding:20,process:o,projection:{accepted:["mercator","equirectangular"],value:"mercator"},solo:r(!1),threshold:{accepted:[Number],value:.9},value:!1}},{"../../core/methods/filter.coffee":77,"../../core/methods/process/data.coffee":83}],257:[function(e,t,n){var r,o,i;r=e("../../core/fetch/value.coffee"),o=e("../../client/ie.js"),i=e("../../string/strip.js"),t.exports={accepted:[void 0,Array,String],chainable:!1,data:[],process:function(e,t){var n,a,s,l,u,c,f,d,p,h,g,v,m,y,x,b,w,_,k,A,M,z,j,E,S,T,N,C,O,q;if(void 0===t.returned)return[];for(e=e||t.cols.value,e instanceof Array?l=e:"string"==typeof e&&(l=[e]),c=[],O=[],t.title.value?(C=t.title.value,"function"==typeof C&&(C=C(t.self)),C=i(C),M=250,C=C.substr(0,M)):C="D3plus Visualization Data",l||(l=[t.id.value],t.time.value&&l.push(t.time.value),t.size.value&&l.push(t.size.value),t.text.value&&l.push(t.text.value)),h=0,m=l.length;m>h;h++)a=l[h],O.push(t.format.value(a));for(c.push(O),S=t.returned.nodes,g=0,y=S.length;y>g;g++)if(j=S[g],console.log(j.values),null!=j.values&&j.values instanceof Array)for(T=j.values,v=0,x=T.length;x>v;v++){for(q=T[v],N=[],A=0,b=l.length;b>A;A++)s=l[A],N.push(r(t,q,s));c.push(N)}else{for(N=[],z=0,w=l.length;w>z;z++)s=l[z],N.push(r(t,j,s));c.push(N)}for(u="data:text/csv;charset=utf-8,",p=E=0,_=c.length;_>E;p=++E)a=c[p],f=a.join(","),u+=p<c.length?f+"\n":f;return o?(n=new Blob([u],{type:"text/csv;charset=utf-8;"}),navigator.msSaveBlob(n,C+".csv")):(d=encodeURI(u),k=document.createElement("a"),k.setAttribute("href",d),k.setAttribute("download",C+".csv"),k.click()),this.data=c,l},value:void 0}},{"../../client/ie.js":40,"../../core/fetch/value.coffee":69,"../../string/strip.js":169}],258:[function(e,t,n){var r;r=e("../../core/methods/process/data.coffee"),t.exports={accepted:[!1,Array,Function,String],cache:{},delimiter:{accepted:[String],value:"|"},donut:{size:.35},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},filters:[],keys:{},mute:[],large:400,opacity:.9,padding:{accepted:[Number],value:1},process:function(e,t){return"default"===t.container.id&&e.length&&t.self.container({id:"default"+e.length}),r(e,t,this)},solo:[],stroke:{width:1},value:!1}},{"../../core/methods/process/data.coffee":83}],259:[function(e,t,n){t.exports={accepted:[Function,Number],value:0}},{}],260:[function(e,t,n){t.exports={accepted:[!1,Function,Object],value:!1}},{}],261:[function(e,t,n){t.exports={accepted:[Boolean],value:!1}},{}],262:[function(e,t,n){var r=e("../../core/console/print.coffee"),o=e("../../string/format.js");t.exports={accepted:[void 0,Function],first:!0,frozen:!1,process:function(e,t){if(this.initialized===!1)return this.initialized=!0,e;if(void 0===e&&"function"==typeof this.value&&(e=this.value),t.container.value===!1){var n=t.format.locale.value.dev.setContainer;r.warning(n,"container")}else if(t.container.value.empty()){var n=t.format.locale.value.dev.noContainer;r.warning(o(n,'"'+t.container.value+'"'),"container")}else t.dev.value&&r.time("total draw time"),t.container.value.call(t.self);if("function"==typeof e&&t.history.chain.length){var i={};changes.forEach(function(e){var t=e.method;delete e.method,i[t]=e}),e(i),t.history.chain=[]}return e},update:!0,value:void 0}},{"../../core/console/print.coffee":54,"../../string/format.js":167}],263:[function(e,t,n){var r=e("../../core/methods/process/data.coffee");t.exports={accepted:[!1,Array,Function,String],arrows:{accepted:[Boolean,Number],direction:{accepted:["source","target"],value:"target"},value:!1},color:"#d0d0d0",connections:function(e,t,n){var r=this;if(!r.value)return[];if(!t)var t="id";var o=r.restricted||r.value,i=[];if(!e)return o;var a=o.filter(function(o){var a=!1;return o[r.source][t]==e?(a=!0,n&&i.push(o[r.target])):o[r.target][t]==e&&(a=!0,n&&i.push(o[r.source])),a});return n?i:a},delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},interpolate:{accepted:["basis","cardinal","linear","monotone","step"],value:"basis"},label:!1,large:100,limit:{accepted:[!1,Function,Number],value:!1},opacity:{accepted:[Function,Number,String],min:{accepted:[Number],value:.25},scale:{accepted:[Function],value:d3.scale.linear()},value:1},process:r,size:{accepted:[!1,Number,String],min:1,scale:.5,value:!1},source:"source",strength:{accepted:[!1,Function,Number,String],value:!1},target:"target",value:!1}},{"../../core/methods/process/data.coffee":83}],264:[function(e,t,n){t.exports={accepted:[Boolean,String],value:!1}},{}],265:[function(e,t,n){t.exports={accepted:[!1,Array,Function,Number,String],deprecates:"highlight",process:function(e){return e===!1?[]:e instanceof Array?e:[e]},tooltip:{accepted:[Boolean],value:!0},value:[]}},{}],266:[function(e,t,n){var r,o,i,a;r=e("../../core/methods/font/align.coffee"),o=e("../../core/methods/font/decoration.coffee"),i=e("../../core/methods/font/family.coffee"),a=e("../../core/methods/font/transform.coffee"),t.exports={align:r(),color:"#444444",decoration:o(),family:i(),secondary:{align:r(),color:"#444444",decoration:o(),family:i(),size:12,spacing:0,transform:a(),weight:200},size:12,spacing:0,transform:a(),weight:200}},{"../../core/methods/font/align.coffee":78,"../../core/methods/font/decoration.coffee":79,"../../core/methods/font/family.coffee":80,"../../core/methods/font/transform.coffee":82}],267:[function(e,t,n){var r,o,i;o=e("../../core/methods/font/family.coffee"),r=e("../../core/methods/font/decoration.coffee"),i=e("../../core/methods/font/transform.coffee"),t.exports={accepted:[!1,Number,String],font:{align:"center",color:"#444",decoration:r(),family:o(),size:11,transform:i(),weight:200},link:!1,padding:0,position:"bottom",value:!1}},{"../../core/methods/font/decoration.coffee":79,"../../core/methods/font/family.coffee":80,"../../core/methods/font/transform.coffee":82}],268:[function(e,t,n){var r,o,i,a;r=e("../../number/format.coffee"),o=e("../../core/locale/locale.coffee"),i=e("../../object/merge.coffee"),a=e("../../string/title.coffee"),t.exports={accepted:[Function,String],affixes:{accepted:[Object],objectAccess:!1,value:{}},deprecates:["number_format","text_format"],locale:{accepted:function(){return d3.keys(o)},process:function(e){var t,n;return t="en_US",n=o[t],e!==t&&(n=i(n,o[e])),this.language=e,n},value:"en_US"},number:{accepted:[!1,Function],value:!1},process:function(e,t){if("string"==typeof e)t.self.format({locale:e});else if("function"==typeof e)return e;return this.value},text:{accepted:[!1,Function],value:!1},value:function(e,t){var n,o,i;return t||(t={}),i=t.vars||{},i.time&&i.time.value&&t.key===i.time.value?(o=e.constructor===Date?e:new Date(e),i.data.time.format(o)):"number"==typeof e?(n=this.number.value||r)(e,t):"string"==typeof e?(n=this.text.value||a)(e,t):JSON.stringify(e)}}},{"../../core/locale/locale.coffee":75,"../../number/format.coffee":164,"../../object/merge.coffee":165,"../../string/title.coffee":170}],269:[function(e,t,n){t.exports={accepted:[!1,Number],max:600,secondary:!1,small:200,value:!1}},{}],270:[function(e,t,n){var r,o,i,a,s,l,u;r=e("../../../core/methods/font/align.coffee"),o=e("../../../core/methods/font/decoration.coffee"),i=e("../../../core/methods/font/family.coffee"),a=e("../../../core/methods/filter.coffee"),s=e("../../../core/methods/font/position.coffee"),l=e("../../../core/methods/rendering.coffee"),u=e("../../../core/methods/font/transform.coffee"),t.exports=function(e){return{accepted:[Array,Boolean,Function,Object,String],affixes:{accepted:[Boolean],separator:{accepted:[Boolean,Array],value:!0},value:!1},axis:{accepted:[Boolean],color:"#444",font:{color:!1,decoration:o(!1),family:i(""),size:!1,transform:u(!1),weight:!1},rendering:l(),value:!0},dataFilter:!0,deprecates:[e+"axis",e+"axis_val",e+"axis_var"],domain:{accepted:[!1,Array],value:!1},grid:{accepted:[Boolean],color:"#ccc",rendering:l(),value:!0},label:{accepted:[Boolean,String],fetch:function(t){return this.value===!0?t.format.value(t[e].value,{key:e,vars:t}):this.value},font:{color:"#444",decoration:o(),family:i(),size:12,transform:u(),weight:200},padding:3,value:!0},lines:{accept:[!1,Array,Number,Object],dasharray:{accepted:[Array,String],process:function(e){return e instanceof Array&&(e=e.filter(function(e){return!isNaN(e)}),e=e.length?e.join(", "):"none"),e},value:"10, 10"},color:"#888",font:{align:r("right"),color:"#444",background:{accepted:[Boolean],value:!0},decoration:o(),family:i(),padding:{accepted:[Number],value:10},position:s("middle"),size:12,transform:u(),weight:200},process:Array,rendering:l(),width:1,value:[]},mouse:{accept:[Boolean],dasharray:{accepted:[Array,String],process:function(e){return e instanceof Array&&(e=e.filter(function(e){return!isNaN(e)}),e=e.length?e.join(", "):"none"),e},value:"none"},rendering:l(),width:2,value:!0},mute:a(!0),padding:{accepted:[Number],value:.1},range:{accepted:[!1,Array],value:!1},scale:{accepted:["linear","log","discrete","share"],deprecates:["layout","unique_axis",e+"axis_scale"],process:function(t,n){var r,o,i,a;for(i=["log","discrete","share"],r=0,o=i.length;o>r;r++)a=i[r],a===t?n.axes[a]=e:n.axes[a]===e&&(n.axes[a]=!1);return"discrete"===t&&(n.axes.opposite="x"===e?"y":"x"),t},value:"linear"},solo:a(!0),stacked:{accepted:[Boolean],process:function(t,n){return t||n.axes.stacked!==e?t&&(n.axes.stacked=e):n.axes.stacked=!1,t},value:!1},ticks:{color:"#ccc",font:{color:"#666",decoration:o(),family:i(),size:10,transform:u(),weight:200},rendering:l(),size:10,width:1},value:!1,zerofill:{accepted:[Boolean],value:!1}}}},{"../../../core/methods/filter.coffee":77,"../../../core/methods/font/align.coffee":78,"../../../core/methods/font/decoration.coffee":79,"../../../core/methods/font/family.coffee":80,"../../../core/methods/font/position.coffee":81,"../../../core/methods/font/transform.coffee":82,"../../../core/methods/rendering.coffee":88}],271:[function(e,t,n){t.exports={accepted:[Boolean],back:function(){return this.states.length?this.states.pop()():void 0},chain:[],reset:function(){var e;for(e=[];this.states.length;)e.push(this.states.pop()());return e},states:[],value:!0}},{}],272:[function(e,t,n){var r;r=e("../../core/methods/process/icon.coffee"),t.exports={accepted:[!1,Array,Function,Object,String],back:{accepted:[!1,String],fallback:"&#x276e;",opacity:1,process:r,rotate:0,value:"fa-angle-left"},deprecates:"icon_var",style:{accepted:[Object,String],deprecates:"icon_style",value:"default"},value:!1}},{"../../core/methods/process/icon.coffee":85}],273:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[Array,String],dataFilter:!0,deprecates:["id_var","nesting"],grouping:{accepted:[Boolean],value:!0},mute:r(!0),nesting:["id"],solo:r(!0),value:"id"}},{"../../core/methods/filter.coffee":77}],274:[function(e,t,n){var r,o,i;r=e("../../core/methods/font/decoration.coffee"),o=e("../../core/methods/font/family.coffee"),i=e("../../core/methods/font/transform.coffee"),t.exports={accepted:[Boolean],align:{accepted:["start","middle","end","left","center","right"],process:function(e){var t;return t=["left","center","right"].indexOf(e),t>=0&&(e=this.accepted[t]),e},value:"middle"},font:{decoration:r(),family:o(),size:11,transform:i(),weight:200},padding:7,resize:{accepted:[Boolean],value:!0},text:{accepted:[!1,Function,String],value:!1},segments:2,valign:{accepted:[!1,"top","middle","bottom"],value:"middle"},value:!0}},{"../../core/methods/font/decoration.coffee":79,"../../core/methods/font/family.coffee":80,"../../core/methods/font/transform.coffee":82}],275:[function(e,t,n){var r;r=e("../../core/methods/font/family.coffee"),t.exports={accepted:[Boolean],align:"middle",font:{align:"middle",color:"#444444",family:r(),size:10,weight:200},gradient:{height:10},icons:{accepted:[Boolean],value:!0},order:{accepted:["color","id","size","text"],sort:{accepted:["asc","desc"],value:"asc"},value:"color"},size:[8,30],tooltip:{accepted:[Boolean],value:!0},text:{accepted:[!1,Function,String],value:!1},value:!0}},{"../../core/methods/font/family.coffee":80}],276:[function(e,t,n){var r,o,i;r=e("../../core/methods/font/decoration.coffee"),o=e("../../core/methods/font/family.coffee"),i=e("../../core/methods/font/transform.coffee"),t.exports={font:{color:"#444444",decoration:r(),family:o(),transform:i(),weight:200},hover:{color:"#444444",decoration:r(),family:o(),transform:i(),weight:200}}},{"../../core/methods/font/decoration.coffee":79,"../../core/methods/font/family.coffee":80,"../../core/methods/font/transform.coffee":82}],277:[function(e,t,n){var r;r=e("../../core/methods/process/margin.coffee"),t.exports={accepted:[Number,Object,String],process:function(e){var t;return void 0===e&&(e=this.value),t=e,r(e,this),t},value:0}},{"../../core/methods/process/margin.coffee":86}],278:[function(e,t,n){var r,o,i;r=e("../../core/methods/font/decoration.coffee"),o=e("../../core/methods/font/family.coffee"),i=e("../../core/methods/font/transform.coffee"),t.exports={accepted:[Boolean,String],font:{color:"#444",decoration:r(),family:o(),size:16,transform:i(),weight:200},padding:5,style:{accepted:[!1,"small","large"],value:!1},value:!0}},{"../../core/methods/font/decoration.coffee":79,"../../core/methods/font/family.coffee":80,"../../core/methods/font/transform.coffee":82}],279:[function(e,t,n){var r;r=e("../../core/methods/process/data.coffee"),t.exports={accepted:[!1,Array,Function,String],delimiter:{accepted:[String],value:"|"},filetype:{accepted:[!1,"json","xml","html","csv","dsv","tsv","txt"],value:!1},overlap:.6,process:r,value:!1}},{"../../core/methods/process/data.coffee":83}],280:[function(e,t,n){t.exports={accepted:[Boolean,Function,String],agg:{accepted:[!1,Function,"sum","min","max","mean","median"],value:!1},deprecates:["sort"],sort:{accepted:["asc","desc"],value:"desc"},value:!1}},{}],281:[function(e,t,n){var r;r=e("../../core/methods/rendering.coffee"),t.exports={accepted:function(e){var t;return t=e.types[e.type.value].shapes,!t||t instanceof Array||(t=[t]),t.length?t:["square"]},interpolate:{accepted:["basis","basis-open","cardinal","cardinal-open","linear","monotone","step","step-before","step-after"],deprecates:"stack_type",value:"linear"},rendering:r(),value:!1}},{"../../core/methods/rendering.coffee":88}],282:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Function,Number,Object,String],dataFilter:!0,deprecates:["value","value_var"],mute:r(!0),scale:{accepted:[Function],deprecates:"size_scale",max:{accepted:[Function,Number],value:function(e){return Math.floor(d3.max([d3.min([e.width.viz,e.height.viz])/15,6]))}},min:{accepted:[Function,Number],value:3},value:d3.scale.sqrt()},solo:r(!0),threshold:{accepted:[Boolean,Function,Number],value:!0},value:!1}},{"../../core/methods/filter.coffee":77}],283:[function(e,t,n){t.exports={value:!1}},{}],284:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Function,Object,String],deprecates:["else_var","else"],mute:r(!0),solo:r(!0),value:!1}},{"../../core/methods/filter.coffee":77}],285:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[Array,Boolean,Function,Object,String],deprecates:["name_array","text_var"],nesting:!0,mute:r(!0),solo:r(!0),value:!1}},{"../../core/methods/filter.coffee":77}],286:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[Array,Boolean,Function,Object,String],dataFilter:!0,deprecates:["year","year_var"],fixed:{accepted:[Boolean],deprecates:["static_axis","static_axes"],value:!0},format:{accepted:[!1,Array,Function,String],value:!1},mute:r(!1),solo:r(!1),value:!1}},{"../../core/methods/filter.coffee":77}],287:[function(e,t,n){t.exports={accepted:[Boolean],align:"middle",hover:{accepted:["all-scroll","col-resize","crosshair","default","grab","grabbing","move","pointer"],value:"pointer"},handles:{accepted:[Boolean],color:"#666",opacity:1,size:3,stroke:"#666",value:!0},height:{accepted:[Number],value:23},play:{accepted:[Boolean],icon:{accepted:[!1,String],awesome:"",fallback:"►"},pause:{accepted:[!1,String],awesome:"",fallback:"❚❚"},timing:{accepted:[Number],value:1500},value:!0},value:!0}},{}],288:[function(e,t,n){t.exports={mouseevents:60,transitions:600,ui:200}},{}],289:[function(e,t,n){var r,o,i,a;r=e("../../core/methods/font/decoration.coffee"),o=e("../../core/methods/font/family.coffee"),a=e("../../core/methods/font/transform.coffee"),i=e("../../string/strip.js"),t.exports={accepted:[!1,Function,String],font:{align:"center",color:"#444444",decoration:r(),family:o(),size:16,transform:a(),weight:400},height:!1,link:!1,padding:2,position:"top",process:function(e,t){var n;return 0===t.container.id.indexOf("default")&&e&&(n=i(e).toLowerCase(),t.self.container({id:n})),e},sub:{accepted:[!1,Function,String],deprecates:"sub_title",font:{align:"center",color:"#444444",decoration:r(),family:o(),size:12,transform:a(),weight:200},link:!1,padding:1,position:"top",value:!1},total:{accepted:[Boolean,Object],deprecates:"total_bar",font:{align:"center",color:"#444444",decoration:r(),family:o(),size:12,transform:a(),weight:200,value:!1},link:!1,padding:1,position:"top",value:!1},width:!1,value:!1}},{"../../core/methods/font/decoration.coffee":79,"../../core/methods/font/family.coffee":80,"../../core/methods/font/transform.coffee":82,"../../string/strip.js":169}],290:[function(e,t,n){var r,o;r=e("../../core/methods/font/family.coffee"),o=e("../../core/methods/font/transform.coffee"),t.exports={accepted:[Boolean,Array,Function,Object,String],anchor:"top center",background:"#ffffff",children:{accepted:[Boolean],value:!0},connections:{accepted:[Boolean],value:!0},curtain:{color:"#ffffff",opacity:.8},deprecates:"tooltip_info",extent:{accepted:[Boolean],value:!0},font:{color:"#444",family:r(),size:12,transform:o(),weight:200},html:{accepted:[!1,Function,Object,String],deprecates:"click_function",value:!1},iqr:{accepted:[Boolean],value:!0},large:250,share:{accepted:[Boolean],value:!0},size:{accepted:[Boolean],value:!0},small:225,value:!0}},{"../../core/methods/font/family.coffee":80,"../../core/methods/font/transform.coffee":82}],291:[function(e,t,n){var r;r=e("../../core/methods/filter.coffee"),t.exports={accepted:[!1,Function,Object,String],deprecates:["total_var"],mute:r(!0),solo:r(!0),value:!1}},{"../../core/methods/filter.coffee":77}],292:[function(e,t,n){t.exports={accepted:function(e){return d3.keys(e.types)},mode:{accepted:function(e){return e.types[e.type.value].modes||[!1]},value:!1},value:"tree_map"}},{}],293:[function(e,t,n){var r,o,i,a;i=e("../../core/methods/font/family.coffee"),r=e("../../core/methods/font/align.coffee"),o=e("../../core/methods/font/decoration.coffee"),a=e("../../core/methods/font/transform.coffee"),t.exports={accepted:[Array,Boolean],align:r("center"),border:1,color:{primary:{process:function(e,t){var n;return n=this.value,t.ui.color.secondary.value||(t.ui.color.secondary.value=d3.rgb(n).darker(.75).toString()),e},value:"#ffffff"},secondary:{value:!1}},display:{acceped:["block","inline-block"],value:"inline-block"},font:{align:"center",color:"#444",decoration:o(),family:i(),size:11,transform:a(),weight:200},margin:5,padding:5,position:{accepted:["top","right","bottom","left"],value:"bottom"},value:!1}},{"../../core/methods/font/align.coffee":78,"../../core/methods/font/decoration.coffee":79,"../../core/methods/font/family.coffee":80,"../../core/methods/font/transform.coffee":82}],294:[function(e,t,n){t.exports={accepted:[!1,Number],secondary:!1,small:200,value:!1}},{}],295:[function(e,t,n){t.exports={accepted:[Boolean],behavior:d3.behavior.zoom().scaleExtent([1,1]).duration(0),click:{accepted:[Boolean],value:!0},pan:{accepted:[Boolean],value:!0},scroll:{accepted:[Boolean],deprecates:"scroll_zoom",value:!0},value:!0}},{}],296:[function(e,t,n){var r,o,i,a,s,l,u=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e("../../core/fetch/value.coffee"),i=e("./helpers/graph/draw.coffee"),a=e("./helpers/graph/nest.coffee"),s=e("./helpers/graph/stack.coffee"),l=e("../../util/uniques.coffee"),r=function(e){var t,n,r,a,c,f,d,p,h,g,v,m,y,x,b,w,_,k,A,M,z,j,E,S,T,N,C,O,q,D,F,L;if(f=e.axes.discrete,g="x"===f?"height":"width",D="x"===f?"width":"height",E=e.axes.opposite,r="x"===f?"left":"top",M="x"===f?"top":"left",i(e,{buffer:!0,zero:e.axes.opposite}),h=e.x.domain.viz.concat(e.y.domain.viz),h.indexOf(void 0)>=0)return[];for(A=e.data.viz,e.axes.stacked&&s(e,A),O=e.axes[D]/e[e.axes.discrete].ticks.values.length,S=e[e.axes.discrete].padding.value,1>S&&(S*=O),2*S>O&&(S=.1*O),_=O-2*S,e.axes.stacked||(N=e[f].value,u.call(e.id.nesting,N)>=0?(t=d3.nest().key(function(t){return o(e,t,e[f].value)}).entries(A),p=d3.max(t,function(e){return e.values.length})):(t=l(A,e.id.value,o,e),p=t.length),_/=p,z=O/2-_/2-S,F=d3.scale.linear().domain([0,p-1]).range([-z,z])),c=[],L=0,v=m=0,x=A.length;x>m;v=++m)for(T=A[v],k=e.axes.stacked?0:F(v%p),C=T.values,y=0,b=C.length;b>y;y++){if(a=C[y],e.axes.stacked)q=a.d3plus[E],n=a.d3plus[E+"0"];else{if(j=o(e,a,e[E].value),0===j)continue;"log"===e[E].scale.value&&(L=0>j?-1:1),q=e[E].scale.viz(j),n=e[E].scale.viz(L)}d=o(e,a,e[f].value),a.d3plus[f]=e[f].scale.viz(d),a.d3plus[f]+=e.axes.margin[r]+k,w=n-q,a.d3plus[E]=n-w/2,e.axes.stacked||(a.d3plus[E]+=e.axes.margin[M]),a.d3plus[D]=_,a.d3plus[g]=Math.abs(w),a.d3plus.init={},a.d3plus.init[E]=e[E].scale.viz(L),a.d3plus.init[E]-=a.d3plus[E],a.d3plus.init[E]+=e.axes.margin[M],a.d3plus.init[D]=a.d3plus[D],a.d3plus.label=!1,c.push(a)}return c},r.filter=function(e,t){return a(e,t)},r.requirements=["data","x","y"],r.setup=function(e){var t;return e.axes.discrete?void 0:(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"}))},r.shapes=["square"],t.exports=r},{"../../core/fetch/value.coffee":69,"../../util/uniques.coffee":204,"./helpers/graph/draw.coffee":302,"./helpers/graph/nest.coffee":308,"./helpers/graph/stack.coffee":309}],297:[function(e,t,n){var r,o,i,a,s;o=e("../../core/fetch/value.coffee"),i=e("./helpers/graph/draw.coffee"),a=e("../../string/strip.js"),s=e("../../util/uniques.coffee"),r=function(e){var t,n,r,l,u,c,f,d,p,h,g,v,m;return i(e,{buffer:!0,mouse:!0}),r=e.x.domain.viz.concat(e.y.domain.viz),r.indexOf(void 0)>=0?[]:(n=e.axes.discrete,h=e.axes.opposite,t="x"===n?e.axes.margin.left:e.axes.margin.top,p="x"===h?e.axes.margin.left:e.axes.margin.top,l="x"===n?"height":"width",m="x"===n?"width":"height",v=e.axes[m]/e[n].ticks.values.length,v=d3.min([v-2*e.labels.padding,100]),f=e.type.mode.value,f instanceof Array||(f=[f,f]),c=function(t){var n,r,i;r={};for(n in e.data.keys)i=s(t,n,o,e),r[n]=1===i.length?i[0]:i;return r},d=!1,u=[],g=[],d3.nest().key(function(t){return o(e,t,e[n].value)}).rollup(function(r){var i,y,x,b,w,_,k,A,M,z,j,E,S,T,N,C,O,q,D,F,L,P,R,I,B,U,V,H,Y,$,W,X;for(P=e[h].scale.viz,$=r.map(function(t){return o(e,t,e[h].value)}),$.sort(function(e,t){return e-t}),H=s($),A=d3.quantile($,.25),C=d3.quantile($,.5),R=d3.quantile($,.75),I={},"tukey"===f[1]?(z=A-R,B=R-1.5*z,U="top tukey"):"extent"===f[1]?(B=d3.max($),U="maximum"):"number"==typeof f[1]&&(B=d3.quantile($,(100-f[1])/100),U=f[1]+" percentile"),B=d3.min([d3.max($),B]),e.tooltip.extent.value&&(I[U]={key:e[h].value,value:B}),e.tooltip.iqr.value&&(I["third quartile"]={key:e[h].value,value:R},I.median={key:e[h].value,value:C},I["first quartile"]={key:e[h].value,value:A}),"tukey"===f[0]?(z=A-R,i=A+1.5*z,y="bottom tukey"):"extent"===f[0]?(i=d3.min($),y="minimum"):"number"==typeof f[0]&&(i=d3.quantile($,f[0]/100),y=f[0]+" percentile"),i=d3.max([d3.min($),i]),e.tooltip.extent.value&&(I[y]={key:e[h].value,value:i}),b=[],x=[],V=[],L=[],M=0,T=r.length;T>M;M++)w=r[M],Y=o(e,w,e[h].value),Y>=A&&R>=Y?b.push(w):Y>=i&&A>Y?x.push(w):B>=Y&&Y>R?V.push(w):L.push(w);for(E=o(e,r[0],e[n].value),W=e[n].scale.viz(E),W+=t,S=e.format.value(E,{key:e[n].value,vars:e}),E.constructor===Date&&(E=E.getTime()),E=a(E),b=c(b),b.d3plus={color:"white",id:"box_"+E,init:{},label:!1,shape:"square",stroke:"#444",text:"Interquartile Range for "+S},b.d3plus[m]=v,b.d3plus.init[m]=v,b.d3plus[l]=Math.abs(P(A)-P(R)),b.d3plus[n]=W,X=d3.min([P(A),P(R)])+b.d3plus[l]/2,X+=p,b.d3plus[h]=X,b.d3plus.tooltip=I,g.push(b),q={d3plus:{id:"median_line_"+E,position:"height"===l?"top":"right",shape:"whisker","static":!0}},F=e.format.value(C,{key:e[h].value,vars:e}),S={background:"#fff",names:[F],padding:0,resize:!1,x:0,y:0},_=Math.abs(P(C)-P(A)),k=Math.abs(P(C)-P(R)),D=2*d3.min([_,k]),O=2*e.data.stroke.width+2*e.labels.padding,S["width"===m?"w":"h"]=v-O,S["width"===l?"w":"h"]=D-O,q.d3plus.label=S,q.d3plus[m]=v,q.d3plus[n]=W,q.d3plus[h]=P(C)+p,g.push(q),x=c(x),x.d3plus={id:"bottom_whisker_line_"+E,offset:b.d3plus[l]/2,position:"height"===l?"bottom":"left",shape:"whisker","static":!0},"x"===h&&(x.d3plus.offset*=-1),x.d3plus[l]=Math.abs(P(i)-P(A)),x.d3plus[m]=v,x.d3plus[n]=W,x.d3plus[h]=X,g.push(x),V=c(V),V.d3plus={id:"top_whisker_line_"+E,offset:b.d3plus[l]/2,position:"height"===l?"top":"right",shape:"whisker",
"static":!0},"y"===h&&(V.d3plus.offset*=-1),V.d3plus[l]=Math.abs(P(B)-P(R)),V.d3plus[m]=v,V.d3plus[n]=W,V.d3plus[h]=X,g.push(V),j=0,N=L.length;N>j;j++)w=L[j],w.d3plus[n]=W,w.d3plus[h]=P(o(e,w,e.y.value)),w.d3plus[h]+=p,w.d3plus.r=4,w.d3plus.shape=e.shape.value;return d=!L.length&&B-i===0,u.push(C),g=g.concat(L),r}).entries(e.data.viz),d&&1===s(u).length?[]:g)},r.modes=["tukey","extent",Array,Number],r.requirements=["data","x","y"],r.shapes=["circle","check","cross","diamond","square","triangle","triangle_up","triangle_down"],r.setup=function(e){var t;return e.axes.discrete?void 0:(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"}))},t.exports=r},{"../../core/fetch/value.coffee":69,"../../string/strip.js":169,"../../util/uniques.coffee":204,"./helpers/graph/draw.coffee":302}],298:[function(e,t,n){var r,o,i,a,s,l,u;r=e("../../array/sort.coffee"),s=e("../../core/fetch/value.coffee"),i=e("../../core/fetch/color.coffee"),a=e("../../core/fetch/text.js"),u=e("../../color/legible.coffee"),l=e("../../core/data/group.coffee"),o=function(e){var t,n,o,c,f,d,p,h,g,v,m,y,x,b,w,_,k,A,M,z,j,E,S,T,N,C,O,q,D,F,L,P,R,I,B;if(m=l(e,e.data.viz),m=r(m,null,null,null,e),d=m.length,4>d?(o=d,T=1):(N=e.width.viz/e.height.viz,o=Math.ceil(Math.sqrt(d*N)),T=Math.ceil(Math.sqrt(d/N))),d>0)for(;(T-1)*o>=d;)T--;for(n=e.width.viz/o,t=e.height.viz/T,e.size.value?(g=d3.min(e.data.viz,function(t){return s(e,t,e.size.value,e.id.value,"min")}),h=d3.max(e.data.viz,function(t){return s(e,t,e.size.value,e.id.value)}),p=[g,h]):p=[0,0],E=5,O=d3.min([n,t])/2-2*E,_=e.labels.value&&!e.small&&O>=40?d3.max([20,d3.min([.25*O,50])]):0,O-=_,q=d3.min([O,e.size.scale.min.value]),C=e.size.scale.value.domain(p).rangeRound([q,O]),j=d3.layout.pack().children(function(e){return e.values}).padding(E).radius(function(e){return C(e)}).size([n-2*E,t-2*E-_]).value(function(e){return e.value}),f=[],S=0,y=x=0,k=m.length;k>x;y=++x){for(c=m[y],F=j.nodes(c),P=n*y%e.width.viz,B=t*S,b=0,A=F.length;A>b;b++)D=F[b],D.children?(z={d3plus:{}},z[e.id.value]=D.key):z=D.d3plus,z.d3plus.depth=e.id.grouping.value?D.depth:e.depth.value,z.d3plus.x=D.x,z.d3plus.xOffset=P,z.d3plus.y=D.y,z.d3plus.yOffset=B+_,z.d3plus.r=D.r,f.push(z);(y+1)%o===0&&S++}for(v=O/d3.max(f,function(e){return e.d3plus.r}),L=j.size()[0]/2,I=j.size()[1]/2,w=0,M=f.length;M>w;w++)c=f[w],c.d3plus.x=(c.d3plus.x-L)*v+L+c.d3plus.xOffset,c.d3plus.y=(c.d3plus.y-I)*v+I+c.d3plus.yOffset,c.d3plus.r=c.d3plus.r*v,delete c.d3plus.xOffset,delete c.d3plus.yOffset,c.d3plus["static"]=c.d3plus.depth<e.depth.value&&e.id.grouping.value,!_||0!==c.d3plus.depth&&e.id.grouping.value!==!1?delete c.d3plus.label:(c.d3plus.text=a(e,c[e.id.value],c.d3plus.depth),R=_>3*e.labels.padding?e.labels.padding:0,c.d3plus.label={x:0,y:-(O+R+_/2),w:2*O,h:_-R,padding:0,resize:!1,color:u(i(e,c,c.d3plus.depth)),force:!0});return f.sort(function(e,t){return e.d3plus.depth-t.d3plus.depth})},o.fill=!0,o.requirements=["data"],o.scale=1.05,o.shapes=["circle","donut"],t.exports=o},{"../../array/sort.coffee":37,"../../color/legible.coffee":46,"../../core/data/group.coffee":59,"../../core/fetch/color.coffee":65,"../../core/fetch/text.js":68,"../../core/fetch/value.coffee":69}],299:[function(e,t,n){var r,o;o=e("../../../core/console/print.coffee"),r=function(e){var t,n;n={circle:"scatter",donut:"scatter",line:"line",square:"scatter",area:"stacked"},t=n[e.shape.value],o.warning('The "chart" visualization type has been deprecated and will be removed in version 2.0. Please use the "'+t+'" visualization type.'),e.self.type(t).draw()},r.shapes=["circle","donut","line","square","area"],t.exports=r},{"../../../core/console/print.coffee":54}],300:[function(e,t,n){var r;r=function(e){var t,n,r,o,i,a;return topojson.presimplify(e.coords.value),t=e.coords.value,r=d3.keys(t.objects)[0],a=topojson.feature(t,t.objects[r]),n=a.features,i=e.coords.solo.value,o=e.coords.mute.value,n=n.filter(function(t){return t[e.id.value]=t.id,i.length?i.indexOf(t.id)>=0:o.length?o.indexOf(t.id)<0:!0})},r.libs=["topojson"],r.nesting=!1,r.requirements=["coords"],r.scale=1,r.shapes=["coordinates"],r.zoom=!0,t.exports=r},{}],301:[function(e,t,n){var r,o,i;r=e("../../../../core/fetch/color.coffee"),o=e("../../../../color/legible.coffee"),i=e("../../../../core/console/print.coffee"),t.exports=function(e){var t,n,a,s,l,u,c,f,d,p,h;for(t=e.axes,s=t.stacked?[]:e.data.viz,h=2*s.length>e.data.large?0:e.draw.timing,f=function(n,i){return"y"===i?n.attr("x1",-2).attr("x2",-8).attr("y1",function(e){return e.d3plus.y-t.margin.top}).attr("y2",function(e){return e.d3plus.y-t.margin.top}):n.attr("x1",function(e){return e.d3plus.x-t.margin.left}).attr("x2",function(e){return e.d3plus.x-t.margin.left}).attr("y1",t.height+2).attr("y2",t.height+8),n.style("stroke",function(t){return o(r(e,t))}).style("stroke-width",e.data.stroke.width).attr("shape-rendering",e.shape.rendering.value)},e.dev.value&&i.time("creating axis tick groups"),p=e.group.select("g#d3plus_graph_plane").selectAll("g.d3plus_data_tick").data(s,function(n){var r;return r=t.discrete?"_"+n.d3plus[t.discrete]:"","tick_"+n[e.id.value]+"_"+n.d3plus.depth+r}),p.enter().append("g").attr("class","d3plus_data_tick").attr("opacity",0),e.dev.value&&i.timeEnd("creating axis tick groups"),c=["x","y"],l=0,u=c.length;u>l;l++)n=c[l],e.dev.value&&h&&i.time("creating "+n+" ticks"),a=h&&n!==t.discrete?s:[],d=p.selectAll("line.d3plus_data_"+n).data(a,function(t){return"tick_"+t[e.id.value]+"_"+t.d3plus.depth}),e.dev.value&&h&&i.timeEnd("creating "+n+" ticks"),e.dev.value&&h&&i.time("styling "+n+" ticks"),h>0?d.transition().duration(h).call(f,n):d.call(f,n),d.enter().append("line").attr("class","d3plus_data_"+n).call(f,n),e.dev.value&&h&&i.timeEnd("styling "+n+" ticks");h>0?(p.transition().duration(h).attr("opacity",1),p.exit().transition().duration(h).attr("opacity",0).remove()):(p.attr("opacity",1),p.exit().remove())}},{"../../../../color/legible.coffee":46,"../../../../core/console/print.coffee":54,"../../../../core/fetch/color.coffee":65}],302:[function(e,t,n){var r,o,i,a;r=e("./includes/axes.coffee"),o=e("./includes/svg.coffee"),i=e("./includes/mouse.coffee"),a=e("./includes/plot.coffee"),t.exports=function(e,t){void 0===t&&(t={}),r(e,t),a(e,t),o(e,t),e.mouse=t.mouse===!0?i:!1}},{"./includes/axes.coffee":303,"./includes/mouse.coffee":305,"./includes/plot.coffee":306,"./includes/svg.coffee":307}],303:[function(e,t,n){var r,o,i,a,s,l,u,c,f,d,p,h;r=e("../../../../../array/sort.coffee"),a=e("./buffer.coffee"),i=e("../../../../../util/buckets.coffee"),l=e("../../../../../core/fetch/data.js"),u=e("../../../../../core/fetch/value.coffee"),d=e("../../../../../core/console/print.coffee"),h=e("../../../../../util/uniques.coffee"),t.exports=function(e,t){var n,r,i,l,g,v,m,y,x,b;for(r=s(e),(r||!e.axes.dataset)&&(e.axes.dataset=c(e)),e.axes.scale=t.buffer&&t.buffer!==!0?p(e,t.buffer):!1,y=["x","y"],l=0,g=y.length;g>l;l++)n=y[l],v="x"===n?"y":"x",x=e.order.changed||e.order.sort.changed||e.order.value===!0&&e[v].changed,(!e[n].ticks.values||r||x)&&(e.dev.value&&d.time("calculating "+n+" axis"),e[n].reset=!0,e[n].ticks.values=!1,n===e.axes.discrete&&e[n].value!==e.time.value&&(e[n].ticks.values=h(e.axes.dataset,e[n].value,u,e)),b=[!0,n].indexOf(t.zero)>0?!0:!1,m=o(e,n,b),"y"===n&&(m=m.reverse()),e[n].scale.viz=f(e,n,m),t.buffer&&n!==e.axes.discrete&&a(e,n,t.buffer),e[n].domain.viz=m,e.dev.value&&d.timeEnd("calculating "+n+" axis"));e.axes.mirror.value&&(i=e.y.domain.viz.concat(e.x.domain.viz),e.x.domain.viz=d3.extent(i),e.y.domain.viz=d3.extent(i).reverse())},s=function(e){var t,n,r,o,i,a,s,l,u,c,f,d,p;if(n=e.time.fixed.value&&(e.time.solo.changed||e.time.mute.changed),n||(n=e.id.solo.changed||e.id.mute.changed),n)return n;for(r=["data","time","id","depth","type","x","y"],o=0,l=r.length;l>o;o++)if(a=r[o],e[a].changed){n=!0;break}if(n)return n;for(p=["mute","range","scale","solo","stacked","zerofill"],f=["x","y"],i=0,u=f.length;u>i;i++)for(t=f[i],s=0,c=p.length;c>s;s++)if(d=p[s],e[t][d].changed){n=!0;break}return n},c=function(e){var t,n;return e.time.fixed.value?e.data.viz:(n=d3.range(0,e.id.nesting.length),d3.merge([function(){var r,o,i;for(i=[],r=0,o=n.length;o>r;r++)t=n[r],i.push(l(e,"all",t));return i}()]))},o=function(e,t,n,o){var i,a,s,l,c,f,d,p,g,v,m,y,x,b,w,_,k,A,M,z,j,E,S,T,N,C,O,q,D;if(M="x"===t?"y":"x",e[t].range.value&&2===e[t].range.value.length)return e[t].range.value.slice();if("share"===e[t].scale.value)return e[t].ticks.values=d3.range(0,1.1,.1),[0,1];if(e[t].stacked.value){for(C=[],z=e.axes.dataset,g=0,x=z.length;x>g;g++)d=z[g],d.values?C=C.concat(d.values):C.push(d);return c=d3.nest().key(function(t){return u(e,t,e[M].value)}).rollup(function(n){var r,o;return o=d3.sum(n,function(n){var r;return r=u(e,n,e[t].value),r>0?r:0}),r=d3.sum(n,function(n){var r;return r=u(e,n,e[t].value),0>r?r:0}),[r,o]}).entries(C),D=d3.merge(c.map(function(e){return e.values})),d3.extent(D)}if(e[t].value===e.time.value&&e[t].ticks.values)return d3.extent(e[t].ticks.values);for(D=[],j=e.axes.dataset,v=0,b=j.length;b>v;v++)d=j[v],q=u(e,d,e[t].value),q instanceof Array?D=D.concat(q):D.push(q);if("string"==typeof D[0]){if(N=e.order.value===!0?e[M].value:e.order.value){for(T=e.order.sort.value,i=e.order.agg.value||e.aggs.value[N]||"max",a=typeof i,f=D.reduce(function(e,t){return e[t]=[],e},{}),E=e.axes.dataset,y=0,w=E.length;w>y;y++)if(d=E[y],d.values)for(S=d.values,k=0,_=S.length;_>k;k++)O=S[k],p=u(e,O,e[t].value),f[p].push(u(e,O,N));else p=u(e,d,e[t].value),f[p].push(u(e,d,N));for(m in f)O=f[m],"string"===a?f[m]=d3[i](O):"function"===a&&(f[m]=i(O,N));return f=r(d3.entries(f),"value",T),f=f.reduce(function(e,t){return e.push(t.key),e},[])}return h(D)}return D.sort(function(e,t){return e-t}),"log"===e[t].scale.value&&(0===D[0]&&(D[0]=1),0===D[D.length-1]&&(D[D.length-1]=-1)),n&&(l=D.every(function(e){return e>0}),s=D.every(function(e){return 0>e}),(l||s)&&(A=l?1:-1,D.push("log"===e[t].scale.value?A:0))),d3.extent(D)},f=function(e,t,n){var r,o,a;return o="x"===t?e.width.viz:e.height.viz,a=e[t].scale.value,["discrete","share"].indexOf(a)>=0&&(a="linear"),"string"==typeof n[0]?(a="ordinal",r=i([0,o],n.length)):r=[0,o],d3.scale[a]().domain(n).range(r)},p=function(e,t){var n,r,o;return t===!0&&(t="size"),t in e&&(t=e[t].value),o=e.size.scale.min.value,"function"==typeof o&&(o=o(e)),r=e.size.scale.max.value,"function"==typeof r&&(r=r(e)),t===!1?e.size.scale.value.rangeRound([r,r]):"number"==typeof t?e.size.scale.value.rangeRound([t,t]):t?(e.dev.value&&d.time("calculating buffer scale"),n=d3.extent(e.axes.dataset,function(n){var r;return r=u(e,n,t),r?r:0}),n[0]===n[1]&&(o=r),e.dev.value&&d.timeEnd("calculating buffer scale"),e.size.scale.value.domain(n).rangeRound([o,r])):void 0}},{"../../../../../array/sort.coffee":37,"../../../../../core/console/print.coffee":54,"../../../../../core/fetch/data.js":66,"../../../../../core/fetch/value.coffee":69,"../../../../../util/buckets.coffee":198,"../../../../../util/uniques.coffee":204,"./buffer.coffee":304}],304:[function(e,t,n){var r,o;r=e("../../../../../util/buckets.coffee"),o=e("../../../../../util/closest.coffee"),t.exports=function(e,t,n){var i,a,s,l,u,c,f,d,p,h,g,v,m,y,x,b,w,_,k,A,M,z,j,E;if("share"!==e[t].scale.value&&!e[t].range.value){if(t===e.axes.discrete){if(f=e[t].scale.viz.domain(),"string"==typeof f[0]){for(g=f.length;g>=0;)f.splice(g,0,"d3plus_buffer_"+g),g--;return w=e[t].scale.viz.range(),w=r(d3.extent(w),f.length),e[t].scale.viz.domain(f).range(w)}return"y"===t&&(f=f.slice().reverse()),1===e[t].ticks.values.length?e[t].value===e.time.value&&1!==e.data.time.ticks.length?(l=o(e.data.time.ticks,f[0]),k=e.data.time.ticks.indexOf(l),k>0?f[0]=e.data.time.ticks[k-1]:(u=e.data.time.ticks[k+1]-l,f[0]=new Date(l.getTime()-u)),k<e.data.time.ticks.length-1?f[1]=e.data.time.ticks[k+1]:(u=l-e.data.time.ticks[k-1],f[1]=new Date(l.getTime()+u))):(f[0]-=1,f[1]+=1):(c=Math.abs(f[1]-f[0]),i=c/(e[t].ticks.values.length-1),i/=2,f[0]=f[0]-i,f[1]=f[1]+i),"y"===t&&(f=f.reverse()),e[t].scale.viz.domain(f)}if("x"===n&&"x"===t||"y"===n&&"y"===t||n===!0)return f=e[t].scale.viz.domain(),s=f[0]>=0&&f[1]>=0,a=f[0]<=0&&f[1]<=0,"log"===e[t].scale.value?(E=s?1:-1,s&&"y"===t&&(f=f.slice().reverse()),y=Math.pow(10,parseInt(Math.abs(f[0])).toString().length-1)*E,m=f[0]%y,v=m,m&&.1>=v/y&&(v+=y*E),x=0===m?y:v,f[0]-=x,0===f[0]&&(f[0]=E),z=Math.pow(10,parseInt(Math.abs(f[1])).toString().length-1)*E,M=f[1]%z,A=Math.abs(z-M),M&&.1>=A/z&&(A+=z*E),j=0===M?z:A,f[1]+=j,0===f[1]&&(f[1]=E),s&&"y"===t&&(f=f.reverse())):(E=0,"y"===t&&(f=f.slice().reverse()),i=.05*Math.abs(f[1]-f[0])||1,f[0]=f[0]-i,f[1]=f[1]+i,(s&&f[0]<E||a&&f[0]>E)&&(f[0]=E),(s&&f[1]<E||a&&f[1]>E)&&(f[1]=E),"y"===t&&(f=f.reverse())),e[t].scale.viz.domain(f);if(e.axes.scale)return _=e[t].scale.viz.range()[1],b=e.axes.scale.range()[1],h=e[t].scale.viz.invert(1.5*-b),p=e[t].scale.viz.invert(_+1.5*b),f=[h,p],"y"===t&&(f=f.reverse()),d=e[t].scale.viz.domain(),d=d[1]-d[0],d||(f[0]-=1,f[1]+=1),"y"===t&&(f=f.reverse()),e[t].scale.viz.domain(f)}}},{"../../../../../util/buckets.coffee":198,"../../../../../util/closest.coffee":200}],305:[function(e,t,n){var r,o,i,a,s;r=e("../../../../../util/copy.coffee"),o=e("../../../../../client/pointer.coffee"),i=e("../../../../../core/fetch/color.coffee"),a=e("../../../../../core/fetch/value.coffee"),s=e("../../../../../color/legible.coffee"),t.exports=function(e,t){var n,r,l,u,c,f,d,p,h,g,v,m,y,x,b,w,_,k;return n=d3.event.type===o.click&&(t.tooltip.value["long"]||t.tooltip.html.value),l=[o.over,o.move].indexOf(d3.event.type)>=0,_=e.d3plus.x,k=e.d3plus.y,g=e.d3plus.r||0,y=t.types[t.type.value].scale||1,g*=y,u=t.axes,w=t.draw.timing?t.timing.mouseevents:0,!n&&l?(r=s(i(t,e)),c=["x","y"].filter(function(n){var r;return r=a(t,e,t[n].value),!(r instanceof Array)&&n!==t.axes.stacked&&t[n].mouse.value&&n!==t.axes.discrete})):c=[],f=function(e){return e.attr("x1",function(e){return"x"===e?_:_-g}).attr("y1",function(e){return"y"===e?k:k+g}).attr("x2",function(e){return"x"===e?_:_-g}).attr("y2",function(e){return"y"===e?k:k+g}).attr("opacity",0)},d=function(e){return e.style("stroke",function(e){return"area"===t.shape.value?"white":r}).attr("stroke-dasharray",function(e){return t[e].mouse.dasharray.value}).attr("shape-rendering",function(e){return t[e].mouse.rendering.value}).style("stroke-width",function(e){return t[e].mouse.width})},p=function(n){return n.attr("x1",function(e){return"x"===e?_:_-g}).attr("y1",function(e){return"y"===e?k:k+g}).attr("x2",function(n){return"x"===n?_:e.d3plus.x0||u.margin.left-t[n].ticks.size}).attr("y2",function(n){return"y"===n?k:e.d3plus.y0||u.height+u.margin.top+t[n].ticks.size}).style("opacity",1)},h=t.g.labels.selectAll("line.d3plus_mouse_axis_label").data(c),w?(h.enter().append("line").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(f).call(d),h.transition().duration(w).call(p).call(d),h.exit().transition().duration(w).call(f).remove()):(h.call(p).call(d),h.enter().append("line").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(f).call(d),h.exit().remove()),x=function(n){return n.attr("font-size",function(e){return t[e].ticks.font.size+"px"}).attr("fill",function(e){return t[e].ticks.font.color}).attr("font-family",function(e){return t[e].ticks.font.family.value}).attr("font-weight",function(e){return t[e].ticks.font.weight}).attr("x",function(e){return"x"===e?_:u.margin.left-5-t[e].ticks.size}).attr("y",function(n){return"y"===n?k:e.d3plus.y0?e.d3plus.y+(e.d3plus.y0-e.d3plus.y)/2+u.margin.top-6:u.height+u.margin.top+5+t[n].ticks.size}).attr("fill","area"===t.shape.value?"white":r)},b=t.g.labels.selectAll("text.d3plus_mouse_axis_label").data(c),b.enter().append("text").attr("class","d3plus_mouse_axis_label").attr("id",function(e){return e+"_d3plusmouseaxislabel"}).attr("dy",function(e){return"y"===e?.35*t[e].ticks.font.size:t[e].ticks.font.size}).style("text-anchor",function(e){return"y"===e?"end":"middle"}).attr("opacity",0).attr("pointer-events","none").call(x),b.text(function(n){var r,o;return r=t.axes.stacked||n,o=a(t,e,t[r].value),t.format.value(o,{key:t[r].value,vars:t})}),w?(b.transition().duration(w).delay(w).attr("opacity",1).call(x),b.exit().transition().duration(w).attr("opacity",0).remove()):(b.attr("opacity",1).call(x),b.exit().remove()),v=function(n){var o;return o=function(e){return d3.select("text#"+e+"_d3plusmouseaxislabel").node().getBBox()},n.attr("x",function(e){var n;return n=o(e).width,"x"===e?_-n/2-5:u.margin.left-t[e].ticks.size-n-10}).attr("y",function(n){var r;return r=o(n).height/2+5,"y"===n?k-r:e.d3plus.y0?e.d3plus.y+(e.d3plus.y0-e.d3plus.y)/2+u.margin.top-r:u.height+u.margin.top+t[n].ticks.size}).attr("width",function(e){return o(e).width+10}).attr("height",function(e){return o(e).height+10}).style("stroke","area"===t.shape.value?"transparent":r).attr("fill","area"===t.shape.value?r:t.background.value).attr("shape-rendering",function(e){return t[e].mouse.rendering.value}).style("stroke-width",function(e){return t[e].mouse.width})},m=t.g.labels.selectAll("rect.d3plus_mouse_axis_label").data(c),w?(m.enter().insert("rect","text.d3plus_mouse_axis_label").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").attr("opacity",0).call(v),m.transition().duration(w).delay(w).attr("opacity",1).call(v),m.exit().transition().duration(w).attr("opacity",0).remove()):(m.attr("opacity",1).call(v),m.enter().insert("rect","text.d3plus_mouse_axis_label").attr("class","d3plus_mouse_axis_label").attr("pointer-events","none").call(v),m.exit().remove())}},{"../../../../../client/pointer.coffee":41,"../../../../../color/legible.coffee":46,"../../../../../core/fetch/color.coffee":65,"../../../../../core/fetch/value.coffee":69,"../../../../../util/copy.coffee":201}],306:[function(e,t,n){var r,o,i,a,s,l,u,c,f,d,p,h;r=e("../../../../../util/buckets.coffee"),o=e("./buffer.coffee"),a=e("../../../../../core/fetch/value.coffee"),s=e("../../../../../font/sizes.coffee"),d=e("../../../../../textwrap/textwrap.coffee"),p=e("../../../../../core/data/time.coffee"),h=e("../../../../../util/uniques.coffee"),t.exports=function(e,t){var n,r,s,l,f,d,h,g,v,m,y,x,b,w,_,k,A;for(e.axes.margin=c(e),e.axes.height=e.height.viz,e.axes.width=e.width.viz,m=["x","y"],l=0,d=m.length;d>l;l++){if(n=m[l],e[n].ticks.values===!1)if(e[n].value===e.time.value){for(_=e.time.solo.value,_=_.length?_.map(function(e){return e.constructor!==Date&&(e=new Date(e.toString()),e.setTime(e.getTime()+60*e.getTimezoneOffset()*1e3)),e}):e.data.time.values,s=d3.extent(_),x=e.data.time.stepType,_=[s[0]],w=s[0];w<s[1];)g=new Date(w),w=new Date(g["set"+x](g["get"+x]()+1)),_.push(w);e[n].ticks.values=_}else e[n].ticks.values=e[n].scale.viz.ticks();e[n].ticks.values.length||(A=a(e,e.data.viz,e[n].value),A instanceof Array||(A=[A]),e[n].ticks.values=A),v="x"===n?"y":"x",(1===e[n].ticks.values.length||t.buffer&&t.buffer!==v&&n===e.axes.discrete&&e[n].reset===!0)&&o(e,n,t.buffer),e[n].reset=!1,e[n].value===e.time.value?(r={"font-family":e[n].ticks.font.family.value,"font-weight":e[n].ticks.font.weight,"font-size":e[n].ticks.font.size+"px"},k=p(e,{values:e[n].ticks.values,limit:e.width.viz,style:r}),e[n].ticks.visible=k.values.map(Number),e[n].ticks.format=k.format):"log"===e[n].scale.value?(_=e[n].ticks.values,b=_.filter(function(e){return"1"===Math.abs(e).toString().charAt(0)}),e[n].ticks.visible=b.length<3?_:b):e[n].ticks.visible=e[n].ticks.values}for(e.small||u(e),y=["x","y"],f=0,h=y.length;h>f;f++)n=y[f],e[n].axis.svg=i(e,n)},c=function(e){return e.small?{top:0,right:0,bottom:0,left:0}:{top:10,right:10,bottom:10,left:10}},u=function(e){var t,n,o,i,a,u,c,f,p,h,g,v,m,y,x,b,w,_,k,A;return c=e.x.scale.viz.domain(),b=e.y.scale.viz.domain(),y={"font-size":e.y.ticks.font.size+"px","font-family":e.y.ticks.font.family.value,"font-weight":e.y.ticks.font.weight},A=e.y.ticks.visible,"log"===e.y.scale.value?k=A.map(function(e){return l(e)}):"share"===e.y.scale.value?k=A.map(function(t){return e.format.value(100*t,{key:"share",vars:e})}):e.y.value===e.time.value?k=A.map(function(t,n){return e.y.ticks.format(new Date(t))}):("string"==typeof A[0]&&(A=e.y.scale.viz.domain().filter(function(e){return 0!==e.indexOf("d3plus_buffer_")})),k=A.map(function(t){return e.format.value(t,{key:e.y.value,vars:e,labels:e.y.affixes.value})})),x=d3.max(s(k,y),function(e){return e.width}),x=Math.ceil(x+e.labels.padding),e.axes.margin.left+=x,w=e.y.label.fetch(e),w?(_={"font-family":e.y.label.font.family.value,"font-weight":e.y.label.font.weight,"font-size":e.y.label.font.size+"px"},e.y.label.height=s([w],_)[0].height):e.y.label.height=0,e.y.label.value&&(e.axes.margin.left+=e.y.label.height,e.axes.margin.left+=2*e.y.label.padding),e.axes.width-=e.axes.margin.left+e.axes.margin.right,e.x.scale.viz.range(r([0,e.axes.width],c.length)),i={"font-size":e.x.ticks.font.size+"px","font-family":e.x.ticks.font.family.value,"font-weight":e.x.ticks.font.weight},m=e.x.ticks.visible,"log"===e.x.scale.value?v=m.map(function(e){return l(e)}):"share"===e.x.scale.value?v=m.map(function(t){return e.format.value(100*t,{key:"share",vars:e})}):e.x.value===e.time.value?v=m.map(function(t,n){return e.x.ticks.format(new Date(t))}):("string"==typeof m[0]&&(m=e.x.scale.viz.domain().filter(function(e){return 0!==e.indexOf("d3plus_buffer_")})),v=m.map(function(t){return e.format.value(t,{key:e.x.value,vars:e,labels:e.x.affixes.value})})),g=s(v,i),u=d3.max(g,function(e){return e.width}),a=d3.max(g,function(e){return e.height}),1===m.length?h=e.axes.width:(h=e.x.scale.viz(m[1])-e.x.scale.viz(m[0]),h=Math.abs(h),h-=2*e.labels.padding),u>h&&v.join("").indexOf(" ")>0?(e.x.ticks.wrap=!0,g=s(v,i,{mod:function(t){return d().container(d3.select(t)).height(e.axes.height/2).width(h).draw()}}),u=d3.max(g,function(e){return e.width}),a=d3.max(g,function(e){return e.height})):e.x.ticks.wrap=!1,e.x.ticks.hidden=!1,e.x.ticks.baseline="auto",h>=u?e.x.ticks.rotate=0:u<e.axes.height/2?(g=s(v,i,{mod:function(t){return d().container(d3.select(t)).width(e.axes.height/2).height(h).draw()}}),a=d3.max(g,function(e){return e.width}),u=d3.max(g,function(e){return e.height}),e.x.ticks.rotate=-90):(e.x.ticks.hidden=!0,e.x.ticks.rotate=0,u=0,a=0),a=Math.ceil(a),u=Math.ceil(u),e.x.ticks.maxHeight=a,e.x.ticks.maxWidth=u,e.axes.margin.bottom+=a+e.labels.padding,t=e.x.ticks.visible[e.x.ticks.visible.length-1],n=e.x.scale.viz(t),n+=u/2+e.axes.margin.left,n>e.width.value&&(o=n-e.width.value+e.axes.margin.right,e.axes.width-=o,e.axes.margin.right+=o),f=e.x.label.fetch(e),f?(p={"font-family":e.x.label.font.family.value,"font-weight":e.x.label.font.weight,"font-size":e.x.label.font.size+"px"},e.x.label.height=s([f],p)[0].height):e.x.label.height=0,e.x.label.value&&(e.axes.margin.bottom+=e.x.label.height,e.axes.margin.bottom+=2*e.x.label.padding),e.axes.height-=e.axes.margin.top+e.axes.margin.bottom,e.x.scale.viz.range(r([0,e.axes.width],c.length)),e.y.scale.viz.range(r([0,e.axes.height],b.length))},i=function(e,t){return d3.svg.axis().tickSize(e[t].ticks.size).tickPadding(5).orient("x"===t?"bottom":"left").scale(e[t].scale.viz).tickValues(e[t].ticks.values).tickFormat(function(n,r){var o,i;return e[t].ticks.hidden?null:(i=e[t].scale.value,o=n.constructor===Date?+n:n,e[t].ticks.visible.indexOf(o)>=0?"share"===i?e.format.value(100*n,{key:"share",vars:e,labels:e[t].affixes.value}):n.constructor===Date?e[t].ticks.format(n):"log"===i?l(n):e.format.value(n,{key:e[t].value,vars:e,labels:e[t].affixes.value}):null)})},f="⁰¹²³⁴⁵⁶⁷⁸⁹",l=function(e){var t,n,r;return n=Math.round(Math.log(Math.abs(e))/Math.LN10),r=Math.abs(e).toString().charAt(0),t="10 "+(n+"").split("").map(function(e){return f[e]}).join(""),"1"!==r&&(t=r+" x "+t),0>e?"-"+t:t}},{"../../../../../core/data/time.coffee":64,"../../../../../core/fetch/value.coffee":69,"../../../../../font/sizes.coffee":97,"../../../../../textwrap/textwrap.coffee":194,"../../../../../util/buckets.coffee":198,"../../../../../util/uniques.coffee":204,"./buffer.coffee":304}],307:[function(e,t,n){var r,o,i;r=e("../../../../../color/mix.coffee"),o=e("../../../../../textwrap/textwrap.coffee"),i=e("../../../../../object/validate.coffee"),t.exports=function(e){var t,n,a,s,l,u,c,f,d,p,h,g,v,m,y,x,b,w,_,k,A,M,z,j,E,S,T,N,C,O,q,D,F,L,P,R,I,B,U,V,H,Y,$,W,X,Z,G,J,Q,K,ee,te,ne;if(p=e.x.domain.viz.concat(e.y.domain.viz),p.indexOf(void 0)>=0)return null;for(c={width:e.axes.width,height:e.axes.height,fill:e.axes.background.color,stroke:e.axes.background.stroke.color,"stroke-width":e.axes.background.stroke.width,"shape-rendering":e.axes.background.rendering.value},n={left:"start",center:"middle",right:"end"},s=e.small?[]:[0],X=function(t,n){return t.attr("x1",function(t){return"x"===n?e.x.scale.viz(t):0}).attr("x2",function(t){return"x"===n?e.x.scale.viz(t):e.axes.width}).attr("y1",function(t){return"y"===n?e.y.scale.viz(t):0}).attr("y2",function(t){return"y"===n?e.y.scale.viz(t):e.axes.height})},Z=function(t,n,o){var i,a;return i=o?e[n].grid.color:e[n].ticks.color,a="log"===e[n].scale.value,t.attr("stroke",function(t){var s;return 0===t?e[n].axis.color:(t.constructor===Date&&(t=+t),s=e[n].ticks.visible.indexOf(t)>=0,!s||a&&"1"!==Math.abs(t).toString().charAt(0)?o?r(i,e.axes.background.color,.4,1):r(i,e.background.value,.4,1):i)}).attr("stroke-width",e[n].ticks.width).attr("shape-rendering",e[n].ticks.rendering.value)},h=function(t,n,r){var o;return o=0===n?"axis":"ticks",n=e[t][o].font[r],n&&(n.length||"number"==typeof n)?n:e[t].ticks.font[r]},W=function(t,n){var o;return o="log"===e[n].scale.value,t.attr("font-size",function(e){return h(n,e,"size")+"px"}).attr("fill",function(t){var i;return i=h(n,t,"color"),o&&"1"!==Math.abs(t).toString().charAt(0)?r(i,e.background.value,.4,1):i}).attr("font-family",function(e){return h(n,e,"family").value}).attr("font-weight",function(e){return h(n,e,"weight")})},N=function(t,n){var r,o;return r="x"===n?"height":"width",o="x"===n?"y":"x",t.attr(o+"1",0).attr(o+"2",e.axes[r]).attr(n+"1",function(e){return e.coords.line}).attr(n+"2",function(e){return e.coords.line}).attr("stroke",function(t){return t.color||e[n].lines.color}).attr("stroke-width",e[n].lines.width).attr("shape-rendering",e[n].lines.rendering.value).attr("stroke-dasharray",e[n].lines.dasharray.value)},E=function(t,r){var o;return o="x"===r?"y":"x",t.attr(o,function(e){return e.coords.text[o]+"px"}).attr(r,function(e){return e.coords.text[r]+"px"}).attr("dy",e[r].lines.font.position.value).attr("text-anchor",n[e[r].lines.font.align.value]).attr("transform",function(e){return e.transform}).attr("font-size",e[r].lines.font.size+"px").attr("fill",function(t){return t.color||e[r].lines.color}).attr("font-family",e[r].lines.font.family.value).attr("font-weight",e[r].lines.font.weight)},F="translate("+e.axes.margin.left+","+e.axes.margin.top+")",D=e.group.selectAll("g#d3plus_graph_plane").data([0]),D.transition().duration(e.draw.timing).attr("transform",F),D.enter().append("g").attr("id","d3plus_graph_plane").attr("transform",F),u=D.selectAll("rect#d3plus_graph_background").data([0]),u.transition().duration(e.draw.timing).attr(c),u.enter().append("rect").attr("id","d3plus_graph_background").attr("x",0).attr("y",0).attr(c),q=D.selectAll("path#d3plus_graph_mirror").data([0]),q.enter().append("path").attr("id","d3plus_graph_mirror").attr("fill","#000").attr("fill-opacity",.03).attr("stroke-width",1).attr("stroke","#ccc").attr("stroke-dasharray","10,10").attr("opacity",0),q.transition().duration(e.draw.timing).attr("opacity",function(){return e.axes.mirror.value?1:0}).attr("d",function(){var e,t;return t=c.width,e=c.height,"M "+t+" "+e+" L 0 "+e+" L "+t+" 0 Z"}),U=0!==e.x.ticks.rotate,K=function(t){var n;return n=t.attr("transform","translate(0,"+e.axes.height+")").call(e.x.axis.svg.scale(e.x.scale.viz)).selectAll("g.tick"),n.selectAll("line").attr("y2",function(t){var n;return t.constructor===Date&&(t=+t),n=d3.select(this).attr("y2"),e.x.ticks.visible.indexOf(t)>=0?n:n/2}),n.select("text").attr("dy","").style("text-anchor",U?"end":"middle").call(W,"x").each("end",function(t){return t.constructor===Date&&(t=+t),!e.x.ticks.hidden&&e.x.ticks.visible.indexOf(t)>=0?o().container(d3.select(this)).rotate(e.x.ticks.rotate).valign(U?"middle":"top").width(e.x.ticks.maxWidth).height(e.x.ticks.maxHeight).padding(0).x(-e.x.ticks.maxWidth/2).draw():void 0})},J=D.selectAll("g#d3plus_graph_xticks").data(s),J.transition().duration(e.draw.timing).call(K),J.selectAll("line").transition().duration(e.draw.timing).call(Z,"x"),Q=J.enter().append("g").attr("id","d3plus_graph_xticks").transition().duration(0).call(K),Q.selectAll("path").attr("fill","none"),Q.selectAll("line").call(Z,"x"),J.exit().transition().duration(e.data.timing).attr("opacity",0).remove(),ne=function(t){var n;return n=t.call(e.y.axis.svg.scale(e.y.scale.viz)).selectAll("g.tick"),n.selectAll("line").attr("y2",function(t){var n;return t.constructor===Date&&(t=+t),n=d3.select(this).attr("y2"),e.x.ticks.visible.indexOf(t)>=0?n:n/2}),n.select("text").call(W,"y")},ee=D.selectAll("g#d3plus_graph_yticks").data(s),ee.transition().duration(e.draw.timing).call(ne),ee.selectAll("line").transition().duration(e.draw.timing).call(Z,"y"),te=ee.enter().append("g").attr("id","d3plus_graph_yticks").call(ne),te.selectAll("path").attr("fill","none"),te.selectAll("line").call(Z,"y"),ee.exit().transition().duration(e.data.timing).attr("opacity",0).remove(),_=function(t,n){return t.attr("x","x"===n?e.width.viz/2:-(e.axes.height/2+e.axes.margin.top)).attr("y","x"===n?e.height.viz-e[n].label.height/2-e[n].label.padding:e[n].label.height/2+e[n].label.padding).attr("transform","y"===n?"rotate(-90)":null).attr("font-family",e[n].label.font.family.value).attr("font-weight",e[n].label.font.weight).attr("font-size",e[n].label.font.size+"px").attr("fill",e[n].label.font.color).style("text-anchor","middle").attr("dominant-baseline","central")},I=["x","y"],m=0,k=I.length;k>m;m++)a=I[m],e[a].grid.value?v=e[a].ticks.values:(v=[],e[a].ticks.values.indexOf(0)>=0&&e[a].axis.value&&(v=[0])),g=D.selectAll("g#d3plus_graph_"+a+"grid").data([0]),g.enter().append("g").attr("id","d3plus_graph_"+a+"grid"),C=g.selectAll("line").data(v,function(e,t){return e.constructor===Date?e.getTime():e}),C.transition().duration(e.draw.timing).call(X,a).call(Z,a,!0),C.enter().append("line").style("opacity",0).call(X,a).call(Z,a,!0).transition().duration(e.draw.timing).delay(e.draw.timing/2).style("opacity",1),C.exit().transition().duration(e.draw.timing/2).style("opacity",0).remove(),l=e[a].label.fetch(e),w=s&&l?[0]:[],t=e.format.affixes.value[e[a].value],l&&!e[a].affixes.value&&t&&(V=e[a].affixes.separator.value,V===!0?V=["[","]"]:V===!1&&(V=["",""]),l+=" "+V[0]+t[0]+" "+t[1]+V[1]),b=e.group.selectAll("text#d3plus_graph_"+a+"label").data(w),b.text(l).transition().duration(e.draw.timing).call(_,a),b.enter().append("text").attr("id","d3plus_graph_"+a+"label").text(l).call(_,a),b.exit().transition().duration(e.data.timing).attr("opacity",0).remove();for(B=["x","y"],y=0,A=B.length;A>y;y++){for(a=B[y],S=D.selectAll("g#d3plus_graph_"+a+"_userlines").data([0]),S.enter().append("g").attr("id","d3plus_graph_"+a+"_userlines"),d=e[a].scale.viz.domain(),"y"===a&&(d=d.slice().reverse()),H=[],j=[],G=e[a].lines.value||[],x=0,M=G.length;M>x;x++)z=G[x],f=i(z)?z.position:z,isNaN(f)||(f=parseFloat(f),f>d[0]&&f<d[1]&&(f=i(z)?z:{position:f},f.coords={line:e[a].scale.viz(f.position)},j.push(f),f.text&&(f.axis=a,f.padding=.5*e[a].lines.font.padding.value,f.align=e[a].lines.font.align.value,L=e[a].lines.font.position.text,Y="middle"===L?0:2*f.padding,"top"===L&&(Y=-Y),"x"===a?($="left"===f.align?e.axes.height:"center"===f.align?e.axes.height/2:0,"left"===f.align&&($-=2*f.padding),"right"===f.align&&($+=2*f.padding)):($="left"===f.align?0:"center"===f.align?e.axes.width/2:e.axes.width,"right"===f.align&&($-=2*f.padding),"left"===f.align&&($+=2*f.padding)),f.coords.text={},f.coords.text["x"===a?"y":"x"]=$,f.coords.text[a]=e[a].scale.viz(f.position)+Y,f.transform="x"===a?"rotate(-90,"+f.coords.text.x+","+f.coords.text.y+")":null,H.push(f))));C=S.selectAll("line.d3plus_graph_"+a+"line").data(j,function(e){
return e.position}),C.enter().append("line").attr("class","d3plus_graph_"+a+"line").attr("opacity",0).call(N,a),C.transition().duration(e.draw.timing).attr("opacity",1).call(N,a),C.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),O=S.selectAll("text.d3plus_graph_"+a+"line_text").data(H,function(e){return e.position}),O.enter().append("text").attr("class","d3plus_graph_"+a+"line_text").attr("id",function(e){var t;return t=e.position+"",t=t.replace("-","neg"),t=t.replace(".","p"),"d3plus_graph_"+a+"line_text_"+t}).attr("opacity",0).call(E,a),O.text(function(e){return e.text}).transition().duration(e.draw.timing).attr("opacity",1).call(E,a),O.exit().transition().duration(e.draw.timing).attr("opacity",0).remove(),R=function(t){var n;return n=function(e){var t;return t=e.position+"",t=t.replace("-","neg"),t=t.replace(".","p"),D.select("text#d3plus_graph_"+e.axis+"line_text_"+t).node().getBBox()},t.attr("x",function(e){return n(e).x-e.padding}).attr("y",function(e){return n(e).y-e.padding}).attr("transform",function(e){return e.transform}).attr("width",function(e){return n(e).width+2*e.padding}).attr("height",function(e){return n(e).height+2*e.padding}).attr("fill",e.axes.background.color)},P=e[a].lines.font.background.value?H:[],T=S.selectAll("rect.d3plus_graph_"+a+"line_rect").data(P,function(e){return e.position}),T.enter().insert("rect","text.d3plus_graph_"+a+"line_text").attr("class","d3plus_graph_"+a+"line_rect").attr("pointer-events","none").attr("opacity",0).call(R),T.transition().delay(e.draw.timing).each("end",function(t){return d3.select(this).transition().duration(e.draw.timing).attr("opacity",1).call(R)}),T.exit().transition().duration(e.draw.timing).attr("opacity",0).remove()}}},{"../../../../../color/mix.coffee":48,"../../../../../object/validate.coffee":166,"../../../../../textwrap/textwrap.coffee":194}],308:[function(e,t,n){var r,o,i;r=e("../../../../core/fetch/value.coffee"),o=e("../../../../string/strip.js"),i=e("../../../../util/uniques.coffee"),t.exports=function(e,t){var n,a,s,l,u;return t||(t=e.data.viz),n=e[e.axes.discrete],a=e[e.axes.opposite],u=n.value===e.time.value,u?(l=e.data.time.ticks,e.time.solo.value.length?(s=e.time.solo.value.map(Number),l=l.filter(function(e){return s.indexOf(+e)>=0})):e.time.mute.value.length&&(s=e.time.mute.value.map(Number),l=l.filter(function(e){return s.indexOf(+e)<0}))):l=n.ticks.values,d3.nest().key(function(t){var n,i,a,s,l,u;for(l="nesting",s=e.id.nesting.slice(0,e.depth.value+1),i=0,a=s.length;a>i;i++)n=s[i],u=r(e,t,n),u instanceof Array&&(u=u.join("_")),l+="_"+o(u);return l}).rollup(function(t){var o,s,c,f,d,p,h,g,v,m,y,x,b;if(o=i(t,n.value,r,e),b=o.length&&o[0].constructor===Date,b&&(o=o.map(Number)),n.zerofill.value)for(s="log"===n.scale.value?a.scale.viz.domain().every(function(e){return 0>e})?-1:1:0,c=f=0,h=l.length;h>f;c=++f)if(x=l[c],y=u?+x:x,o.indexOf(y)<0){for(v={d3plus:{}},m=e.id.nesting,d=0,g=m.length;g>d;d++)p=m[d],p in t[0]&&(v[p]=t[0][p]);v[n.value]=x,v[a.value]=0,v[a.value]=s,t.splice(c,0,v)}return"string"==typeof t[0][n.value]?t:t.sort(function(t,o){var i,s,l,u,c;return i=r(e,t,n.value),l=r(e,o,n.value),(c=i-l)?c:(s=r(e,t,a.value),u=r(e,o,a.value),s-u)})}).entries(t)}},{"../../../../core/fetch/value.coffee":69,"../../../../string/strip.js":169,"../../../../util/uniques.coffee":204}],309:[function(e,t,n){var r;r=e("../../../../core/fetch/value.coffee"),t.exports=function(e,t){var n,o,i,a,s,l,u,c,f,d,p,h,g,v,m,y,x;for(m=e.axes.stacked,o=e[m].scale.viz(0),g=e[m].scale.value,p="x"===m?"y":"x",u="y"===m?e.axes.margin.top:e.axes.margin.left,d="share"===g?"expand":"zero",v=d3.layout.stack().values(function(e){return e.values}).offset(d).x(function(e){return e.d3plus[p]}).y(function(t){return o-e[m].scale.viz(r(e,t,e[m].value))}).out(function(t,n,i){var a,s;return s=r(e,t,e[m].value),a=0>s,"share"===g?(t.d3plus[m+"0"]=(1-n)*o,t.d3plus[m]=t.d3plus[m+"0"]-i*o):(t.d3plus[m+"0"]=o-n,t.d3plus[m]=t.d3plus[m+"0"]-i),t.d3plus[m]+=u,t.d3plus[m+"0"]+=u}),h=[],f=[],i=0,s=t.length;s>i;i++)if(n=t[i],x=r(e,n,e[m].value),x instanceof Array){for(c=!0,a=0,l=x.length;l>a;a++)if(y=x[a],y>=0){c=!1;break}c?f.push(n):h.push(n)}else x>=0&&h.push(n),0>x&&f.push(n);return h.length||f.length?(h.length&&(h=v(h)),f.length&&(f=v(f)),h.concat(f)):v(t)}},{"../../../../core/fetch/value.coffee":69}],310:[function(e,t,n){var r,o,i,a,s;r=e("../../core/fetch/value.coffee"),o=e("./helpers/graph/draw.coffee"),a=e("./helpers/graph/nest.coffee"),s=e("./helpers/graph/stack.coffee"),i=function(e){var t,n,i,a,l,u,c,f,d;if(o(e,{buffer:e.axes.opposite,mouse:!0}),i=e.x.domain.viz.concat(e.y.domain.viz),i.indexOf(void 0)>=0)return[];for(n=e.data.viz,a=0,u=n.length;u>a;a++)for(f=n[a],d=f.values,l=0,c=d.length;c>l;l++)t=d[l],t.d3plus.x=e.x.scale.viz(r(e,t,e.x.value)),t.d3plus.x+=e.axes.margin.left,t.d3plus.y=e.y.scale.viz(r(e,t,e.y.value)),t.d3plus.y+=e.axes.margin.top;return e.axes.stacked?s(e,n):n},i.filter=function(e,t){return a(e,t)},i.requirements=["data","x","y"],i.setup=function(e){var t,n,r;e.axes.discrete||(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"})),r=e[e.axes.opposite],n=e.size,!r.value&&n.value||n.changed&&n.previous===r.value?e.self[e.axes.opposite](n.value):(!n.value&&r.value||r.changed&&r.previous===n.value)&&e.self.size(r.value)},i.shapes=["line"],i.tooltip="static",t.exports=i},{"../../core/fetch/value.coffee":69,"./helpers/graph/draw.coffee":302,"./helpers/graph/nest.coffee":308,"./helpers/graph/stack.coffee":309}],311:[function(e,t,n){var r=e("../../network/smallestGap.coffee"),o=e("../../core/fetch/value.coffee"),i=function(e){var t=e.nodes.restricted||e.nodes.value,n=e.edges.restricted||e.edges.value,i=d3.extent(t,function(e){return e.x}),a=d3.extent(t,function(e){return e.y}),s=[1,1];if("number"==typeof e.size.value?s=[e.size.value,e.size.value]:e.size.value&&(s=d3.extent(t,function(t){var n=o(e,t,e.size.value);return 0===n?null:n})),"undefined"==typeof s[0]&&(s=[1,1]),"number"==typeof e.size.value)var l=e.size.value,u=e.size.value;else{var l=r(t,{accessor:function(e){return[e.x,e.y]}}),c=e.size.value?e.nodes.overlap:.4;if(l*=c,e.edges.arrows.value&&(l=.5*l),s[0]===s[1])var u=l;else{var f=i[1]+1.1*l-(i[0]-1.1*l),d=a[1]+1.1*l-(a[0]-1.1*l),p=f/d,h=e.width.viz/e.height.viz;if(h>p)var g=e.height.viz/d;else var g=e.width.viz/f;var u=.25*l;2>u*g&&(u=2/g)}}var v=e.size.scale.value.domain(s).range([u,l]);e.zoom.bounds=[[i[0]-1.1*l,a[0]-1.1*l],[i[1]+1.1*l,a[1]+1.1*l]];var m=[],y={};return t.forEach(function(t){var n=e.data.viz.filter(function(n){return n[e.id.value]==t[e.id.value]})[0],r=n||{};r[e.id.value]=t[e.id.value],r.d3plus={},r.d3plus.x=t.x,r.d3plus.y=t.y;var i=o(e,r,e.size.value);r.d3plus.r=i?v(i):v.range()[0],y[r[e.id.value]]={x:r.d3plus.x,y:r.d3plus.y,r:r.d3plus.r},m.push(r)}),m.sort(function(e,t){return t.d3plus.r-e.d3plus.r}),n.forEach(function(t,n){t.d3plus&&delete t.d3plus.spline,t[e.edges.source].d3plus={};var r=y[t[e.edges.source][e.id.value]];t[e.edges.source].d3plus.r=r.r,t[e.edges.source].d3plus.x=r.x,t[e.edges.source].d3plus.y=r.y,t[e.edges.target].d3plus={};var o=y[t[e.edges.target][e.id.value]];t[e.edges.target].d3plus.r=o.r,t[e.edges.target].d3plus.x=o.x,t[e.edges.target].d3plus.y=o.y}),{nodes:m,edges:n}};i.nesting=!1,i.requirements=["nodes","edges"],i.scale=1.05,i.shapes=["circle","square","donut"],i.tooltip="static",i.zoom=!0,t.exports=i},{"../../core/fetch/value.coffee":69,"../../network/smallestGap.coffee":162}],312:[function(e,t,n){var r,o,i,a,s=[].indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(t in this&&this[t]===e)return t;return-1};o=e("../../network/shortestPath.coffee"),r=e("../../core/fetch/value.coffee"),i=e("../../util/uniques.coffee"),a=function(e){var t,n,o,i,l,u,c,f,d,p,h,g,v,m,y,x,b,w,_,k,A,M,z,j,E,S,T,N,C,O,q,D,F,L,P,R,I,B,U,V,H,Y,$,W,X,Z,G,J,Q,K,ee,te,ne,re,oe,ie,ae,se,le,ue,ce,fe,de;for(h=[],Y={},Y[e.focus.value[0]]=0,Y[e.focus.value[1]]=0,$={all:[[e.focus.value[0]],[e.focus.value[1]]]},G=a.paths,H=m=0,k=G.length;k>m;H=++m)for(V=G[H],h=h.concat(V.edges),_=e.focus.value[0],$[H]=[_],J=V.edges,p=y=0,A=J.length;A>y;p=++y)d=J[p],d[e.edges.source]=e.data.viz.filter(function(t){return d[e.edges.source][e.id.value]===t[e.id.value]})[0],d[e.edges.target]=e.data.viz.filter(function(t){return d[e.edges.target][e.id.value]===t[e.id.value]})[0],L=d[e.edges.source][e.id.value]===_?"target":"source",P=d[e.edges[L]][e.id.value],void 0===Y[P]&&(Y[P]=H),$[H].push(P),_=P;ie=0;for(H in $)if(V=$[H],"all"!==H){for(D=0,g=x=0,M=V.length;M>x;g=++x)if(v=V[g],0!==g&&g!==V.length-1&&Y[v]===parseFloat(H)){for(D=1,W=V[g-1],F=V[g+1],X=null,R=null,Q=$.all,u=N=0,z=Q.length;z>N;u=++N)l=Q[u],s.call(l,W)>=0&&(X=u),s.call(l,F)>=0&&(R=u);null!==X&&null===R?X+1===$.all.length-1?$.all.splice(X+1,0,[v]):$.all[X+1].push(v):R-X===1?$.all.splice(R,0,[v]):R-X>1&&$.all[R-1].push(v)}ie+=D}for(oe=Math.floor(e.height.viz/ie),de=[],g=0;ie>g;)g%2===0?de.push(g):de.unshift(g),g++;for(b=e.size.value&&!e.small?30:0,fe=d3.scale.ordinal().domain(de).range(d3.range(oe/2-b,e.height.viz+oe/2-b,(e.height.viz-oe)/(ie-1))),f=$.all.length,c=Math.floor(e.width.viz/f),ue=d3.scale.linear().domain([0,f-1]).rangeRound([c/2,e.width.viz-c/2]),O=5,C=.4*d3.min([c,oe-b]),se=d3.extent(e.data.viz,function(t){var n;return n=r(e,t,e.size.value),n||0}),ae=e.size.scale.value.domain(se).rangeRound([O,C]),K=e.data.viz,q=0,j=K.length;j>q;q++){for(I=K[q],null==I.d3plus&&(I.d3plus={}),ee=$.all,u=B=0,E=ee.length;E>B;u=++B)l=ee[u],te=I[e.id.value],s.call(l,te)>=0&&(I.d3plus.x=ue(u));I.d3plus.y=fe(Y[I[e.id.value]]),e.size.value?(le=r(e,I,e.size.value),I.d3plus.r=le?ae(le):O):I.d3plus.r=C,I.d3plus.r<.1*c&&!e.small?I.d3plus.label={x:0,y:I.d3plus.r+2*e.labels.padding,w:.6*c,h:b+C-I.d3plus.r,resize:!1}:delete I.d3plus.label}for(ne=a.paths,H=U=0,S=ne.length;S>U;H=++U)for(V=ne[H],_=e.focus.value[0],re=V.edges,p=Z=0,T=re.length;T>Z;p=++Z)d=re[p],L=d[e.edges.source][e.id.value]===_?"target":"source",w="target"===L?"source":"target",P=d[e.edges[L]][e.id.value],Y[_]!==Y[P]?(d.d3plus={spline:!0},null==(t=d[e.edges.source]).d3plus&&(t.d3plus={}),null==(n=d[e.edges.source].d3plus).edges&&(n.edges={}),null==(o=d[e.edges.target]).d3plus&&(o.d3plus={}),null==(i=d[e.edges.target].d3plus).edges&&(i.edges={}),ce=d[L].d3plus.x-d[w].d3plus.x,d[w].d3plus.edges[d[L][e.id.value]]={angle:Math.PI,radius:c/2},d[L].d3plus.edges[d[w][e.id.value]]={angle:0,radius:c/2,offset:ce-c}):delete d.d3plus,_=P;return{nodes:e.data.viz,edges:h}},a.filter=function(e,t){var n,s,l,u,c,f,d,p,h,g,v,m,y,x,b,w,_,k,A;for(u=e.edges.filtered||e.edges.value,a.paths=o(u,e.focus.value[0],{target:e.focus.value[1],distance:e.edges.size.value||void 0,nodeid:e.id.value,startpoint:e.edges.source,endpoint:e.edges.target,K:e.edges.limit.value||5}),a.nodes=[],n=[],b=a.paths,d=0,g=b.length;g>d;d++)for(x=b[d],w=x.edges,p=0,v=w.length;v>p;p++)l=w[p],k=l[e.edges.source],A=l[e.edges.target],n.indexOf(k[e.id.value])<0&&(a.nodes.push(k),n.push(k[e.id.value])),n.indexOf(A[e.id.value])<0&&(a.nodes.push(A),n.push(A[e.id.value]));for(f=i(a.nodes,e.id.value,r,e),_=[],h=0,m=f.length;m>h;h++)c=f[h],s=t.filter(function(t){return t[e.id.value]===c}),s[0]?_.push(s[0]):(y={d3plus:{}},y[e.id.value]=c,_.push(y));return _},a.nesting=!1,a.requirements=[function(e){return{status:2===e.focus.value.length,text:e.format.locale.value.method.focus+" x 2"}},"edges"],a.scale=1,a.shapes=["circle","square","donut"],a.tooltip="static",t.exports=a},{"../../core/fetch/value.coffee":69,"../../network/shortestPath.coffee":161,"../../util/uniques.coffee":204}],313:[function(e,t,n){var r,o,i,a,s,l;r=e("../../array/comparator.coffee"),o=e("../../core/data/threshold.js"),i=e("../../core/fetch/value.coffee"),a=e("../../core/data/group.coffee"),s={},l=function(e){var t,n,o,l,u,c,f,d,p;for(f=d3.layout.pie().value(function(e){return e.value}).sort(function(t,n){var o,a;return e.order.value?r(t.d3plus,n.d3plus,[e.order.value],e.order.sort.value,[],e):(o=i(e,t.d3plus,e.id.value),void 0===s[o]&&(s[o]=t.value),a=i(e,n.d3plus,e.id.value),void 0===s[a]&&(s[a]=n.value),s[a]<s[o]?-1:1)}),n=a(e,e.data.viz,[]),c=f(n),p=[],d=d3.min([e.width.viz,e.height.viz])/2-2*e.labels.padding,o=0,u=c.length;u>o;o++)t=c[o],l=t.data.d3plus,l.d3plus.startAngle=t.startAngle,l.d3plus.endAngle=t.endAngle,l.d3plus.r=d,l.d3plus.x=e.width.viz/2,l.d3plus.y=e.height.viz/2,p.push(l);return p},l.filter=o,l.requirements=["data","size"],l.shapes=["arc"],l.threshold=function(e){return 1600/(e.width.viz*e.height.viz)},t.exports=l},{"../../array/comparator.coffee":35,"../../core/data/group.coffee":59,"../../core/data/threshold.js":63,"../../core/fetch/value.coffee":69}],314:[function(e,t,n){var r=e("../../array/sort.coffee"),o=e("../../client/pointer.coffee"),i=e("../../core/fetch/value.coffee"),s=e("../../core/fetch/color.coffee"),l=e("../../color/legible.coffee"),u=e("../../tooltip/remove.coffee"),c=e("../../network/smallestGap.coffee"),f=e("../../util/uniques.coffee"),d=function(e){var t=d3.min([e.height.viz,e.width.viz])/2,n=e.small||!e.labels.value?(t-2*e.labels.padding)/2:t/3,d=e.small||!e.labels.value?1.4*n:n,p=2*n,h=[],g=[],v=e.data.viz.filter(function(t){return t[e.id.value]===e.focus.value[0]})[0];v||(v={d3plus:{}},v[e.id.value]=e.focus.value[0]),v.d3plus.x=e.width.viz/2,v.d3plus.y=e.height.viz/2,v.d3plus.r=.65*d;var m=[],y=[e.focus.value[0]];e.edges.connections(e.focus.value[0],e.id.value).forEach(function(t){var n=t[e.edges.source][e.id.value]==e.focus.value[0]?t[e.edges.target]:t[e.edges.source],r=e.data.viz.filter(function(t){return t[e.id.value]===n[e.id.value]})[0];r||(r={d3plus:{}},r[e.id.value]=n[e.id.value]),r.d3plus.edges=e.edges.connections(r[e.id.value],e.id.value).filter(function(t){return t[e.edges.source][e.id.value]!=e.focus.value[0]&&t[e.edges.target][e.id.value]!=e.focus.value[0]}),r.d3plus.edge=t,y.push(r[e.id.value]),m.push(r)});var x=e.order.value||e.color.value||e.size.value||e.id.value;m.sort(function(t,n){var o=t.d3plus.edges.length-n.d3plus.edges.length;return o?o:r([t,n],x,e.order.sort.value,e.color.value||[],e)}),"number"==typeof e.edges.limit.value?m=m.slice(0,e.edges.limit.value):"function"==typeof e.edges.limit.value&&(m=e.edges.limit.value(m));var b=[],w=0;m.forEach(function(t){var n=t[e.id.value];t.d3plus.edges=t.d3plus.edges.filter(function(t){var r=t[e.edges.source][e.id.value],o=t[e.edges.target][e.id.value];return y.indexOf(r)<0&&o==n||y.indexOf(o)<0&&r==n}),w+=t.d3plus.edges.length||1,t.d3plus.edges.forEach(function(t){var r=t[e.edges.source],o=t[e.edges.target],i=o[e.id.value]==n?r:o;y.push(i[e.id.value])})}),r(m,x,e.order.sort.value,e.color.value||[],e);var _=0,k=2*Math.PI,A=0;m.forEach(function(t,n){var o=t.d3plus.edges.length||1,i=k/w*o;0==n&&(A=s,_-=i/2);var s=_+i/2;s-=k/4,t.d3plus.radians=s,t.d3plus.x=e.width.viz/2+d*Math.cos(s),t.d3plus.y=e.height.viz/2+d*Math.sin(s),_+=i,t.d3plus.edges.sort(function(n,o){var n=n[e.edges.source][e.id.value]==t[e.id.value]?n[e.edges.target]:n[e.edges.source],o=o[e.edges.source][e.id.value]==t[e.id.value]?o[e.edges.target]:o[e.edges.source];return r([n,o],x,e.order.sort.value,e.color.value||[],e)}),t.d3plus.edges.forEach(function(n,r){var i=n[e.edges.source][e.id.value]==t[e.id.value]?n[e.edges.target]:n[e.edges.source],l=k/w,u=e.data.viz.filter(function(t){return t[e.id.value]===i[e.id.value]})[0];u||(u={d3plus:{}},u[e.id.value]=i[e.id.value]),a=s-l*o/2+l/2+l*r,u.d3plus.radians=a,u.d3plus.x=e.width.viz/2+p*Math.cos(a),u.d3plus.y=e.height.viz/2+p*Math.sin(a),b.push(u)})});var M=c(m,{accessor:function(e){return[e.d3plus.x,e.d3plus.y]}}),z=c(b,{accessor:function(e){return[e.d3plus.x,e.d3plus.y]}});if(M||(M=n/2),z||(z=n/4),8>M/2-4)var j=d3.min([M/2,8]);else var j=M/2-4;if(4>z/2-4)var E=d3.min([z/2,4]);else var E=z/2-4;E>n/10&&(E=n/10),E>j&&E>10&&(E=.75*j),j>1.5*E&&(j=1.5*E),j=Math.floor(j),E=Math.floor(E);var S=f(m,e.id.value,i,e);S=S.concat(f(b,e.id.value,i,e)),S.push(e.focus.value[0]);var T=e.data.viz.filter(function(t){return S.indexOf(t[e.id.value])>=0});if(e.size.value){var N=d3.extent(T,function(t){return i(e,t,e.size.value)});N[0]==N[1]&&(N[0]=0);var t=d3.scale.linear().domain(N).rangeRound([3,d3.min([j,E])]),C=i(e,v,e.size.value);v.d3plus.r=t(C)}else{var t=d3.scale.linear().domain([1,2]).rangeRound([j,E]);e.edges.label&&(v.d3plus.r=1.5*t(1))}return b.forEach(function(n){n.d3plus.ring=2;var r=e.size.value?i(e,n,e.size.value):2;n.d3plus.r=t(r)}),m.forEach(function(n){n.d3plus.ring=1;var r=e.size.value?i(e,n,e.size.value):1;n.d3plus.r=t(r)}),g=[v].concat(m).concat(b),m.forEach(function(t,r){var o=[e.edges.source,e.edges.target],i=t.d3plus.edge;o.forEach(function(t){i[t]=g.filter(function(n){return n[e.id.value]==i[t][e.id.value]})[0]}),delete i.d3plus,h.push(i),e.edges.connections(t[e.id.value],e.id.value).forEach(function(r){var o=r[e.edges.source][e.id.value]==t[e.id.value]?r[e.edges.target]:r[e.edges.source];if(o[e.id.value]!=v[e.id.value]){var i=b.filter(function(t){return t[e.id.value]==o[e.id.value]})[0];if(i);else{i=m.filter(function(t){return t[e.id.value]==o[e.id.value]})[0]}if(i){r.d3plus={spline:!0,translate:{x:e.width.viz/2,y:e.height.viz/2}};var a=[e.edges.source,e.edges.target];a.forEach(function(o,a){r[o]=g.filter(function(t){return t[e.id.value]==r[o][e.id.value]})[0],void 0===r[o].d3plus.edges&&(r[o].d3plus.edges={});var s=0===a?r[e.edges.target][e.id.value]:r[e.edges.source][e.id.value];r[o].d3plus.edges[s]=r[o][e.id.value]==t[e.id.value]?{angle:t.d3plus.radians+Math.PI,radius:n/2}:{angle:i.d3plus.radians,radius:n/2}}),h.push(r)}}})}),g.forEach(function(t){if(!e.small&&e.labels.value)if(t[e.id.value]!=e.focus.value[0]){t.d3plus.rotate=t.d3plus.radians*(180/Math.PI);var r=t.d3plus.rotate,o=n-3*e.labels.padding-t.d3plus.r;if(-90>r||r>90){r-=180;var i=-(t.d3plus.r+o/2+e.labels.padding),a="end"}else var i=t.d3plus.r+o/2+e.labels.padding,a="start";var u=m.indexOf(t)>=0?!0:!1,c=1==t.d3plus.ring?M:z;t.d3plus.label={x:i,y:0,w:o,h:c,angle:r,anchor:a,valign:"center",color:l(s(e,t)),resize:[8,e.labels.font.size],background:u,mouse:!0}}else if(e.size.value||e.edges.label){var c=d-2*t.d3plus.r-2*e.labels.padding;t.d3plus.label={x:0,y:t.d3plus.r+c/2,w:d,h:c,color:l(s(e,t)),resize:[10,40],background:!0,mouse:!0}}else delete t.d3plus.rotate,delete t.d3plus.label;else delete t.d3plus.rotate,delete t.d3plus.label}),e.mouse[o.click]=function(t){t[e.id.value]!=e.focus.value[0]&&(u(e.type.value),e.self.focus(t[e.id.value]).draw())},{edges:h,nodes:g,data:T}};d.filter=function(e,t){var n=e.edges.connections(e.focus.value[0],e.id.value,!0),r=[];n.forEach(function(t){r=r.concat(e.edges.connections(t[e.id.value],e.id.value,!0))});var o=n.concat(r),a=f(o,e.id.value,i,e),s=[];return a.forEach(function(n){var r=t.filter(function(t){return t[e.id.value]==n})[0];if(r)s.push(r);else{var o={d3plus:{}};o[e.id.value]=n,s.push(o)}}),s},d.nesting=!1,d.scale=1,d.shapes=["circle","square","donut"],d.requirements=["edges","focus"],d.tooltip="static",t.exports=d},{"../../array/sort.coffee":37,"../../client/pointer.coffee":41,"../../color/legible.coffee":46,"../../core/fetch/color.coffee":65,"../../core/fetch/value.coffee":69,"../../network/smallestGap.coffee":162,"../../tooltip/remove.coffee":197,"../../util/uniques.coffee":204}],315:[function(e,t,n){var r,o,i,a,s,l;r=e("../../core/fetch/value.coffee"),o=e("./helpers/graph/draw.coffee"),i=e("../../core/console/print.coffee"),s=e("../../array/sort.coffee"),l=e("./helpers/graph/dataTicks.coffee"),a=function(e){var t,n,i,a,u;if(o(e,{buffer:"size",mouse:!0}),n=e.x.domain.viz.concat(e.y.domain.viz),n.indexOf(void 0)>=0)return[];for(u=e.data.viz,i=0,a=u.length;a>i;i++)t=u[i],t.d3plus.x=e.x.scale.viz(r(e,t,e.x.value)),t.d3plus.x+=e.axes.margin.left,t.d3plus.y=e.y.scale.viz(r(e,t,e.y.value)),t.d3plus.y+=e.axes.margin.top,t.d3plus.r=e.axes.scale("number"!=typeof e.size.value&&e.size.value?r(e,t,e.size.value):0);return l(e),s(e.data.viz,e.order.value||e.size.value||e.id.value,"desc"===e.order.sort.value?"asc":"desc",e.color.value||[],e)},a.fill=!0,a.requirements=["data","x","y"],a.scale=1.1,a.setup=function(e){return e.time.value&&!e.axes.discrete&&(e.time.value===e.x.value&&e.self.x({scale:"discrete"}),e.time.value===e.y.value)?e.self.y({scale:"discrete"}):void 0},a.shapes=["circle","square","donut"],a.tooltip="static",t.exports=a},{"../../array/sort.coffee":37,"../../core/console/print.coffee":54,"../../core/fetch/value.coffee":69,"./helpers/graph/dataTicks.coffee":301,"./helpers/graph/draw.coffee":302}],316:[function(e,t,n){var r,o,i,a,s,l,u,c;r=e("../../util/closest.coffee"),o=e("../../core/fetch/value.coffee"),i=e("./helpers/graph/draw.coffee"),a=e("./helpers/graph/nest.coffee"),s=e("../../array/sort.coffee"),l=e("./helpers/graph/stack.coffee"),c=e("../../core/data/threshold.js"),u=function(e){var t,n,r,a,u,c,f,d,p,h,g;if(i(e,{buffer:e.axes.opposite}),a=e.x.domain.viz.concat(e.y.domain.viz),a.indexOf(void 0)>=0)return[];for(n=s(e.data.viz,null,null,null,e),r=e[e.axes.discrete],p=e[e.axes.opposite],u=0,f=n.length;f>u;u++)for(h=n[u],h.d3plus||(h.d3plus={}),g=h.values,c=0,d=g.length;d>c;c++)t=g[c],t.d3plus||(t.d3plus={}),t.d3plus.x=r.scale.viz(o(e,t,r.value)),t.d3plus.x+=e.axes.margin.left,t.d3plus.y=p.scale.viz(o(e,t,p.value)),t.d3plus.y+=e.axes.margin.top,t.d3plus.merged instanceof Array&&(h.d3plus.merged||(h.d3plus.merged=[]),h.d3plus.merged=h.d3plus.merged.concat(t.d3plus.merged)),t.d3plus.text&&!h.d3plus.text&&(h.d3plus.text=t.d3plus.text);return l(e,n)},u.filter=function(e,t){return a(e,c(e,t,e[e.axes.discrete].value))},u.requirements=["data","x","y"],u.setup=function(e){var t,n,r;e.axes.discrete||(t=e.time.value===e.y.value?"y":"x",e.self[t]({scale:"discrete"})),e[e.axes.discrete].zerofill.value||e.self[e.axes.discrete]({zerofill:!0}),e[e.axes.opposite].stacked.value||e.self[e.axes.opposite]({stacked:!0}),r=e[e.axes.opposite],n=e.size,!r.value&&n.value||n.changed&&n.previous===r.value?e.self[e.axes.opposite](n.value):(!n.value&&r.value||r.changed&&r.previous===n.value)&&e.self.size(r.value)},u.shapes=["area"],u.threshold=function(e){return 20/e.height.viz},u.tooltip="static",t.exports=u},{"../../array/sort.coffee":37,"../../core/data/threshold.js":63,"../../core/fetch/value.coffee":69,"../../util/closest.coffee":200,"./helpers/graph/draw.coffee":302,"./helpers/graph/nest.coffee":308,"./helpers/graph/stack.coffee":309}],317:[function(e,t,n){var r=e("../../core/fetch/value.coffee"),o=e("../../util/uniques.coffee"),i=e("../../util/copy.coffee"),a=e("../../color/random.coffee"),s=function(e){var t=o(e.data.viz,e.id.value,r,e),n=o(e.cols.value);n.indexOf("label")<0&&e.cols.index.value&&n.unshift("label");var s=e.height.viz/(t.length+1),l=e.width.viz/n.length;e.group.selectAll("rect").data([0]).enter().append("rect").attr("class","background").attr("height",e.height.viz).attr("width",e.width.viz).style("fill",e.color.missing);var u=e.group.selectAll("line.horiz").data(e.data.viz);u.enter().append("line").attr("class","horiz"),u.attr("x1",0).attr("y1",function(e,t){return s*t+s}).attr("x2",e.width.viz).attr("y2",function(e,t){return s*t+s}).style("fill","#fff").style("stroke","#fff"),u.exit().remove();var c=e.group.selectAll("line.vert").data(n);c.enter().append("line").attr("class","vert"),c.attr("x1",function(e,t){return l*t+l}).attr("y1",0).attr("x2",function(e,t){return l*t+l}).attr("y2",e.height.viz).style("fill","#fff").style("stroke","#fff"),c.exit().remove();var f=[],d={};return n.forEach(function(t,n){var r={d3plus:{x:l*n+l/2,y:s/2,width:l,height:s,id:"d3p_header_"+t.toString().replace(/ /g,"_"),shape:"square",color:"#fff",text:t}};if(t==e.id.value&&(r.d3plus.color="#fff"),"label"==t&&(r.d3plus.label=!1,r.d3plus.color="#fff",r.d3plus.stroke="#fff"),f.push(r),"number"==e.data.keys[t]){var o=d3.extent(e.data.viz,function(e){return e[t]});o[0]==o[1]&&(o=[o[0]-1,o[1]]),d[t]=d3.scale.linear().domain(o).range([e.color.missing,a(t)])}else"boolean"==e.data.keys[t]&&(d[t]=function(n){return n?a(t):e.color.missing})}),e.data.viz.forEach(function(t,r){r+=1,n.forEach(function(n,o){var a=i(t);a.d3plus.id="d3p_"+a[e.id.value].toString().replace(/ /g,"_")+"_"+n,a.d3plus.x=l*o+l/2,a.d3plus.y=s*r+s/2,a.d3plus.width=l,a.d3plus.height=s,"label"==n&&(a.d3plus.shape="square",a.d3plus.color="#fff",f.push(a)),d3.keys(t).indexOf(n)>=0&&n in t&&(d[n]&&(a.d3plus.color=d[n](a[n])),a.d3plus.text=a[n],"boolean"==e.data.keys[n]?a.d3plus.label=!1:"string"==e.data.keys[n]&&(a.d3plus.color=e.color.missing,a.d3plus.stroke="#fff",a.d3plus.shape="square"),f.push(a))})}),f};s.shapes=["check","cross","diamond","square","triangle","triangle_up","triangle_down"],s.requirements=["data","cols"],t.exports=s},{"../../color/random.coffee":49,"../../core/fetch/value.coffee":69,"../../util/copy.coffee":201,"../../util/uniques.coffee":204}],318:[function(e,t,n){var r,o,i,a;r=e("../../core/data/threshold.js"),o=e("../../core/data/group.coffee"),i=e("../../object/merge.coffee"),a=function(e){var t,n,r,a,s,l,u;if(r=o(e,e.data.viz),n=d3.layout.treemap().mode(e.type.mode.value).round(!0).size([e.width.viz,e.height.viz]).children(function(e){return e.values}).padding(e.data.padding.value).sort(function(e,t){var n;return n=e.value-t.value,0===n?e.id<t.id:n}).nodes({name:"root",values:r}).filter(function(e){return!e.values&&e.area}),n.length){for(u=n[0];u.parent;)u=u.parent;for(l=[],a=0,s=n.length;s>a;a++)t=n[a],t.d3plus.d3plus=i(t.d3plus.d3plus,{x:t.x+t.dx/2,y:t.y+t.dy/2,width:t.dx,height:t.dy,share:t.value/u.value}),l.push(t.d3plus)}return l},a.filter=r,a.modes=["squarify","slice","dice","slice-dice"],a.requirements=["data","size"],a.shapes=["square"],a.threshold=function(e){return 1600/(e.width.viz*e.height.viz)},t.exports=a},{"../../core/data/group.coffee":59,"../../core/data/threshold.js":63,"../../object/merge.coffee":165}],319:[function(e,t,n){var r,o,i,a,s,l,u;r=e("../core/methods/attach.coffee"),o=e("./methods/helpers/axis.coffee"),a=e("./helpers/ui/message.js"),s=e("./helpers/drawSteps.js"),l=e("../core/console/print.coffee"),i=e("./helpers/container.coffee"),u=e("../object/validate.coffee"),t.exports=function(){var t;return t={g:{apps:{}},types:{bar:e("./types/bar.coffee"),bubbles:e("./types/bubbles.coffee"),box:e("./types/box.coffee"),chart:e("./types/deprecated/chart.coffee"),geo_map:e("./types/geo_map.coffee"),line:e("./types/line.coffee"),network:e("./types/network.js"),paths:e("./types/paths.coffee"),pie:e("./types/pie.coffee"),rings:e("./types/rings.js"),scatter:e("./types/scatter.coffee"),stacked:e("./types/stacked.coffee"),table:e("./types/table.js"),tree_map:e("./types/tree_map.coffee")}},t.self=function(e){return e.each(function(){var e,n,r,o,u,c,f;t.draw.frozen=!0,t.error.internal=null,"timing"in t.draw||(t.draw.timing=t.timing.transitions),t.error.value&&(t.draw.timing=0),t.container.changed&&i(t),c=t.width.value<=t.width.small,u=t.height.value<=t.height.small,t.small=c||u,t.width.viz=t.width.value,t.height.viz=t.height.value,e=!1,n=function(){f.length?o():t.dev.value&&(l.groupEnd(),l.timeEnd("total draw time"),l.log("\n"))},r=function(e,r){r=r||"function",e[r]instanceof Array?e[r].forEach(function(e){e(t,n)}):"function"==typeof e[r]&&e[r](t,n),e.wait||n()},o=function(){var o,i,s,u;u=f.shift(),s=t.g.message&&e===u.message,i="check"in u?u.check:!0,"function"==typeof i&&(i=i(t)),i?s?r(u):(t.dev.value&&(e!==!1&&l.groupEnd(),l.group(u.message)),"string"==typeof t.messages.value?(e=t.messages.value,o=t.messages.value):(e=u.message,o=t.format.value(u.message)),t.draw.update?(a(t,o),t.error.value?r(u):setTimeout(function(){return r(u)},10)):r(u)):"otherwise"in u?t.error.value?r(u,"otherwise"):setTimeout(function(){return r(u,"otherwise")},10):n()},t.messages.style.backup=t.group&&"1"===t.group.attr("opacity")?"small":"large",f=s(t),o()}),t.self},r(t,{active:e("./methods/active.coffee"),aggs:e("./methods/aggs.coffee"),attrs:e("./methods/attrs.coffee"),axes:e("./methods/axes.coffee"),background:e("./methods/background.coffee"),color:e("./methods/color.coffee"),cols:e("./methods/cols.js"),config:e("./methods/config.coffee"),container:e("./methods/container.coffee"),coords:e("./methods/coords.coffee"),csv:e("./methods/csv.coffee"),data:e("./methods/data.coffee"),depth:e("./methods/depth.coffee"),descs:e("./methods/descs.coffee"),dev:e("./methods/dev.coffee"),draw:e("./methods/draw.js"),edges:e("./methods/edges.js"),error:e("./methods/error.coffee"),focus:e("./methods/focus.coffee"),font:e("./methods/font.coffee"),footer:e("./methods/footer.coffee"),format:e("./methods/format.coffee"),height:e("./methods/height.coffee"),history:e("./methods/history.coffee"),icon:e("./methods/icon.coffee"),id:e("./methods/id.coffee"),labels:e("./methods/labels.coffee"),legend:e("./methods/legend.coffee"),links:e("./methods/links.coffee"),margin:e("./methods/margin.coffee"),messages:e("./methods/messages.coffee"),nodes:e("./methods/nodes.coffee"),order:e("./methods/order.coffee"),shape:e("./methods/shape.coffee"),size:e("./methods/size.coffee"),style:e("./methods/style.coffee"),temp:e("./methods/temp.coffee"),text:e("./methods/text.coffee"),time:e("./methods/time.coffee"),timeline:e("./methods/timeline.coffee"),timing:e("./methods/timing.coffee"),title:e("./methods/title.coffee"),tooltip:e("./methods/tooltip.coffee"),total:e("./methods/total.coffee"),type:e("./methods/type.coffee"),ui:e("./methods/ui.coffee"),width:e("./methods/width.coffee"),x:o("x"),y:o("y"),zoom:e("./methods/zoom.js")}),t.self}},{"../core/console/print.coffee":54,"../core/methods/attach.coffee":76,"../object/validate.coffee":166,"./helpers/container.coffee":205,"./helpers/drawSteps.js":206,"./helpers/ui/message.js":238,"./methods/active.coffee":247,"./methods/aggs.coffee":248,"./methods/attrs.coffee":249,"./methods/axes.coffee":250,"./methods/background.coffee":251,"./methods/color.coffee":252,"./methods/cols.js":253,"./methods/config.coffee":254,"./methods/container.coffee":255,"./methods/coords.coffee":256,"./methods/csv.coffee":257,"./methods/data.coffee":258,"./methods/depth.coffee":259,"./methods/descs.coffee":260,"./methods/dev.coffee":261,"./methods/draw.js":262,"./methods/edges.js":263,"./methods/error.coffee":264,"./methods/focus.coffee":265,"./methods/font.coffee":266,"./methods/footer.coffee":267,"./methods/format.coffee":268,"./methods/height.coffee":269,"./methods/helpers/axis.coffee":270,"./methods/history.coffee":271,"./methods/icon.coffee":272,"./methods/id.coffee":273,"./methods/labels.coffee":274,"./methods/legend.coffee":275,"./methods/links.coffee":276,"./methods/margin.coffee":277,"./methods/messages.coffee":278,"./methods/nodes.coffee":279,"./methods/order.coffee":280,"./methods/shape.coffee":281,"./methods/size.coffee":282,"./methods/style.coffee":283,"./methods/temp.coffee":284,"./methods/text.coffee":285,"./methods/time.coffee":286,"./methods/timeline.coffee":287,"./methods/timing.coffee":288,"./methods/title.coffee":289,"./methods/tooltip.coffee":290,"./methods/total.coffee":291,"./methods/type.coffee":292,"./methods/ui.coffee":293,"./methods/width.coffee":294,"./methods/zoom.js":295,"./types/bar.coffee":296,"./types/box.coffee":297,"./types/bubbles.coffee":298,"./types/deprecated/chart.coffee":299,"./types/geo_map.coffee":300,"./types/line.coffee":310,"./types/network.js":311,"./types/paths.coffee":312,"./types/pie.coffee":313,"./types/rings.js":314,"./types/scatter.coffee":315,"./types/stacked.coffee":316,"./types/table.js":317,"./types/tree_map.coffee":318}]},{},[1]),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),o=r.data("bs.tooltip"),i="object"==typeof t&&t;(o||!/destroy|hide/.test(t))&&(o||r.data("bs.tooltip",o=new n(this,i)),"string"==typeof t&&o[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",e,t)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",
padding:0}},n.prototype.init=function(t,n,r){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),i=o.length;i--;){var a=o[i];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!r)return;var o=this,i=this.tip(),a=this.getUID(this.type);this.setContent(),i.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&i.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,i[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,u=l.test(s);u&&(s=s.replace(l,"")||"top"),i.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?i.appendTo(this.options.container):i.insertAfter(this.$element);var c=this.getPosition(),f=i[0].offsetWidth,d=i[0].offsetHeight;if(u){var p=s,h=this.options.container?e(this.options.container):this.$element.parent(),g=this.getPosition(h);s="bottom"==s&&c.bottom+d>g.bottom?"top":"top"==s&&c.top-d<g.top?"bottom":"right"==s&&c.right+f>g.width?"left":"left"==s&&c.left-f<g.left?"right":s,i.removeClass(p).addClass(s)}var v=this.getCalculatedOffset(s,c,f,d);this.applyPlacement(v,s);var m=function(){var e=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==e&&o.leave(o)};e.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",m).emulateTransitionEnd(n.TRANSITION_DURATION):m()}},n.prototype.applyPlacement=function(t,n){var r=this.tip(),o=r[0].offsetWidth,i=r[0].offsetHeight,a=parseInt(r.css("margin-top"),10),s=parseInt(r.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),t.top=t.top+a,t.left=t.left+s,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var l=r[0].offsetWidth,u=r[0].offsetHeight;"top"==n&&u!=i&&(t.top=t.top+i-u);var c=this.getViewportAdjustedDelta(n,t,l,u);c.left?t.left+=c.left:t.top+=c.top;var f=/top|bottom/.test(n),d=f?2*c.left-o+l:2*c.top-i+u,p=f?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(d,r[0][p],f)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function r(){"in"!=o.hoverState&&i.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),t&&t()}var o=this,i=e(this.$tip),a=e.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(i.removeClass("in"),e.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r="BODY"==n.tagName,o=n.getBoundingClientRect();null==o.width&&(o=e.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var i=r?{top:0,left:0}:t.offset(),a={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},o,a,s,i)},n.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,r){var o={top:0,left:0};if(!this.$viewport)return o;var i=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-i-a.scroll,l=t.top+i-a.scroll+r;s<a.top?o.top=a.top-s:l>a.top+a.height&&(o.top=a.top+a.height-l)}else{var u=t.left-i,c=t.left+i+n;u<a.left?o.left=a.left-u:c>a.width&&(o.left=a.left+a.width-c)}return o},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type)})};var r=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),o=n.data("bs.alert");o||n.data("bs.alert",o=new r(this)),"string"==typeof t&&o[t].call(n)})}var n='[data-dismiss="alert"]',r=function(t){e(t).on("click",n,this.close)};r.VERSION="3.3.4",r.TRANSITION_DURATION=150,r.prototype.close=function(t){function n(){a.detach().trigger("closed.bs.alert").remove()}var o=e(this),i=o.attr("data-target");i||(i=o.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,""));var a=e(i);t&&t.preventDefault(),a.length||(a=o.closest(".alert")),a.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",n).emulateTransitionEnd(r.TRANSITION_DURATION):n())};var o=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=r,e.fn.alert.noConflict=function(){return e.fn.alert=o,this},e(document).on("click.bs.alert.data-api",n,r.prototype.close)}(jQuery);