<!DOCTYPE html>
<html>
<head>
    <script src="js/jquery-2.0.3.js"></script>
    <link href="css/bootstrap.css" rel="stylesheet" type="text/css"/>
    <script src="js/bootstrap.js"></script>

    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script src="js/simple_statistics.js"></script>

    <script src="js/benchmark.js"></script>

    <link rel="stylesheet" type="text/css" href="css/style.css">

    <meta charset=utf-8/>
    <title>MediaWiki Benchmark</title>

</head>
<body>

<div class="container">
    <div class="span12">
        <div id="header">
            <h1>MediaWiki Benchmark
                <small>(via API Parse Request)</small>
            </h1>
        </div>

        <div id="msg"></div>

        <h3>Options</h3>

        <div class="row">
            <div class="col-9">
                <div class="input-group">
                    <input id="pages" type="email" class="form-control" placeholder="Comma  Seperated (', '))">
                    <span class="input-group-addon">Pages</span>
                </div>
            </div>

            <div class="col-2">

                <button class="btn btn-large btn-primary btn-block" type="button" onclick="mwb.runBenchmark();">
                    Benchmark!
                </button>

            </div>

            <div class="col-1">
                <button type="button" class="btn btn-large btn-default btn-block" data-toggle="modal" href="#helpModal">
                    <span class="glyphicon glyphicon-question-sign"></span>
                </button>

            </div>


        </div>
        <br>

        <div class="row">

            <div class="col-4">
                <div class="input-group">
                    <input id="mediaWikiUrl" class="form-control" placeholder="URL to MediaWiki">
                    <span class="input-group-addon">URL</span>
                </div>
            </div>

            <div class="col-2">
                <div class="input-group">
                    <input id="maxCounter" class="form-control" placeholder="Repeat (x) times">
                    <span class="input-group-addon">Iterations</span>
                </div>
            </div>

            <div class="col-3">
                <div class="input-group">
                    <input id="minRandom" class="form-control" placeholder="Minimum random time">
                    <span class="input-group-addon">Min. Random Interval</span>
                </div>
            </div>

            <div class="col-3">
                <div class="input-group">
                    <input id="maxRandom" class="form-control" placeholder="Maximum random time">
                    <span class="input-group-addon">Max. Random Interval</span>
                </div>
            </div>
        </div>

        <br>

        <div class="row">

            <div class="col-3">
                <div class="input-group">
                    <input id="purgeInterval" class="form-control" placeholder="Minimum random time">
                    <span class="input-group-addon">Purge Interval</span>
                </div>
            </div>

            <div class="col-3">
                <div class="input-group">
                    <div class="checkbox">
                        <label>
                            <input id="purgePages" type="checkbox"> Purge Pages before retrieving
                        </label>
                    </div>
                </div>
            </div>


        </div>

        <h3>Progress <small id="progresstext"></small></h3>

        <div class="progress">
            <div id="progress" class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0"
                 aria-valuemax="100" style="width: 0%;">
            </div>
        </div>


        <h3>Chart
            <small>Page Performance in ms / Iterations</small>
        </h3>

        <div id="chart_div"></div>

        <h3>Data</h3>

        <div id="data_div">
            <table class="table table-condensed table-bordered">
                <thead>
                <tr>
                    <th>Seite</th>
                    <th>Average Load time</th>
                    <th>Minimum Load time</th>
                    <th>Maximum Load time</th>
                    <th>Standard deviation</th>
                </tr>
                </thead>
                <tbody id="data-tbody">

                </tbody>
            </table>
        </div>

        <a id='jsonExport' target="_blank" class="btn btn-info" disabled="disabled">Download Data as JSON Array</a>
        <a id='jsonExportAlt' target="_blank" class="btn btn-info" disabled="disabled">Download Data as JSON Object</a>
        <a id='csvExport' target="_blank" class="btn btn-info" disabled="disabled">Download Data as CSV</a>
        <a id='svgExport' target="_blank" class="btn btn-info" disabled="disabled">Download Graph as SVG</a>

        <div id="footer" class="">2013 - Simon Heimler</div>

    </div>

</div>

<!-- Help Modal -->
<div class="modal fade" id="helpModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h3 class="modal-title">Info & Help</h3>
            </div>
            <div class="modal-body">

                <p>This is a simple Script to benchmark MediaWiki Installations. It runs completely in the Browser and
                    can be used locally or uploaded to the server in case of cross-origin-issues.</p>

                <p>After a successful Benchmark it lets you export the Data in CSV, JSON and SVG formats. (This may only
                    work on recent Browsers. Tested in Google Chrome)</p>

                <h4>
                    <a name="options" class="anchor" href="#options"><span class="octicon octicon-link"></span></a>Options
                </h4>

                <p>There are several options. Most important are:</p>

                <ul>
                    <li>
                        <em>pages</em>: A comma seperated of MediaWiki pages. E.g. Main Site, JavaScript, GIT
                    </li>
                    <li>
                        <em>iterations</em>: This is the number each page is benchmarked
                    </li>
                    <li>
                        <em>Random Intervals</em>: The Script will wait for another Benchmark Request a random time. You
                        can set the minimum time and maximum time. If you set both to the same value there is no
                        randomness.
                    </li>
                </ul>
                <h4>
                    <a name="known-problems" class="anchor" href="#known-problems"><span
                            class="octicon octicon-link"></span></a>Known Problems</h4>

                <p>The Browser has a limitation of max opened connections. So if you set up the options be careful that
                    the script doesn't make new Requests faster than the Server can answer them. If you do, the Requests
                    will stack up and so will the time that is measured.</p>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->


</body>
</html>
